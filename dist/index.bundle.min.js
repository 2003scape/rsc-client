!function(){var t=function(t){var e;return function(i){return e||t(e={exports:{},parent:i},e.exports),e.exports}},e=t((function(t,x){t.exports=function(t){const x=((E=e({})).appearance=A({}),E.bank=T({}),E["close-connection"]=k({}),E.death=C({}),E.duel=I({}),E.index=e({}),E.inventory=_({}),E["logout-deny"]=S({}),E.messages=M({}),E["option-list"]=v({}),E["player-stats"]=w({}),E.prayer=b({}),E["region-entity-update"]=y({}),E["region-ground-items"]=g({}),E["region-npc-update"]=m({}),E["region-npcs"]=p({}),E["region-objects"]=d({}),E["region-player-update"]=f({}),E["region-players"]=c({}),E["region-wall-objects"]=l({}),E.settings=u({}),E.shop=a({}),E.sleep=h({}),E.social=o({}),E.sound=s({}),E["teleport-bubble"]=n({}),E.trade=r({}),E["world-info"]=i({}),E);var E;const B={};for(const[e,i]of Object.entries(x))if(!/^_|index/.test(e))for(const[r,n]of Object.entries(i))B[r]=n.bind(t);return B}})),i=t((function(t,e){t.exports={[Jm.WORLD_INFO]:function(t){this.loadingArea=!0,this.localPlayerServerIndex=Ud.getUnsignedShort(t,1),this.planeWidth=Ud.getUnsignedShort(t,3),this.planeHeight=Ud.getUnsignedShort(t,5),this.planeIndex=Ud.getUnsignedShort(t,7),this.planeMultiplier=Ud.getUnsignedShort(t,9),this.planeHeight-=this.planeIndex*this.planeMultiplier}}})),r=t((function(t,e){t.exports={[Jm.TRADE_OPEN]:function(t){const e=Ud.getUnsignedShort(t,1);null!==this.playerServer[e]&&(this.tradeRecipientName=this.playerServer[e].name),this.showDialogTrade=!0,this.tradeRecipientAccepted=!1,this.tradeAccepted=!1,this.tradeItemsCount=0,this.tradeRecipientItemsCount=0},[Jm.TRADE_CLOSE]:function(){this.showDialogTrade=!1,this.showDialogTradeConfirm=!1},[Jm.TRADE_ITEMS]:function(t){this.tradeRecipientItemsCount=255&t[1];let e=2;for(let i=0;i<this.tradeRecipientItemsCount;i++)this.tradeRecipientItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.tradeRecipientItemCount[i]=Ud.getUnsignedInt(t,e),e+=4;this.tradeRecipientAccepted=!1,this.tradeAccepted=!1},[Jm.TRADE_RECIPIENT_STATUS]:function(t){this.tradeRecipientAccepted=!!t[1]},[Jm.TRADE_STATUS]:function(t){this.tradeAccepted=!!t[1]},[Jm.TRADE_CONFIRM_OPEN]:function(t){this.showDialogTradeConfirm=!0,this.tradeConfirmAccepted=!1,this.showDialogTrade=!1;let e=1;this.tradeRecipientConfirmHash=Ud.getUnsignedLong(t,e),e+=8,this.tradeRecipientConfirmItemsCount=255&t[e++];for(let i=0;i<this.tradeRecipientConfirmItemsCount;i++)this.tradeRecipientConfirmItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.tradeRecipientConfirmItemCount[i]=Ud.getUnsignedInt(t,e),e+=4;this.tradeConfirmItemsCount=255&t[e++];for(let i=0;i<this.tradeConfirmItemsCount;i++)this.tradeConfirmItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.tradeConfirmItemCount[i]=Ud.getUnsignedInt(t,e),e+=4}}})),n=t((function(t,e){t.exports={[Jm.TELEPORT_BUBBLE]:function(t){if(this.teleportBubbleCount<50){const e=255&t[1],i=t[2]+this.localRegionX,r=t[3]+this.localRegionY;this.teleportBubbleType[this.teleportBubbleCount]=e,this.teleportBubbleTime[this.teleportBubbleCount]=0,this.teleportBubbleX[this.teleportBubbleCount]=i,this.teleportBubbleY[this.teleportBubbleCount]=r,this.teleportBubbleCount++}}}})),s=t((function(t,e){t.exports={[Jm.SOUND]:function(t,e){const i=(r=t.slice(1,e),Array.from(r).map(t=>String.fromCharCode(t)).join(""));var r;this.playSoundFile(i)}}})),o=t((function(t,e){t.exports={[Jm.FRIEND_LIST]:function(t){this.friendListCount=Ud.getUnsignedByte(t[1]);for(let e=0;e<this.friendListCount;e++)this.friendListHashes[e]=Ud.getUnsignedLong(t,2+9*e),this.friendListOnline[e]=Ud.getUnsignedByte(t[10+9*e]);this.sortFriendsList()},[Jm.FRIEND_STATUS_CHANGE]:function(t){const e=Ud.getUnsignedLong(t,1),i=255&t[9];for(let r=0;r<this.friendListCount;r++)if(this.friendListHashes[r].equals(e))return 0===this.friendListOnline[r]&&0!==i&&this.showServerMessage(`@pri@${Ud.hashToUsername(e)} has logged in`),0!==this.friendListOnline[r]&&0===i&&this.showServerMessage(`@pri@${Ud.hashToUsername(e)} has logged out`),this.friendListOnline[r]=i,void this.sortFriendsList();this.friendListHashes[this.friendListCount]=e,this.friendListOnline[this.friendListCount]=i,this.friendListCount++,this.sortFriendsList()},[Jm.FRIEND_MESSAGE]:function(t,e){const i=Ud.getUnsignedLong(t,1),r=Ud.getUnsignedInt(t,9);for(let s=0;s<this.maxSocialListSize;s++)if(this.messageTokens[s]===r)return;this.messageTokens[this.messageIndex]=r,this.messageIndex=(this.messageIndex+1)%Lp.maxSocialListSize;let n=Fm.descramble(t,13,e-13);this.options.wordFilter&&(n=wm.filter(n)),this.showServerMessage(`@pri@${Ud.hashToUsername(i)}: tells you ${n}`)},[Jm.IGNORE_LIST]:function(t){this.ignoreListCount=Ud.getUnsignedByte(t[1]);for(let e=0;e<this.ignoreListCount;e++)this.ignoreList[e]=Ud.getUnsignedLong(t,2+8*e)}}})),h=t((function(t,e){t.exports={[Jm.SLEEP_OPEN]:function(t){this.isSleeping||(this.fatigueSleeping=this.statFatigue),this.isSleeping=!0,this.inputTextCurrent="",this.inputTextFinal="",this.surface.readSleepWord(this.spriteTexture+1,t),this.sleepingStatusText=null},[Jm.SLEEP_CLOSE]:function(){this.isSleeping=!1},[Jm.SLEEP_INCORRECT]:function(){this.sleepingStatusText="Incorrect - Please wait..."},[Jm.PLAYER_STAT_FATIGUE_ASLEEP]:function(t){this.fatigueSleeping=Ud.getUnsignedShort(t,1)}}})),a=t((function(t,e){t.exports={[Jm.SHOP_OPEN]:function(t){this.showDialogShop=!0;let e=1;const i=255&t[e++],r=t[e++];this.shopSellPriceMod=255&t[e++],this.shopBuyPriceMod=255&t[e++];for(let n=0;n<40;n++)this.shopItem[n]=-1;for(let n=0;n<i;n++)this.shopItem[n]=Ud.getUnsignedShort(t,e),e+=2,this.shopItemCount[n]=Ud.getUnsignedShort(t,e),e+=2,this.shopItemPrice[n]=t[e++];if(1===r){let t=39;for(let e=0;e<this.inventoryItemsCount&&!(t<i);e++){let i=!1;for(let t=0;t<40;t++)if(this.shopItem[t]===this.inventoryItemId[e]){i=!0;break}10===this.inventoryItemId[e]&&(i=!0),i||(this.shopItem[t]=32767&this.inventoryItemId[e],this.shopItemCount[t]=0,this.shopItemPrice[t]=0,t--)}}this.shopSelectedItemIndex>=0&&this.shopSelectedItemIndex<40&&this.shopItem[this.shopSelectedItemIndex]!==this.shopSelectedItemType&&(this.shopSelectedItemIndex=-1,this.shopSelectedItemType=-2)},[Jm.SHOP_CLOSE]:function(){this.showDialogShop=!1}}})),u=t((function(t,e){t.exports={[Jm.PRIVACY_SETTINGS]:function(t){this.settingsBlockChat=t[1],this.settingsBlockPrivate=t[2],this.settingsBlockTrade=t[3],this.settingsBlockDuel=t[4]},[Jm.GAME_SETTINGS]:function(t){this.optionCameraModeAuto=!!Ud.getUnsignedByte(t[1]),this.optionMouseButtonOne=!!Ud.getUnsignedByte(t[2]),this.optionSoundDisabled=!!Ud.getUnsignedByte(t[3])}}})),l=t((function(t,e){t.exports={[Jm.REGION_WALL_OBJECTS]:function(t,e){for(let i=1;i<e;)if(255===Ud.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,n=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.wallObjectCount;t++){const i=(this.wallObjectX[t]>>3)-r,s=(this.wallObjectY[t]>>3)-n;0!==i||0!==s?(t!==e&&(this.wallObjectModel[e]=this.wallObjectModel[t],this.wallObjectModel[e].key=e+1e4,this.wallObjectX[e]=this.wallObjectX[t],this.wallObjectY[e]=this.wallObjectY[t],this.wallObjectDirection[e]=this.wallObjectDirection[t],this.wallObjectId[e]=this.wallObjectId[t]),e++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]))}this.wallObjectCount=e}else{const e=Ud.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],n=this.localRegionY+t[i++],s=t[i++];let o=0;for(let t=0;t<this.wallObjectCount;t++)this.wallObjectX[t]!==r||this.wallObjectY[t]!==n||this.wallObjectDirection[t]!==s?(t!==o&&(this.wallObjectModel[o]=this.wallObjectModel[t],this.wallObjectModel[o].key=o+1e4,this.wallObjectX[o]=this.wallObjectX[t],this.wallObjectY[o]=this.wallObjectY[t],this.wallObjectDirection[o]=this.wallObjectDirection[t],this.wallObjectId[o]=this.wallObjectId[t]),o++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]));if(this.wallObjectCount=o,65535!==e){this.world._setObjectAdjacency_from4(r,n,s,e);const t=this.createModel(r,n,s,e,this.wallObjectCount);this.wallObjectModel[this.wallObjectCount]=t,this.wallObjectX[this.wallObjectCount]=r,this.wallObjectY[this.wallObjectCount]=n,this.wallObjectId[this.wallObjectCount]=e,this.wallObjectDirection[this.wallObjectCount++]=s}}}}})),c=t((function(t,e){t.exports={[Jm.REGION_PLAYERS]:function(t,e){this.knownPlayerCount=this.playerCount;for(let u=0;u<this.knownPlayerCount;u++)this.knownPlayers[u]=this.players[u];let i=8;this.localRegionX=Ud.getBitMask(t,i,11),i+=11,this.localRegionY=Ud.getBitMask(t,i,13),i+=13;const r=Ud.getBitMask(t,i,4);i+=4;const n=this.loadNextRegion(this.localRegionX,this.localRegionY);this.localRegionX-=this.regionX,this.localRegionY-=this.regionY;const s=this.localRegionX*this.magicLoc+64,o=this.localRegionY*this.magicLoc+64;n&&(this.localPlayer.waypointCurrent=0,this.localPlayer.movingStep=0,this.localPlayer.currentX=this.localPlayer.waypointsX[0]=s,this.localPlayer.currentY=this.localPlayer.waypointsY[0]=o),this.playerCount=0,this.localPlayer=this.createPlayer(this.localPlayerServerIndex,s,o,r);const h=Ud.getBitMask(t,i,8);i+=8;for(let u=0;u<h;u++){const e=this.knownPlayers[u+1],r=Ud.getBitMask(t,i,1);if(i++,0!==r){const r=Ud.getBitMask(t,i,1);if(i++,0===r){const r=Ud.getBitMask(t,i,3);i+=3;let n=e.waypointCurrent,s=e.waypointsX[n],o=e.waypointsY[n];2!==r&&1!==r&&3!==r||(s+=this.magicLoc),6!==r&&5!==r&&7!==r||(s-=this.magicLoc),4!==r&&3!==r&&5!==r||(o+=this.magicLoc),0!==r&&1!==r&&7!==r||(o-=this.magicLoc),e.animationNext=r,e.waypointCurrent=n=(n+1)%10,e.waypointsX[n]=s,e.waypointsY[n]=o}else{if(12==(12&Ud.getBitMask(t,i,4))){i+=2;continue}e.animationNext=Ud.getBitMask(t,i,4),i+=4}}this.players[this.playerCount++]=e}let a=0;for(;i+24<8*e;){const e=Ud.getBitMask(t,i,11);i+=11;let r=Ud.getBitMask(t,i,5);i+=5,r>15&&(r-=32);let n=Ud.getBitMask(t,i,5);i+=5,n>15&&(n-=32);const s=Ud.getBitMask(t,i,4);i+=4;const o=Ud.getBitMask(t,i,1);i++;const h=(this.localRegionX+r)*this.magicLoc+64,u=(this.localRegionY+n)*this.magicLoc+64;this.createPlayer(e,h,u,s),0===o&&(this.playerServerIndexes[a++]=e)}if(a>0){this.packetStream.newPacket(Bp.KNOWN_PLAYERS),this.packetStream.putShort(a);for(let t=0;t<a;t++){const e=this.playerServer[this.playerServerIndexes[t]];this.packetStream.putShort(e.serverIndex),this.packetStream.putShort(e.serverId)}this.packetStream.sendPacket(),a=0}}}})),f=t((function(t,e){t.exports={[Jm.REGION_PLAYER_UPDATE]:function(t){const e=Ud.getUnsignedShort(t,1);let i=3;for(let r=0;r<e;r++){const e=Ud.getUnsignedShort(t,i);i+=2;const r=this.playerServer[e],n=t[i++];if(0===n){const e=Ud.getUnsignedShort(t,i);i+=2,null!==r&&(r.bubbleTimeout=150,r.bubbleItem=e)}else if(1===n){const e=t[i];if(i++,null!==r){let n=Fm.descramble(t,i,e);this.options.wordFilter&&(n=wm.filter(n));let s=!1;for(let t=0;t<this.ignoreListCount;t++)if(this.ignoreList[t]===r.hash){s=!0;break}s||(r.messageTimeout=150,r.message=n,this.showMessage(`${r.name}: ${r.message}`,2))}i+=e}else if(2===n){const e=Ud.getUnsignedByte(t[i++]),n=Ud.getUnsignedByte(t[i++]),s=Ud.getUnsignedByte(t[i++]);null!==r&&(r.damageTaken=e,r.healthCurrent=n,r.healthMax=s,r.combatTimer=200,r===this.localPlayer&&(this.playerStatCurrent[3]=n,this.playerStatBase[3]=s,this.showDialogWelcome=!1,this.showDialogServerMessage=!1))}else if(3===n){const e=Ud.getUnsignedShort(t,i);i+=2;const n=Ud.getUnsignedShort(t,i);i+=2,null!==r&&(r.incomingProjectileSprite=e,r.attackingNpcServerIndex=n,r.attackingPlayerServerIndex=-1,r.projectileRange=this.projectileMaxRange)}else if(4===n){const e=Ud.getUnsignedShort(t,i);i+=2;const n=Ud.getUnsignedShort(t,i);i+=2,null!==r&&(r.incomingProjectileSprite=e,r.attackingPlayerServerIndex=n,r.attackingNpcServerIndex=-1,r.projectileRange=this.projectileMaxRange)}else if(5===n)if(null!==r){r.serverId=Ud.getUnsignedShort(t,i),i+=2,r.hash=Ud.getUnsignedLong(t,i),i+=8,r.name=Ud.hashToUsername(r.hash);const e=Ud.getUnsignedByte(t[i]);i++;for(let n=0;n<e;n++)r.equippedItem[n]=Ud.getUnsignedByte(t[i]),i++;for(let t=e;t<12;t++)r.equippedItem[t]=0;r.colourHair=255&t[i++],r.colourTop=255&t[i++],r.colourBottom=255&t[i++],r.colourSkin=255&t[i++],r.level=255&t[i++],r.skullVisible=255&t[i++]}else i+=14,i+=Ud.getUnsignedByte(t[i])+1;else if(6===n){const e=t[i++];if(null!==r){const n=Fm.descramble(t,i,e);r.messageTimeout=150,r.message=n,r===this.localPlayer&&this.showMessage(`${r.name}: ${r.message}`,5)}i+=e}}}}})),d=t((function(t,e){t.exports={[Jm.REGION_OBJECTS]:function(t,e){for(let i=1;i<e;)if(255===Ud.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,n=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.objectCount;t++){const i=(this.objectX[t]>>3)-r,s=(this.objectY[t]>>3)-n;0!==i||0!==s?(t!==e&&(this.objectModel[e]=this.objectModel[t],this.objectModel[e].key=e,this.objectX[e]=this.objectX[t],this.objectY[e]=this.objectY[t],this.objectId[e]=this.objectId[t],this.objectDirection[e]=this.objectDirection[t]),e++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]))}this.objectCount=e}else{const e=Ud.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],n=this.localRegionY+t[i++];let s=0;for(let t=0;t<this.objectCount;t++)this.objectX[t]!==r||this.objectY[t]!==n?(t!==s&&(this.objectModel[s]=this.objectModel[t],this.objectModel[s].key=s,this.objectX[s]=this.objectX[t],this.objectY[s]=this.objectY[t],this.objectId[s]=this.objectId[t],this.objectDirection[s]=this.objectDirection[t]),s++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]));if(this.objectCount=s,6e4!==e){const t=this.world.getTileDirection(r,n);let i=0,s=0;0===t||4===t?(i=Np.objectWidth[e],s=Np.objectHeight[e]):(s=Np.objectWidth[e],i=Np.objectHeight[e]);const o=(r+r+i)*this.magicLoc/2|0,h=(n+n+s)*this.magicLoc/2|0,a=Np.objectModelIndex[e],u=this.gameModels[a].copy();this.scene.addModel(u),u.key=this.objectCount,u.rotate(0,32*t,0),u.translate(o,-this.world.getElevation(o,h),h),u._setLight_from6(!0,48,48,-50,-10,-50),this.world.removeObject2(r,n,e),74===e&&u.translate(0,-480,0),this.objectX[this.objectCount]=r,this.objectY[this.objectCount]=n,this.objectId[this.objectCount]=e,this.objectDirection[this.objectCount]=t,this.objectModel[this.objectCount++]=u}}}}})),p=t((function(t,e){t.exports={[Jm.REGION_NPCS]:function(t,e){this.npcCacheCount=this.npcCount,this.npcCount=0;for(let n=0;n<this.npcCacheCount;n++)this.npcsCache[n]=this.npcs[n];let i=8;const r=Ud.getBitMask(t,i,8);i+=8;for(let n=0;n<r;n++){const e=this.npcsCache[n],r=Ud.getBitMask(t,i,1);if(i++,0!==r){const r=Ud.getBitMask(t,i,1);if(i++,0===r){const r=Ud.getBitMask(t,i,3);i+=3;let n=e.waypointCurrent,s=e.waypointsX[n],o=e.waypointsY[n];2!==r&&1!==r&&3!==r||(s+=this.magicLoc),6!==r&&5!==r&&7!==r||(s-=this.magicLoc),4!==r&&3!==r&&5!==r||(o+=this.magicLoc),0!==r&&1!==r&&7!==r||(o-=this.magicLoc),e.animationNext=r,e.waypointCurrent=n=(n+1)%10,e.waypointsX[n]=s,e.waypointsY[n]=o}else{if(12==(12&Ud.getBitMask(t,i,4))){i+=2;continue}e.animationNext=Ud.getBitMask(t,i,4),i+=4}}this.npcs[this.npcCount++]=e}for(;i+34<8*e;){const e=Ud.getBitMask(t,i,12);i+=12;let r=Ud.getBitMask(t,i,5);i+=5,r>15&&(r-=32);let n=Ud.getBitMask(t,i,5);i+=5,n>15&&(n-=32);const s=Ud.getBitMask(t,i,4);i+=4;const o=(this.localRegionX+r)*this.magicLoc+64,h=(this.localRegionY+n)*this.magicLoc+64;let a=Ud.getBitMask(t,i,10);i+=10,a>=Np.npcCount&&(a=24),this.addNpc(e,o,h,s,a)}}}})),m=t((function(t,e){t.exports={[Jm.REGION_NPC_UPDATE]:function(t){const e=Ud.getUnsignedShort(t,1);let i=3;for(let r=0;r<e;r++){const e=Ud.getUnsignedShort(t,i);i+=2;const r=this.npcsServer[e],n=Ud.getUnsignedByte(t[i++]);if(1===n){const e=Ud.getUnsignedShort(t,i);i+=2;const n=t[i++];if(null!==r){const s=Fm.descramble(t,i,n);r.messageTimeout=150,r.message=s,e===this.localPlayer.serverIndex&&this.showMessage(`@yel@${Np.npcName[r.npcId]}: `+r.message,5)}i+=n}else if(2===n){const e=Ud.getUnsignedByte(t[i++]),n=Ud.getUnsignedByte(t[i++]),s=Ud.getUnsignedByte(t[i++]);null!==r&&(r.damageTaken=e,r.healthCurrent=n,r.healthMax=s,r.combatTimer=200)}}}}})),g=t((function(t,e){t.exports={[Jm.REGION_GROUND_ITEMS]:function(t,e){for(let i=1;i<e;)if(255===Ud.getUnsignedByte(t[i])){let e=0;const r=this.localRegionX+t[i+1]>>3,n=this.localRegionY+t[i+2]>>3;i+=3;for(let t=0;t<this.groundItemCount;t++){const i=(this.groundItemX[t]>>3)-r,s=(this.groundItemY[t]>>3)-n;0===i&&0===s||(t!==e&&(this.groundItemX[e]=this.groundItemX[t],this.groundItemY[e]=this.groundItemY[t],this.groundItemID[e]=this.groundItemID[t],this.groundItemZ[e]=this.groundItemZ[t]),e++)}this.groundItemCount=e}else{let e=Ud.getUnsignedShort(t,i);i+=2;const r=this.localRegionX+t[i++],n=this.localRegionY+t[i++];if(0==(32768&e)){this.groundItemX[this.groundItemCount]=r,this.groundItemY[this.groundItemCount]=n,this.groundItemID[this.groundItemCount]=e,this.groundItemZ[this.groundItemCount]=0;for(let t=0;t<this.objectCount;t++)if(this.objectX[t]===r&&this.objectY[t]===n){this.groundItemZ[this.groundItemCount]=Np.objectElevation[this.objectId[t]];break}this.groundItemCount++}else{e&=32767;let t=0;for(let i=0;i<this.groundItemCount;i++)this.groundItemX[i]!==r||this.groundItemY[i]!==n||this.groundItemID[i]!==e?(i!==t&&(this.groundItemX[t]=this.groundItemX[i],this.groundItemY[t]=this.groundItemY[i],this.groundItemID[t]=this.groundItemID[i],this.groundItemZ[t]=this.groundItemZ[i]),t++):e=-123;this.groundItemCount=t}}}}})),y=t((function(t,e){t.exports={[Jm.REGION_ENTITY_UPDATE]:function(t,e){const i=(e-1)/4|0;for(let r=0;r<i;r++){const e=this.localRegionX+Ud.getSignedShort(t,1+4*r)>>3,i=this.localRegionY+Ud.getSignedShort(t,3+4*r)>>3;let n=0;for(let t=0;t<this.groundItemCount;t++){const r=(this.groundItemX[t]>>3)-e,s=(this.groundItemY[t]>>3)-i;0===r&&0===s||(t!==n&&(this.groundItemX[n]=this.groundItemX[t],this.groundItemY[n]=this.groundItemY[t],this.groundItemID[n]=this.groundItemID[t],this.groundItemZ[n]=this.groundItemZ[t]),n++)}this.groundItemCount=n,n=0;for(let t=0;t<this.objectCount;t++){const r=(this.objectX[t]>>3)-e,s=(this.objectY[t]>>3)-i;0!==r||0!==s?(t!==n&&(this.objectModel[n]=this.objectModel[t],this.objectModel[n].key=n,this.objectX[n]=this.objectX[t],this.objectY[n]=this.objectY[t],this.objectId[n]=this.objectId[t],this.objectDirection[n]=this.objectDirection[t]),n++):(this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]))}this.objectCount=n,n=0;for(let t=0;t<this.wallObjectCount;t++){const r=(this.wallObjectX[t]>>3)-e,s=(this.wallObjectY[t]>>3)-i;0!==r||0!==s?(t!==n&&(this.wallObjectModel[n]=this.wallObjectModel[t],this.wallObjectModel[n].key=n+1e4,this.wallObjectX[n]=this.wallObjectX[t],this.wallObjectY[n]=this.wallObjectY[t],this.wallObjectDirection[n]=this.wallObjectDirection[t],this.wallObjectId[n]=this.wallObjectId[t]),n++):(this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]))}this.wallObjectCount=n}}}})),b=t((function(t,e){t.exports={[Jm.PRAYER_STATUS]:function(t,e){for(let i=0;i<e-1;i++){const e=1===t[i+1];!this.prayerOn[i]&&e&&this.playSoundFile("prayeron"),this.prayerOn[i]&&!e&&this.playSoundFile("prayeroff"),this.prayerOn[i]=e}}}})),w=t((function(t,e){t.exports={[Jm.PLAYER_STAT_LIST]:function(t){let e=1;for(let i=0;i<this.playerStatCurrent.length;i++)this.playerStatCurrent[i]=Ud.getUnsignedByte(t[e++]);for(let i=0;i<this.playerStatBase.length;i++)this.playerStatBase[i]=Ud.getUnsignedByte(t[e++]);for(let i=0;i<this.playerExperience.length;i++)this.playerExperience[i]=Ud.getUnsignedInt(t,e),e+=4;this.playerQuestPoints=Ud.getUnsignedByte(t[e++])},[Jm.PLAYER_STAT_EQUIPMENT_BONUS]:function(t){for(let e=0;e<this.playerStatEquipment.length;e++)this.playerStatEquipment[e]=Ud.getUnsignedByte(t[1+e])},[Jm.PLAYER_STAT_EXPERIENCE_UPDATE]:function(t){const e=255&t[1];this.playerExperience[e]=Ud.getUnsignedInt(t,2)},[Jm.PLAYER_STAT_UPDATE]:function(t){let e=1;const i=255&t[e++];this.playerStatCurrent[i]=Ud.getUnsignedByte(t[e++]),this.playerStatBase[i]=Ud.getUnsignedByte(t[e++]),this.playerExperience[i]=Ud.getUnsignedInt(t,e),e+=4},[Jm.PLAYER_STAT_FATIGUE]:function(t){this.statFatigue=Ud.getUnsignedShort(t,1)},[Jm.PLAYER_QUEST_LIST]:function(t){for(let e=0;e<this.questComplete.length;e++)this.questComplete[e]=!!t[e+1]}}})),v=t((function(t,e){t.exports={[Jm.OPTION_LIST]:function(t){this.showOptionMenu=!0;const e=Ud.getUnsignedByte(t[1]);this.optionMenuCount=e;let i=2;for(let n=0;n<e;n++){const e=Ud.getUnsignedByte(t[i++]);this.optionMenuEntry[n]=(r=t.slice(i,i+e),Array.from(r).map(t=>String.fromCharCode(t)).join("")),i+=e}var r},[Jm.OPTION_LIST_CLOSE]:function(){this.showOptionMenu=!1}}})),M=t((function(t,e){function i(t){return Array.from(t).map(t=>String.fromCharCode(t)).join("")}t.exports={[Jm.MESSAGE]:function(t,e){const r=i(t.slice(1,e));this.showServerMessage(r)},[Jm.SERVER_MESSAGE]:function(t,e){this.serverMessage=i(t.slice(1,e)),this.showDialogServerMessage=!0,this.serverMessageBoxTop=!1},[Jm.SERVER_MESSAGE_ONTOP]:function(t,e){this.serverMessage=i(t.slice(1,e)),this.showDialogServerMessage=!0,this.serverMessageBoxTop=!0},[Jm.WELCOME]:function(t){this.welcomScreenAlreadyShown||(this.welcomeLastLoggedInIP=Ud.getUnsignedInt(t,1),this.welcomeLastLoggedInDays=Ud.getUnsignedShort(t,5),this.welcomeRecoverySetDays=255&t[7],this.welcomeUnreadMessages=Ud.getUnsignedShort(t,8),this.showDialogWelcome=!0,this.welcomScreenAlreadyShown=!0,this.welcomeLastLoggedInHost=null)},[Jm.SYSTEM_UPDATE]:function(t){this.systemUpdate=32*Ud.getUnsignedShort(t,1)}}})),S=t((function(t,e){t.exports={[Jm.LOGOUT_DENY]:function(){this.cantLogout()}}})),_=t((function(t,e){t.exports={[Jm.INVENTORY_ITEMS]:function(t){let e=1;this.inventoryItemsCount=255&t[e++];for(let i=0;i<this.inventoryItemsCount;i++){const r=Ud.getUnsignedShort(t,e);e+=2,this.inventoryItemId[i]=32767&r,this.inventoryEquipped[i]=r/32768|0,0===Np.itemStackable[32767&r]?(this.inventoryItemStackCount[i]=Ud.getStackInt(t,e),this.inventoryItemStackCount[i]>=128?e+=4:e++):this.inventoryItemStackCount[i]=1}},[Jm.INVENTORY_ITEM_UPDATE]:function(t){let e=1,i=1;const r=255&t[e++],n=Ud.getUnsignedShort(t,e);e+=2,0===Np.itemStackable[32767&n]&&((i=Ud.getStackInt(t,e))>=128?e+=4:e++),this.inventoryItemId[r]=32767&n,this.inventoryEquipped[r]=n/32768|0,this.inventoryItemStackCount[r]=i,r>=this.inventoryItemsCount&&(this.inventoryItemsCount=r+1)},[Jm.INVENTORY_ITEM_REMOVE]:function(t){const e=255&t[1];this.inventoryItemsCount--;for(let i=e;i<this.inventoryItemsCount;i++)this.inventoryItemId[i]=this.inventoryItemId[i+1],this.inventoryItemStackCount[i]=this.inventoryItemStackCount[i+1],this.inventoryEquipped[i]=this.inventoryEquipped[i+1]}}})),I=t((function(t,e){t.exports={[Jm.DUEL_OPEN]:function(t){const e=Ud.getUnsignedShort(t,1);this.playerServer[e]&&(this.duelOpponentName=this.playerServer[e].name),this.showDialogDuel=!0,this.duelOfferItemCount=0,this.duelOfferOpponentItemCount=0,this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1,this.duelSettingsRetreat=!1,this.duelSettingsMagic=!1,this.duelSettingsPrayer=!1,this.duelSettingsWeapons=!1},[Jm.DUEL_CLOSE]:function(){this.showDialogDuel=!1,this.showDialogDuelConfirm=!1},[Jm.DUEL_UPDATE]:function(t){this.duelOfferOpponentItemCount=255&t[1];let e=2;for(let i=0;i<this.duelOfferOpponentItemCount;i++)this.duelOfferOpponentItemId[i]=Ud.getUnsignedShort(t,e),e+=2,this.duelOfferOpponentItemStack[i]=Ud.getUnsignedInt(t,e),e+=4;this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1},[Jm.DUEL_SETTINGS]:function(t){this.duelSettingsRetreat=!!t[1],this.duelSettingsMagic=!!t[2],this.duelSettingsPrayer=!!t[3],this.duelSettingsWeapons=!!t[4],this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1},[Jm.DUEL_OPPONENT_ACCEPTED]:function(t){this.duelOfferOpponentAccepted=!!t[1]},[Jm.DUEL_ACCEPTED]:function(t){this.duelOfferAccepted=!!t[1]},[Jm.DUEL_CONFIRM_OPEN]:function(t){this.showDialogDuelConfirm=!0,this.duelAccepted=!1,this.showDialogDuel=!1;let e=1;this.duelOpponentNameHash=Ud.getUnsignedLong(t,e),e+=8,this.duelOpponentItemsCount=255&t[e++];for(let i=0;i<this.duelOpponentItemsCount;i++)this.duelOpponentItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.duelOpponentItemCount[i]=Ud.getUnsignedInt(t,e),e+=4;this.duelItemsCount=255&t[e++];for(let i=0;i<this.duelItemsCount;i++)this.duelItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.duelItemCount[i]=Ud.getUnsignedInt(t,e),e+=4;this.duelOptionRetreat=255&t[e++],this.duelOptionMagic=255&t[e++],this.duelOptionPrayer=255&t[e++],this.duelOptionWeapons=255&t[e++]}}})),C=t((function(t,e){t.exports={[Jm.PLAYER_DIED]:function(){this.deathScreenTimeout=250}}})),k=t((function(t,e){t.exports={[Jm.CLOSE_CONNECTION]:function(){this.closeConnection()}}})),T=t((function(t,e){t.exports={[Jm.BANK_OPEN]:function(t){this.showDialogBank=!0;let e=1;this.newBankItemCount=255&t[e++],this.bankItemsMax=255&t[e++];for(let i=0;i<this.newBankItemCount;i++)this.newBankItems[i]=Ud.getUnsignedShort(t,e),e+=2,this.newBankItemsCount[i]=Ud.getStackInt(t,e),this.newBankItemsCount[i]>=128?e+=4:e++;this.updateBankItems()},[Jm.BANK_CLOSE]:function(){this.showDialogBank=!1},[Jm.BANK_UPDATE]:function(t){let e=1;const i=255&t[e++],r=Ud.getUnsignedShort(t,e);e+=2;const n=Ud.getStackInt(t,e);if(n>=128?e+=4:e++,0===n){this.newBankItemCount--;for(let t=i;t<this.newBankItemCount;t++)this.newBankItems[t]=this.newBankItems[t+1],this.newBankItemsCount[t]=this.newBankItemsCount[t+1]}else this.newBankItems[i]=r,this.newBankItemsCount[i]=n,i>=this.newBankItemCount&&(this.newBankItemCount=i+1);this.updateBankItems()}}})),A=t((function(t,e){t.exports={[Jm.APPEARANCE]:function(){this.showAppearanceChange=!0}}})),x=t((function(t,e){t.exports=function(t){const e=((i=x({}))._colours=it({}),i["appearance-panel"]=et({}),i["bank-dialog"]=tt({}),i["chat-message-tabs"]=Q({}),i["combat-style"]=J({}),i.index=x({}),i["inventory-tab"]=$({}),i["login-panels"]=K({}),i["logout-dialog"]=G({}),i["magic-tab"]=Z({}),i["minimap-tab"]=V({}),i["mobile-ui"]=z({}),i["option-menu"]=q({}),i["options-tab"]=W({}),i["password-dialog"]=H({}),i["player-info-tab"]=F({}),i["recovery-panel"]=N({}),i["report-dialog"]=X({}),i["server-message-dialog"]=U({}),i["set-active-ui-tab"]=Y({}),i["shop-dialog"]=D({}),i.sleep=j({}),i["social-dialog"]=O({}),i["social-tab"]=P({}),i["trade-confirm-dialog"]=R({}),i["trade-dialog"]=L({}),i["welcome-dialog"]=B({}),i["wilderness-dialog"]=E({}),i);var i;for(const[r,n]of Object.entries(e))if(!/^_|index/.test(r))for(const[e,i]of Object.entries(n))t[e]="function"==typeof i?i.bind(t):i}})),E=t((function(t,e){const i=it({});t.exports={showUiWildWarn:0,drawDialogWildWarn:function(){let t=97;this.surface.drawBox(86,77,340,180,i.black),this.surface.drawBoxEdge(86,77,340,180,i.white),this.surface.drawStringCenter("Warning! Proceed with caution",256,t,4,i.red),t+=26,this.surface.drawStringCenter("If you go much further north you will enter the",256,t,1,i.white),t+=13,this.surface.drawStringCenter("wilderness. This a very dangerous area where",256,t,1,i.white),t+=13,this.surface.drawStringCenter("other players can attack you!",256,t,1,i.white),t+=22,this.surface.drawStringCenter("The further north you go the more dangerous it",256,t,1,i.white),t+=13,this.surface.drawStringCenter("becomes, but the more treasure you will find.",256,t,1,i.white),t+=22,this.surface.drawStringCenter("In the wilderness an indicator at the bottom-right",256,t,1,i.white),t+=13,this.surface.drawStringCenter("of the screen will show the current level of danger",256,t,1,i.white),t+=22;let e=i.white;this.mouseY>t-12&&this.mouseY<=t&&this.mouseX>181&&this.mouseX<331&&(e=i.red),this.surface.drawStringCenter("Click here to close window",256,t,1,e),0!==this.mouseButtonClick&&(this.mouseY>t-12&&this.mouseY<=t&&this.mouseX>181&&this.mouseX<331&&(this.showUiWildWarn=2),(this.mouseX<86||this.mouseX>426||this.mouseY<77||this.mouseY>257)&&(this.showUiWildWarn=2),this.mouseButtonClick=0)}}})),B=t((function(t,e){const i=it({});t.exports={drawDialogWelcome:function(){let t=65;201!==this.welcomeRecoverySetDays&&(t+=60),this.welcomeUnreadMessages>0&&(t+=60),0!==this.welcomeLastLoggedInIP&&(t+=45);let e=167-(t/2|0);this.surface.drawBox(56,167-(t/2|0),400,t,0),this.surface.drawBoxEdge(56,167-(t/2|0),400,t,i.white),e+=20,this.surface.drawStringCenter("Welcome to RuneScape "+this.loginUser,256,e,4,i.yellow),e+=30;let r=null;if(r=0===this.welcomeLastLoggedInDays?"earlier today":1===this.welcomeLastLoggedInDays?"yesterday":this.welcomeLastLoggedInDays+" days ago",0!==this.welcomeLastLoggedInIP&&(this.surface.drawStringCenter("You last logged in "+r,256,e,1,i.white),e+=15,null===this.welcomeLastLoggedInHost&&(this.welcomeLastLoggedInHost=this.getHostnameIP(this.welcomeLastLoggedInIP)),this.surface.drawStringCenter("from: "+this.welcomeLastLoggedInHost,256,e,1,i.white),e+=15,e+=15),this.welcomeUnreadMessages>0){const t=i.white;this.surface.drawStringCenter("Jagex staff will NEVER email you. We use the",256,e,1,t),e+=15,this.surface.drawStringCenter("message-centre on this website instead.",256,e,1,t),e+=15,1===this.welcomeUnreadMessages?this.surface.drawStringCenter("You have @yel@0@whi@ unread messages in your message-centre",256,e,1,i.white):this.surface.drawStringCenter("You have @gre@"+(this.welcomeUnreadMessages-1)+" unread messages @whi@in your message-centre",256,e,1,i.white),e+=15,e+=15}if(201!==this.welcomeRecoverySetDays){if(200===this.welcomeRecoverySetDays)this.surface.drawStringCenter("You have not yet set any password recovery questions.",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("We strongly recommend you do so now to secure your account.",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("Do this from the 'account management' area on our front webpage",256,e,1,i.orange),e+=15;else{let t=null;t=0===this.welcomeRecoverySetDays?"Earlier today":1===this.welcomeRecoverySetDays?"Yesterday":this.welcomeRecoverySetDays+" days ago",this.surface.drawStringCenter(t+" you changed your recovery questions",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("If you do not remember making this change then cancel it immediately",256,e,1,i.orange),e+=15,this.surface.drawStringCenter("Do this from the 'account management' area on our front webpage",256,e,1,i.orange),e+=15}e+=15}let n=i.white;this.mouseY>e-12&&this.mouseY<=e&&this.mouseX>106&&this.mouseX<406&&(n=i.red),this.surface.drawStringCenter("Click here to close window",256,e,1,n),1===this.mouseButtonClick&&(n===i.red&&(this.showDialogWelcome=!1),(this.mouseX<86||this.mouseX>426)&&(this.mouseY<167-(t/2|0)||this.mouseY>167+(t/2|0))&&(this.showDialogWelcome=!1)),this.mouseButtonClick=0},showDialogWelcome:!1}})),L=t((function(t,e){const i=it({});t.exports={drawDialogTrade:function(){if(0!==this.mouseButtonClick&&0===this.mouseButtonItemCountIncrement&&(this.mouseButtonItemCountIncrement=1),this.mouseButtonItemCountIncrement>0){const t=this.mouseX-22,e=this.mouseY-36;if(t>=0&&e>=0&&t<468&&e<262){if(t>216&&e>30&&t<462&&e<235){const i=((t-217)/49|0)+5*((e-31)/34|0);if(i>=0&&i<this.inventoryItemsCount){let t=!1,e=0;const r=this.inventoryItemId[i];for(let n=0;n<this.tradeItemsCount;n++)if(this.tradeItems[n]===r)if(0===Np.itemStackable[r])for(let e=0;e<this.mouseButtonItemCountIncrement;e++)this.tradeItemCount[n]<this.inventoryItemStackCount[i]&&this.tradeItemCount[n]++,t=!0;else e++;if(this.getInventoryCount(r)<=e&&(t=!0),1===Np.itemSpecial[r]&&(this.showMessage("This object cannot be traded with other players",3),t=!0),!t&&this.tradeItemsCount<12&&(this.tradeItems[this.tradeItemsCount]=r,this.tradeItemCount[this.tradeItemsCount]=1,this.tradeItemsCount++,t=!0),t){this.packetStream.newPacket(Bp.TRADE_ITEM_UPDATE),this.packetStream.putByte(this.tradeItemsCount);for(let t=0;t<this.tradeItemsCount;t++)this.packetStream.putShort(this.tradeItems[t]),this.packetStream.putInt(this.tradeItemCount[t]);this.packetStream.sendPacket(),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1}}}if(t>8&&e>30&&t<205&&e<133){const i=((t-9)/49|0)+4*((e-31)/34|0);if(i>=0&&i<this.tradeItemsCount){const t=this.tradeItems[i];for(let e=0;e<this.mouseButtonItemCountIncrement;e++){if(!(0===Np.itemStackable[t]&&this.tradeItemCount[i]>1)){this.tradeItemsCount--,this.mouseButtonDownTime=0;for(let t=i;t<this.tradeItemsCount;t++)this.tradeItems[t]=this.tradeItems[t+1],this.tradeItemCount[t]=this.tradeItemCount[t+1];break}this.tradeItemCount[i]--}this.packetStream.newPacket(Bp.TRADE_ITEM_UPDATE),this.packetStream.putByte(this.tradeItemsCount);for(let e=0;e<this.tradeItemsCount;e++)this.packetStream.putShort(this.tradeItems[e]),this.packetStream.putInt(this.tradeItemCount[e]);this.packetStream.sendPacket(),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1}}t>=217&&e>=238&&t<=286&&e<=259&&(this.tradeAccepted=!0,this.packetStream.newPacket(Bp.TRADE_ACCEPT),this.packetStream.sendPacket()),t>=394&&e>=238&&t<463&&e<259&&(this.showDialogTrade=!1,this.packetStream.newPacket(Bp.TRADE_DECLINE),this.packetStream.sendPacket())}else 0!==this.mouseButtonClick&&(this.showDialogTrade=!1,this.packetStream.newPacket(Bp.TRADE_DECLINE),this.packetStream.sendPacket());this.mouseButtonClick=0,this.mouseButtonItemCountIncrement=0}if(this.showDialogTrade){this.surface.drawBox(22,36,468,12,192),this.surface.drawBoxAlpha(22,48,468,18,i.grey,160),this.surface.drawBoxAlpha(22,66,8,248,i.grey,160),this.surface.drawBoxAlpha(227,66,11,248,i.grey,160),this.surface.drawBoxAlpha(484,66,6,248,i.grey,160),this.surface.drawBoxAlpha(30,169,197,22,i.grey,160),this.surface.drawBoxAlpha(30,294,197,20,i.grey,160),this.surface.drawBoxAlpha(238,271,246,43,i.grey,160),this.surface.drawBoxAlpha(30,66,197,103,i.lightGrey2,160),this.surface.drawBoxAlpha(30,191,197,103,i.lightGrey2,160),this.surface.drawBoxAlpha(238,66,246,205,i.lightGrey2,160);for(let t=0;t<4;t++)this.surface.drawLineHoriz(30,66+34*t,197,i.black);for(let t=0;t<4;t++)this.surface.drawLineHoriz(30,191+34*t,197,i.black);for(let t=0;t<7;t++)this.surface.drawLineHoriz(238,66+34*t,246,i.black);for(let t=0;t<6;t++)t<5&&(this.surface.drawLineVert(30+49*t,66,103,i.black),this.surface.drawLineVert(30+49*t,191,103,i.black)),this.surface.drawLineVert(238+49*t,66,205,i.black);this.surface.drawString("Trading with: "+this.tradeRecipientName,23,46,1,i.white),this.surface.drawString("Your Offer",31,63,4,i.white),this.surface.drawString("Opponent's Offer",31,188,4,i.white),this.surface.drawString("Your Inventory",238,63,4,i.white),this.tradeAccepted||this.surface._drawSprite_from3(239,274,this.spriteMedia+25),this.surface._drawSprite_from3(416,274,this.spriteMedia+26),this.tradeRecipientAccepted&&(this.surface.drawStringCenter("Other player",363,282,1,i.white),this.surface.drawStringCenter("has accepted",363,292,1,i.white)),this.tradeAccepted&&(this.surface.drawStringCenter("Waiting for",274,282,1,i.white),this.surface.drawStringCenter("other player",274,292,1,i.white));for(let t=0;t<this.inventoryItemsCount;t++){const e=239+t%5*49,r=67+34*(t/5|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+Np.itemPicture[this.inventoryItemId[t]],Np.itemMask[this.inventoryItemId[t]],0,0,!1),0===Np.itemStackable[this.inventoryItemId[t]]&&this.surface.drawString(this.inventoryItemStackCount[t].toString(),e+1,r+10,1,i.yellow)}for(let t=0;t<this.tradeItemsCount;t++){const e=31+t%4*49,r=67+34*(t/4|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+Np.itemPicture[this.tradeItems[t]],Np.itemMask[this.tradeItems[t]],0,0,!1),0===Np.itemStackable[this.tradeItems[t]]&&this.surface.drawString(this.tradeItemCount[t].toString(),e+1,r+10,1,i.yellow),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>r&&this.mouseY<r+32&&this.surface.drawString(Np.itemName[this.tradeItems[t]]+": @whi@"+Np.itemDescription[this.tradeItems[t]],30,309,1,i.yellow)}for(let t=0;t<this.tradeRecipientItemsCount;t++){const e=31+t%4*49,r=192+34*(t/4|0);this.surface._spriteClipping_from9(e,r,48,32,this.spriteItem+Np.itemPicture[this.tradeRecipientItems[t]],Np.itemMask[this.tradeRecipientItems[t]],0,0,!1),0===Np.itemStackable[this.tradeRecipientItems[t]]&&this.surface.drawString(this.tradeRecipientItemCount[t].toString(),e+1,r+10,1,i.yellow),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>r&&this.mouseY<r+32&&this.surface.drawString(Np.itemName[this.tradeRecipientItems[t]]+": @whi@"+Np.itemDescription[this.tradeRecipientItems[t]],30,309,1,i.yellow)}}},showDialogTrade:!1}})),R=t((function(t,e){const i=it({});t.exports={drawDialogTradeConfirm:function(){this.surface.drawBox(22,36,468,16,192),this.surface.drawBoxAlpha(22,52,468,246,i.grey,160),this.surface.drawStringCenter("Please confirm your trade with @yel@"+Ud.hashToUsername(this.tradeRecipientConfirmHash),256,48,1,i.white),this.surface.drawStringCenter("You are about to give:",139,66,1,i.yellow);for(let t=0;t<this.tradeConfirmItemsCount;t++){let e=Np.itemName[this.tradeConfirmItems[t]];0===Np.itemStackable[this.tradeConfirmItems[t]]&&(e+=" x "+Ud.formatConfirmAmount(this.tradeConfirmItemCount[t])),this.surface.drawStringCenter(e,139,78+12*t,1,i.white)}0===this.tradeConfirmItemsCount&&this.surface.drawStringCenter("Nothing!",139,78,1,i.white),this.surface.drawStringCenter("In return you will receive:",373,66,1,i.yellow);for(let t=0;t<this.tradeRecipientConfirmItemsCount;t++){let e=Np.itemName[this.tradeRecipientConfirmItems[t]];0===Np.itemStackable[this.tradeRecipientConfirmItems[t]]&&(e+=" x "+Ud.formatConfirmAmount(this.tradeRecipientConfirmItemCount[t])),this.surface.drawStringCenter(e,373,78+12*t,1,i.white)}0===this.tradeRecipientConfirmItemsCount&&this.surface.drawStringCenter("Nothing!",373,78,1,i.white),this.surface.drawStringCenter("Are you sure you want to do this?",256,236,4,i.cyan),this.surface.drawStringCenter("There is NO WAY to reverse a trade if you change your mind.",256,251,1,i.white),this.surface.drawStringCenter("Remember that not all players are trustworthy",256,266,1,i.white),this.tradeConfirmAccepted?this.surface.drawStringCenter("Waiting for other player...",256,286,1,i.yellow):(this.surface._drawSprite_from3(105,274,this.spriteMedia+25),this.surface._drawSprite_from3(339,274,this.spriteMedia+26)),1===this.mouseButtonClick&&((this.mouseX<22||this.mouseY<36||this.mouseX>490||this.mouseY>298)&&(this.showDialogTradeConfirm=!1,this.packetStream.newPacket(Bp.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseX>=105&&this.mouseX<=210&&this.mouseY>=274&&this.mouseY<=295&&(this.tradeConfirmAccepted=!0,this.packetStream.newPacket(Bp.TRADE_CONFIRM_ACCEPT),this.packetStream.sendPacket()),this.mouseX>=339&&this.mouseX<=445&&this.mouseY>=274&&this.mouseY<=295&&(this.showDialogTradeConfirm=!1,this.packetStream.newPacket(Bp.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseButtonClick=0)},showDialogTradeConfirm:!1}})),P=t((function(t,e){const i=it({}),r=["Friends","Ignore"];t.exports={drawUiTabSocial:function(t){let e=this.gameWidth-196-3,n=36;if(this.options.mobile?(e=35,n=this.gameHeight/2-91):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+5),this.uiOpenX=e,this.uiOpenY=n,this.uiOpenWidth=196,this.uiOpenHeight=182,this.surface.drawBoxAlpha(e,n+24,196,158,i.lightGrey,128),this.surface.drawLineHoriz(e,n+182-16,196,i.black),this.surface.drawTabs(e,n,196,24,r,this.uiTabSocialSubTab),this.panelSocialList.clearList(this.controlListSocialPlayers),0===this.uiTabSocialSubTab)for(let i=0;i<this.friendListCount;i++){let t=null;t=255===this.friendListOnline[i]?"@gre@":this.friendListOnline[i]>0?"@yel@":"@red@",this.panelSocialList.addListEntry(this.controlListSocialPlayers,i,`${t}${Ud.hashToUsername(this.friendListHashes[i])}~${e+126}~@whi@Remove`)}else if(1===this.uiTabSocialSubTab)for(let i=0;i<this.ignoreListCount;i++)this.panelSocialList.addListEntry(this.controlListSocialPlayers,i,"@yel@"+Ud.hashToUsername(this.ignoreList[i])+`~${e+126}~@whi@Remove`);this.panelSocialList.drawPanel();const s=this.options.mobile?"Tap":"Click";if(0===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);if(t>=0&&this.mouseX<e+176){const r=Ud.hashToUsername(this.friendListHashes[t]);this.mouseX>e+116?this.surface.drawStringCenter(`${s} to remove ${r}`,e+98,n+35,1,i.white):255===this.friendListOnline[t]?this.surface.drawStringCenter(`${s} to message ${r}`,e+98,n+35,1,i.white):this.friendListOnline[t]>0?this.friendListOnline[t]<200?this.surface.drawStringCenter(r+" is on world "+(this.friendListOnline[t]-9),e+98,n+35,1,i.white):this.surface.drawStringCenter(r+" is on classic "+(this.friendListOnline[t]-219),e+98,n+35,1,i.white):this.surface.drawStringCenter(r+" is offline",e+98,n+35,1,i.white)}else this.surface.drawStringCenter(s+" a name to send a message",e+98,n+35,1,i.white);let r=i.black;r=this.mouseX>e&&this.mouseX<e+196&&this.mouseY>n+182-16&&this.mouseY<n+182?i.yellow:i.white,this.surface.drawStringCenter(s+" here to add a friend",e+98,n+182-3,1,r)}else if(1===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&this.mouseX<e+176&&this.mouseX>e+116?this.mouseX>e+116&&this.surface.drawStringCenter(s+" to remove "+Ud.hashToUsername(this.ignoreList[t]),e+98,n+35,1,i.white):this.surface.drawStringCenter("Blocking messages from:",e+98,n+35,1,i.white);let r=i.black;r=this.mouseX>e&&this.mouseX<e+196&&this.mouseY>n+182-16&&this.mouseY<n+182?i.yellow:i.white,this.surface.drawStringCenter(s+" here to add a name",e+98,n+182-3,1,r)}if(!t)return;const o=this.mouseX-e,h=this.mouseY-n;if(o>=0&&h>=0&&o<196&&h<182){if(this.panelSocialList.handleMouse(o+e,h+n,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),h<=24&&1===this.mouseButtonClick&&(o<98&&1===this.uiTabSocialSubTab?(this.uiTabSocialSubTab=0,this.panelSocialList.resetListProps(this.controlListSocialPlayers)):o>98&&0===this.uiTabSocialSubTab&&(this.uiTabSocialSubTab=1,this.panelSocialList.resetListProps(this.controlListSocialPlayers))),1===this.mouseButtonClick&&0===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&o<176&&(o>116?this.friendRemove(this.friendListHashes[t]):0!==this.friendListOnline[t]&&(this.showDialogSocialInput=2,this.privateMessageTarget=this.friendListHashes[t],this.inputPMCurrent="",this.inputPMFinal=""))}if(1===this.mouseButtonClick&&1===this.uiTabSocialSubTab){const t=this.panelSocialList.getListEntryIndex(this.controlListSocialPlayers);t>=0&&o<176&&o>116&&this.ignoreRemove(this.ignoreList[t])}h>166&&1===this.mouseButtonClick&&(this.inputTextCurrent="",this.inputTextFinal="",0===this.uiTabSocialSubTab?this.showDialogSocialInput=1:1===this.uiTabSocialSubTab&&(this.showDialogSocialInput=3)),this.mouseButtonClick=0}},uiTabSocialSubTab:0}})),O=t((function(t,e){const i=it({});t.exports={drawDialogSocialInput:function(){if(0!==this.mouseButtonClick){if(this.mouseButtonClick=0,1===this.showDialogSocialInput&&(this.mouseX<106||this.mouseY<145||this.mouseX>406||this.mouseY>215))return void(this.showDialogSocialInput=0);if(2===this.showDialogSocialInput&&(this.mouseX<6||this.mouseY<145||this.mouseX>506||this.mouseY>215))return void(this.showDialogSocialInput=0);if(3===this.showDialogSocialInput&&(this.mouseX<106||this.mouseY<145||this.mouseX>406||this.mouseY>215))return void(this.showDialogSocialInput=0);if(this.mouseX>236&&this.mouseX<276&&this.mouseY>193&&this.mouseY<213)return void(this.showDialogSocialInput=0)}let t=145;if(1===this.showDialogSocialInput){if(this.surface.drawBox(106,t,300,70,0),this.surface.drawBoxEdge(106,t,300,70,i.white),t+=20,this.surface.drawStringCenter("Enter name to add to friends list",256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputTextCurrent+"*",256,t,4,i.white),this.inputTextFinal.length>0){const t=this.inputTextFinal.trim(),e=Ud.usernameToHash(t);this.inputTextCurrent="",this.inputTextFinal="",this.showDialogSocialInput=0,t.length>0&&!e.equals(this.localPlayer.hash)&&this.friendAdd(t)}}else if(2===this.showDialogSocialInput){this.surface.drawBox(6,t,500,70,0),this.surface.drawBoxEdge(6,t,500,70,i.white),t+=20;const e=Ud.hashToUsername(this.privateMessageTarget);if(this.surface.drawStringCenter("Enter message to send to "+e,256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputPMCurrent+"*",256,t,4,i.white),this.inputPMFinal.length>0){let t=this.inputPMFinal;this.inputPMCurrent="",this.inputPMFinal="",this.showDialogSocialInput=0;const i=Fm.scramble(t);this.sendPrivateMessage(this.privateMessageTarget,Fm.scrambledBytes,i),t=Fm.descramble(Fm.scrambledBytes,0,i),this.options.wordFilter&&(t=wm.filter(t)),this.showServerMessage(`@pri@You tell ${e}: ${t}`)}}else if(3===this.showDialogSocialInput&&(this.surface.drawBox(106,t,300,70,0),this.surface.drawBoxEdge(106,t,300,70,i.white),t+=20,this.surface.drawStringCenter("Enter name to add to ignore list",256,t,4,i.white),t+=20,this.surface.drawStringCenter(this.inputTextCurrent+"*",256,t,4,i.white),this.inputTextFinal.length>0)){const t=this.inputTextFinal.trim(),e=Ud.usernameToHash(t);this.inputTextCurrent="",this.inputTextFinal="",this.showDialogSocialInput=0,t.length>0&&!e.equals(this.localPlayer.hash)&&this.ignoreAdd(t)}let e=i.white;this.mouseX>236&&this.mouseX<276&&this.mouseY>193&&this.mouseY<213&&(e=i.yellow),this.surface.drawStringCenter("Cancel",256,208,1,e)},resetPMText:function(){this.inputPMCurrent="",this.inputPMFinal=""},showDialogSocialInput:0}})),j=t((function(t,e){const i=it({});t.exports={drawSleep:function(){this.surface.fadeToBlack(),Math.random()<=.15&&this.surface.drawStringCenter("ZZZ",80*Math.random()|0,Math.random()*this.gameHeight|0,5,Math.random()*i.white|0),Math.random()<=.15&&this.surface.drawStringCenter("ZZZ",this.gameWidth-(80*Math.random()|0),Math.random()*this.gameHeight|0,5,Math.random()*i.white|0),this.surface.drawBox((this.gameWidth/2|0)-100,160,200,40,i.black),this.surface.drawStringCenter("You are sleeping",this.gameWidth/2|0,50,7,i.yellow),this.surface.drawStringCenter(`Fatigue: ${100*this.fatigueSleeping/750|0}%`,this.gameWidth/2|0,90,7,i.yellow),this.surface.drawStringCenter("When you want to wake up just use your",this.gameWidth/2|0,140,5,i.white),this.surface.drawStringCenter("keyboard to type the word in the box below",this.gameWidth/2|0,160,5,i.white),this.surface.drawStringCenter(this.inputTextCurrent+"*",this.gameWidth/2|0,180,5,i.cyan),null===this.sleepingStatusText?this.surface._drawSprite_from3((this.gameWidth/2|0)-127,230,this.spriteTexture+1):this.surface.drawStringCenter(this.sleepingStatusText,this.gameWidth/2|0,260,5,i.red),this.surface.drawBoxEdge((this.gameWidth/2|0)-128,229,257,42,i.white),this.drawChatMessageTabs(),this.surface.drawStringCenter("If you can't read the word",this.gameWidth/2|0,290,1,i.white),this.surface.drawStringCenter(`@yel@${this.options.mobile?"tap":"click"} here@whi@ to get a different one`,this.gameWidth/2|0,305,1,i.white),this.surface.draw(this.graphics,0,0)},handleSleepInput:function(){this.inputTextFinal.length>0&&(/^::lostcon$/i.test(this.inputTextFinal)?this.packetStream.closeStream():/^::closecon$/.test(this.inputTextFinal)?this.closeConnection():(this.packetStream.newPacket(Bp.SLEEP_WORD),this.packetStream.putString(this.inputTextFinal),this.sleepWordDelay||(this.packetStream.putByte(0),this.sleepWordDelay=!0),this.packetStream.sendPacket(),this.inputTextCurrent="",this.inputTextFinal="",this.sleepingStatusText="Please wait...")),1===this.lastMouseButtonDown&&this.mouseY>275&&this.mouseY<310&&this.mouseX>56&&this.mouseX<456&&(this.packetStream.newPacket(Bp.SLEEP_WORD),this.packetStream.putString("-null-"),this.sleepWordDelay||(this.packetStream.putByte(0),this.sleepWordDelay=!0),this.packetStream.sendPacket(),this.inputTextCurrent="",this.inputTextFinal="",this.sleepingStatusText="Please wait..."),this.lastMouseButtonDown=0},isSleeping:!1}})),D=t((function(t,e){const i=it({});t.exports={drawDialogShop:function(){if(0!==this.mouseButtonClick){this.mouseButtonClick=0;const t=this.mouseX-52,e=this.mouseY-44;if(!(t>=0&&e>=12&&t<408&&e<246))return this.packetStream.newPacket(Bp.SHOP_CLOSE),this.packetStream.sendPacket(),void(this.showDialogShop=!1);{let i=0;for(let r=0;r<5;r++)for(let n=0;n<8;n++){const s=7+49*n,o=28+34*r;t>s&&t<s+49&&e>o&&e<o+34&&-1!==this.shopItem[i]&&(this.shopSelectedItemIndex=i,this.shopSelectedItemType=this.shopItem[i]),i++}if(this.shopSelectedItemIndex>=0){const i=this.shopItem[this.shopSelectedItemIndex];if(-1!==i){if(this.shopItemCount[this.shopSelectedItemIndex]>0&&t>298&&e>=204&&t<408&&e<=215){let t=this.shopBuyPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];t<10&&(t=10);const e=t*Np.itemBasePrice[i]/100|0;this.packetStream.newPacket(Bp.SHOP_BUY),this.packetStream.putShort(this.shopItem[this.shopSelectedItemIndex]),this.packetStream.putInt(e),this.packetStream.sendPacket()}if(this.getInventoryCount(i)>0&&t>2&&e>=229&&t<112&&e<=240){let t=this.shopSellPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];t<10&&(t=10);const e=t*Np.itemBasePrice[i]/100|0;this.packetStream.newPacket(Bp.SHOP_SELL),this.packetStream.putShort(this.shopItem[this.shopSelectedItemIndex]),this.packetStream.putInt(e),this.packetStream.sendPacket()}}}}}this.surface.drawBox(52,44,408,12,192),this.surface.drawBoxAlpha(52,56,408,17,i.grey,160),this.surface.drawBoxAlpha(52,73,8,170,i.grey,160),this.surface.drawBoxAlpha(451,73,9,170,i.grey,160),this.surface.drawBoxAlpha(52,243,408,47,i.grey,160),this.surface.drawString("Buying and selling items",53,54,1,i.white);let t=i.white;this.mouseX>372&&this.mouseY>=44&&this.mouseX<460&&this.mouseY<56&&(t=i.red),this.surface.drawStringRight("Close window",458,54,1,t),this.surface.drawString("Shops stock in green",54,68,1,i.green),this.surface.drawString("Number you own in blue",187,68,1,i.cyan),this.surface.drawString(`Your money: ${this.getInventoryCount(10)}gp`,332,68,1,i.yellow);let e=0;for(let n=0;n<5;n++)for(let t=0;t<8;t++){const r=59+49*t,s=72+34*n;this.shopSelectedItemIndex===e?this.surface.drawBoxAlpha(r,s,49,34,i.red,160):this.surface.drawBoxAlpha(r,s,49,34,i.lightGrey2,160),this.surface.drawBoxEdge(r,s,50,35,0),-1!==this.shopItem[e]&&(this.surface._spriteClipping_from9(r,s,48,32,this.spriteItem+Np.itemPicture[this.shopItem[e]],Np.itemMask[this.shopItem[e]],0,0,!1),this.surface.drawString(this.shopItemCount[e].toString(),r+1,s+10,1,i.green),this.surface.drawStringRight(this.getInventoryCount(this.shopItem[e]).toString(),r+47,s+10,1,i.cyan)),e++}if(this.surface.drawLineHoriz(57,266,398,0),-1===this.shopSelectedItemIndex)return void this.surface.drawStringCenter("Select an object to buy or sell",256,258,3,i.yellow);const r=this.shopItem[this.shopSelectedItemIndex];if(-1!==r){if(this.shopItemCount[this.shopSelectedItemIndex]>0){let e=this.shopBuyPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];e<10&&(e=10);const n=e*Np.itemBasePrice[r]/100|0;this.surface.drawString(`Buy a new ${Np.itemName[r]} for `+n+"gp",54,258,1,i.yellow),t=i.white,this.mouseX>350&&this.mouseY>=248&&this.mouseX<460&&this.mouseY<=259&&(t=i.red),this.surface.drawStringRight("Click here to buy",457,258,3,t)}else this.surface.drawStringCenter("This item is not currently available to buy",256,258,3,i.yellow);if(this.getInventoryCount(r)>0){let e=this.shopSellPriceMod+this.shopItemPrice[this.shopSelectedItemIndex];e<10&&(e=10);const n=e*Np.itemBasePrice[r]/100|0;return this.surface.drawStringRight(`Sell your ${Np.itemName[r]} for `+n+"gp",457,283,1,i.yellow),t=i.white,this.mouseX>54&&this.mouseY>=273&&this.mouseX<164&&this.mouseY<=284&&(t=i.red),void this.surface.drawString("Click here to sell",54,283,3,t)}this.surface.drawStringCenter("You do not have any of this item to sell",256,283,3,i.yellow)}}}})),Y=t((function(t,e){t.exports={setActiveUITab:function(){0===this.showUITab&&this.mouseX>=this.gameWidth-35&&this.mouseY>=3&&this.mouseX<this.gameWidth-3&&this.mouseY<35&&(this.showUITab=1),0===this.showUITab&&this.mouseX>=this.gameWidth-35-33&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-33&&this.mouseY<35&&(this.showUITab=2,this.minimapRandom1=(13*Math.random()|0)-6,this.minimapRandom2=(23*Math.random()|0)-11),0===this.showUITab&&this.mouseX>=this.gameWidth-35-66&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-66&&this.mouseY<35&&(this.showUITab=3),0===this.showUITab&&this.mouseX>=this.gameWidth-35-99&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-99&&this.mouseY<35&&(this.showUITab=4),0===this.showUITab&&this.mouseX>=this.gameWidth-35-132&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-132&&this.mouseY<35&&(this.showUITab=5),0===this.showUITab&&this.mouseX>=this.gameWidth-35-165&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-165&&this.mouseY<35&&(this.showUITab=6),0!==this.showUITab&&this.mouseX>=this.gameWidth-35&&this.mouseY>=3&&this.mouseX<this.gameWidth-3&&this.mouseY<26&&(this.showUITab=1),0!==this.showUITab&&2!==this.showUITab&&this.mouseX>=this.gameWidth-35-33&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-33&&this.mouseY<26&&(this.showUITab=2,this.minimapRandom1=(13*Math.random()|0)-6,this.minimapRandom2=(23*Math.random()|0)-11),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-66&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-66&&this.mouseY<26&&(this.showUITab=3),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-99&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-99&&this.mouseY<26&&(this.showUITab=4),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-132&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-132&&this.mouseY<26&&(this.showUITab=5),0!==this.showUITab&&this.mouseX>=this.gameWidth-35-165&&this.mouseY>=3&&this.mouseX<this.gameWidth-3-165&&this.mouseY<26&&(this.showUITab=6),1===this.showUITab&&(this.mouseX<this.gameWidth-248||this.mouseY>36+34*(this.inventoryMaxItemCount/5|0))&&(this.showUITab=0),3===this.showUITab&&(this.mouseX<this.gameWidth-199||this.mouseY>316)&&(this.showUITab=0),2!==this.showUITab&&4!==this.showUITab&&5!==this.showUITab||!(this.mouseX<this.gameWidth-199||this.mouseY>240)||(this.showUITab=0),6===this.showUITab&&(this.mouseX<this.gameWidth-199||this.mouseY>311)&&(this.showUITab=0)},setActiveMobileUITab:function(){const t=this.gameWidth-32-3,e=this.gameHeight/2-49;let i=e;for(let r=0;r<6;r+=1){const n=r>2?3:t;if(this.mouseX>=n&&this.mouseX<=n+32&&this.mouseY>=i&&this.mouseY<=i+32){if(0===this.showUITab)return void(this.showUITab=r+1);if(this.showUITab===r+1)return}2===r?i=e:i+=33}0!==this.showUITab&&(this.mouseX<this.uiOpenX||this.mouseX>this.uiOpenX+this.uiOpenWidth||this.mouseY<this.uiOpenY||this.mouseY>this.uiOpenY+this.uiOpenHeight)&&(this.showUITab=0)}}})),U=t((function(t,e){const i=it({});t.exports={serverMessageBoxTop:!1,drawDialogServerMessage:function(){let t=100;this.serverMessageBoxTop&&(t=450,t=300),this.surface.drawBox(56,167-(t/2|0),400,t,i.black),this.surface.drawBoxEdge(56,167-(t/2|0),400,t,i.white),this.surface.drawParagraph(this.serverMessage,256,167-(t/2|0)+20,1,i.white,360);const e=157+(t/2|0);let r=i.white;this.mouseY>e-12&&this.mouseY<=e&&this.mouseX>106&&this.mouseX<406&&(r=i.red),this.surface.drawStringCenter("Click here to close window",256,e,1,r),1===this.mouseButtonClick&&(r===i.red&&(this.showDialogServerMessage=!1),(this.mouseX<56||this.mouseX>456)&&(this.mouseY<167-(t/2|0)||this.mouseY>167+(t/2|0))&&(this.showDialogServerMessage=!1)),this.mouseButtonClick=0}}})),X=t((function(t,e){const i=it({}),r=["Offensive language","Item scamming","Password scamming","Bug abuse","Jagex Staff impersonation","Account sharing/trading","Macroing","Mutiple logging in","Encouraging others to break rules","Misuse of customer support","Advertising / website","Real world item trading"];t.exports={drawDialogReportAbuse:function(){this.reportAbuseOffence=0;let t=135;for(let i=0;i<12;i++)this.mouseX>66&&this.mouseX<446&&this.mouseY>=t-12&&this.mouseY<t+3&&(this.reportAbuseOffence=i+1),t+=14;if(0!==this.mouseButtonClick&&0!==this.reportAbuseOffence)return this.mouseButtonClick=0,this.showDialogReportAbuseStep=2,this.inputTextCurrent="",void(this.inputTextFinal="");if(t+=15,0!==this.mouseButtonClick){if(this.mouseButtonClick=0,this.mouseX<56||this.mouseY<35||this.mouseX>456||this.mouseY>325)return void(this.showDialogReportAbuseStep=0);if(this.mouseX>66&&this.mouseX<446&&this.mouseY>=t-15&&this.mouseY<t+5)return void(this.showDialogReportAbuseStep=0)}this.surface.drawBox(56,35,400,290,i.black),this.surface.drawBoxEdge(56,35,400,290,i.white),t=50,this.surface.drawStringCenter("This form is for reporting players who are breaking our rules",256,t,1,i.white),t+=15,this.surface.drawStringCenter("Using it sends a snapshot of the last 60 secs of activity to us",256,t,1,i.white),t+=15,this.surface.drawStringCenter("If you misuse this form you will be banned",256,t,1,i.orange),t+=25,this.surface.drawStringCenter("First indicate which of our 12 rules is being broken. For a detailed",256,t,1,i.yellow),t+=15,this.surface.drawStringCenter("explanation of each rule please read the manual on our website.",256,t,1,i.yellow),t+=15;for(let n=1;n<r.length+1;n+=1){let e=i.black;this.reportAbuseOffence===n?(this.surface.drawBoxEdge(66,t-12,380,15,i.white),e=i.orange):e=i.white;const s=r[n-1];this.surface.drawStringCenter(`${n}: ${s}`,256,t,1,e),t+=14}t+=15;let e=i.white;this.mouseX>196&&this.mouseX<316&&this.mouseY>t-15&&this.mouseY<t+5&&(e=i.yellow),this.surface.drawStringCenter("Click here to cancel",256,t,1,e)},drawDialogReportAbuseInput:function(){if(this.inputTextFinal.length>0){const t=this.inputTextFinal.trim();if(this.inputTextCurrent="",this.inputTextFinal="",t.length>0){const e=Ud.usernameToHash(t);this.packetStream.newPacket(Bp.REPORT_ABUSE),this.packetStream.putLong(e),this.packetStream.putByte(this.reportAbuseOffence),this.packetStream.putByte(this.reportAbuseMute?1:0),this.packetStream.sendPacket()}return void(this.showDialogReportAbuseStep=0)}this.surface.drawBox(56,130,400,100,i.black),this.surface.drawBoxEdge(56,130,400,100,i.white);let t=160;if(this.surface.drawStringCenter("Now type the name of the offending player, and press enter",256,t,1,i.yellow),t+=18,this.surface.drawStringCenter(`Name: ${this.inputTextCurrent}*`,256,t,4,i.white),this.moderatorLevel>0){t=207;let e=i.white,r="OFF";this.reportAbuseMute&&(e=i.orange,r="ON"),this.surface.drawStringCenter(`Moderator option: Mute player for 48 hours: <${r}>`,256,t,1,e),this.mouseX>106&&this.mouseX<406&&this.mouseY>t-13&&this.mouseY<t+2&&1===this.mouseButtonClick&&(this.mouseButtonClick=0,this.reportAbuseMute=!this.reportAbuseMute)}t=222;let e=i.white;this.mouseX>196&&this.mouseX<316&&this.mouseY>t-13&&this.mouseY<t+2&&(e=i.yellow,1===this.mouseButtonClick&&(this.mouseButtonClick=0,this.showDialogReportAbuseStep=0)),this.surface.drawStringCenter("Click here to cancel",256,t,1,e),1===this.mouseButtonClick&&(this.mouseX<56||this.mouseX>456||this.mouseY<130||this.mouseY>230)&&(this.mouseButtonClick=0,this.showDialogReportAbuseStep=0)},reportAbuseMute:!1,reportAbuseOffence:0,showDialogReportAbuseStep:0}})),N=t((function(t,e){const i=[];i.length=5,i.fill(null),t.exports={selectedRecoverQuestions:i,selectedRecoverIDs:new Int32Array([0,1,2,3,4]),controlRecoverNewQuestions:new Int32Array(5),controlRecoverNewAnswers:new Int32Array(5),controlRecoverNewQuestionButtons:new Int32Array(5),controlRecoverCustomQuestionButtons:new Int32Array(5),controlRecoverCreateButton:0}})),F=t((function(t,e){const i=it({}),r=["Stats","Quests"],n=["Attack","Defense","Strength","Hits","Ranged","Prayer","Magic","Cooking","Woodcut","Fletching","Fishing","Firemaking","Crafting","Smithing","Mining","Herblaw","Agility","Thieving"],s=["Attack","Defense","Strength","Hits","Ranged","Prayer","Magic","Cooking","Woodcutting","Fletching","Fishing","Firemaking","Crafting","Smithing","Mining","Herblaw","Agility","Thieving"],o=["Armour","WeaponAim","WeaponPower","Magic","Prayer"],h=[];let a=0;for(let c=0;c<99;c++){const t=c+1;a+=t+300*Math.pow(2,t/7)|0,h[c]=268435452&a}const u=["Witch's house","Lost city","Hero's quest","Druidic ritual","Merlin's crystal","Scorpion catcher","Family crest","Tribal totem","Fishing contest","Monk's friend","Temple of Ikov","Clock tower","The Holy Grail","Fight Arena","Tree Gnome Village","The Hazeel Cult","Sheep Herder","Plague City","Sea Slug","Waterfall quest","Biohazard","Jungle potion","Grand tree","Shilo village","Underground pass","Observatory quest","Tourist trap","Watchtower","Dwarf Cannon","Murder Mystery","Digsite","Gertrude's Cat","Legend's Quest"].map(t=>t+" (members)"),l=["Black knight's fortress","Cook's assistant","Demon slayer","Doric's quest","The restless ghost","Goblin diplomacy","Ernest the chicken","Imp catcher","Pirate's treasure","Prince Ali rescue","Romeo & Juliet","Sheep shearer","Shield of Arrav","The knight's sword","Vampire slayer","Witch's potion","Dragon slayer"].concat(u);t.exports={drawUiTabPlayerInfo:function(t){let e=275;0===this.uiTabPlayerInfoSubTab&&(this.options.totalExperience||this.options.remainingExperience)&&(e+=12);let a=this.gameWidth-196-3,u=36;if(this.options.mobile?(a-=32,u=this.gameHeight/2-e/2|0):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+3),this.uiOpenX=a,this.uiOpenY=u,this.uiOpenWidth=196,this.uiOpenHeight=e,this.surface.drawBoxAlpha(a,u+24,196,e-24,i.lightGrey,128),this.surface.drawLineHoriz(a,u+24,196,i.black),this.surface.drawTabs(a,u,196,24,r,this.uiTabPlayerInfoSubTab),0===this.uiTabPlayerInfoSubTab){let t=u+36,e=-1,r=0;this.surface.drawString("Skills",a+5,t,3,i.yellow),t+=13;for(let s=0;s<9;s++){r+=this.playerExperience[s],r+=this.playerExperience[s+9];let o=i.white;this.mouseX>a+3&&this.mouseY>=t-11&&this.mouseY<t+2&&this.mouseX<a+90&&(o=i.red,e=s),this.surface.drawString(`${n[s]}:@yel@${this.playerStatCurrent[s]}/`+this.playerStatBase[s],a+5,t,1,o),o=i.white,this.mouseX>=a+90&&this.mouseY>=t-13-11&&this.mouseY<t-13+2&&this.mouseX<a+196&&(o=i.red,e=s+9),this.surface.drawString(n[s+9]+":@yel@"+this.playerStatCurrent[s+9]+"/"+this.playerStatBase[s+9],a+98-5,t-13,1,o),t+=13}this.surface.drawString("Quest Points:@yel@"+this.playerQuestPoints,a+98-5,t-13,1,i.white),t+=12,this.surface.drawString(`Fatigue: @yel@${100*this.statFatigue/750|0}%`,a+5,t-13,1,i.white),t+=8,this.surface.drawString("Equipment Status",a+5,t,3,i.yellow),t+=12;for(let n=0;n<3;n++)this.surface.drawString(o[n]+":@yel@"+this.playerStatEquipment[n],a+5,t,1,i.white),n<2&&this.surface.drawString(o[n+3]+":@yel@"+this.playerStatEquipment[n+3],a+98+25,t,1,i.white),t+=13;if(t+=6,this.surface.drawLineHoriz(a,t-15,196,i.black),-1!==e){this.surface.drawString(s[e]+" skill",a+5,t,1,i.yellow),t+=12;let r=h[0];for(let t=0;t<98;t++)this.playerExperience[e]>=h[t]&&(r=h[t+1]);const n=this.playerExperience[e];this.surface.drawString("Total xp: "+(n/4|0),a+5,t,1,i.white),t+=12,this.surface.drawString("Next level at: "+(r/4|0),a+5,t,1,i.white),this.options.remainingExperience&&(t+=12,this.surface.drawString("Remaining xp: "+((r-n)/4|0),a+5,t,1,i.white))}else{this.surface.drawString("Overall levels",a+5,t,1,i.yellow),t+=12;let e=0;for(let t=0;t<s.length;t++)e+=this.playerStatBase[t];this.surface.drawString("Skill total: "+e,a+5,t,1,i.white),t+=12,this.options.totalExperience&&(this.surface.drawString("Total xp: "+r,a+5,t,1,i.white),t+=12),this.surface.drawString("Combat level: "+this.localPlayer.level,a+5,t,1,i.white),t+=12}}else if(1===this.uiTabPlayerInfoSubTab){this.panelQuestList.clearList(this.controlListQuest),this.panelQuestList.addListEntry(this.controlListQuest,0,"@whi@Quest-list (green=completed)");for(let t=0;t<l.length;t++)this.panelQuestList.addListEntry(this.controlListQuest,t+1,(this.questComplete[t]?"@gre@":"@red@")+l[t]);this.panelQuestList.drawPanel()}if(!t)return;const c=this.mouseX-a,f=this.mouseY-u;c>=0&&f>=0&&c<196&&f<e&&(1===this.uiTabPlayerInfoSubTab&&this.panelQuestList.handleMouse(c+a,f+u,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),f<=24&&1===this.mouseButtonClick&&(c<98?this.uiTabPlayerInfoSubTab=0:c>98&&(this.uiTabPlayerInfoSubTab=1)))},uiTabPlayerInfoSubTab:0}})),H=t((function(t,e){const i=it({});t.exports={drawDialogChangePassword:function(){if(0!==this.mouseButtonClick&&(this.mouseButtonClick=0,this.mouseX<106||this.mouseY<150||this.mouseX>406||this.mouseY>210))return void(this.showChangePasswordStep=0);this.surface.drawBox(106,150,300,60,i.black),this.surface.drawBoxEdge(106,150,300,60,i.white);let t=172,e="";if(6===this.showChangePasswordStep){this.surface.drawStringCenter("Please enter your current password",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;t++)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.changePasswordOld=this.inputTextFinal,this.inputTextCurrent="",this.inputTextFinal="",void(this.showChangePasswordStep=1)}else if(1===this.showChangePasswordStep){this.surface.drawStringCenter("Please enter your new password",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;t++)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.changePasswordNew=this.inputTextFinal,this.inputTextCurrent="",this.inputTextFinal="",this.changePasswordNew.length>=5?void(this.showChangePasswordStep=2):void(this.showChangePasswordStep=5)}else if(2==this.showChangePasswordStep){this.surface.drawStringCenter("Enter password again to confirm",256,t,4,i.white),t+=25,e="*";for(let t=0;t<this.inputTextCurrent.length;++t)e="X"+e;if(this.surface.drawStringCenter(e,256,t,4,i.white),this.inputTextFinal.length>0)return this.inputTextFinal.toLowerCase()===this.changePasswordNew.toLowerCase()?(this.showChangePasswordStep=4,void this.changePassword(this.changePasswordOld,this.changePasswordNew)):void(this.showChangePasswordStep=3)}else{if(3===this.showChangePasswordStep)return this.surface.drawStringCenter("Passwords do not match!",256,t,4,i.white),t+=25,void this.surface.drawStringCenter("Press any key to close",256,t,4,i.white);if(4===this.showChangePasswordStep)return this.surface.drawStringCenter("Ok, your request has been sent",256,t,4,i.white),t+=25,void this.surface.drawStringCenter("Press any key to close",256,t,4,i.white);5===this.showChangePasswordStep&&(this.surface.drawStringCenter("Password must be at",256,t,4,i.white),t+=25,this.surface.drawStringCenter("least 5 letters long",256,t,4,i.white))}},showChangePasswordStep:0}})),W=t((function(t,e){const i=it({});t.exports={drawUiTabOptions:function(t){let e=this.gameWidth-196-3,r=36;this.options.mobile?(e=35,r=this.gameHeight/2-132.5|0):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+6),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=196,this.uiOpenHeight=265,this.surface.drawBoxAlpha(e,r,196,65,i.darkGrey,160),this.surface.drawBoxAlpha(e,r+65,196,65,i.lightGrey3,160),this.surface.drawBoxAlpha(e,r+130,196,95,i.darkGrey,160),this.surface.drawBoxAlpha(e,r+225,196,40,i.lightGrey3,160);const n=e+3;let s=r+15;if(this.surface.drawString(`Game options - ${this.options.mobile?"tap":"click"} to toggle`,n,s,1,i.black),s+=15,this.surface.drawString("Camera angle mode - "+(this.optionCameraModeAuto?"@gre@Auto":"@red@Manual"),n,s,1,i.white),s+=15,this.surface.drawString(this.options.mobile?"Single tap mode - "+(this.optionMouseButtonOne?"@gre@on":"@red@off"):"Mouse buttons - "+(this.optionMouseButtonOne?"@red@One":"@gre@Two"),n,s,1,i.white),s+=15,this.members&&this.surface.drawString("Sound effects - "+(this.optionSoundDisabled?"@red@off":"@gre@on"),n,s,1,i.white),s+=15,this.options.accountManagement){s+=5,this.surface.drawString("Security settings",n,s,1,0),s+=15;let t=i.white;this.mouseX>n&&this.mouseX<n+196&&this.mouseY>s-12&&this.mouseY<s+4&&(t=i.yellow),this.surface.drawString("Change password",n,s,1,t),s+=15,t=i.white,this.mouseX>n&&this.mouseX<n+196&&this.mouseY>s-12&&this.mouseY<s+4&&(t=i.yellow),this.surface.drawString("Change recovery questions",n,s,1,t),s+=30}else this.surface.drawString("To change your contact details,",n,s,0,i.white),s+=15,this.surface.drawString("password, recovery questions, etc..",n,s,0,i.white),s+=15,this.surface.drawString("please select 'account management'",n,s,0,i.white),s+=15,0===this.referID?this.surface.drawString("from the runescape.com front page",n,s,0,i.white):1===this.referID?this.surface.drawString("from the link below the gamewindow",n,s,0,i.white):this.surface.drawString("from the runescape front webpage",n,s,0,i.white),s+=20;this.surface.drawString("Privacy settings. Will be applied to",e+3,s,1,i.black),s+=15,this.surface.drawString("all people not on your friends list",e+3,s,1,i.black),s+=15,this.surface.drawString("Block chat messages: "+(this.settingsBlockChat?"@gre@<on>":"@red@<off>"),e+3,s,1,i.white),s+=15,this.surface.drawString("Block private messages: "+(this.settingsBlockPrivate?"@gre@<on>":"@red@<off>"),e+3,s,1,i.white),s+=15,this.surface.drawString("Block trade requests: "+(this.settingsBlockTrade?"@gre@<on>":"@red@<off>"),e+3,s,1,i.white),s+=15,this.members&&this.surface.drawString("Block duel requests: "+(this.settingsBlockDuel?"@gre@<on>":"@red@<off>"),e+3,s,1,i.white),s+=20,this.surface.drawString("Always logout when you finish",n,s,1,i.black),s+=15;let o=i.white;if(this.mouseX>n&&this.mouseX<n+196&&this.mouseY>s-12&&this.mouseY<s+4&&(o=i.yellow),this.surface.drawString((this.options.mobile?"Tap":"Click")+" here to logout",e+3,s,1,o),!t)return;const h=this.mouseX-e,a=this.mouseY-r;if(h>=0&&a>=0&&h<196&&a<265){const t=e+3;let i=r+30;this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionCameraModeAuto=!this.optionCameraModeAuto,this.packetStream.newPacket(Bp.SETTINGS_GAME),this.packetStream.putByte(0),this.packetStream.putByte(this.optionCameraModeAuto?1:0),this.packetStream.sendPacket()),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionMouseButtonOne=!this.optionMouseButtonOne,this.packetStream.newPacket(Bp.SETTINGS_GAME),this.packetStream.putByte(2),this.packetStream.putByte(this.optionMouseButtonOne?1:0),this.packetStream.sendPacket()),i+=15,this.members&&this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.optionSoundDisabled=!this.optionSoundDisabled,this.packetStream.newPacket(Bp.SETTINGS_GAME),this.packetStream.putByte(3),this.packetStream.putByte(this.optionSoundDisabled?1:0),this.packetStream.sendPacket()),this.options.accountManagement?(i+=35,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.showChangePasswordStep=6,this.inputTextCurrent="",this.inputTextFinal=""),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.packetStream.newPacket(Bp.RECOVER_SET_REQUEST),this.packetStream.sendPacket()),i+=30):i+=75;let n=!1;i+=35,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockChat=1-this.settingsBlockChat,n=!0),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockPrivate=1-this.settingsBlockPrivate,n=!0),i+=15,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockTrade=1-this.settingsBlockTrade,n=!0),i+=15,this.members&&this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&(this.settingsBlockDuel=1-this.settingsBlockDuel,n=!0),i+=15,n&&this.sendPrivacySettings(this.settingsBlockChat,this.settingsBlockPrivate,this.settingsBlockTrade,this.settingsBlockDuel),i+=20,this.mouseX>t&&this.mouseX<t+196&&this.mouseY>i-12&&this.mouseY<i+4&&1===this.mouseButtonClick&&this.sendLogout(),this.mouseButtonClick=0}}}})),q=t((function(t,e){const i=it({});t.exports={drawOptionMenu:function(){const t=this.options.mobile?5:1,e=this.options.mobile?18:12,r=5*e,n=this.options.mobile?48:6,s=this.options.mobile?this.gameHeight/2-r/2|0:0;if(0!==this.mouseButtonClick){for(let i=0;i<this.optionMenuCount;i++)if(!(this.mouseX<n-6||this.mouseX>=n-6+this.surface.textWidth(this.optionMenuEntry[i],t)||this.mouseY<=s+i*e||this.mouseY>=s+(e+i*e))){this.packetStream.newPacket(Bp.CHOOSE_OPTION),this.packetStream.putByte(i),this.packetStream.sendPacket();break}return this.mouseButtonClick=0,void(this.showOptionMenu=!1)}for(let o=0;o<this.optionMenuCount;o++){let r=i.cyan;!this.options.mobile&&this.mouseX>n-6&&this.mouseX<n-6+this.surface.textWidth(this.optionMenuEntry[o],t)&&this.mouseY>s+o*e&&this.mouseY<s+(o*e+e)&&(r=i.red),this.surface.drawString(this.optionMenuEntry[o],n,s+(e+o*e),t,r)}}}})),z=t((function(t,e){const i={uiLeft:"./ui-left.png",uiRight:"./ui-right.png"};for(const r of Object.keys(i)){const t=new Image;t.src=i[r],i[r]=t}t.exports={drawMobileUI:function(){const t=this.gameWidth-32-3,e=this.gameHeight/2-49;this.graphics.ctx.globalAlpha=.5;let r=e;for(let n=0;n<6;n+=1){const s=this.showUITab===n+1,o=n>2?3:t;s&&(this.graphics.ctx.globalAlpha=1),this.graphics.ctx.fillStyle=s?"#000083":"#b5b5b4",this.graphics.ctx.fillRect(o,r,32,32),s&&(this.graphics.ctx.drawImage(n>2?i.uiLeft:i.uiRight,0,n>2?33*(n-3):33*n,32,32,o,r,32,32),this.graphics.ctx.globalAlpha=.5),2===n?r=e:r+=33}this.graphics.ctx.drawImage(i.uiRight,t,e),this.graphics.ctx.drawImage(i.uiLeft,3,e),this.graphics.ctx.globalAlpha=1}}})),V=t((function(t,e){const i=it({});t.exports={drawMinimapEntity:function(t,e,i){this.surface.setPixel(t,e,i),this.surface.setPixel(t-1,e,i),this.surface.setPixel(t+1,e,i),this.surface.setPixel(t,e-1,i),this.surface.setPixel(t,e+1,i)},drawUiTabMinimap:function(t){let e=this.gameWidth-156-3,r=36;this.options.mobile?(e-=32,r=this.gameHeight/2-76):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+2),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=156,this.uiOpenHeight=152,this.surface.drawBox(e,r,156,152,0),this.surface.setBounds(e,r,e+156,r+152);const n=192+this.minimapRandom2,s=this.cameraRotation+this.minimapRandom1&255;let o=3*(this.localPlayer.currentX-6040)*n/2048|0,h=3*(this.localPlayer.currentY-6040)*n/2048|0;const a=qp.sinCosCache[1024-4*s&1023],u=qp.sinCosCache[1024+(1024-4*s&1023)],l=h*a+o*u>>18;h=h*u-o*a>>18,o=l,this.surface.drawMinimapSprite(e+78-o,r+76+h,this.spriteMedia-1,s+64&255,n);for(let d=0;d<this.objectCount;d++){let t=3*(this.objectX[d]*this.magicLoc+64-this.localPlayer.currentX)*n/2048|0,s=3*(this.objectY[d]*this.magicLoc+64-this.localPlayer.currentY)*n/2048|0;const o=s*a+t*u>>18;s=s*u-t*a>>18,t=o,this.drawMinimapEntity(e+78+t,r+76-s,i.cyan)}for(let d=0;d<this.groundItemCount;d++){let t=3*(this.groundItemX[d]*this.magicLoc+64-this.localPlayer.currentX)*n/2048|0,s=3*(this.groundItemY[d]*this.magicLoc+64-this.localPlayer.currentY)*n/2048|0;const o=s*a+t*u>>18;s=s*u-t*a>>18,t=o,this.drawMinimapEntity(e+78+t,r+76-s,i.red)}for(let d=0;d<this.npcCount;d++){const t=this.npcs[d];let s=3*(t.currentX-this.localPlayer.currentX)*n/2048|0,o=3*(t.currentY-this.localPlayer.currentY)*n/2048|0;const h=o*a+s*u>>18;o=o*u-s*a>>18,s=h,this.drawMinimapEntity(e+78+s,r+76-o,i.yellow)}for(let d=0;d<this.playerCount;d++){const t=this.players[d];let s=3*(t.currentX-this.localPlayer.currentX)*n/2048|0,o=3*(t.currentY-this.localPlayer.currentY)*n/2048|0;const h=o*a+s*u>>18;o=o*u-s*a>>18,s=h;let l=i.white;for(let e=0;e<this.friendListCount;e++)if(t.hash.equals(this.friendListHashes[e])&&255===this.friendListOnline[e]){l=i.green;break}this.drawMinimapEntity(e+78+s,r+76-o,l)}if(this.surface.drawCircle(e+78,r+76,2,i.white,255),this.surface.drawMinimapSprite(e+19,r+19,this.spriteMedia+24,this.cameraRotation+128&255,128),this.surface.setBounds(0,0,this.gameWidth,this.gameHeight+12),!t)return;const c=this.mouseX-e,f=this.mouseY-r;if(this.options.resetCompass&&1===this.mouseButtonClick&&c>0&&c<=32&&f>0&&f<=32)return this.cameraRotation=128,void(this.mouseButtonClick=0);if(c>=0&&f>=0&&c<196&&f<152){let t=16384*(this.mouseX-(e+78))/(3*n)|0,i=16384*(this.mouseY-(r+76))/(3*n)|0;const s=i*a+t*u>>15;i=i*u-t*a>>15,t=s,t+=this.localPlayer.currentX,i=this.localPlayer.currentY-i,1===this.mouseButtonClick&&(this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t/128|0,i/128|0,!1),this.mouseButtonClick=0)}}}})),Z=t((function(t,e){const i=it({}),r=["Magic","Prayers"];t.exports={drawUiTabMagic:function(t){let e=this.gameWidth-196-3,n=36;if(this.options.mobile?(e=35,n=this.gameHeight/2-91):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+4),this.uiOpenX=e,this.uiOpenY=n,this.uiOpenWidth=196,this.uiOpenHeight=182,this.surface.drawBoxAlpha(e,n+24,196,158,i.lightGrey,128),this.surface.drawLineHoriz(e,n+113,196,i.black),this.surface.drawTabs(e,n,196,24,r,this.uiTabMagicSubTab),0===this.uiTabMagicSubTab){this.panelMagic.clearList(this.controlListMagic);const t=this.playerStatCurrent[6];for(let e=0;e<Np.spellCount;e++){let i="@yel@";for(let t=0;t<Np.spellRunesRequired[e];t++){const r=Np.spellRunesId[e][t],n=Np.spellRunesCount[e][t];if(!this.hasInventoryItems(r,n)){i="@whi@";break}}Np.spellLevel[e]>t&&(i="@bla@"),this.panelMagic.addListEntry(this.controlListMagic,e,`${i}Level ${Np.spellLevel[e]}: `+Np.spellName[e])}this.panelMagic.drawPanel();const r=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==r){this.surface.drawString("Level "+Np.spellLevel[r]+": "+Np.spellName[r],e+2,n+124,1,i.yellow),this.surface.drawString(Np.spellDescription[r],e+2,n+136,0,i.white);for(let t=0;t<Np.spellRunesRequired[r];t++){const s=Np.spellRunesId[r][t],o=this.getInventoryCount(s),h=Np.spellRunesCount[r][t];let a="@red@";this.hasInventoryItems(s,h)&&(a="@gre@"),this.surface._drawSprite_from3(e+2+44*t,n+150,this.spriteItem+Np.itemPicture[s]),this.surface.drawString(`${a}${o}/${h}`,e+2+44*t,n+150,1,i.white)}}else this.surface.drawString("Point at a spell for a description",e+2,n+124,1,i.black)}else if(1===this.uiTabMagicSubTab){this.panelMagic.clearList(this.controlListMagic);for(let e=0;e<Np.prayerCount;e++){let t="@whi@";Np.prayerLevel[e]>this.playerStatBase[5]&&(t="@bla@"),this.prayerOn[e]&&(t="@gre@"),this.panelMagic.addListEntry(this.controlListMagic,e,`${t}Level ${Np.prayerLevel[e]}: `+Np.prayerName[e])}this.panelMagic.drawPanel();const t=this.panelMagic.getListEntryIndex(this.controlListMagic);-1!==t?(this.surface.drawStringCenter(`Level ${Np.prayerLevel[t]}: `+Np.prayerName[t],e+98,n+130,1,i.yellow),this.surface.drawStringCenter(Np.prayerDescription[t],e+98,n+145,0,i.white),this.surface.drawStringCenter("Drain rate: "+Np.prayerDrain[t],e+98,n+160,1,i.black)):this.surface.drawString("Point at a prayer for a description",e+2,n+124,1,i.black)}if(!t)return;const s=this.mouseX-e,o=this.mouseY-n;if(s>=0&&o>=0&&s<196&&o<182){if(this.panelMagic.handleMouse(s+e,o+n,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),o<=24&&1===this.mouseButtonClick&&(s<98&&1===this.uiTabMagicSubTab?(this.uiTabMagicSubTab=0,this.panelMagic.resetListProps(this.controlListMagic)):s>98&&0===this.uiTabMagicSubTab&&(this.uiTabMagicSubTab=1,this.panelMagic.resetListProps(this.controlListMagic))),1===this.mouseButtonClick&&0===this.uiTabMagicSubTab){const t=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==t){const e=this.playerStatCurrent[6];if(Np.spellLevel[t]>e)this.showMessage("Your magic ability is not high enough for this spell",3);else{let e=0;for(e=0;e<Np.spellRunesRequired[t];e++){const i=Np.spellRunesId[t][e];if(!this.hasInventoryItems(i,Np.spellRunesCount[t][e])){this.showMessage("You don't have all the reagents you need for this spell",3),e=-1;break}}e===Np.spellRunesRequired[t]&&(this.selectedSpell=t,this.selectedItemInventoryIndex=-1)}}}if(1===this.mouseButtonClick&&1===this.uiTabMagicSubTab){const t=this.panelMagic.getListEntryIndex(this.controlListMagic);if(-1!==t){const e=this.playerStatBase[5];Np.prayerLevel[t]>e?this.showMessage("Your prayer ability is not high enough for this prayer",3):0===this.playerStatCurrent[5]?this.showMessage("You have run out of prayer points. Return to a church to recharge",3):this.prayerOn[t]?(this.packetStream.newPacket(Bp.PRAYER_OFF),this.packetStream.putByte(t),this.packetStream.sendPacket(),this.prayerOn[t]=!1,this.playSoundFile("prayeroff")):(this.packetStream.newPacket(Bp.PRAYER_ON),this.packetStream.putByte(t),this.packetStream.sendPacket(),this.prayerOn[t]=!0,this.playSoundFile("prayeron"))}}this.mouseButtonClick=0}},uiTabMagicSubTab:0}})),G=t((function(t,e){const i=it({});t.exports={drawDialogLogout:function(){this.surface.drawBox(126,137,260,60,i.black),this.surface.drawBoxEdge(126,137,260,60,i.white),this.surface.drawStringCenter("Logging out...",256,173,5,i.white)}}})),K=t((function(t,e){t.exports={controlRecoverQuestions:new Int32Array(5),controlRecoverAnswers:new Int32Array(5),loginScreen:0,createLoginPanels:function(){this.panelLoginWelcome=new Gp(this.surface,50);const t=this.gameWidth/2|0;let e=40;const i=this.options.mobile?"Tap":"Click";if(this.members?(this.panelLoginWelcome.addTextCentre(t,200+e,"Welcome to RuneScape",4,!0),this.panelLoginWelcome.addTextCentre(t,215+e,"You need a members account to use this server",4,!0),this.panelLoginWelcome.addButtonBackground(t,250+e,200,35),this.panelLoginWelcome.addTextCentre(t,250+e,i+" here to login",5,!1),this.controlWelcomeExistingUser=this.panelLoginWelcome.addButton(t,250+e,200,35)):(this.panelLoginWelcome.addTextCentre(t,200+e,i+" on an option",5,!0),this.panelLoginWelcome.addButtonBackground(t-100,240+e,120,35),this.panelLoginWelcome.addTextCentre(t-100,240+e,"New User",5,!1),this.controlWelcomeNewUser=this.panelLoginWelcome.addButton(t-100,240+e,120,35),this.panelLoginWelcome.addButtonBackground(t+100,240+e,120,35),this.panelLoginWelcome.addTextCentre(t+100,240+e,"Existing User",5,!1),this.controlWelcomeExistingUser=this.panelLoginWelcome.addButton(t+100,240+e,120,35)),this.panelLoginNewUser=new Gp(this.surface,50),this.options.accountManagement){e=70,this.controlRegisterStatus=this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please enter all the requested details",4,!0);let i=e+25;this.panelLoginNewUser.addButtonBackground(t,i+17,250,34),this.panelLoginNewUser.addTextCentre(t,i+8,"Choose a Username",4,!1),this.controlRegisterUser=this.panelLoginNewUser.addTextInput(t,i+25,200,40,4,12,!1,!1),i+=40,this.panelLoginNewUser.addButtonBackground(t-115,i+17,220,34),this.panelLoginNewUser.addTextCentre(t-115,i+8,"Choose a Password",4,!1),this.controlRegisterPassword=this.panelLoginNewUser.addTextInput(t-115,i+25,220,40,4,20,!0,!1),this.panelLoginNewUser.addButtonBackground(t+115,i+17,220,34),this.panelLoginNewUser.addTextCentre(t+115,i+8,"Confirm Password",4,!1),this.controlRegisterConfirmPassword=this.panelLoginNewUser.addTextInput(t+115,i+25,220,40,4,20,!0,!1),i+=60,this.controlRegisterCheckbox=this.panelLoginNewUser.addCheckbox(t-196-7,i-7,14,14),this.panelLoginNewUser.addText(t-181,i,"I have read and agreed to the terms and conditions",4,!0),i+=15,this.panelLoginNewUser.addTextCentre(t,i,"(to view these click the relevant link below this game window)",4,!0),i+=20,this.panelLoginNewUser.addButtonBackground(t-100,i+17,150,34),this.panelLoginNewUser.addTextCentre(t-100,i+17,"Submit",5,!1),this.controlRegisterSubmit=this.panelLoginNewUser.addButton(t-100,i+17,150,34),this.panelLoginNewUser.addButtonBackground(t+100,i+17,150,34),this.panelLoginNewUser.addTextCentre(t+100,i+17,"Cancel",5,!1),this.controlRegisterCancel=this.panelLoginNewUser.addButton(t+100,i+17,150,34)}else e=230,0===this.referID?(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please go back to the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"www.runescape.com front page, and choose 'create account'",4,!0)):1===this.referID?(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please click on the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"'create account' link below the game window",4,!0)):(this.panelLoginNewUser.addTextCentre(t,e+8,"To create an account please go back to the",4,!0),e+=20,this.panelLoginNewUser.addTextCentre(t,e+8,"runescape front webpage and choose 'create account'",4,!0)),e+=30,this.panelLoginNewUser.addButtonBackground(t,e+17,150,34),this.panelLoginNewUser.addTextCentre(t,e+17,"Ok",5,!1),this.controlLoginNewOK=this.panelLoginNewUser.addButton(t,e+17,150,34);this.panelLoginExistingUser=new Gp(this.surface,50),e=230,this.controlLoginStatus=this.panelLoginExistingUser.addTextCentre(t,e-10,"Please enter your username and password",4,!0),e+=28,this.panelLoginExistingUser.addButtonBackground(t-116,e,200,40),this.panelLoginExistingUser.addTextCentre(t-116,e-10,"Username:",4,!1),this.controlLoginUser=this.panelLoginExistingUser.addTextInput(t-116,e+10,200,40,4,12,!1,!1),e+=47,this.panelLoginExistingUser.addButtonBackground(t-66,e,200,40),this.panelLoginExistingUser.addTextCentre(t-66,e-10,"Password:",4,!1),this.controlLoginPassword=this.panelLoginExistingUser.addTextInput(t-66,e+10,200,40,4,20,!0,!1),e-=55,this.panelLoginExistingUser.addButtonBackground(t+154,e,120,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"Ok",4,!1),this.controlLoginOk=this.panelLoginExistingUser.addButton(t+154,e,120,25),e+=30,this.panelLoginExistingUser.addButtonBackground(t+154,e,120,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"Cancel",4,!1),this.controlLoginCancel=this.panelLoginExistingUser.addButton(t+154,e,120,25),this.options.accountManagement&&(e+=30,this.panelLoginExistingUser.addButtonBackground(t+154,e,160,25),this.panelLoginExistingUser.addTextCentre(t+154,e,"I've lost my password",4,!1),this.controlLoginRecover=this.panelLoginExistingUser.addButton(t+154,e,160,25))},drawLoginScreens:function(){let t;if(this.welcomScreenAlreadyShown=!1,this.surface.interlace=!1,this.surface.blackScreen(),t=this.options.accountManagement?0===this.loginScreen||2===this.loginScreen:this.loginScreen>=0&&this.loginScreen<=3){const t=2*this.loginTimer%3072;t<1024?(this.surface._drawSprite_from3(0,10,this.spriteLogo),t>768&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteLogo+1,t-768)):t<2048?(this.surface._drawSprite_from3(0,10,this.spriteLogo+1),t>1792&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteMedia+10,t-1792)):(this.surface._drawSprite_from3(0,10,this.spriteMedia+10),t>2816&&this.surface._drawSpriteAlpha_from4(0,10,this.spriteLogo,t-2816))}0===this.loginScreen?this.panelLoginWelcome.drawPanel():1===this.loginScreen?this.panelLoginNewUser.drawPanel():2===this.loginScreen&&this.panelLoginExistingUser.drawPanel(),this.surface._drawSprite_from3(0,this.gameHeight-4,this.spriteMedia+22),this.surface.draw(this.graphics,0,0)},handleLoginScreenInput:async function(){if(this.worldFullTimeout>0&&this.worldFullTimeout--,0===this.loginScreen){if(this.panelLoginWelcome.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelLoginWelcome.isClicked(this.controlWelcomeNewUser)&&(this.loginScreen=1,this.options.accountManagement&&(this.panelLoginNewUser.updateText(this.controlRegisterUser,""),this.panelLoginNewUser.updateText(this.controlRegisterPassword,""),this.panelLoginNewUser.updateText(this.controlRegisterConfirmPassword,""),this.panelLoginNewUser.setFocus(this.controlRegisterUser),this.panelLoginNewUser.toggleCheckbox(this.controlRegisterCheckbox,!1),this.panelLoginNewUser.updateText(this.controlRegisterStatus,"To create an account please enter all the requested details"))),this.panelLoginWelcome.isClicked(this.controlWelcomeExistingUser))return this.loginScreen=2,this.panelLoginExistingUser.updateText(this.controlLoginStatus,"Please enter your username and password"),this.panelLoginExistingUser.updateText(this.controlLoginUser,""),this.panelLoginExistingUser.updateText(this.controlLoginPassword,""),void this.panelLoginExistingUser.setFocus(this.controlLoginUser)}else if(1===this.loginScreen)if(this.panelLoginNewUser.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.options.accountManagement){if(this.options.mobile&&1===this.lastMouseButtonDown&&this.mouseX>=74&&this.mouseX<=474&&this.mouseY>=188&&this.mouseY<=216)return this.panelLoginNewUser.toggleCheckbox(this.controlRegisterCheckbox,!this.panelLoginNewUser.isActivated(this.controlRegisterCheckbox)),void(this.lastMouseButtonDown=0);if(this.panelLoginNewUser.isClicked(this.controlRegisterCancel))return void(this.loginScreen=0);if(this.panelLoginNewUser.isClicked(this.controlRegisterUser))return void this.panelLoginNewUser.setFocus(this.controlRegisterPassword);if(this.panelLoginNewUser.isClicked(this.controlRegisterPassword))return void this.panelLoginNewUser.setFocus(this.controlRegisterConfirmPassword);if(this.panelLoginNewUser.isClicked(this.controlRegisterConfirmPassword)||this.panelLoginNewUser.isClicked(this.controlRegisterSubmit)){const t=this.panelLoginNewUser.getText(this.controlRegisterUser),e=this.panelLoginNewUser.getText(this.controlRegisterPassword),i=this.panelLoginNewUser.getText(this.controlRegisterConfirmPassword);if(!t||0===t.length||!e||0===e.length||!i||0===i.length)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@Please fill in ALL requested information to continue!");if(e!==i)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@The two passwords entered are not the same as each other!");if(e.length<5)return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@Your password must be at least 5 letters long");if(!this.panelLoginNewUser.isActivated(this.controlRegisterCheckbox))return void this.panelLoginNewUser.updateText(this.controlRegisterStatus,"@yel@You must agree to the terms+conditions to continue");this.panelLoginNewUser.updateText(this.controlRegisterStatus,"Please wait... Creating new account"),this.drawLoginScreens(),this.resetTimings(),this.registerUser=this.panelLoginNewUser.getText(this.controlRegisterUser),this.registerPassword=this.panelLoginNewUser.getText(this.controlRegisterPassword),await this.register(this.registerUser,this.registerPassword)}}else this.panelLoginNewUser.isClicked(this.controlLoginNewOK)&&(this.loginScreen=0);else if(2===this.loginScreen)if(this.panelLoginExistingUser.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelLoginExistingUser.isClicked(this.controlLoginCancel))this.loginScreen=0;else if(this.panelLoginExistingUser.isClicked(this.controlLoginUser))this.panelLoginExistingUser.setFocus(this.controlLoginPassword);else if(this.panelLoginExistingUser.isClicked(this.controlLoginPassword)||this.panelLoginExistingUser.isClicked(this.controlLoginOk))this.loginUser=this.panelLoginExistingUser.getText(this.controlLoginUser),this.loginPass=this.panelLoginExistingUser.getText(this.controlLoginPassword),await this.login(this.loginUser,this.loginPass,!1);else if(this.panelLoginExistingUser.isClicked(this.controlLoginRecover)){if(this.loginUser=this.panelLoginExistingUser.getText(this.controlLoginUser),0===this.loginUser.trim().length)return void this.showLoginScreenStatus("You must enter your username to recover your password","");await this.recoverAttempt(this.loginUser)}},renderLoginScreenViewports:function(){this.world._loadSection_from3(2423,2423,0),this.world.addModels(this.gameModels);let t=9728,e=6400,i=1100,r=888;this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,n,this.gameWidth,8);this.surface.drawBox(0,194,512,20,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,194-n,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteLogo,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteLogo),t=9216,e=9216,i=1100,r=888,this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,n,this.gameWidth,8);this.surface.drawBox(0,194,this.gameWidth,20,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,194-n,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteLogo+1,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteLogo+1);for(let n=0;n<64;n++)this.scene.removeModel(this.world.roofModels[0][n]),this.scene.removeModel(this.world.wallModels[1][n]),this.scene.removeModel(this.world.roofModels[1][n]),this.scene.removeModel(this.world.wallModels[2][n]),this.scene.removeModel(this.world.roofModels[2][n]);t=11136,e=10368,i=500,r=376,this.scene.clipFar3d=4100,this.scene.clipFar2d=4100,this.scene.fogZFalloff=1,this.scene.fogZDistance=4e3,this.surface.blackScreen(),this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,r,0,2*i),this.scene.render(),this.surface.fadeToBlack(),this.surface.fadeToBlack(),this.surface.drawBox(0,0,this.gameWidth,6,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,n,this.gameWidth,8);this.surface.drawBox(0,194,this.gameWidth,20,0);for(let n=6;n>=1;n--)this.surface.drawLineAlpha(0,n,0,194,this.gameWidth,8);this.surface._drawSprite_from3((this.gameWidth/2|0)-(this.surface.spriteWidth[this.spriteMedia+10]/2|0),15,this.spriteMedia+10),this.surface._drawSprite_from5(this.spriteMedia+10,0,0,this.gameWidth,200),this.surface.drawWorld(this.spriteMedia+10)}}})),$=t((function(t,e){const i=it({});t.exports={drawUiTabInventory:function(t){let e=this.gameWidth-245-3,r=36;this.options.mobile?(e-=32,r=this.gameHeight/2-102):this.surface._drawSprite_from3(this.gameWidth-245-3,3,this.spriteMedia+1),this.uiOpenX=e,this.uiOpenY=r,this.uiOpenWidth=245,this.uiOpenHeight=204;for(let o=0;o<this.inventoryMaxItemCount;o++){const t=e+o%5*49,n=r+34*(o/5|0);if(o<this.inventoryItemsCount&&1===this.inventoryEquipped[o]?this.surface.drawBoxAlpha(t,n,49,34,i.red,128):this.surface.drawBoxAlpha(t,n,49,34,i.darkGrey,128),o<this.inventoryItemsCount){const e=this.spriteItem+Np.itemPicture[this.inventoryItemId[o]],r=Np.itemMask[this.inventoryItemId[o]];this.surface._spriteClipping_from9(t,n,49,32,e,r,0,0,!1),0===Np.itemStackable[this.inventoryItemId[o]]&&this.surface.drawString(this.inventoryItemStackCount[o].toString(),t+1,n+10,1,i.yellow)}}for(let o=1;o<=4;o++)this.surface.drawLineVert(e+49*o,r,34*(this.inventoryMaxItemCount/5|0),i.black);for(let o=1;o<=(this.inventoryMaxItemCount/5|0)-1;o++)this.surface.drawLineHoriz(e,r+34*o,245,i.black);if(!t)return;const n=this.mouseX-e,s=this.mouseY-r;if(n>=0&&s>=0&&n<245&&s<34*(this.inventoryMaxItemCount/5|0)){const t=(n/49|0)+5*(s/34|0);if(t<this.inventoryItemsCount){const e=this.inventoryItemId[t],i="@lre@"+Np.itemName[e];if(this.selectedSpell>=0){if(3===Np.spellType[this.selectedSpell])return this.menuItemText1[this.menuItemsCount]=`Cast ${Np.spellName[this.selectedSpell]} on`,this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=600,this.menuIndex[this.menuItemsCount]=t,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,void this.menuItemsCount++}else{if(this.selectedItemInventoryIndex>=0)return this.menuItemText1[this.menuItemsCount]=`Use ${this.selectedItemName} with:`,this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=610,this.menuIndex[this.menuItemsCount]=t,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,void this.menuItemsCount++;1===this.inventoryEquipped[t]?(this.menuItemText1[this.menuItemsCount]="Remove",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=620,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++):0!==Np.itemWearable[e]&&(0!=(24&Np.itemWearable[e])?this.menuItemText1[this.menuItemsCount]="Wield":this.menuItemText1[this.menuItemsCount]="Wear",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=630,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++),""!==Np.itemCommand[e]&&(this.menuItemText1[this.menuItemsCount]=Np.itemCommand[e],this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=640,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Use",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=650,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Drop",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=660,this.menuIndex[this.menuItemsCount]=t,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]=i,this.menuType[this.menuItemsCount]=3600,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++}}}}}})),J=t((function(t,e){const i=it({}),r=["Controlled (+1 of each)","Aggressive (+3 strength)","Accurate (+3 attack)","Defensive (+3 defense)"],n=20*(r.length+1);t.exports={combatStyle:0,drawDialogCombatStyle:function(){let t=7,e=15;if(this.options.mobile&&(t=48,e=this.gameHeight/2-n/2|0),0!==this.mouseButtonClick)for(let i=0;i<r.length+1;i++)if(!(i<=0||this.mouseX<=t||this.mouseX>=t+175||this.mouseY<=e+20*i||this.mouseY>=e+20*i+20)){this.combatStyle=i-1,this.mouseButtonClick=0,this.packetStream.newPacket(Bp.COMBAT_STYLE),this.packetStream.putByte(this.combatStyle),this.packetStream.sendPacket();break}for(let n=0;n<r.length+1;n++){const r=n===this.combatStyle+1?i.red:12500670;this.surface.drawBoxAlpha(t,e+20*n,175,20,r,128),this.surface.drawLineHoriz(t,e+20*n,175,i.black),this.surface.drawLineHoriz(t,e+20*n+20,175,i.black)}let s=16;this.surface.drawStringCenter("Select combat style",t+87,e+s,3,i.white),s+=20;for(const n of r)this.surface.drawStringCenter(n,t+87,e+s,3,i.black),s+=20}}})),Q=t((function(t,e){const i=it({});t.exports={createMessageTabPanel:function(){this.panelMessageTabs=new Gp(this.surface,10);let t=269;this.options.mobile&&(t=15),this.controlTextListAll=this.panelMessageTabs.addTextListInput(7,t+55+(this.options.mobile?12:0),498,14,1,80,!1,!0),this.controlTextListChat=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.controlTextListQuest=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.controlTextListPrivate=this.panelMessageTabs.addTextList(5,t,502,56,1,20,!0),this.options.mobile||this.panelMessageTabs.setFocus(this.controlTextListAll)},drawChatMessageTabs:function(){const t=this.gameWidth/2-256|0;let e=this.gameHeight-4;this.options.mobile?(e=8,this.surface.drawMinimapSprite(t+256-103,e,this.spriteMedia+23,128,128),this.surface.drawMinimapSprite(t+256+404,e,this.spriteMedia+23,128,128),e=10):(this.surface._drawSprite_from3(t,e,this.spriteMedia+23),e=this.gameHeight+6);let r=i.chatPurple;0===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashAll%30>15&&(r=i.chatRed),this.surface.drawStringCenter("All messages",t+54,e,0,r),r=i.chatPurple,1===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashHistory%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Chat history",t+155,e,0,r),r=i.chatPurple,2===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashQuest%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Quest history",t+255,e,0,r),r=i.chatPurple,3===this.messageTabSelected&&(r=i.chatOrange),this.messageTabFlashPrivate%30>15&&(r=i.chatRed),this.surface.drawStringCenter("Private history",t+355,e,0,r),this.surface.drawStringCenter("Report abuse",t+457,e,0,i.white)},handleMesssageTabsInput:async function(){const t=this.gameWidth/2-256|0,e=this.mouseX-t;if((this.options.mobile&&this.mouseY<15||!this.options.mobile&&this.mouseY>this.gameHeight-4)&&(e>15&&e<96&&1===this.lastMouseButtonDown&&(this.messageTabSelected=0),e>110&&e<194&&1===this.lastMouseButtonDown&&(this.messageTabSelected=1,this.panelMessageTabs.controlFlashText[this.controlTextListChat]=999999),e>215&&e<295&&1===this.lastMouseButtonDown&&(this.messageTabSelected=2,this.panelMessageTabs.controlFlashText[this.controlTextListQuest]=999999),e>315&&e<395&&1===this.lastMouseButtonDown&&(this.messageTabSelected=3,this.panelMessageTabs.controlFlashText[this.controlTextListPrivate]=999999),e>417&&e<497&&1===this.lastMouseButtonDown&&(this.showDialogReportAbuseStep=1,this.reportAbuseOffence=0,this.inputTextCurrent="",this.inputTextFinal=""),this.lastMouseButtonDown=0,this.mouseButtonDown=0),this.options.mobile&&this.mouseY>=72||this.panelMessageTabs.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown,this.mouseScrollDelta),this.options.mobile&&this.lastMouseButtonDown&&(this.panelMessageTabs.controlText[this.controlTextListAll].length||(this.panelMessageTabs.focusControlIndex=-1)),this.options.mobile&&this.lastMouseButtonDown&&this.showUITab<3&&this.mouseX<=108&&this.mouseY>=72&&this.mouseY<=98&&(this.panelMessageTabs.setFocus(this.controlTextListAll),this.lastMouseButtonDown=0),this.messageTabSelected>0&&this.mouseX>=494&&this.mouseY>=this.gameHeight-66&&(this.lastMouseButtonDown=0),this.panelMessageTabs.isClicked(this.controlTextListAll)){let t=this.panelMessageTabs.getText(this.controlTextListAll);if(this.panelMessageTabs.updateText(this.controlTextListAll,""),this.options.mobile&&(this.panelMessageTabs.focusControlIndex=-1),/^::/.test(t))/^::closecon$/i.test(t)?this.packetStream.closeStream():/^::logout/i.test(t)?this.closeConnection():/^::lostcon$/i.test(t)?await this.lostConnection():this.sendCommandString(t.substring(2));else{const e=Fm.scramble(t);this.sendChatMessage(Fm.scrambledBytes,e),t=Fm.descramble(Fm.scrambledBytes,0,e),this.options.wordFilter&&(t=wm.filter(t)),this.localPlayer.messageTimeout=150,this.localPlayer.message=t,this.showMessage(`${this.localPlayer.name}: ${t}`,2)}}if(0===this.messageTabSelected)for(let i=0;i<5;i++)this.messageHistoryTimeout[i]>0&&this.messageHistoryTimeout[i]--},drawChatMessageTabsPanel:function(){if(0===this.messageTabSelected){let t=this.gameHeight-18;this.options.mobile&&(t=74);for(let e=0;e<5;e++)this.messageHistoryTimeout[e]<=0||this.surface.drawString(this.messageHistory[e],7,t-12*e,1,i.yellow)}this.options.mobile&&-1===this.panelMessageTabs.focusControlIndex&&this.surface.drawString("[Tap here to chat]",6,88,2,i.white),this.panelMessageTabs.hide(this.controlTextListChat),this.panelMessageTabs.hide(this.controlTextListQuest),this.panelMessageTabs.hide(this.controlTextListPrivate),1===this.messageTabSelected?this.panelMessageTabs.show(this.controlTextListChat):2===this.messageTabSelected?this.panelMessageTabs.show(this.controlTextListQuest):3===this.messageTabSelected&&this.panelMessageTabs.show(this.controlTextListPrivate),Gp.textListEntryHeightMod=2,this.panelMessageTabs.drawPanel(),Gp.textListEntryHeightMod=0}}})),tt=t((function(t,e){const i=it({});t.exports={bankActivePage:0,drawDialogBank:function(){if(this.bankActivePage>0&&this.bankItemCount<=48&&(this.bankActivePage=0),this.bankActivePage>1&&this.bankItemCount<=96&&(this.bankActivePage=1),this.bankActivePage>2&&this.bankItemCount<=144&&(this.bankActivePage=2),(this.bankSelectedItemSlot>=this.bankItemCount||this.bankSelectedItemSlot<0)&&(this.bankSelectedItemSlot=-1),-1!==this.bankSelectedItemSlot&&this.bankItems[this.bankSelectedItemSlot]!==this.bankSelectedItem&&(this.bankSelectedItemSlot=-1,this.bankSelectedItem=-2),0!==this.mouseButtonClick){this.mouseButtonClick=0;let t=this.mouseX-((this.gameWidth/2|0)-204),e=this.mouseY-((this.gameHeight/2|0)-167);if(t>=0&&e>=12&&t<408&&e<280){let i=48*this.bankActivePage;for(let n=0;n<6;n++)for(let r=0;r<8;r++){const s=7+49*r,o=28+34*n;t>s&&t<s+49&&e>o&&e<o+34&&i<this.bankItemCount&&-1!==this.bankItems[i]&&(this.bankSelectedItem=this.bankItems[i],this.bankSelectedItemSlot=i),i++}t=52,e=3;let r=0;if(-1!==(r=this.bankSelectedItemSlot<0?-1:this.bankItems[this.bankSelectedItemSlot])){let i=this.bankItemsCount[this.bankSelectedItemSlot];1===Np.itemStackable[r]&&i>1&&(i=1),i>=1&&this.mouseX>=t+220&&this.mouseY>=e+238&&this.mouseX<t+250&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(1),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=5&&this.mouseX>=t+250&&this.mouseY>=e+238&&this.mouseX<t+280&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(5),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=25&&this.mouseX>=t+280&&this.mouseY>=e+238&&this.mouseX<t+305&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(25),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=100&&this.mouseX>=t+305&&this.mouseY>=e+238&&this.mouseX<t+335&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(100),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=500&&this.mouseX>=t+335&&this.mouseY>=e+238&&this.mouseX<t+368&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(500),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),i>=2500&&this.mouseX>=t+370&&this.mouseY>=e+238&&this.mouseX<t+400&&this.mouseY<=e+249&&(this.packetStream.newPacket(Bp.BANK_WITHDRAW),this.packetStream.putShort(r),this.packetStream.putShort(2500),this.packetStream.putInt(305419896),this.packetStream.sendPacket()),this.getInventoryCount(r)>=1&&this.mouseX>=t+220&&this.mouseY>=e+263&&this.mouseX<t+250&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(1),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=5&&this.mouseX>=t+250&&this.mouseY>=e+263&&this.mouseX<t+280&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(5),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=25&&this.mouseX>=t+280&&this.mouseY>=e+263&&this.mouseX<t+305&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(25),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=100&&this.mouseX>=t+305&&this.mouseY>=e+263&&this.mouseX<t+335&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(100),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=500&&this.mouseX>=t+335&&this.mouseY>=e+263&&this.mouseX<t+368&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(500),this.packetStream.putInt(2271560481),this.packetStream.sendPacket()),this.getInventoryCount(r)>=2500&&this.mouseX>=t+370&&this.mouseY>=e+263&&this.mouseX<t+400&&this.mouseY<=e+274&&(this.packetStream.newPacket(Bp.BANK_DEPOSIT),this.packetStream.putShort(r),this.packetStream.putShort(2500),this.packetStream.putInt(2271560481),this.packetStream.sendPacket())}}else if(this.bankItemCount>48&&t>=50&&t<=115&&e<=12)this.bankActivePage=0;else if(this.bankItemCount>48&&t>=115&&t<=180&&e<=12)this.bankActivePage=1;else if(this.bankItemCount>96&&t>=180&&t<=245&&e<=12)this.bankActivePage=2;else{if(!(this.bankItemCount>144&&t>=245&&t<=310&&e<=12))return this.packetStream.newPacket(Bp.BANK_CLOSE),this.packetStream.sendPacket(),void(this.showDialogBank=!1);this.bankActivePage=3}}const t=(this.gameWidth/2|0)-204,e=(this.gameHeight/2|0)-167;this.surface.drawBox(t,e,408,12,192),this.surface.drawBoxAlpha(t,e+12,408,17,i.grey,160),this.surface.drawBoxAlpha(t,e+29,8,204,i.grey,160),this.surface.drawBoxAlpha(t+399,e+29,9,204,i.grey,160),this.surface.drawBoxAlpha(t,e+233,408,47,i.grey,160),this.surface.drawString("Bank",t+1,e+10,1,i.white);let r=50;if(this.bankItemCount>48){let n=i.white;0===this.bankActivePage?n=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(n=i.yellow),this.surface.drawString("<page 1>",t+r,e+10,1,n),r+=65,n=i.white,1===this.bankActivePage?n=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(n=i.yellow),this.surface.drawString("<page 2>",t+r,e+10,1,n),r+=65}if(this.bankItemCount>96){let n=i.white;2===this.bankActivePage?n=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(n=i.yellow),this.surface.drawString("<page 3>",t+r,e+10,1,n),r+=65}if(this.bankItemCount>144){let n=i.white;3===this.bankActivePage?n=i.red:this.mouseX>t+r&&this.mouseY>=e&&this.mouseX<t+r+65&&this.mouseY<e+12&&(n=i.yellow),this.surface.drawString("<page 4>",t+r,e+10,1,n),r+=65}let n=i.white;this.mouseX>t+320&&this.mouseY>=e&&this.mouseX<t+408&&this.mouseY<e+12&&(n=i.red),this.surface.drawStringRight("Close window",t+406,e+10,1,n),this.surface.drawString("Number in bank in green",t+7,e+24,1,i.green),this.surface.drawString("Number held in blue",t+289,e+24,1,i.cyan);let s=48*this.bankActivePage;for(let h=0;h<6;h++)for(let r=0;r<8;r++){const n=t+7+49*r,o=e+28+34*h;this.bankSelectedItemSlot===s?this.surface.drawBoxAlpha(n,o,49,34,i.red,160):this.surface.drawBoxAlpha(n,o,49,34,i.lightGrey2,160),this.surface.drawBoxEdge(n,o,50,35,0),s<this.bankItemCount&&-1!==this.bankItems[s]&&(this.surface._spriteClipping_from9(n,o,48,32,this.spriteItem+Np.itemPicture[this.bankItems[s]],Np.itemMask[this.bankItems[s]],0,0,!1),this.surface.drawString(this.bankItemsCount[s].toString(),n+1,o+10,1,i.green),this.surface.drawStringRight(this.getInventoryCount(this.bankItems[s]).toString(),n+47,o+29,1,i.cyan)),s++}if(this.surface.drawLineHoriz(t+5,e+256,398,0),-1===this.bankSelectedItemSlot)return void this.surface.drawStringCenter("Select an object to withdraw or deposit",t+204,e+248,3,i.yellow);let o=0;if(-1!==(o=this.bankSelectedItemSlot<0?-1:this.bankItems[this.bankSelectedItemSlot])){let r=this.bankItemsCount[this.bankSelectedItemSlot];1===Np.itemStackable[o]&&r>1&&(r=1),r>0&&(this.surface.drawString("Withdraw "+Np.itemName[o],t+2,e+248,1,i.white),n=i.white,this.mouseX>=t+220&&this.mouseY>=e+238&&this.mouseX<t+250&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("One",t+222,e+248,1,n),r>=5&&(n=i.white,this.mouseX>=t+250&&this.mouseY>=e+238&&this.mouseX<t+280&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("Five",t+252,e+248,1,n)),r>=25&&(n=i.white,this.mouseX>=t+280&&this.mouseY>=e+238&&this.mouseX<t+305&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("25",t+282,e+248,1,n)),r>=100&&(n=i.white,this.mouseX>=t+305&&this.mouseY>=e+238&&this.mouseX<t+335&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("100",t+307,e+248,1,n)),r>=500&&(n=i.white,this.mouseX>=t+335&&this.mouseY>=e+238&&this.mouseX<t+368&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("500",t+337,e+248,1,n)),r>=2500&&(n=i.white,this.mouseX>=t+370&&this.mouseY>=e+238&&this.mouseX<t+400&&this.mouseY<=e+249&&(n=i.red),this.surface.drawString("2500",t+370,e+248,1,n))),this.getInventoryCount(o)>0&&(this.surface.drawString("Deposit "+Np.itemName[o],t+2,e+273,1,i.white),n=i.white,this.mouseX>=t+220&&this.mouseY>=e+263&&this.mouseX<t+250&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("One",t+222,e+273,1,n),this.getInventoryCount(o)>=5&&(n=i.white,this.mouseX>=t+250&&this.mouseY>=e+263&&this.mouseX<t+280&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("Five",t+252,e+273,1,n)),this.getInventoryCount(o)>=25&&(n=i.white,this.mouseX>=t+280&&this.mouseY>=e+263&&this.mouseX<t+305&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("25",t+282,e+273,1,n)),this.getInventoryCount(o)>=100&&(n=i.white,this.mouseX>=t+305&&this.mouseY>=e+263&&this.mouseX<t+335&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("100",t+307,e+273,1,n)),this.getInventoryCount(o)>=500&&(n=i.white,this.mouseX>=t+335&&this.mouseY>=e+263&&this.mouseX<t+368&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("500",t+337,e+273,1,n)),this.getInventoryCount(o)>=2500&&(n=i.white,this.mouseX>=t+370&&this.mouseY>=e+263&&this.mouseX<t+400&&this.mouseY<=e+274&&(n=i.red),this.surface.drawString("2500",t+370,e+273,1,n)))}}}})),et=t((function(t,e){function i(t,e,i,r){t.addBoxRounded(i,r,53,41);const n=e.split("\n");1===n.length?t.addTextCentre(i,r,e,1,!0):(t.addTextCentre(i,r-8,n[0],1,!0),t.addTextCentre(i,r+8,n[1],1,!0));const s=t.addButton(i-40,r,20,20);t.addSprite(i-40,r,Gp.baseSpriteStart+7);const o=t.addButton(i+40,r,20,20);return t.addSprite(i+40,r,Gp.baseSpriteStart+6),{leftButton:s,rightButton:o}}t.exports={createAppearancePanel:function(){this.panelAppearance=new Gp(this.surface,100);const t=256;this.panelAppearance.addTextCentre(t,10,"Please design Your Character",4,!0);let e=24;this.panelAppearance.addTextCentre(201,e+110,"Front",3,!0),this.panelAppearance.addTextCentre(t,e+110,"Side",3,!0),this.panelAppearance.addTextCentre(311,e+110,"Back",3,!0),e+=145;const{leftButton:r,rightButton:n}=i(this.panelAppearance,"Head\nType",202,e);this.controlButtonAppearanceHeadLeft=r,this.controlButtonAppearanceHeadRight=n;const{leftButton:s,rightButton:o}=i(this.panelAppearance,"Hair\nColor",310,e);this.controlButtonAppearanceHairLeft=s,this.controlButtonAppearanceHairRight=o,e+=50;const{leftButton:h,rightButton:a}=i(this.panelAppearance,"Gender",202,e);this.controlButtonAppearanceGenderLeft=h,this.controlButtonAppearanceGenderRight=a;const{leftButton:u,rightButton:l}=i(this.panelAppearance,"Top\nColor",310,e);this.controlButtonAppearanceTopLeft=u,this.controlButtonAppearanceTopRight=l,e+=50;const{leftButton:c,rightButton:f}=i(this.panelAppearance,"Skin\nColor",202,e);this.controlButtonAppearanceSkinLeft=c,this.controlButtonAppearanceSkinRight=f;const{leftButton:d,rightButton:p}=i(this.panelAppearance,"Bottom\nColor",310,e);this.controlButtonAppearanceBottomLeft=d,this.controlButtonAppearanceBottomRight=p,e+=47,this.panelAppearance.addButtonBackground(t,e,200,30),this.panelAppearance.addTextCentre(t,e,"Accept",4,!1),this.controlButtonAppearanceAccept=this.panelAppearance.addButton(t,e,200,30)},handleAppearancePanelInput:function(){if(this.panelAppearance.handleMouse(this.mouseX,this.mouseY,this.lastMouseButtonDown,this.mouseButtonDown),this.panelAppearance.isClicked(this.controlButtonAppearanceHeadLeft))do{this.appearanceHeadType=(this.appearanceHeadType-1+Np.animationCount)%Np.animationCount}while(1!=(3&Np.animationGender[this.appearanceHeadType])||0==(Np.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender));if(this.panelAppearance.isClicked(this.controlButtonAppearanceHeadRight))do{this.appearanceHeadType=(this.appearanceHeadType+1)%Np.animationCount}while(1!=(3&Np.animationGender[this.appearanceHeadType])||0==(Np.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender));if(this.panelAppearance.isClicked(this.controlButtonAppearanceHairLeft)&&(this.appearanceHairColour=(this.appearanceHairColour-1+this.characterHairColours.length)%this.characterHairColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceHairRight)&&(this.appearanceHairColour=(this.appearanceHairColour+1)%this.characterHairColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceGenderLeft)||this.panelAppearance.isClicked(this.controlButtonAppearanceGenderRight)){for(this.appearanceHeadGender=3-this.appearanceHeadGender;1!=(3&Np.animationGender[this.appearanceHeadType])||0==(Np.animationGender[this.appearanceHeadType]&4*this.appearanceHeadGender);this.appearanceHeadType=(this.appearanceHeadType+1)%Np.animationCount);for(;2!=(3&Np.animationGender[this.appearanceBodyGender])||0==(Np.animationGender[this.appearanceBodyGender]&4*this.appearanceHeadGender);this.appearanceBodyGender=(this.appearanceBodyGender+1)%Np.animationCount);}this.panelAppearance.isClicked(this.controlButtonAppearanceTopLeft)&&(this.appearanceTopColour=(this.appearanceTopColour-1+this.characterTopBottomColours.length)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceTopRight)&&(this.appearanceTopColour=(this.appearanceTopColour+1)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceSkinLeft)&&(this.appearanceSkinColour=(this.appearanceSkinColour-1+this.characterSkinColours.length)%this.characterSkinColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceSkinRight)&&(this.appearanceSkinColour=(this.appearanceSkinColour+1)%this.characterSkinColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceBottomLeft)&&(this.appearanceBottomColour=(this.appearanceBottomColour-1+this.characterTopBottomColours.length)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceBottomRight)&&(this.appearanceBottomColour=(this.appearanceBottomColour+1)%this.characterTopBottomColours.length),this.panelAppearance.isClicked(this.controlButtonAppearanceAccept)&&(this.packetStream.newPacket(Bp.APPEARANCE),this.packetStream.putByte(this.appearanceHeadGender),this.packetStream.putByte(this.appearanceHeadType),this.packetStream.putByte(this.appearanceBodyGender),this.packetStream.putByte(this.appearance2Colour),this.packetStream.putByte(this.appearanceHairColour),this.packetStream.putByte(this.appearanceTopColour),this.packetStream.putByte(this.appearanceBottomColour),this.packetStream.putByte(this.appearanceSkinColour),this.packetStream.sendPacket(),this.surface.blackScreen(),this.showAppearanceChange=!1)},drawAppearancePanelCharacterSprites:function(){this.surface.interlace=!1,this.surface.blackScreen(),this.panelAppearance.drawPanel();const t=25;this.surface._spriteClipping_from6(169,t,64,102,Np.animationNumber[this.appearance2Colour],this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(169,t,64,102,Np.animationNumber[this.appearanceBodyGender],this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(169,t,64,102,Np.animationNumber[this.appearanceHeadType],this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from6(224,t,64,102,Np.animationNumber[this.appearance2Colour]+6,this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(224,t,64,102,Np.animationNumber[this.appearanceBodyGender]+6,this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(224,t,64,102,Np.animationNumber[this.appearanceHeadType]+6,this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from6(279,t,64,102,Np.animationNumber[this.appearance2Colour]+12,this.characterTopBottomColours[this.appearanceBottomColour]),this.surface._spriteClipping_from9(279,t,64,102,Np.animationNumber[this.appearanceBodyGender]+12,this.characterTopBottomColours[this.appearanceTopColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._spriteClipping_from9(279,t,64,102,Np.animationNumber[this.appearanceHeadType]+12,this.characterHairColours[this.appearanceHairColour],this.characterSkinColours[this.appearanceSkinColour],0,!1),this.surface._drawSprite_from3(0,this.gameHeight,this.spriteMedia+22),this.surface.draw(this.graphics,0,0)}}})),it=t((function(t,e){t.exports={black:0,white:16777215,grey:10000536,darkGrey:11908533,lightGrey:14474460,lightGrey2:13684944,lightGrey3:13224393,red:16711680,yellow:16776960,cyan:65535,green:65280,orange:16744448,chatPurple:13158655,chatOrange:16762930,chatRed:16724530}})),rt=t((function(t,e){(function(e,i){(function(){"use strict";var r;t.exports=M,M.ReadableState=v,nr.EventEmitter;var n,s=function(t,e){return t.listeners(e).length},o=_t({}).Buffer,h=i.Uint8Array||function(){},a=St({});n=a&&a.debuglog?a.debuglog("stream"):function(){};var u,l,c,f=qa.getHighWaterMark,d=Xa.codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_STREAM_PUSH_AFTER_EOF,g=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ir(M,Ba);var b=Ua.errorOrDestroy,w=["error","close","destroy","pause","resume"];function v(t,e,i){r=r||ht({}),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f(this,t,"readableHighWaterMark",i),this.buffer=new Ya,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=wt({}).StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function M(t){if(r=r||ht({}),!(this instanceof M))return new M(t);var e=this instanceof r;this._readableState=new v(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),Ba.call(this)}function S(t,e,i,r,s){n("readableAddChunk",e);var a,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(n("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?C(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}}(t,u);else if(s||(a=function(t,e){var i,r;return r=e,o.isBuffer(r)||r instanceof h||"string"==typeof e||void 0===e||t.objectMode||(i=new p("chunk",["string","Buffer","Uint8Array"],e)),i}(u,e)),a)b(t,a);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=function(t){return o.from(t)}(e)),r)u.endEmitted?b(t,new y):_(t,u,e,!0);else if(u.ended)b(t,new m);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(e=u.decoder.write(e),u.objectMode||0!==e.length?_(t,u,e,!1):T(t,u)):_(t,u,e,!1)}else r||(u.reading=!1,T(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function _(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&C(t)),T(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=Ua.destroy,M.prototype._undestroy=Ua.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=o.from(t,e),e=""),i=!0),S(this,t,e,!1,i)},M.prototype.unshift=function(t){return S(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){u||(u=wt({}).StringDecoder);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var i=t._readableState;n("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(n("emitReadable",i.flowing),i.emittedReadable=!0,e.nextTick(k,t))}function k(t){var e=t._readableState;n("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function T(t,i){i.readingMore||(i.readingMore=!0,e.nextTick(A,t,i))}function A(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(n("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function x(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function E(t){n("readable nexttick read 0"),t.read(0)}function B(t,e){n("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(n("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function P(t){var i=t._readableState;n("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,e.nextTick(O,i,t))}function O(t,e){if(n("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function j(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}M.prototype.read=function(t){n("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return n("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):C(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,s=e.needReadable;return n("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&n("length less than watermark",s=!0),e.ended||e.reading?n("reading or ended",s=!1):s&&(n("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(i,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},M.prototype._read=function(t){b(this,new g("_read()"))},M.prototype.pipe=function(t,i){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,n("pipe count=%d opts=%j",o.pipesCount,i);var h=i&&!1===i.end||t===e.stdout||t===e.stderr?m:a;function a(){n("onend"),t.end()}o.endEmitted?e.nextTick(h):r.once("end",h),t.on("unpipe",(function e(i,s){n("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,n("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",c),l=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=function(t){return function(){var e=t._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",u);var l=!1;function c(e){n("ondata");var i=t.write(e);n("dest.write",i),!1===i&&((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==j(o.pipes,t))&&!l&&(n("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function f(e){n("onerror",e),m(),t.removeListener("error",f),0===s(t,"error")&&b(t,e)}function d(){t.removeListener("finish",p),m()}function p(){n("onfinish"),t.removeListener("close",d),m()}function m(){n("unpipe"),r.unpipe(t)}return r.on("data",c),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener("error",i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on("error",i)}(t,0,f),t.once("close",d),t.once("finish",p),t.emit("pipe",r),o.flowing||(n("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},M.prototype.on=function(t,i){var r=Ba.prototype.on.call(this,t,i),s=this._readableState;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,n("on readable",s.length,s.reading),s.length?C(this):s.reading||e.nextTick(E,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,i){var r=Ba.prototype.removeListener.call(this,t,i);return"readable"===t&&e.nextTick(x,this),r},M.prototype.removeAllListeners=function(t){var i=Ba.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(x,this),i},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(n("resume"),t.flowing=!t.readableListening,function(t,i){i.resumeScheduled||(i.resumeScheduled=!0,e.nextTick(B,t,i))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var s in t.on("end",(function(){if(n("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){n("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||(i.objectMode||s&&s.length)&&(e.push(s)||(r=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var o=0;o<w.length;o++)t.on(w[o],this.emit.bind(this,w[o]));return this._read=function(e){n("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=st({})),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=R,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(t,e){return void 0===c&&(c=nt({})),c(M,t,e)})}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),nt=t((function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),st=t((function(t,e){(function(e){(function(){"use strict";var i;function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=ot({}),s=Symbol("lastResolve"),o=Symbol("lastReject"),h=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e=t[s];if(null!==e){var i=t[c].read();null!==i&&(t[u]=null,t[s]=null,t[o]=null,e(f(i,!1)))}}var p=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((r(i={get stream(){return this[c]},next:function(){var t=this,i=this[h];if(null!==i)return Promise.reject(i);if(this[a])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise((function(i,r){e.nextTick((function(){t[h]?r(t[h]):i(f(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(t,e){return function(i,r){t.then((function(){e[a]?i(f(void 0,!0)):e[l](i,r)}),r)}}(n,this));else{var s=this[c].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[l])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var t=this;return new Promise((function(e,i){t[c].destroy(null,(function(t){t?i(t):e(f(void 0,!0))}))}))})),i),p);t.exports=function(t){var i,p=Object.create(m,(r(i={},c,{value:t,writable:!0}),r(i,s,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,h,{value:null,writable:!0}),r(i,a,{value:t._readableState.endEmitted,writable:!0}),r(i,l,{value:function(t,e){var i=p[c].read();i?(p[u]=null,p[s]=null,p[o]=null,t(f(i,!1))):(p[s]=t,p[o]=e)},writable:!0}),i));return p[u]=null,n(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=p[o];return null!==e&&(p[u]=null,p[s]=null,p[o]=null,e(t)),void(p[h]=t)}var i=p[s];null!==i&&(p[u]=null,p[s]=null,p[o]=null,i(f(void 0,!0))),p[a]=!0})),t.on("readable",function(t){e.nextTick(d,t)}.bind(null,p)),p}}).call(this)}).call(this,we)})),ot=t((function(t,e){"use strict";var i=Xa.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function t(e,n,s){if("function"==typeof n)return t(e,null,n);n||(n={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(s||r);var o=n.readable||!1!==n.readable&&e.readable,h=n.writable||!1!==n.writable&&e.writable,a=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){h=!1,u=!0,o||s.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){o=!1,c=!0,h||s.call(e)},d=function(t){s.call(e,t)},p=function(){var t;return o&&!c?(e._readableState&&e._readableState.ended||(t=new i),s.call(e,t)):h&&!u?(e._writableState&&e._writableState.ended||(t=new i),s.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?m():e.on("request",m)):h&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",f),e.on("finish",l),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}})),ht=t((function(t,e){(function(e){(function(){"use strict";var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=a;var r=rt({}),n=at({});ir(a,r);for(var s=i(n.prototype),o=0;o<s.length;o++){var h=s[o];a.prototype[h]||(a.prototype[h]=n.prototype[h])}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,we)})),at=t((function(t,e){(function(e,i){(function(){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var n;t.exports=S,S.WritableState=M;var s,o={deprecate:Rr},h=_t({}).Buffer,a=i.Uint8Array||function(){},u=qa.getHighWaterMark,l=Xa.codes,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_STREAM_CANNOT_PIPE,m=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,b=l.ERR_UNKNOWN_ENCODING,w=Ua.errorOrDestroy;function v(){}function M(t,i,s){n=n||ht({}),t=t||{},"boolean"!=typeof s&&(s=i instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=u(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,i){var r=t._writableState,n=r.sync,s=r.writecb;if("function"!=typeof s)throw new d;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),i)!function(t,i,r,n,s){--i.pendingcb,r?(e.nextTick(s,n),e.nextTick(A,t,i),t._writableState.errorEmitted=!0,w(t,n)):(s(n),t._writableState.errorEmitted=!0,w(t,n),A(t,i))}(t,r,n,i,s);else{var o=k(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),n?e.nextTick(I,t,r,o,s):I(t,r,o,s)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var e=this instanceof(n=n||ht({}));if(!e&&!s.call(S,this))return new S(t);this._writableState=new M(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),Ba.call(this)}function _(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new m("write")):i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function I(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),A(t,e)}function C(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var h=0,a=!0;i;)s[h]=i,i.isBuf||(a=!1),i=i.next,h+=1;s.allBuffers=a,_(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,l=i.encoding,c=i.callback;if(_(t,e,!1,e.objectMode?1:u.length,u,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(i){e.pendingcb--,i&&w(t,i),e.prefinished=!0,t.emit("prefinish"),A(t,e)}))}function A(t,i){var r=k(i);if(r&&(function(t,i){i.prefinished||i.finalCalled||("function"!=typeof t._final||i.destroyed?(i.prefinished=!0,t.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,e.nextTick(T,t,i)))}(t,i),0===i.pendingcb&&(i.finished=!0,t.emit("finish"),i.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}ir(S,Ba),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!s.call(this,t)||this===S&&t&&t._writableState instanceof M}})):s=function(t){return t instanceof this},S.prototype.pipe=function(){w(this,new p)},S.prototype.write=function(t,i,r){var n,s=this._writableState,o=!1,u=!s.objectMode&&(n=t,h.isBuffer(n)||n instanceof a);return u&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=s.defaultEncoding),"function"!=typeof r&&(r=v),s.ending?function(t,i){var r=new y;w(t,r),e.nextTick(i,r)}(this,r):(u||function(t,i,r,n){var s;return null===r?s=new g:"string"==typeof r||i.objectMode||(s=new c("chunk",["string","Buffer"],r)),!s||(w(t,s),e.nextTick(n,s),!1)}(this,s,t,r))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,r,n,s);return u}(this,s,u,t,i,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,i){i(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,i,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,i=null):"function"==typeof i&&(r=i,i=null),null!=t&&this.write(t,i),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,i,r){i.ending=!0,A(t,i),r&&(i.finished?e.nextTick(r):t.once("finish",r)),i.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=Ua.destroy,S.prototype._undestroy=Ua.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),ut=t((function(t,e){(function(e,i){(function(){"use strict";var r;t.exports=M,M.ReadableState=v,nr.EventEmitter;var n,s=function(t,e){return t.listeners(e).length},o=_t({}).Buffer,h=i.Uint8Array||function(){},a=St({});n=a&&a.debuglog?a.debuglog("stream"):function(){};var u,l,c,f=Hs.getHighWaterMark,d=Ys.codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_STREAM_PUSH_AFTER_EOF,g=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ir(M,xs);var b=Ds.errorOrDestroy,w=["error","close","destroy","pause","resume"];function v(t,e,i){r=r||dt({}),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f(this,t,"readableHighWaterMark",i),this.buffer=new js,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=wt({}).StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function M(t){if(r=r||dt({}),!(this instanceof M))return new M(t);var e=this instanceof r;this._readableState=new v(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),xs.call(this)}function S(t,e,i,r,s){n("readableAddChunk",e);var a,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(n("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?C(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}}(t,u);else if(s||(a=function(t,e){var i,r;return r=e,o.isBuffer(r)||r instanceof h||"string"==typeof e||void 0===e||t.objectMode||(i=new p("chunk",["string","Buffer","Uint8Array"],e)),i}(u,e)),a)b(t,a);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=function(t){return o.from(t)}(e)),r)u.endEmitted?b(t,new y):_(t,u,e,!0);else if(u.ended)b(t,new m);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(e=u.decoder.write(e),u.objectMode||0!==e.length?_(t,u,e,!1):T(t,u)):_(t,u,e,!1)}else r||(u.reading=!1,T(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function _(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&C(t)),T(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=Ds.destroy,M.prototype._undestroy=Ds.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=o.from(t,e),e=""),i=!0),S(this,t,e,!1,i)},M.prototype.unshift=function(t){return S(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){u||(u=wt({}).StringDecoder);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var i=t._readableState;n("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(n("emitReadable",i.flowing),i.emittedReadable=!0,e.nextTick(k,t))}function k(t){var e=t._readableState;n("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function T(t,i){i.readingMore||(i.readingMore=!0,e.nextTick(A,t,i))}function A(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(n("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function x(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function E(t){n("readable nexttick read 0"),t.read(0)}function B(t,e){n("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(n("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function P(t){var i=t._readableState;n("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,e.nextTick(O,i,t))}function O(t,e){if(n("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function j(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}M.prototype.read=function(t){n("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return n("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):C(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,s=e.needReadable;return n("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&n("length less than watermark",s=!0),e.ended||e.reading?n("reading or ended",s=!1):s&&(n("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(i,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},M.prototype._read=function(t){b(this,new g("_read()"))},M.prototype.pipe=function(t,i){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,n("pipe count=%d opts=%j",o.pipesCount,i);var h=i&&!1===i.end||t===e.stdout||t===e.stderr?m:a;function a(){n("onend"),t.end()}o.endEmitted?e.nextTick(h):r.once("end",h),t.on("unpipe",(function e(i,s){n("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,n("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",c),l=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=function(t){return function(){var e=t._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",u);var l=!1;function c(e){n("ondata");var i=t.write(e);n("dest.write",i),!1===i&&((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==j(o.pipes,t))&&!l&&(n("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function f(e){n("onerror",e),m(),t.removeListener("error",f),0===s(t,"error")&&b(t,e)}function d(){t.removeListener("finish",p),m()}function p(){n("onfinish"),t.removeListener("close",d),m()}function m(){n("unpipe"),r.unpipe(t)}return r.on("data",c),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener("error",i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on("error",i)}(t,0,f),t.once("close",d),t.once("finish",p),t.emit("pipe",r),o.flowing||(n("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},M.prototype.on=function(t,i){var r=xs.prototype.on.call(this,t,i),s=this._readableState;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,n("on readable",s.length,s.reading),s.length?C(this):s.reading||e.nextTick(E,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,i){var r=xs.prototype.removeListener.call(this,t,i);return"readable"===t&&e.nextTick(x,this),r},M.prototype.removeAllListeners=function(t){var i=xs.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(x,this),i},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(n("resume"),t.flowing=!t.readableListening,function(t,i){i.resumeScheduled||(i.resumeScheduled=!0,e.nextTick(B,t,i))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var s in t.on("end",(function(){if(n("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){n("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||(i.objectMode||s&&s.length)&&(e.push(s)||(r=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var o=0;o<w.length;o++)t.on(w[o],this.emit.bind(this,w[o]));return this._read=function(e){n("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=ct({})),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=R,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(t,e){return void 0===c&&(c=lt({})),c(M,t,e)})}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),lt=t((function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),ct=t((function(t,e){(function(e){(function(){"use strict";var i;function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=ft({}),s=Symbol("lastResolve"),o=Symbol("lastReject"),h=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e=t[s];if(null!==e){var i=t[c].read();null!==i&&(t[u]=null,t[s]=null,t[o]=null,e(f(i,!1)))}}var p=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((r(i={get stream(){return this[c]},next:function(){var t=this,i=this[h];if(null!==i)return Promise.reject(i);if(this[a])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise((function(i,r){e.nextTick((function(){t[h]?r(t[h]):i(f(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(t,e){return function(i,r){t.then((function(){e[a]?i(f(void 0,!0)):e[l](i,r)}),r)}}(n,this));else{var s=this[c].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[l])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var t=this;return new Promise((function(e,i){t[c].destroy(null,(function(t){t?i(t):e(f(void 0,!0))}))}))})),i),p);t.exports=function(t){var i,p=Object.create(m,(r(i={},c,{value:t,writable:!0}),r(i,s,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,h,{value:null,writable:!0}),r(i,a,{value:t._readableState.endEmitted,writable:!0}),r(i,l,{value:function(t,e){var i=p[c].read();i?(p[u]=null,p[s]=null,p[o]=null,t(f(i,!1))):(p[s]=t,p[o]=e)},writable:!0}),i));return p[u]=null,n(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=p[o];return null!==e&&(p[u]=null,p[s]=null,p[o]=null,e(t)),void(p[h]=t)}var i=p[s];null!==i&&(p[u]=null,p[s]=null,p[o]=null,i(f(void 0,!0))),p[a]=!0})),t.on("readable",function(t){e.nextTick(d,t)}.bind(null,p)),p}}).call(this)}).call(this,we)})),ft=t((function(t,e){"use strict";var i=Ys.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function t(e,n,s){if("function"==typeof n)return t(e,null,n);n||(n={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(s||r);var o=n.readable||!1!==n.readable&&e.readable,h=n.writable||!1!==n.writable&&e.writable,a=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){h=!1,u=!0,o||s.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){o=!1,c=!0,h||s.call(e)},d=function(t){s.call(e,t)},p=function(){var t;return o&&!c?(e._readableState&&e._readableState.ended||(t=new i),s.call(e,t)):h&&!u?(e._writableState&&e._writableState.ended||(t=new i),s.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?m():e.on("request",m)):h&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",f),e.on("finish",l),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}})),dt=t((function(t,e){(function(e){(function(){"use strict";var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=a;var r=ut({}),n=pt({});ir(a,r);for(var s=i(n.prototype),o=0;o<s.length;o++){var h=s[o];a.prototype[h]||(a.prototype[h]=n.prototype[h])}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,we)})),pt=t((function(t,e){(function(e,i){(function(){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var n;t.exports=S,S.WritableState=M;var s,o={deprecate:Rr},h=_t({}).Buffer,a=i.Uint8Array||function(){},u=Hs.getHighWaterMark,l=Ys.codes,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_STREAM_CANNOT_PIPE,m=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,b=l.ERR_UNKNOWN_ENCODING,w=Ds.errorOrDestroy;function v(){}function M(t,i,s){n=n||dt({}),t=t||{},"boolean"!=typeof s&&(s=i instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=u(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,i){var r=t._writableState,n=r.sync,s=r.writecb;if("function"!=typeof s)throw new d;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),i)!function(t,i,r,n,s){--i.pendingcb,r?(e.nextTick(s,n),e.nextTick(A,t,i),t._writableState.errorEmitted=!0,w(t,n)):(s(n),t._writableState.errorEmitted=!0,w(t,n),A(t,i))}(t,r,n,i,s);else{var o=k(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),n?e.nextTick(I,t,r,o,s):I(t,r,o,s)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var e=this instanceof(n=n||dt({}));if(!e&&!s.call(S,this))return new S(t);this._writableState=new M(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),xs.call(this)}function _(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new m("write")):i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function I(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),A(t,e)}function C(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var h=0,a=!0;i;)s[h]=i,i.isBuf||(a=!1),i=i.next,h+=1;s.allBuffers=a,_(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,l=i.encoding,c=i.callback;if(_(t,e,!1,e.objectMode?1:u.length,u,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(i){e.pendingcb--,i&&w(t,i),e.prefinished=!0,t.emit("prefinish"),A(t,e)}))}function A(t,i){var r=k(i);if(r&&(function(t,i){i.prefinished||i.finalCalled||("function"!=typeof t._final||i.destroyed?(i.prefinished=!0,t.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,e.nextTick(T,t,i)))}(t,i),0===i.pendingcb&&(i.finished=!0,t.emit("finish"),i.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}ir(S,xs),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!s.call(this,t)||this===S&&t&&t._writableState instanceof M}})):s=function(t){return t instanceof this},S.prototype.pipe=function(){w(this,new p)},S.prototype.write=function(t,i,r){var n,s=this._writableState,o=!1,u=!s.objectMode&&(n=t,h.isBuffer(n)||n instanceof a);return u&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=s.defaultEncoding),"function"!=typeof r&&(r=v),s.ending?function(t,i){var r=new y;w(t,r),e.nextTick(i,r)}(this,r):(u||function(t,i,r,n){var s;return null===r?s=new g:"string"==typeof r||i.objectMode||(s=new c("chunk",["string","Buffer"],r)),!s||(w(t,s),e.nextTick(n,s),!1)}(this,s,t,r))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,r,n,s);return u}(this,s,u,t,i,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,i){i(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,i,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,i=null):"function"==typeof i&&(r=i,i=null),null!=t&&this.write(t,i),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,i,r){i.ending=!0,A(t,i),r&&(i.finished?e.nextTick(r):t.once("finish",r)),i.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=Ds.destroy,S.prototype._undestroy=Ds.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),mt=t((function(t,e){(function(e,i){(function(){"use strict";var r;t.exports=M,M.ReadableState=v,nr.EventEmitter;var n,s=function(t,e){return t.listeners(e).length},o=_t({}).Buffer,h=i.Uint8Array||function(){},a=St({});n=a&&a.debuglog?a.debuglog("stream"):function(){};var u,l,c,f=Lr.getHighWaterMark,d=Tr.codes,p=d.ERR_INVALID_ARG_TYPE,m=d.ERR_STREAM_PUSH_AFTER_EOF,g=d.ERR_METHOD_NOT_IMPLEMENTED,y=d.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;ir(M,br);var b=kr.errorOrDestroy,w=["error","close","destroy","pause","resume"];function v(t,e,i){r=r||vt({}),t=t||{},"boolean"!=typeof i&&(i=e instanceof r),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f(this,t,"readableHighWaterMark",i),this.buffer=new Cr,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(u||(u=wt({}).StringDecoder),this.decoder=new u(t.encoding),this.encoding=t.encoding)}function M(t){if(r=r||vt({}),!(this instanceof M))return new M(t);var e=this instanceof r;this._readableState=new v(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),br.call(this)}function S(t,e,i,r,s){n("readableAddChunk",e);var a,u=t._readableState;if(null===e)u.reading=!1,function(t,e){if(n("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?C(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,k(t)))}}(t,u);else if(s||(a=function(t,e){var i,r;return r=e,o.isBuffer(r)||r instanceof h||"string"==typeof e||void 0===e||t.objectMode||(i=new p("chunk",["string","Buffer","Uint8Array"],e)),i}(u,e)),a)b(t,a);else if(u.objectMode||e&&e.length>0)if("string"==typeof e||u.objectMode||Object.getPrototypeOf(e)===o.prototype||(e=function(t){return o.from(t)}(e)),r)u.endEmitted?b(t,new y):_(t,u,e,!0);else if(u.ended)b(t,new m);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!i?(e=u.decoder.write(e),u.objectMode||0!==e.length?_(t,u,e,!1):T(t,u)):_(t,u,e,!1)}else r||(u.reading=!1,T(t,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function _(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&C(t)),T(t,e)}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),M.prototype.destroy=kr.destroy,M.prototype._undestroy=kr.undestroy,M.prototype._destroy=function(t,e){e(t)},M.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=o.from(t,e),e=""),i=!0),S(this,t,e,!1,i)},M.prototype.unshift=function(t){return S(this,t,null,!0,!1)},M.prototype.isPaused=function(){return!1===this._readableState.flowing},M.prototype.setEncoding=function(t){u||(u=wt({}).StringDecoder);var e=new u(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};function I(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=1073741824?t=1073741824:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var i=t._readableState;n("emitReadable",i.needReadable,i.emittedReadable),i.needReadable=!1,i.emittedReadable||(n("emitReadable",i.flowing),i.emittedReadable=!0,e.nextTick(k,t))}function k(t){var e=t._readableState;n("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,L(t)}function T(t,i){i.readingMore||(i.readingMore=!0,e.nextTick(A,t,i))}function A(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(n("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function x(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function E(t){n("readable nexttick read 0"),t.read(0)}function B(t,e){n("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),L(t),e.flowing&&!e.reading&&t.read(0)}function L(t){var e=t._readableState;for(n("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function P(t){var i=t._readableState;n("endReadable",i.endEmitted),i.endEmitted||(i.ended=!0,e.nextTick(O,i,t))}function O(t,e){if(n("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function j(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}M.prototype.read=function(t){n("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return n("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?P(this):C(this),null;if(0===(t=I(t,e))&&e.ended)return 0===e.length&&P(this),null;var r,s=e.needReadable;return n("need readable",s),(0===e.length||e.length-t<e.highWaterMark)&&n("length less than watermark",s=!0),e.ended||e.reading?n("reading or ended",s=!1):s&&(n("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=I(i,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&P(this)),null!==r&&this.emit("data",r),r},M.prototype._read=function(t){b(this,new g("_read()"))},M.prototype.pipe=function(t,i){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,n("pipe count=%d opts=%j",o.pipesCount,i);var h=i&&!1===i.end||t===e.stdout||t===e.stderr?m:a;function a(){n("onend"),t.end()}o.endEmitted?e.nextTick(h):r.once("end",h),t.on("unpipe",(function e(i,s){n("onunpipe"),i===r&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,n("cleanup"),t.removeListener("close",d),t.removeListener("finish",p),t.removeListener("drain",u),t.removeListener("error",f),t.removeListener("unpipe",e),r.removeListener("end",a),r.removeListener("end",m),r.removeListener("data",c),l=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||u())}));var u=function(t){return function(){var e=t._readableState;n("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,L(t))}}(r);t.on("drain",u);var l=!1;function c(e){n("ondata");var i=t.write(e);n("dest.write",i),!1===i&&((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==j(o.pipes,t))&&!l&&(n("false write response, pause",o.awaitDrain),o.awaitDrain++),r.pause())}function f(e){n("onerror",e),m(),t.removeListener("error",f),0===s(t,"error")&&b(t,e)}function d(){t.removeListener("finish",p),m()}function p(){n("onfinish"),t.removeListener("close",d),m()}function m(){n("unpipe"),r.unpipe(t)}return r.on("data",c),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener("error",i);t._events&&t._events.error?Array.isArray(t._events.error)?t._events.error.unshift(i):t._events.error=[i,t._events.error]:t.on("error",i)}(t,0,f),t.once("close",d),t.once("finish",p),t.emit("pipe",r),o.flowing||(n("pipe resume"),r.resume()),t},M.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=j(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},M.prototype.on=function(t,i){var r=br.prototype.on.call(this,t,i),s=this._readableState;return"data"===t?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===t&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,n("on readable",s.length,s.reading),s.length?C(this):s.reading||e.nextTick(E,this))),r},M.prototype.addListener=M.prototype.on,M.prototype.removeListener=function(t,i){var r=br.prototype.removeListener.call(this,t,i);return"readable"===t&&e.nextTick(x,this),r},M.prototype.removeAllListeners=function(t){var i=br.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(x,this),i},M.prototype.resume=function(){var t=this._readableState;return t.flowing||(n("resume"),t.flowing=!t.readableListening,function(t,i){i.resumeScheduled||(i.resumeScheduled=!0,e.nextTick(B,t,i))}(this,t)),t.paused=!1,this},M.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},M.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var s in t.on("end",(function(){if(n("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(s){n("wrapped data"),i.decoder&&(s=i.decoder.write(s)),i.objectMode&&null==s||(i.objectMode||s&&s.length)&&(e.push(s)||(r=!0,t.pause()))})),t)void 0===this[s]&&"function"==typeof t[s]&&(this[s]=function(e){return function(){return t[e].apply(t,arguments)}}(s));for(var o=0;o<w.length;o++)t.on(w[o],this.emit.bind(this,w[o]));return this._read=function(e){n("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(M.prototype[Symbol.asyncIterator]=function(){return void 0===l&&(l=yt({})),l(this)}),Object.defineProperty(M.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(M.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(M.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),M._fromList=R,Object.defineProperty(M.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(M.from=function(t,e){return void 0===c&&(c=gt({})),c(M,t,e)})}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),gt=t((function(t,e){t.exports=function(){throw new Error("Readable.from is not available in the browser")}})),yt=t((function(t,e){(function(e){(function(){"use strict";var i;function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=bt({}),s=Symbol("lastResolve"),o=Symbol("lastReject"),h=Symbol("error"),a=Symbol("ended"),u=Symbol("lastPromise"),l=Symbol("handlePromise"),c=Symbol("stream");function f(t,e){return{value:t,done:e}}function d(t){var e=t[s];if(null!==e){var i=t[c].read();null!==i&&(t[u]=null,t[s]=null,t[o]=null,e(f(i,!1)))}}var p=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((r(i={get stream(){return this[c]},next:function(){var t=this,i=this[h];if(null!==i)return Promise.reject(i);if(this[a])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise((function(i,r){e.nextTick((function(){t[h]?r(t[h]):i(f(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(t,e){return function(i,r){t.then((function(){e[a]?i(f(void 0,!0)):e[l](i,r)}),r)}}(n,this));else{var s=this[c].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[l])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),r(i,"return",(function(){var t=this;return new Promise((function(e,i){t[c].destroy(null,(function(t){t?i(t):e(f(void 0,!0))}))}))})),i),p);t.exports=function(t){var i,p=Object.create(m,(r(i={},c,{value:t,writable:!0}),r(i,s,{value:null,writable:!0}),r(i,o,{value:null,writable:!0}),r(i,h,{value:null,writable:!0}),r(i,a,{value:t._readableState.endEmitted,writable:!0}),r(i,l,{value:function(t,e){var i=p[c].read();i?(p[u]=null,p[s]=null,p[o]=null,t(f(i,!1))):(p[s]=t,p[o]=e)},writable:!0}),i));return p[u]=null,n(t,(function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=p[o];return null!==e&&(p[u]=null,p[s]=null,p[o]=null,e(t)),void(p[h]=t)}var i=p[s];null!==i&&(p[u]=null,p[s]=null,p[o]=null,i(f(void 0,!0))),p[a]=!0})),t.on("readable",function(t){e.nextTick(d,t)}.bind(null,p)),p}}).call(this)}).call(this,we)})),bt=t((function(t,e){"use strict";var i=Tr.codes.ERR_STREAM_PREMATURE_CLOSE;function r(){}t.exports=function t(e,n,s){if("function"==typeof n)return t(e,null,n);n||(n={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(s||r);var o=n.readable||!1!==n.readable&&e.readable,h=n.writable||!1!==n.writable&&e.writable,a=function(){e.writable||l()},u=e._writableState&&e._writableState.finished,l=function(){h=!1,u=!0,o||s.call(e)},c=e._readableState&&e._readableState.endEmitted,f=function(){o=!1,c=!0,h||s.call(e)},d=function(t){s.call(e,t)},p=function(){var t;return o&&!c?(e._readableState&&e._readableState.ended||(t=new i),s.call(e,t)):h&&!u?(e._writableState&&e._writableState.ended||(t=new i),s.call(e,t)):void 0},m=function(){e.req.on("finish",l)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",l),e.on("abort",p),e.req?m():e.on("request",m)):h&&!e._writableState&&(e.on("end",a),e.on("close",a)),e.on("end",f),e.on("finish",l),!1!==n.error&&e.on("error",d),e.on("close",p),function(){e.removeListener("complete",l),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",l),e.removeListener("end",a),e.removeListener("close",a),e.removeListener("finish",l),e.removeListener("end",f),e.removeListener("error",d),e.removeListener("close",p)}}})),wt=t((function(t,e){"use strict";var i=Ki.Buffer,r=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===r||!r(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=a,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=u,this.end=l,e=3;break;default:return this.write=c,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,i=function(t,e,i){if(128!=(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function a(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function c(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=n,n.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},n.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},n.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=s(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=s(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=s(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},n.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}})),vt=t((function(t,e){(function(e){(function(){"use strict";var i=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=a;var r=mt({}),n=Mt({});ir(a,r);for(var s=i(n.prototype),o=0;o<s.length;o++){var h=s[o];a.prototype[h]||(a.prototype[h]=n.prototype[h])}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),n.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||e.nextTick(l,this)}function l(t){t.end()}Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})}).call(this)}).call(this,we)})),Mt=t((function(t,e){(function(e,i){(function(){"use strict";function r(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(void 0),r=r.next}e.corkedRequestsFree.next=t}(e,t)}}var n;t.exports=S,S.WritableState=M;var s,o={deprecate:Rr},h=_t({}).Buffer,a=i.Uint8Array||function(){},u=Lr.getHighWaterMark,l=Tr.codes,c=l.ERR_INVALID_ARG_TYPE,f=l.ERR_METHOD_NOT_IMPLEMENTED,d=l.ERR_MULTIPLE_CALLBACK,p=l.ERR_STREAM_CANNOT_PIPE,m=l.ERR_STREAM_DESTROYED,g=l.ERR_STREAM_NULL_VALUES,y=l.ERR_STREAM_WRITE_AFTER_END,b=l.ERR_UNKNOWN_ENCODING,w=kr.errorOrDestroy;function v(){}function M(t,i,s){n=n||vt({}),t=t||{},"boolean"!=typeof s&&(s=i instanceof n),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=u(this,t,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,i){var r=t._writableState,n=r.sync,s=r.writecb;if("function"!=typeof s)throw new d;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),i)!function(t,i,r,n,s){--i.pendingcb,r?(e.nextTick(s,n),e.nextTick(A,t,i),t._writableState.errorEmitted=!0,w(t,n)):(s(n),t._writableState.errorEmitted=!0,w(t,n),A(t,i))}(t,r,n,i,s);else{var o=k(r)||t.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),n?e.nextTick(I,t,r,o,s):I(t,r,o,s)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var e=this instanceof(n=n||vt({}));if(!e&&!s.call(S,this))return new S(t);this._writableState=new M(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),br.call(this)}function _(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new m("write")):i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function I(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),A(t,e)}function C(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var n=e.bufferedRequestCount,s=new Array(n),o=e.corkedRequestsFree;o.entry=i;for(var h=0,a=!0;i;)s[h]=i,i.isBuf||(a=!1),i=i.next,h+=1;s.allBuffers=a,_(t,e,!0,e.length,s,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new r(e),e.bufferedRequestCount=0}else{for(;i;){var u=i.chunk,l=i.encoding,c=i.callback;if(_(t,e,!1,e.objectMode?1:u.length,u,l,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function k(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(i){e.pendingcb--,i&&w(t,i),e.prefinished=!0,t.emit("prefinish"),A(t,e)}))}function A(t,i){var r=k(i);if(r&&(function(t,i){i.prefinished||i.finalCalled||("function"!=typeof t._final||i.destroyed?(i.prefinished=!0,t.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,e.nextTick(T,t,i)))}(t,i),0===i.pendingcb&&(i.finished=!0,t.emit("finish"),i.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}ir(S,br),M.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(M.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(t){return!!s.call(this,t)||this===S&&t&&t._writableState instanceof M}})):s=function(t){return t instanceof this},S.prototype.pipe=function(){w(this,new p)},S.prototype.write=function(t,i,r){var n,s=this._writableState,o=!1,u=!s.objectMode&&(n=t,h.isBuffer(n)||n instanceof a);return u&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"==typeof i&&(r=i,i=null),u?i="buffer":i||(i=s.defaultEncoding),"function"!=typeof r&&(r=v),s.ending?function(t,i){var r=new y;w(t,r),e.nextTick(i,r)}(this,r):(u||function(t,i,r,n){var s;return null===r?s=new g:"string"==typeof r||i.objectMode||(s=new c("chunk",["string","Buffer"],r)),!s||(w(t,s),e.nextTick(n,s),!1)}(this,s,t,r))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=h.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,a,r,n,s);return u}(this,s,u,t,i,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||C(this,t))},S.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new b(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(t,e,i){i(new f("_write()"))},S.prototype._writev=null,S.prototype.end=function(t,i,r){var n=this._writableState;return"function"==typeof t?(r=t,t=null,i=null):"function"==typeof i&&(r=i,i=null),null!=t&&this.write(t,i),n.corked&&(n.corked=1,this.uncork()),n.ending||function(t,i,r){i.ending=!0,A(t,i),r&&(i.finished?e.nextTick(r):t.once("finish",r)),i.ended=!0,t.writable=!1}(this,n,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),S.prototype.destroy=kr.destroy,S.prototype._undestroy=kr.undestroy,S.prototype._destroy=function(t,e){e(t)}}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),St=t((function(t,e){})),_t=t((function(t,e){(function(t){(function(){"use strict";e.Buffer=i,e.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},e.INSPECT_MAX_BYTES=50;function t(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return s(t)}return r(t,e,i)}function r(e,r,n){if("string"==typeof e)return function(e,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|a(e,r),s=t(n),o=s.write(e,r);return o!==n&&(s=s.slice(0,o)),s}(e,r);if(ArrayBuffer.isView(e))return o(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(P(e,ArrayBuffer)||e&&P(e.buffer,ArrayBuffer))return function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r)).__proto__=i.prototype,n}(e,r,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return i.from(s,r,n);var u=function(e){if(i.isBuffer(e)){var r=0|h(e.length),n=t(r);return 0===n.length||e.copy(n,0,0,r),n}return void 0!==e.length?"number"!=typeof e.length||O(e.length)?t(0):o(e):"Buffer"===e.type&&Array.isArray(e.data)?o(e.data):void 0}(e);if(u)return u;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return i.from(e[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function n(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function s(e){return n(e),t(e<0?0:0|h(e))}function o(e){for(var i=e.length<0?0:0|h(e.length),r=t(i),n=0;n<i;n+=1)r[n]=255&e[n];return r}function h(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function a(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||P(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var s=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(t).length;default:if(s)return n?-1:B(t).length;e=(""+e).toLowerCase(),s=!0}}function u(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function l(t,e,r,n,s){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),O(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:c(t,e,r,n,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):c(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function c(t,e,i,r,n){var s,o=1,h=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){var l=-1;for(s=i;s<h;s++)if(u(t,s)===u(e,-1===l?0:s-l)){if(-1===l&&(l=s),s-l+1===a)return l*o}else-1!==l&&(s-=s-l),l=-1}else for(i+a>h&&(i=h-a),s=i;s>=0;s--){for(var c=!0,f=0;f<a;f++)if(u(t,s+f)!==u(e,f)){c=!1;break}if(c)return s}return-1}function f(t,e,i,r){i=Number(i)||0;var n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;var s=e.length;r>s/2&&(r=s/2);for(var o=0;o<r;++o){var h=parseInt(e.substr(2*o,2),16);if(O(h))return o;t[i+o]=h}return o}function d(t,e,i,r){return R(B(e,t.length-i),t,i,r)}function p(t,e,i,r){return R(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function m(t,e,i,r){return p(t,e,i,r)}function g(t,e,i,r){return R(L(e),t,i,r)}function y(t,e,i,r){return R(function(t,e){for(var i,r,n,s=[],o=0;o<t.length&&!((e-=2)<0);++o)r=(i=t.charCodeAt(o))>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function b(t,e,i){return 0===e&&i===t.length?ee.fromByteArray(t):ee.fromByteArray(t.slice(e,i))}function w(t,e,i){i=Math.min(t.length,i);for(var r=[],n=e;n<i;){var s,o,h,a,u=t[n],l=null,c=u>239?4:u>223?3:u>191?2:1;if(n+c<=i)switch(c){case 1:u<128&&(l=u);break;case 2:128==(192&(s=t[n+1]))&&(a=(31&u)<<6|63&s)>127&&(l=a);break;case 3:s=t[n+1],o=t[n+2],128==(192&s)&&128==(192&o)&&(a=(15&u)<<12|(63&s)<<6|63&o)>2047&&(a<55296||a>57343)&&(l=a);break;case 4:s=t[n+1],o=t[n+2],h=t[n+3],128==(192&s)&&128==(192&o)&&128==(192&h)&&(a=(15&u)<<18|(63&s)<<12|(63&o)<<6|63&h)>65535&&a<1114112&&(l=a)}null===l?(l=65533,c=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),n+=c}return function(t){var e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);for(var i="",r=0;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=v));return i}(r)}e.kMaxLength=2147483647,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(Kd){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,i){return r(t,e,i)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,i,r){return function(e,i,r){return n(e),e<=0?t(e):void 0!==i?"string"==typeof r?t(e).fill(i,r):t(e).fill(i):t(e)}(e,i,r)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if(P(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),P(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,s=0,o=Math.min(r,n);s<o;++s)if(t[s]!==e[s]){r=t[s],n=e[s];break}return r<n?-1:n<r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=i.allocUnsafe(e),s=0;for(r=0;r<t.length;++r){var o=t[r];if(P(o,Uint8Array)&&(o=i.from(o)),!i.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,s),s+=o.length}return n},i.byteLength=a,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)u(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)u(this,e,e+3),u(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)u(this,e,e+7),u(this,e+1,e+6),u(this,e+2,e+5),u(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?w(this,0,t):function(t,e,i){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return _(this,e,i);case"utf8":case"utf-8":return w(this,e,i);case"ascii":return M(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return b(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},i.prototype.compare=function(t,e,r,n,s){if(P(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||r>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=r)return 0;if(n>=s)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(s>>>=0)-(n>>>=0),h=(r>>>=0)-(e>>>=0),a=Math.min(o,h),u=this.slice(n,s),l=t.slice(e,r),c=0;c<a;++c)if(u[c]!==l[c]){o=u[c],h=l[c];break}return o<h?-1:h<o?1:0},i.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},i.prototype.indexOf=function(t,e,i){return l(this,t,e,i,!0)},i.prototype.lastIndexOf=function(t,e,i){return l(this,t,e,i,!1)},i.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return f(this,t,e,i);case"utf8":case"utf-8":return d(this,t,e,i);case"ascii":return p(this,t,e,i);case"latin1":case"binary":return m(this,t,e,i);case"base64":return g(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function M(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function S(t,e,i){var r="";i=Math.min(t.length,i);for(var n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function _(t,e,i){var r,n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var s="",o=e;o<i;++o)s+=(r=t[o])<16?"0"+r.toString(16):r.toString(16);return s}function I(t,e,i){for(var r=t.slice(e,i),n="",s=0;s<r.length;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,s,o){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function T(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function A(t,e,i,r,n){return e=+e,i>>>=0,n||T(t,0,i,4),le.write(t,e,i,r,23,4),i+4}function x(t,e,i,r,n){return e=+e,i>>>=0,n||T(t,0,i,8),le.write(t,e,i,r,52,8),i+8}i.prototype.slice=function(t,e){var r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r},i.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);for(var r=this[t+--e],n=1;e>0&&(n*=256);)r+=this[t+--e]*n;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);for(var r=this[t],n=1,s=0;++s<e&&(n*=256);)r+=this[t+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);for(var r=e,n=1,s=this[t+--r];r>0&&(n*=256);)s+=this[t+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},i.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),le.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),le.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),le.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),le.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},i.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||k(this,t,e,i,Math.pow(2,8*i)-1,0);var n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},i.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var s=0,o=1,h=0;for(this[e]=255&t;++s<i&&(o*=256);)t<0&&0===h&&0!==this[e+s-1]&&(h=1),this[e+s]=(t/o>>0)-h&255;return e+i},i.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){var n=Math.pow(2,8*i-1);k(this,t,e,i,n-1,-n)}var s=i-1,o=1,h=0;for(this[e+s]=255&t;--s>=0&&(o*=256);)t<0&&0===h&&0!==this[e+s+1]&&(h=1),this[e+s]=(t/o>>0)-h&255;return e+i},i.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,i){return A(this,t,e,!0,i)},i.prototype.writeFloatBE=function(t,e,i){return A(this,t,e,!1,i)},i.prototype.writeDoubleLE=function(t,e,i){return x(this,t,e,!0,i)},i.prototype.writeDoubleBE=function(t,e,i){return x(this,t,e,!1,i)},i.prototype.copy=function(t,e,r,n){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var s=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var o=s-1;o>=0;--o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return s},i.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var s=t.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(t=s)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var h=i.isBuffer(t)?t:i.from(t,n),a=h.length;if(0===a)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<r-e;++o)this[o+e]=h[o%a]}return this};var E=/[^+/0-9A-Za-z-_]/g;function B(t,e){var i;e=e||1/0;for(var r=t.length,n=null,s=[],o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function L(t){return ee.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function R(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function P(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function O(t){return t!=t}}).call(this)}).call(this,_t({}).Buffer)})),It={};class Ct{constructor(t,e,i,r=255){this.r=t,this.g=e,this.b=i,this.a=r}toCanvasStyle(){return`rgba(${this.r},${this.g}, ${this.b}, ${this.a})`}}Ct.white=new Ct(255,255,255),Ct.WHITE=Ct.white,Ct.lightGray=new Ct(192,192,192),Ct.LIGHT_GRAY=Ct.lightGray,Ct.gray=new Ct(128,128,128),Ct.GRAY=Ct.gray,Ct.darkGray=new Ct(64,64,64),Ct.DARK_GRAY=Ct.darkGray,Ct.black=new Ct(0,0,0),Ct.BLACK=Ct.black,Ct.red=new Ct(255,0,0),Ct.RED=Ct.red,Ct.pink=new Ct(255,175,175),Ct.PINK=Ct.pink,Ct.orange=new Ct(255,200,0),Ct.ORANGE=Ct.orange,Ct.yellow=new Ct(255,255,0),Ct.YELLOW=Ct.yellow,Ct.green=new Ct(0,255,0),Ct.GREEN=Ct.green,Ct.magenta=new Ct(255,0,255),Ct.MAGENTA=Ct.magenta,Ct.cyan=new Ct(0,255,255),Ct.CYAN=Ct.cyan,Ct.blue=new Ct(0,0,255),Ct.BLUE=Ct.blue,It=Ct;var kt={};class Tt{constructor(t,e,i){this.name=t,this.type=e,this.size=i}toCanvasFont(){return`${this.getType()} ${this.size}px ${this.name}`}getType(){return 1===this.type?"bold":2===this.type?"italic":"normal"}}Tt.BOLD=1,kt=Tt;var At=class{constructor(t){this.buffer=t,this.offset=0}putByte(t){this.buffer[this.offset++]=t}putInt(t){this.buffer[this.offset++]=t>>24,this.buffer[this.offset++]=t>>16,this.buffer[this.offset++]=t>>8,this.buffer[this.offset++]=t}putString(t){for(let e=0;e<t.length;e++)this.buffer[this.offset++]=t.charCodeAt(e);this.buffer[this.offset++]=10}putBytes(t,e,i){for(let r=e;r<i;r++)this.buffer[this.offset++]=t[r]}getUnsignedByte(){return 255&this.buffer[this.offset++]}getUnsignedShort(){return this.offset+=2,((255&this.buffer[this.offset-2])<<8)+(255&this.buffer[this.offset-1])}getUnsignedInt(){return this.offset+=4,((255&this.buffer[this.offset-4])<<24)+((255&this.buffer[this.offset-3])<<16)+((255&this.buffer[this.offset-2])<<8)+(255&this.buffer[this.offset-1])}getBytes(t,e,i){for(let r=e;r<i;r++)t[e+r]=this.buffer[this.offset++]}},xt=Bt,Et=null;try{Et=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(Kd){}function Bt(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function Lt(t){return!0===(t&&t.__isLong__)}Bt.prototype.__isLong__,Object.defineProperty(Bt.prototype,"__isLong__",{value:!0}),Bt.isLong=Lt;var Rt={},Pt={};function Ot(t,e){var i,r,n;return e?(n=0<=(t>>>=0)&&t<256)&&(r=Pt[t])?r:(i=Dt(t,(0|t)<0?-1:0,!0),n&&(Pt[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(r=Rt[t])?r:(i=Dt(t,t<0?-1:0,!1),n&&(Rt[t]=i),i)}function jt(t,e){if(isNaN(t))return e?zt:qt;if(e){if(t<0)return zt;if(t>=Ft)return $t}else{if(t<=-Ht)return Jt;if(t+1>=Ht)return Kt}return t<0?jt(-t,e).neg():Dt(t%Nt|0,t/Nt|0,e)}function Dt(t,e,i){return new Bt(t,e,i)}Bt.fromInt=Ot,Bt.fromNumber=jt,Bt.fromBits=Dt;var Yt=Math.pow;function Ut(t,e,i){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return qt;if("number"==typeof e?(i=e,e=!1):e=!!e,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return Ut(t.substring(1),e,i).neg();for(var n=jt(Yt(i,8)),s=qt,o=0;o<t.length;o+=8){var h=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+h),i);if(h<8){var u=jt(Yt(i,h));s=s.mul(u).add(jt(a))}else s=(s=s.mul(n)).add(jt(a))}return s.unsigned=e,s}function Xt(t,e){return"number"==typeof t?jt(t,e):"string"==typeof t?Ut(t,e):Dt(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}Bt.fromString=Ut,Bt.fromValue=Xt;var Nt=4294967296,Ft=Nt*Nt,Ht=Ft/2,Wt=Ot(1<<24),qt=Ot(0);Bt.ZERO=qt;var zt=Ot(0,!0);Bt.UZERO=zt;var Vt=Ot(1);Bt.ONE=Vt;var Zt=Ot(1,!0);Bt.UONE=Zt;var Gt=Ot(-1);Bt.NEG_ONE=Gt;var Kt=Dt(-1,2147483647,!1);Bt.MAX_VALUE=Kt;var $t=Dt(-1,-1,!0);Bt.MAX_UNSIGNED_VALUE=$t;var Jt=Dt(0,-2147483648,!1);Bt.MIN_VALUE=Jt;var Qt=Bt.prototype;Qt.toInt=function(){return this.unsigned?this.low>>>0:this.low},Qt.toNumber=function(){return this.unsigned?(this.high>>>0)*Nt+(this.low>>>0):this.high*Nt+(this.low>>>0)},Qt.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Jt)){var e=jt(t),i=this.div(e),r=i.mul(e).sub(this);return i.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=jt(Yt(t,6),this.unsigned),s=this,o="";;){var h=s.div(n),a=(s.sub(h.mul(n)).toInt()>>>0).toString(t);if((s=h).isZero())return a+o;for(;a.length<6;)a="0"+a;o=""+a+o}},Qt.getHighBits=function(){return this.high},Qt.getHighBitsUnsigned=function(){return this.high>>>0},Qt.getLowBits=function(){return this.low},Qt.getLowBitsUnsigned=function(){return this.low>>>0},Qt.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Jt)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Qt.isZero=function(){return 0===this.high&&0===this.low},Qt.eqz=Qt.isZero,Qt.isNegative=function(){return!this.unsigned&&this.high<0},Qt.isPositive=function(){return this.unsigned||this.high>=0},Qt.isOdd=function(){return 1==(1&this.low)},Qt.isEven=function(){return 0==(1&this.low)},Qt.equals=function(t){return Lt(t)||(t=Xt(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},Qt.eq=Qt.equals,Qt.notEquals=function(t){return!this.eq(t)},Qt.neq=Qt.notEquals,Qt.ne=Qt.notEquals,Qt.lessThan=function(t){return this.comp(t)<0},Qt.lt=Qt.lessThan,Qt.lessThanOrEqual=function(t){return this.comp(t)<=0},Qt.lte=Qt.lessThanOrEqual,Qt.le=Qt.lessThanOrEqual,Qt.greaterThan=function(t){return this.comp(t)>0},Qt.gt=Qt.greaterThan,Qt.greaterThanOrEqual=function(t){return this.comp(t)>=0},Qt.gte=Qt.greaterThanOrEqual,Qt.ge=Qt.greaterThanOrEqual,Qt.compare=function(t){if(Lt(t)||(t=Xt(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Qt.comp=Qt.compare,Qt.negate=function(){return!this.unsigned&&this.eq(Jt)?Jt:this.not().add(Vt)},Qt.neg=Qt.negate,Qt.add=function(t){Lt(t)||(t=Xt(t));var e=this.high>>>16,i=65535&this.high,r=this.low>>>16,n=65535&this.low,s=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=0,u=0,l=0,c=0;return l+=(c+=n+(65535&t.low))>>>16,u+=(l+=r+h)>>>16,a+=(u+=i+o)>>>16,a+=e+s,Dt((l&=65535)<<16|(c&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Qt.subtract=function(t){return Lt(t)||(t=Xt(t)),this.add(t.neg())},Qt.sub=Qt.subtract,Qt.multiply=function(t){if(this.isZero())return qt;if(Lt(t)||(t=Xt(t)),Et)return Dt(Et.mul(this.low,this.high,t.low,t.high),Et.get_high(),this.unsigned);if(t.isZero())return qt;if(this.eq(Jt))return t.isOdd()?Jt:qt;if(t.eq(Jt))return this.isOdd()?Jt:qt;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Wt)&&t.lt(Wt))return jt(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,r=this.low>>>16,n=65535&this.low,s=t.high>>>16,o=65535&t.high,h=t.low>>>16,a=65535&t.low,u=0,l=0,c=0,f=0;return c+=(f+=n*a)>>>16,l+=(c+=r*a)>>>16,c&=65535,l+=(c+=n*h)>>>16,u+=(l+=i*a)>>>16,l&=65535,u+=(l+=r*h)>>>16,l&=65535,u+=(l+=n*o)>>>16,u+=e*a+i*h+r*o+n*s,Dt((c&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},Qt.mul=Qt.multiply,Qt.divide=function(t){if(Lt(t)||(t=Xt(t)),t.isZero())throw Error("division by zero");var e,i,r;if(Et)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?Dt((this.unsigned?Et.div_u:Et.div_s)(this.low,this.high,t.low,t.high),Et.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?zt:qt;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return zt;if(t.gt(this.shru(1)))return Zt;r=zt}else{if(this.eq(Jt))return t.eq(Vt)||t.eq(Gt)?Jt:t.eq(Jt)?Vt:(e=this.shr(1).div(t).shl(1)).eq(qt)?t.isNegative()?Vt:Gt:(i=this.sub(t.mul(e)),r=e.add(i.div(t)));if(t.eq(Jt))return this.unsigned?zt:qt;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=qt}for(i=this;i.gte(t);){e=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var n=Math.ceil(Math.log(e)/Math.LN2),s=n<=48?1:Yt(2,n-48),o=jt(e),h=o.mul(t);h.isNegative()||h.gt(i);)h=(o=jt(e-=s,this.unsigned)).mul(t);o.isZero()&&(o=Vt),r=r.add(o),i=i.sub(h)}return r},Qt.div=Qt.divide,Qt.modulo=function(t){return Lt(t)||(t=Xt(t)),Et?Dt((this.unsigned?Et.rem_u:Et.rem_s)(this.low,this.high,t.low,t.high),Et.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Qt.mod=Qt.modulo,Qt.rem=Qt.modulo,Qt.not=function(){return Dt(~this.low,~this.high,this.unsigned)},Qt.and=function(t){return Lt(t)||(t=Xt(t)),Dt(this.low&t.low,this.high&t.high,this.unsigned)},Qt.or=function(t){return Lt(t)||(t=Xt(t)),Dt(this.low|t.low,this.high|t.high,this.unsigned)},Qt.xor=function(t){return Lt(t)||(t=Xt(t)),Dt(this.low^t.low,this.high^t.high,this.unsigned)},Qt.shiftLeft=function(t){return Lt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dt(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Dt(0,this.low<<t-32,this.unsigned)},Qt.shl=Qt.shiftLeft,Qt.shiftRight=function(t){return Lt(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?Dt(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Dt(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Qt.shr=Qt.shiftRight,Qt.shiftRightUnsigned=function(t){if(Lt(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?Dt(this.low>>>t|e<<32-t,e>>>t,this.unsigned):Dt(32===t?e:e>>>t-32,0,this.unsigned)},Qt.shru=Qt.shiftRightUnsigned,Qt.shr_u=Qt.shiftRightUnsigned,Qt.toSigned=function(){return this.unsigned?Dt(this.low,this.high,!1):this},Qt.toUnsigned=function(){return this.unsigned?this:Dt(this.low,this.high,!0)},Qt.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Qt.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Qt.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},Bt.fromBytes=function(t,e,i){return i?Bt.fromBytesLE(t,e):Bt.fromBytesBE(t,e)},Bt.fromBytesLE=function(t,e){return new Bt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Bt.fromBytesBE=function(t,e){return new Bt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};for(var te=class{constructor(){this.hash=new xt,this.name=null,this.serverIndex=0,this.serverId=0,this.currentX=0,this.currentY=0,this.npcId=0,this.stepCount=0,this.animationCurrent=0,this.animationNext=0,this.movingStep=0,this.waypointCurrent=0,this.message=null,this.messageTimeout=0,this.bubbleItem=0,this.bubbleTimeout=0,this.damageTaken=0,this.healthCurrent=0,this.healthMax=0,this.combatTimer=0,this.colourHair=0,this.colourTop=0,this.colourBottom=0,this.colourSkin=0,this.incomingProjectileSprite=0,this.attackingPlayerServerIndex=0,this.attackingNpcServerIndex=0,this.projectileRange=0,this.skullVisible=0,this.waypointsX=new Int32Array(10),this.waypointsY=new Int32Array(10),this.equippedItem=new Int32Array(12),this.level=-1}},ee={toByteArray:function(t){var e,i,r=ae(t),n=r[0],s=r[1],o=new ne(function(t,e,i){return 3*(e+i)/4-i}(0,n,s)),h=0,a=s>0?n-4:n;for(i=0;i<a;i+=4)e=re[t.charCodeAt(i)]<<18|re[t.charCodeAt(i+1)]<<12|re[t.charCodeAt(i+2)]<<6|re[t.charCodeAt(i+3)],o[h++]=e>>16&255,o[h++]=e>>8&255,o[h++]=255&e;return 2===s&&(e=re[t.charCodeAt(i)]<<2|re[t.charCodeAt(i+1)]>>4,o[h++]=255&e),1===s&&(e=re[t.charCodeAt(i)]<<10|re[t.charCodeAt(i+1)]<<4|re[t.charCodeAt(i+2)]>>2,o[h++]=e>>8&255,o[h++]=255&e),o},fromByteArray:function(t){for(var e,i=t.length,r=i%3,n=[],s=0,o=i-r;s<o;s+=16383)n.push(ue(t,s,s+16383>o?o:s+16383));return 1===r?(e=t[i-1],n.push(ie[e>>2]+ie[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],n.push(ie[e>>10]+ie[e>>4&63]+ie[e<<2&63]+"=")),n.join("")}},ie=[],re=[],ne="undefined"!=typeof Uint8Array?Uint8Array:Array,se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=0,he=se.length;oe<he;++oe)ie[oe]=se[oe],re[se.charCodeAt(oe)]=oe;function ae(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function ue(t,e,i){for(var r,n,s=[],o=e;o<i;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),s.push(ie[(n=r)>>18&63]+ie[n>>12&63]+ie[n>>6&63]+ie[63&n]);return s.join("")}re["-".charCodeAt(0)]=62,re["_".charCodeAt(0)]=63;var le={read:function(t,e,i,r,n){var s,o,h=8*n-r-1,a=(1<<h)-1,u=a>>1,l=-7,c=i?n-1:0,f=i?-1:1,d=t[e+c];for(c+=f,s=d&(1<<-l)-1,d>>=-l,l+=h;l>0;s=256*s+t[e+c],c+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=r;l>0;o=256*o+t[e+c],c+=f,l-=8);if(0===s)s=1-u;else{if(s===a)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),s-=u}return(d?-1:1)*o*Math.pow(2,s-r)},write:function(t,e,i,r,n,s){var o,h,a,u=8*s-n-1,l=(1<<u)-1,c=l>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-o))<1&&(o--,a*=2),(e+=o+c>=1?f/a:f*Math.pow(2,1-c))*a>=2&&(o++,a/=2),o+c>=l?(h=0,o=l):o+c>=1?(h=(e*a-1)*Math.pow(2,n),o+=c):(h=e*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;t[i+d]=255&h,d+=p,h/=256,n-=8);for(o=o<<n|h,u+=n;u>0;t[i+d]=255&o,d+=p,o/=256,u-=8);t[i+d-p]|=128*m}},ce={};(function(t){(function(){"use strict";const t="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;ce.Buffer=i,ce.INSPECT_MAX_BYTES=50;function e(t){if(t>2147483647)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,i.prototype),e}function i(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return s(t)}return r(t,e,i)}function r(t,r,n){if("string"==typeof t)return function(t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r);const n=0|u(t,r);let s=e(n);const o=s.write(t,r);return o!==n&&(s=s.slice(0,o)),s}(t,r);if(ArrayBuffer.isView(t))return function(t){if(F(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return o(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return h(t,r,n);if("undefined"!=typeof SharedArrayBuffer&&(F(t,SharedArrayBuffer)||t&&F(t.buffer,SharedArrayBuffer)))return h(t,r,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const s=t.valueOf&&t.valueOf();if(null!=s&&s!==t)return i.from(s,r,n);const l=function(t){if(i.isBuffer(t)){const i=0|a(t.length),r=e(i);return 0===r.length||t.copy(r,0,0,i),r}return void 0!==t.length?"number"!=typeof t.length||H(t.length)?e(0):o(t):"Buffer"===t.type&&Array.isArray(t.data)?o(t.data):void 0}(t);if(l)return l;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return i.from(t[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function n(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function s(t){return n(t),e(t<0?0:0|a(t))}function o(t){const i=t.length<0?0:0|a(t.length),r=e(i);for(let e=0;e<i;e+=1)r[e]=255&t[e];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,i.prototype),n}function a(t){if(t>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|t}function u(t,e){if(i.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return X(t).length;default:if(s)return n?-1:U(t).length;e=(""+e).toLowerCase(),s=!0}}function l(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function c(t,e,r,n,s){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),H(r=+r)&&(r=s?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(s)return-1;r=t.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof e&&(e=i.from(e,n)),i.isBuffer(e))return 0===e.length?-1:f(t,e,r,n,s);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):f(t,[e],r,n,s);throw new TypeError("val must be string, number or Buffer")}function f(t,e,i,r,n){let s,o=1,h=t.length,a=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,h/=2,a/=2,i/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let r=-1;for(s=i;s<h;s++)if(u(t,s)===u(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===a)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(i+a>h&&(i=h-a),s=i;s>=0;s--){let i=!0;for(let r=0;r<a;r++)if(u(t,s+r)!==u(e,r)){i=!1;break}if(i)return s}return-1}function d(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if(H(r))return o;t[i+o]=r}return o}function p(t,e,i,r){return N(U(e,t.length-i),t,i,r)}function m(t,e,i,r){return N(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function g(t,e,i,r){return N(X(e),t,i,r)}function y(t,e,i,r){return N(function(t,e){let i,r,n;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function b(t,e,i){return 0===e&&i===t.length?ee.fromByteArray(t):ee.fromByteArray(t.slice(e,i))}function w(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,r,h,a;switch(o){case 1:e<128&&(s=e);break;case 2:128==(192&(i=t[n+1]))&&(a=(31&e)<<6|63&i)>127&&(s=a);break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(a=(15&e)<<12|(63&i)<<6|63&r)>2047&&(a<55296||a>57343)&&(s=a);break;case 4:i=t[n+1],r=t[n+2],h=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&h)&&(a=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&h)>65535&&a<1114112&&(s=a)}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return function(t){const e=t.length;if(e<=v)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=v));return i}(r)}i.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(Kd){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),i.poolSize=8192,i.from=function(t,e,i){return r(t,e,i)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array),i.alloc=function(t,i,r){return function(t,i,r){return n(t),t<=0?e(t):void 0!==i?"string"==typeof r?e(t).fill(i,r):e(t).fill(i):e(t)}(t,i,r)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==i.prototype},i.compare=function(t,e){if(F(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),F(e,Uint8Array)&&(e=i.from(e,e.offset,e.byteLength)),!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=i.allocUnsafe(e);let s=0;for(r=0;r<t.length;++r){let e=t[r];if(F(e,Uint8Array))s+e.length>n.length?(i.isBuffer(e)||(e=i.from(e)),e.copy(n,s)):Uint8Array.prototype.set.call(n,e,s);else{if(!i.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,s)}s+=e.length}return n},i.byteLength=u,i.prototype._isBuffer=!0,i.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)l(this,e,e+1);return this},i.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)l(this,e,e+3),l(this,e+1,e+2);return this},i.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)l(this,e,e+7),l(this,e+1,e+6),l(this,e+2,e+5),l(this,e+3,e+4);return this},i.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?w(this,0,t):function(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return _(this,e,i);case"utf8":case"utf-8":return w(this,e,i);case"ascii":return M(this,e,i);case"latin1":case"binary":return S(this,e,i);case"base64":return b(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){let t="";const e=ce.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},t&&(i.prototype[t]=i.prototype.inspect),i.prototype.compare=function(t,e,r,n,s){if(F(t,Uint8Array)&&(t=i.from(t,t.offset,t.byteLength)),!i.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||r>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=r)return 0;if(n>=s)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(s>>>=0)-(n>>>=0),h=(r>>>=0)-(e>>>=0);const a=Math.min(o,h),u=this.slice(n,s),l=t.slice(e,r);for(let i=0;i<a;++i)if(u[i]!==l[i]){o=u[i],h=l[i];break}return o<h?-1:h<o?1:0},i.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},i.prototype.indexOf=function(t,e,i){return c(this,t,e,i,!0)},i.prototype.lastIndexOf=function(t,e,i){return c(this,t,e,i,!1)},i.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return d(this,t,e,i);case"utf8":case"utf-8":return p(this,t,e,i);case"ascii":case"latin1":case"binary":return m(this,t,e,i);case"base64":return g(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const v=4096;function M(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function S(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function _(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let s=e;s<i;++s)n+=W[t[s]];return n}function I(t,e,i){const r=t.slice(e,i);let n="";for(let s=0;s<r.length-1;s+=2)n+=String.fromCharCode(r[s]+256*r[s+1]);return n}function C(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,s,o){if(!i.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function T(t,e,i,r,n){O(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function A(t,e,i,r,n){O(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function x(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function E(t,e,i,r,n){return e=+e,i>>>=0,n||x(t,0,i,4),le.write(t,e,i,r,23,4),i+4}function B(t,e,i,r,n){return e=+e,i>>>=0,n||x(t,0,i,8),le.write(t,e,i,r,52,8),i+8}i.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,i.prototype),n},i.prototype.readUintLE=i.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},i.prototype.readUintBE=i.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},i.prototype.readUint8=i.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readBigUInt64LE=q((function(t){j(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||D(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))})),i.prototype.readBigUInt64BE=q((function(t){j(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||D(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)})),i.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||C(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*e)),s},i.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readBigInt64LE=q((function(t){j(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||D(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),i.prototype.readBigInt64BE=q((function(t){j(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||D(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)})),i.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),le.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),le.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),le.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),le.read(this,t,!1,52,8)},i.prototype.writeUintLE=i.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||k(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||k(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},i.prototype.writeUint8=i.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeBigUInt64LE=q((function(t,e=0){return T(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),i.prototype.writeBigUInt64BE=q((function(t,e=0){return A(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),i.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}let n=0,s=1,o=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},i.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);k(this,t,e,i,r-1,-r)}let n=i-1,s=1,o=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/s>>0)-o&255;return e+i},i.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeBigInt64LE=q((function(t,e=0){return T(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),i.prototype.writeBigInt64BE=q((function(t,e=0){return A(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),i.prototype.writeFloatLE=function(t,e,i){return E(this,t,e,!0,i)},i.prototype.writeFloatBE=function(t,e,i){return E(this,t,e,!1,i)},i.prototype.writeDoubleLE=function(t,e,i){return B(this,t,e,!0,i)},i.prototype.writeDoubleBE=function(t,e,i){return B(this,t,e,!1,i)},i.prototype.copy=function(t,e,r,n){if(!i.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const s=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),s},i.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let s;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(s=e;s<r;++s)this[s]=t;else{const o=i.isBuffer(t)?t:i.from(t,n),h=o.length;if(0===h)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<r-e;++s)this[s+e]=o[s%h]}return this};const L={};function R(t,e,i){L[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function P(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function O(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new L.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){j(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||D(e,t.length-(i+1))}(r,n,s)}function j(t,e){if("number"!=typeof t)throw new L.ERR_INVALID_ARG_TYPE(e,"number",t)}function D(t,e,i){if(Math.floor(t)!==t)throw j(t,i),new L.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}R("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?t+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),R("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),R("ERR_OUT_OF_RANGE",(function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=P(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=P(n)),n+="n"),r+` It must be ${e}. Received ${n}`}),RangeError);const Y=/[^+/0-9A-Za-z-_]/g;function U(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let o=0;o<r;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function X(t){return ee.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function N(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function H(t){return t!=t}const W=function(){const t=new Array(256);for(let e=0;e<16;++e){const i=16*e;for(let r=0;r<16;++r)t[i+r]="0123456789abcdef"[e]+"0123456789abcdef"[r]}return t}();function q(t){return"undefined"==typeof BigInt?z:t}function z(){throw new Error("BigInt not supported")}}).call(this)}).call(this,_t({}).Buffer);var fe={};fe=Object.freeze?Object.freeze:function(t){return t};var de={},pe=function(){};pe.prototype.readByte=function(){var t=[0];return 0===this.read(t,0,1)?(this._eof=!0,-1):t[0]},pe.prototype.read=function(t,e,i){for(var r,n=0;n<i;){if(-1===(r=this.readByte())){this._eof=!0;break}t[e+n++]=r}return n},pe.prototype.eof=function(){return!!this._eof},pe.prototype.seek=function(t){throw new Error("Stream is not seekable.")},pe.prototype.tell=function(){throw new Error("Stream is not seekable.")},pe.prototype.writeByte=function(t){var e=[t];this.write(e,0,1)},pe.prototype.write=function(t,e,i){var r;for(r=0;r<i;r++)this.writeByte(t[e+r]);return i},pe.prototype.flush=function(){},pe.EOF=-1,de=fe(pe);var me={},ge=function(t){(function(){var e=256;this.readBit=function(){if(0==(255&e)){var i=t.readByte();if(i===de.EOF)return this._eof=!0,i;e=i<<1|1}var r=256&e?1:0;return e<<=1,r},this.seekBit=function(t){var e=t>>>3,i=t-8*e;this.seek(e),this._eof=!1,this.readBits(i)},this.tellBit=function(){for(var i=8*t.tell(),r=e;0!=(255&r);)i--,r<<=1;return i},this.readByte=function(){return 0==(255&e)?t.readByte():this.readBits(8)},this.seek=function(i){t.seek(i),e=256}}).call(this),function(){var e=1;this.writeBit=function(i){e<<=1,i&&(e|=1),256&e&&(t.writeByte(255&e),e=1)},this.writeByte=function(i){1===e?t.writeByte(i):t.writeBits(8,i)},this.flush=function(){for(;1!==e;)this.writeBit(0);t.flush&&t.flush()}}.call(this)};ge.EOF=de.EOF,(ge.prototype=Object.create(de.prototype)).readBits=function(t){var e,i=0;if(t>31)return(i=65536*this.readBits(t-16))+this.readBits(16);for(e=0;e<t;e++)i<<=1,this.readBit()>0&&i++;return i},ge.prototype.writeBits=function(t,e){if(t>32){var i=65535&e,r=(e-i)/65536;return this.writeBits(t-16,r),void this.writeBits(16,i)}var n;for(n=t-1;n>=0;n--)this.writeBit(e>>>n&1)},me=ge;var ye,be,we={},ve=we={};function Me(){throw new Error("setTimeout has not been defined")}function Se(){throw new Error("clearTimeout has not been defined")}function _e(t){if(ye===setTimeout)return setTimeout(t,0);if((ye===Me||!ye)&&setTimeout)return ye=setTimeout,setTimeout(t,0);try{return ye(t,0)}catch(Kd){try{return ye.call(null,t,0)}catch(Kd){return ye.call(this,t,0)}}}!function(){try{ye="function"==typeof setTimeout?setTimeout:Me}catch(Kd){ye=Me}try{be="function"==typeof clearTimeout?clearTimeout:Se}catch(Kd){be=Se}}();var Ie,Ce=[],ke=!1,Te=-1;function Ae(){ke&&Ie&&(ke=!1,Ie.length?Ce=Ie.concat(Ce):Te=-1,Ce.length&&xe())}function xe(){if(!ke){var t=_e(Ae);ke=!0;for(var e=Ce.length;e;){for(Ie=Ce,Ce=[];++Te<e;)Ie&&Ie[Te].run();Te=-1,e=Ce.length}Ie=null,ke=!1,function(t){if(be===clearTimeout)return clearTimeout(t);if((be===Se||!be)&&clearTimeout)return be=clearTimeout,clearTimeout(t);try{be(t)}catch(Kd){try{return be.call(null,t)}catch(Kd){return be.call(this,t)}}}(t)}}function Ee(t,e){this.fun=t,this.array=e}function Be(){}ve.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];Ce.push(new Ee(t,e)),1!==Ce.length||ke||_e(xe)},Ee.prototype.run=function(){this.fun.apply(null,this.array)},ve.title="browser",ve.browser=!0,ve.env={},ve.argv=[],ve.version="",ve.versions={},ve.on=Be,ve.addListener=Be,ve.once=Be,ve.off=Be,ve.removeListener=Be,ve.removeAllListeners=Be,ve.emit=Be,ve.prependListener=Be,ve.prependOnceListener=Be,ve.listeners=function(t){return[]},ve.binding=function(t){throw new Error("process.binding is not supported")},ve.cwd=function(){return"/"},ve.chdir=function(t){throw new Error("process.chdir is not supported")},ve.umask=function(){return 0};var Le={};(function(t,e){(function(){var i=Object.create(null),r=de.EOF;i.coerceInputStream=function(t,e){if("readByte"in t){if(e&&!("read"in t)){var i=t;(t=new de).readByte=function(){var t=i.readByte();return t===r&&(this._eof=!0),t},"size"in i&&(t.size=i.size),"seek"in i&&(t.seek=function(t){i.seek(t),this._eof=!1}),"tell"in i&&(t.tell=i.tell.bind(i))}}else{var n=t;(t=new de).size=n.length,t.pos=0,t.readByte=function(){return this.pos>=this.size?r:n[this.pos++]},t.read=function(t,e,i){for(var r=0;r<i&&this.pos<n.length;)t[e++]=n[this.pos++],r++;return r},t.seek=function(t){this.pos=t},t.tell=function(){return this.pos},t.eof=function(){return this.pos>=n.length}}return t};var n=function(t,e){this.buffer=t,this.resizeOk=e,this.pos=0};(n.prototype=Object.create(de.prototype)).writeByte=function(t){if(this.resizeOk&&this.pos>=this.buffer.length){var e=i.makeU8Buffer(2*this.buffer.length);e.set(this.buffer),this.buffer=e}this.buffer[this.pos++]=t},n.prototype.getBuffer=function(){if(this.pos!==this.buffer.length){if(!this.resizeOk)throw new TypeError("outputsize does not match decoded input");var t=i.makeU8Buffer(this.pos);t.set(this.buffer.subarray(0,this.pos)),this.buffer=t}return this.buffer},i.coerceOutputStream=function(t,e){var r={stream:t,retval:t};if(t){if("object"==typeof t&&"writeByte"in t)return r;r.stream=new n("number"==typeof e?i.makeU8Buffer(e):t,!1)}else r.stream=new n(i.makeU8Buffer(16384),!0);return Object.defineProperty(r,"retval",{get:r.stream.getBuffer.bind(r.stream)}),r},i.compressFileHelper=function(t,e,r){return function(n,s,o){n=i.coerceInputStream(n);var h,a,u=i.coerceOutputStream(s,s);for(s=u.stream,h=0;h<t.length;h++)s.writeByte(t.charCodeAt(h));if(a="size"in n&&n.size>=0?n.size:-1,r){var l=i.coerceOutputStream([]);for(i.writeUnsignedNumber(l.stream,a+1),l=l.retval,h=0;h<l.length-1;h++)s.writeByte(l[h]);r=l[l.length-1]}else i.writeUnsignedNumber(s,a+1);return e(n,s,a,o,r),u.retval}},i.decompressFileHelper=function(t,e){return function(r,n){var s;for(r=i.coerceInputStream(r),s=0;s<t.length;s++)if(t.charCodeAt(s)!==r.readByte())throw new Error("Bad magic");var o=i.readUnsignedNumber(r)-1,h=i.coerceOutputStream(n,o);return n=h.stream,e(r,n,o),h.retval}},i.compressWithModel=function(t,e,i){for(var n=0;n!==e;){var s=t.readByte();if(s===r){i.encode(256);break}i.encode(s),n++}},i.decompressWithModel=function(t,e,i){for(var r=0;r!==e;){var n=i.decode();if(256===n)break;t.writeByte(n),r++}},i.writeUnsignedNumber=function(t,e){var i,r=[];do{r.push(127&e),e=Math.floor(e/128)}while(0!==e);for(r[0]|=128,i=r.length-1;i>=0;i--)t.writeByte(r[i]);return t},i.readUnsignedNumber=function(t){for(var e,i=0;;){if(128&(e=t.readByte())){i+=127&e;break}i=128*(i+e)}return i};var s=function(t){for(var e=0,i=t.length;e<i;e++)t[e]=0;return t},o=function(t){return s(new Array(t))},h=function(t){return t};void 0!==t&&Array.prototype.some.call(new Uint32Array(128),(function(t){return 0!==t}))&&(h=s),i.makeU8Buffer="undefined"!=typeof Uint8Array?function(t){return h(new Uint8Array(t))}:void 0!==e?function(t){var i=new e(t);return i.fill(0),i}:o,i.makeU16Buffer="undefined"!=typeof Uint16Array?function(t){return h(new Uint16Array(t))}:o,i.makeU32Buffer="undefined"!=typeof Uint32Array?function(t){return h(new Uint32Array(t))}:o,i.makeS32Buffer="undefined"!=typeof Int32Array?function(t){return h(new Int32Array(t))}:o,i.arraycopy=function(t,e){for(var i=0,r=e.length;i<r;i++)t[i]=e[i];return t};var a=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],u=i.fls=function(t){return t>4294967295?32+u(Math.floor(t/4294967296)):0!=(4294901760&t)?0!=(4278190080&t)?24+a[t>>>24&255]:16+a[t>>>16]:0!=(65280&t)?8+a[t>>>8]:a[t]};i.log2c=function(t){return 0===t?-1:u(t-1)},Le=fe(i)}).call(this)}).call(this,we,_t({}).Buffer);var Re={},Pe=console.assert.bind(console),Oe=function(t,e,i,r){var n;for(n=0;n<r;n++)e[n]=0;for(n=0;n<i;n++)e[t[n]]++},je=function(t,e,i,r){var n,s=0;if(r)for(n=0;n<i;n++)s+=t[n],e[n]=s;else for(n=0;n<i;n++)s+=t[n],e[n]=s-t[n]},De=function(t,e,i,r,n,s){var o,h,a,u,l,c,f,d,p,m,g,y,b,w=0,v=0;for(n<=256?(o=Le.makeS32Buffer(n),n<=i?(h=e.subarray(r+i-n),v=1):(h=Le.makeS32Buffer(n),v=3)):n<=i?(o=e.subarray(r+i-n),n<=i-n?(h=e.subarray(r+i-2*n),v=0):n<=1024?(h=Le.makeS32Buffer(n),v=2):(h=o,v=8)):(o=h=Le.makeS32Buffer(n),v=12),Oe(t,o,r,n),je(o,h,n,!0),u=0;u<r;u++)e[u]=0;c=-1,u=r-1,l=r,f=0,y=t[r-1];do{b=y}while(--u>=0&&(y=t[u])>=b);for(;u>=0;){do{b=y}while(--u>=0&&(y=t[u])<=b);if(u>=0){c>=0&&(e[c]=l),c=--h[b],l=u,++f;do{b=y}while(--u>=0&&(y=t[u])>=b)}}if(f>1?(function(t,e,i,r,n,s){var o,h,a,u,l;for(i===r&&Oe(t,i,n,s),je(i,r,s,!1),o=r[l=t[a=n-1]],a--,e[o++]=t[a]<l?~a:a,h=0;h<n;h++)(a=e[h])>0?(Pe(t[a]>=t[a+1]),(u=t[a])!==l&&(r[l]=o,o=r[l=u]),Pe(h<o),a--,e[o++]=t[a]<l?~a:a,e[h]=0):a<0&&(e[h]=~a);for(i===r&&Oe(t,i,n,s),je(i,r,s,1),h=n-1,o=r[l=0];h>=0;h--)(a=e[h])>0&&(Pe(t[a]<=t[a+1]),(u=t[a])!==l&&(r[l]=o,o=r[l=u]),Pe(o<=h),a--,e[--o]=t[a]>l?~(a+1):a,e[h]=0)}(t,e,o,h,r,n),m=function(t,e,i,r){var n,s,o,h,a,u,l,c,f,d;for(Pe(i>0),n=0;(o=e[n])<0;n++)e[n]=~o,Pe(n+1<i);if(n<r)for(s=n,n++;Pe(n<i),!((o=e[n])<0&&(e[s++]=~o,e[n]=0,s===r));n++);c=t[n=s=i-1];do{f=c}while(--n>=0&&(c=t[n])>=f);for(;n>=0;){do{f=c}while(--n>=0&&(c=t[n])<=f);if(n>=0){e[r+(n+1>>>1)]=s-n,s=n+1;do{f=c}while(--n>=0&&(c=t[n])>=f)}}for(n=0,l=0,h=i,u=0;n<r;n++){if(d=!0,(a=e[r+((o=e[n])>>>1)])===u&&h+a<i){for(s=0;s<a&&t[o+s]===t[h+s];)s++;s===a&&(d=!1)}d&&(l++,h=o,u=a),e[r+(o>>>1)]=l}return l}(t,e,r,f)):1===f?(e[c]=l+1,m=1):m=0,m<f){for(0!=(4&v)&&(o=null,h=null),0!=(2&v)&&(h=null),g=r+i-2*f,0==(13&v)&&(n+m<=g?g-=n:v|=8),Pe(r>>>1<=g+f),u=f+(r>>>1)-1,l=2*f+g-1;f<=u;u--)0!==e[u]&&(e[l--]=e[u]-1);a=e.subarray(f+g),De(a,e,g,f,m,!1),a=null,u=r-1,l=2*f-1,y=t[r-1];do{b=y}while(--u>=0&&(y=t[u])>=b);for(;u>=0;){do{b=y}while(--u>=0&&(y=t[u])<=b);if(u>=0){e[l--]=u+1;do{b=y}while(--u>=0&&(y=t[u])>=b)}}for(u=0;u<f;u++)e[u]=e[f+e[u]];0!=(4&v)&&(o=h=Le.makeS32Buffer(n)),0!=(2&v)&&(h=Le.makeS32Buffer(n))}if(0!=(8&v)&&Oe(t,o,r,n),f>1){je(o,h,n,!0),u=f-1,l=r,b=t[d=e[f-1]];do{for(p=h[y=b];p<l;)e[--l]=0;do{if(e[--l]=d,--u<0)break;d=e[u]}while((b=t[d])===y)}while(u>=0);for(;l>0;)e[--l]=0}return s?w=function(t,e,i,r,n,s){var o,h,a,u,l,c=-1;for(i===r&&Oe(t,i,n,s),je(i,r,s,!1),o=r[l=t[a=n-1]],e[o++]=a>0&&t[a-1]<l?~a:a,h=0;h<n;h++)(a=e[h])>0?(Pe(t[--a]>=t[a+1]),e[h]=~(u=t[a]),u!==l&&(r[l]=o,o=r[l=u]),Pe(h<o),e[o++]=a>0&&t[a-1]<l?~a:a):0!==a&&(e[h]=~a);for(i===r&&Oe(t,i,n,s),je(i,r,s,!0),h=n-1,o=r[l=0];h>=0;h--)(a=e[h])>0?(Pe(t[--a]<=t[a+1]),e[h]=u=t[a],u!==l&&(r[l]=o,o=r[l=u]),Pe(o<=h),e[--o]=a>0&&t[a-1]>l?~t[a-1]:a):0!==a?e[h]=~a:c=h;return c}(t,e,o,h,r,n):function(t,e,i,r,n,s){var o,h,a,u,l;for(i===r&&Oe(t,i,n,s),je(i,r,s,!1),o=r[l=t[a=n-1]],e[o++]=a>0&&t[a-1]<l?~a:a,h=0;h<n;h++)a=e[h],e[h]=~a,a>0&&(Pe(t[--a]>=t[a+1]),(u=t[a])!==l&&(r[l]=o,o=r[l=u]),Pe(h<o),e[o++]=a>0&&t[a-1]<l?~a:a);for(i===r&&Oe(t,i,n,s),je(i,r,s,!0),h=n-1,o=r[l=0];h>=0;h--)(a=e[h])>0?(Pe(t[--a]<=t[a+1]),(u=t[a])!==l&&(r[l]=o,o=r[l=u]),Pe(o<=h),e[--o]=0===a||t[a-1]>l?~a:a):e[h]=~a}(t,e,o,h,r,n),o=null,h=null,w},Ye=Object.create(null);Ye.suffixsort=function(t,e,i,r){if(Pe(t&&e&&t.length>=i&&e.length>=i),i<=1)return 1===i&&(e[0]=0),0;if(!r)if(1===t.BYTES_PER_ELEMENT)r=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");r=65536}return Pe(r>0),t.BYTES_PER_ELEMENT&&Pe(r<=1<<8*t.BYTES_PER_ELEMENT),De(t,e,0,i,r,!1)},Ye.bwtransform=function(t,e,i,r,n){var s,o;if(Pe(t&&e&&i),Pe(t.length>=r&&e.length>=r&&i.length>=r),r<=1)return 1===r&&(e[0]=t[0]),r;if(!n)if(1===t.BYTES_PER_ELEMENT)n=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");n=65536}for(Pe(n>0),t.BYTES_PER_ELEMENT&&Pe(n<=1<<8*t.BYTES_PER_ELEMENT),o=De(t,i,0,r,n,!0),e[0]=t[r-1],s=0;s<o;s++)e[s+1]=i[s];for(s+=1;s<r;s++)e[s]=i[s];return o+1},Ye.unbwtransform=function(t,e,i,r,n){var s,o,h=Le.makeU32Buffer(256);for(s=0;s<256;s++)h[s]=0;for(s=0;s<r;s++)i[s]=h[t[s]]++;for(s=0,o=0;s<256;s++)o+=h[s],h[s]=o-h[s];for(s=r-1,o=0;s>=0;s--)o=i[o]+h[e[s]=t[o]],o+=o<n?1:0;h=null},Ye.bwtransform2=function(t,e,i,r){var n,s,o,h=0;if(Pe(t&&e),Pe(t.length>=i&&e.length>=i),i<=1)return 1===i&&(e[0]=t[0]),0;if(!r)if(1===t.BYTES_PER_ELEMENT)r=256;else{if(2!==t.BYTES_PER_ELEMENT)throw new Error("Need to specify alphabetSize");r=65536}if(Pe(r>0),t.BYTES_PER_ELEMENT&&Pe(r<=1<<8*t.BYTES_PER_ELEMENT),(o=t.length>=2*i?t:r<=256?Le.makeU8Buffer(2*i):r<=65536?Le.makeU16Buffer(2*i):Le.makeU32Buffer(2*i))!==t)for(n=0;n<i;n++)o[n]=t[n];for(n=0;n<i;n++)o[i+n]=o[n];var a=Le.makeS32Buffer(2*i);for(De(o,a,0,2*i,r,!1),n=0,s=0;n<2*i;n++){var u=a[n];u<i&&(0===u&&(h=s),--u<0&&(u=i-1),e[s++]=t[u])}return Pe(s===i),h},Re=fe(Ye);var Ue={},Xe=function(t,e,i,r){this.up=t,this.down=e,this.symbol=i,this.weight=r};Xe.prototype.clone=function(){return new Xe(this.up,this.down,this.symbol,this.weight)},Xe.prototype.set=function(t){this.up=t.up,this.down=t.down,this.symbol=t.symbol,this.weight=t.weight};var Ne=function(t,e,i,r){var n;for((!e||e>t)&&(e=t),(e<<=1)&&e--,this.table=[],n=0;n<=e;n++)this.table[n]=new Xe(0,0,0,0);if(this.map=[],this.size=t)for(n=0;n<t;n++)this.map[n]=0;this.esc=this.root=e,i&&(this.readBit=i.readBit.bind(i),this.writeBit=i.writeBit.bind(i)),this.max_weight=r};Ne.factory=function(t,e){return function(i){return new Ne(i,i,t,e)}},Ne.prototype.split=function(t){var e,i;return(e=this.esc)?(this.esc--,(i=this.esc)?(this.table[e].down=i,this.table[e].weight=1,this.table[i].up=e,this.esc--):(e=0,i=1),this.table[i].symbol=t,this.table[i].weight=0,this.table[i].down=0,this.map[t]=i,this.table[this.esc].weight=0,this.table[this.esc].down=0,this.table[this.esc].up=e,i):0},Ne.prototype.leader=function(t){for(var e,i,r=this.table[t].weight,n=t;r===this.table[n+1].weight;)n++;return n===t?t:(i=this.table[t].symbol,e=this.table[n].symbol,this.table[n].symbol=i,this.table[t].symbol=e,this.map[i]=n,this.map[e]=t,n)},Ne.prototype.slide=function(t){var e,i=t;if(1&(e=this.table[i++].clone()).weight)for(;e.weight>this.table[i+1].weight;)i++;return this.table[t].set(this.table[i]),this.table[i].set(e),this.table[i].up=this.table[t].up,this.table[t].up=e.up,1&e.weight?(this.table[e.down].up=i,this.table[e.down-1].up=i,this.map[this.table[t].symbol]=t):(this.table[this.table[t].down-1].up=t,this.table[this.table[t].down].up=t,this.map[e.symbol]=i),i},Ne.prototype.increment=function(t){var e;for(this.table[t].up===t+1?(this.table[t].weight+=2,t++):t=this.leader(t);this.table[t].weight+=2,e=this.table[t].up;){for(;this.table[t].weight>this.table[t+1].weight;)t=this.slide(t);t=1&this.table[t].weight?e:this.table[t].up}this.max_weight&&this.table[this.root].weight>=this.max_weight&&this.scale(1)},Ne.prototype.scale=function(t){for(var e,i,r=this.esc;++r<=this.root;)for(1&this.table[r].weight?(e=-2&this.table[this.table[r].down].weight)&&(e+=1|this.table[this.table[r].down-1].weight):(e=this.table[r].weight>>t&-2)||(this.map[this.table[r].symbol]=0,this.esc++&&this.esc++),this.table[r].weight=e,i=r;e<this.table[--i].weight;)this.slide(i);this.table[this.esc].down=0},Ne.prototype.sendid=function(t){for(var e,i=0;t--;)this.map[t]||i++;if(e=this.size-Math.floor((this.root-this.esc)/2)-1)do{this.writeBit(1&i),i>>=1}while(e>>=1)},Ne.prototype.encode=function(t){var e,i,r,n,s=1;if(t<this.size&&((r=n=this.map[t])||(r=this.esc))){for(;i=this.table[r].up;)s<<=1,s|=1&r,r=i;for(;e=1&s,s>>=1;)this.writeBit(e);n||(this.sendid(t),n=this.split(t)),this.increment(n)}},Ne.prototype.readid=function(){var t,e,i=0,r=1;if(t=this.size-Math.floor((this.root-this.esc)/2)-1)do{i|=this.readBit()?r:0,r<<=1}while(t>>=1);for(e=0;e<this.size;e++)if(!this.map[e]&&!i--)return e;return 0},Ne.prototype.decode=function(){for(var t,e,i=this.root;e=this.table[i].down;)i=this.readBit()?e-1:e;if(i===this.esc){if(!this.esc)return 0;t=this.readid(),i=this.split(t)}else t=this.table[i].symbol;return this.increment(i),t},Ne.MAGIC="huff",Ne.compressFile=Le.compressFileHelper(Ne.MAGIC,(function(t,e,i,r){var n=new me(e),s=256;i<0&&s++;var o=new Ne(257,s,n,8191);Le.compressWithModel(t,i,o),n.flush()})),Ne.decompressFile=Le.decompressFileHelper(Ne.MAGIC,(function(t,e,i){var r=new me(t),n=256;i<0&&n++;var s=new Ne(257,n,r,8191);Le.decompressWithModel(e,i,s)})),Ue=Ne;var Fe={},He=function(t,e,i){var r;for(this.literalModel=[],r=0;r<e;r++)this.literalModel[r]=t(i)};He.prototype.encode=function(t,e){this.literalModel[e].encode(t)},He.prototype.decode=function(t){return this.literalModel[t].decode()},He.MAGIC="ctx1",He.compressFile=Le.compressFileHelper(He.MAGIC,(function(t,e,i,r){var n=new me(e),s=256;i<0&&s++;var o=Ue.factory(n,8191),h=new He(o,256,s),a=32,u={encode:function(t){h.encode(t,a),a=t}};Le.compressWithModel(t,i,u),n.flush()})),He.decompressFile=Le.decompressFileHelper(He.MAGIC,(function(t,e,i){var r=new me(t),n=256;i<0&&n++;var s=Ue.factory(r,8191),o=new He(s,256,n),h=32,a={decode:function(){var t=o.decode(h);return h=t,t}};Le.decompressWithModel(e,i,a)})),Fe=He;var We={},qe=Math.pow(2,31),ze=qe>>>8,Ve=Math.pow(2,32)-1,Ze=function(t){this.low=0,this.range=qe,this.buffer=0,this.help=0,this.bytecount=0,this.stream=t},Ge=function(t,e){for(;t.range<=ze;){if(t.low<255<<23){for(e.writeByte(t.buffer);t.help;t.help--)e.writeByte(255);t.buffer=t.low>>>23&255}else if(t.low&qe){for(e.writeByte(t.buffer+1);t.help;t.help--)e.writeByte(0);t.buffer=t.low>>>23&255}else if(t.help++,t.help>Ve)throw new Error("Too many bytes outstanding, file too large!");t.range=t.range<<8>>>0,t.low=(t.low<<8&qe-1)>>>0,t.bytecount++}};Ze.prototype.encodeStart=function(t,e){this.low=0,this.range=qe,this.buffer=t,this.help=0,this.bytecount=e},Ze.prototype.encodeFreq=function(t,e,i){Ge(this,this.stream);var r=this.range/i>>>0,n=r*e;this.low+=n,e+t<i?this.range=r*t:this.range-=n},Ze.prototype.encodeShift=function(t,e,i){Ge(this,this.stream);var r=this.range>>>i,n=r*e;this.low+=n,e+t>>>i?this.range-=n:this.range=r*t},Ze.prototype.encodeBit=function(t){this.encodeShift(1,t?1:0,1)},Ze.prototype.encodeByte=function(t){this.encodeShift(1,t,8)},Ze.prototype.encodeShort=function(t){this.encodeShift(1,t,16)},Ze.prototype.encodeFinish=function(){var t=this.stream;Ge(this,t),this.bytecount+=5;var e=this.low>>>23;if((this.low&ze-1)>=(16777215&this.bytecount)>>>1&&e++,e>255)for(t.writeByte(this.buffer+1);this.help;this.help--)t.writeByte(0);else for(t.writeByte(this.buffer);this.help;this.help--)t.writeByte(255);return t.writeByte(255&e),t.writeByte(this.bytecount>>>16&255),t.writeByte(this.bytecount>>>8&255),t.writeByte(255&this.bytecount),this.bytecount},Ze.prototype.decodeStart=function(t){var e=t?0:this.stream.readByte();return"number"!=typeof e||e<0||(this.buffer=this.stream.readByte(),this.low=this.buffer>>>1,this.range=128),e};var Ke=function(t,e){for(;t.range<=ze;)t.low=t.low<<8|t.buffer<<7&255,t.buffer=e.readByte(),t.low|=t.buffer>>>1,t.low=t.low>>>0,t.range=t.range<<8>>>0};Ze.prototype.decodeCulFreq=function(t){Ke(this,this.stream),this.help=this.range/t>>>0;var e=this.low/this.help>>>0;return e>=t?t-1:e},Ze.prototype.decodeCulShift=function(t){Ke(this,this.stream),this.help=this.range>>>t;var e=this.low/this.help>>>0;return e>>>t?(1<<t)-1:e},Ze.prototype.decodeUpdate=function(t,e,i){var r=this.help*e;this.low-=r,e+t<i?this.range=this.help*t:this.range-=r},Ze.prototype.decodeBit=function(){var t=this.decodeCulShift(1);return this.decodeUpdate(1,t,2),t},Ze.prototype.decodeByte=function(){var t=this.decodeCulShift(8);return this.decodeUpdate(1,t,256),t},Ze.prototype.decodeShort=function(){var t=this.decodeCulShift(16);return this.decodeUpdate(1,t,65536),t},Ze.prototype.decodeFinish=function(){Ke(this,this.stream)},Ze.prototype.writeBit=Ze.prototype.encodeBit,Ze.prototype.readBit=Ze.prototype.decodeBit,Ze.prototype.writeByte=Ze.prototype.encodeByte,Ze.prototype.readByte=Ze.prototype.decodeByte,We=Ze;var $e={};const Je=Le;var Qe=function(t,e,i){var r,n=this.numSyms=e;for(this.coder=t,this.prob=Je.makeU16Buffer(e+2),this.escape=Je.makeU16Buffer(e+1),this.update=Je.makeU16Buffer(e+1),this.prob[n+1]=256,r=0;r<=this.numSyms;r++)this.escape[r]=r;if(this.updateCount=0,this.updateThresh=256-Math.floor(128),i){for(this.probToSym=Je.makeU16Buffer(256),this.escProbToSym=Je.makeU16Buffer(this.numSyms),r=0;r<256;r++)this.probToSym[r]=n;for(r=0;r<this.numSyms;r++)this.escProbToSym[r]=r}};Qe.factory=function(t,e){return function(i){return new Qe(t,i,e)}},Qe.prototype._update=function(t,e){if(t===this.numSyms){if(this.update[t]>=40)return;if(this.updateCount>=this.updateThresh-1)return}if(this.update[t]++,this.updateCount++,!(this.updateCount<this.updateThresh)){var i,r,n,s,o,h;for(this.escape[0]=this.prob[0]=i=r=n=0,s=0;s<this.numSyms+1;s++){var a=(this.prob[s+1]-this.prob[s]>>>1)+this.update[s];a?(this.prob[s]=i,i+=a,1&a&&n++,this.escape[s]=r):(this.prob[s]=i,this.escape[s]=r,r++)}for(this.prob[s]=i,this.updateThresh=256-Math.floor((i-n)/2),s=0;s<this.numSyms+1;s++)this.update[s]=0;if(this.update[this.numSyms]=1,this.updateCount=1,e)for(s=0,o=0,h=0;s<this.numSyms+1;s++){for(var u=this.prob[s+1];o<u;o++)this.probToSym[o]=s;for(var l=this.escape[s+1];h<l;h++)this.escProbToSym[h]=s}}},Qe.prototype.encode=function(t){var e=this.prob[t],i=this.prob[t+1]-e;if(i)return this.coder.encodeShift(i,e,8),this._update(t);this.encode(this.numSyms),e=this.escape[t],i=this.escape[t+1]-e;var r=this.escape[this.numSyms];return this.coder.encodeFreq(i,e,r),this._update(t)},Qe.prototype.decode=function(){var t=this.coder.decodeCulShift(8),e=this.probToSym[t],i=this.prob[e],r=this.prob[e+1]-i;if(this.coder.decodeUpdate(r,i,256),this._update(e,!0),e!==this.numSyms)return e;var n=this.escape[this.numSyms];return t=this.coder.decodeCulFreq(n),e=this.escProbToSym[t],i=this.escape[e],r=this.escape[e+1]-i,this.coder.decodeUpdate(r,i,n),this._update(e,!0),e},Qe.MAGIC="dfsm",Qe.compressFile=Je.compressFileHelper(Qe.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);var o=new Qe(s,i<0?257:256);Je.compressWithModel(t,i,o),s.encodeFinish()}),!0),Qe.decompressFile=Je.decompressFileHelper(Qe.MAGIC,(function(t,e,i){var r=new We(t);r.decodeStart(!0);var n=new Qe(r,i<0?257:256,!0);Je.decompressWithModel(e,i,n),r.decodeFinish()})),$e=Qe;var ti={};const ei=Le;var ii=function(t,e,i,r){var n;for(this.coder=t,this.numSyms=e+1,this.tree=ei.makeU32Buffer(2*this.numSyms),this.increment=+r||256,this.max_prob=+i||65280,n=0;n<e;n++)this.tree[this.numSyms+n]=1;this.tree[this.numSyms+n]=0|this.increment<<16,this._sumTree()};ii.factory=function(t,e,i){return function(r){return new ii(t,r,e,i)}},ii.prototype.clone=function(){var t,e=new ii(this.coder,this.size,this.max_prob,this.increment);for(t=1;t<this.tree.length;t++)e.tree[t]=this.tree[t];return e},ii.prototype.encode=function(t){var e=this.numSyms+t,i=this.tree[e],r=4294901760,n=16,s=this.increment<<16;0==(4294901760&i)?(this.encode(this.numSyms-1),r=65535,s-=1,n=0):t===this.numSyms-1&&(65535&this.tree[1])>>>0==1&&(s=-this.tree[e]);for(var o=0;e>1;){var h=e>>>1;1&e&&(o+=this.tree[2*h]),this.tree[e]+=s,e=h}var a=this.tree[1];this.tree[1]+=s,i=(i&r)>>>n,o=(o&r)>>>n,a=(a&r)>>>n,this.coder.encodeFreq(i,o,a),(4294901760&this.tree[1])>>>16>=this.max_prob&&this._rescale()},ii.prototype._decode=function(t){var e=4294901760,i=16,r=this.increment<<16;t&&(e=65535,r-=1,i=0);for(var n=(this.tree[1]&e)>>>i,s=this.coder.decodeCulFreq(n),o=1,h=0;o<this.numSyms;){this.tree[o]+=r;var a=(this.tree[2*o]&e)>>>i;o*=2,s-h>=a&&(h+=a,o++)}var u=o-this.numSyms,l=(this.tree[o]&e)>>>i;if(this.tree[o]+=r,this.coder.decodeUpdate(l,h,n),u===this.numSyms-1&&(65535&this.tree[1])>>>0==1)for(r=-this.tree[o];o>=1;)this.tree[o]+=r,o>>>=1;return(4294901760&this.tree[1])>>>16>=this.max_prob&&this._rescale(),u},ii.prototype.decode=function(){var t=this._decode(!1);return t===this.numSyms-1&&(t=this._decode(!0)),t},ii.prototype._rescale=function(){var t,e,i=!0;for(t=0;t<this.numSyms-1;t++)0==(65535&(e=this.tree[this.numSyms+t]))?(0==(e=(4294901758&e)>>>1)&&(e=1,i=!1),this.tree[this.numSyms+t]=e):i=!1;e=(4294901758&(e=this.tree[this.numSyms+t]))>>>1,i?e=0:0===e&&(e=65536),this.tree[this.numSyms+t]=e,this._sumTree()},ii.prototype._sumTree=function(){var t;for(t=this.numSyms-1;t>0;t--)this.tree[t]=this.tree[2*t]+this.tree[2*t+1]},ii.MAGIC="fenw",ii.compressFile=ei.compressFileHelper(ii.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);var o=new ii(s,i<0?257:256);ei.compressWithModel(t,i,o),s.encodeFinish()}),!0),ii.decompressFile=ei.decompressFileHelper(ii.MAGIC,(function(t,e,i){var r=new We(t);r.decodeStart(!0);var n=new ii(r,i<0?257:256);ei.decompressWithModel(e,i,n),r.decodeFinish()})),ti=ii;var ri={};const ni=Le;var si=function(t,e){return t-e},oi=function(t,e,i,r,n){this.coder=t,this.increment=+r||256,this.max_prob=+i||65280,this.sym=ni.makeU16Buffer(e+1),this.prob=ni.makeU16Buffer(e+2),this.sym[0]=e,this.prob[0]=0,this.seenSyms=1,this.prob[this.seenSyms]=this.increment,this.numSyms=e,n&&(this.sortedSeen=[e])};oi.factory=function(t,e,i,r){return function(n){return new oi(t,n,e,i,r)}},oi.prototype.clone=function(){var t,e=new oi(this.coder,this.numSyms,this.max_prob,this.increment,!!this.sortedSeen);for(t=0;t<this.seenSyms;t++)e.sym[t]=this.sym[t],e.prob[t]=this.prob[t];return e.prob[t]=this.prob[t],e.seenSyms=this.seenSyms,this.sortedSeen&&(e.sortedSeen=this.sortedSeen.slice(0)),e},oi.prototype._update=function(t,e,i){var r,n;for(r=e;r<this.seenSyms-1;r++)this.sym[r]=this.sym[r+1],this.prob[r]=this.prob[r+1]-i;e<this.seenSyms?(this.sym[r]=t,this.prob[r]=this.prob[r+1]-i,this.prob[this.seenSyms]=n=this.prob[this.seenSyms]+this.increment,t===this.numSyms&&this.seenSyms>=this.numSyms&&(n=this.prob[--this.seenSyms],this.sortedSeen&&this.sortedSeen.length--)):(n=this.prob[this.seenSyms],this.sym[e]=t,this.prob[e]=n,n+=this.increment,this.prob[++this.seenSyms]=n,this.sortedSeen&&(this.sortedSeen.push(t),this.sortedSeen.sort(si))),n>=this.max_prob&&this._rescale()},oi.prototype._rescale=function(){var t,e,i=0,r=!0;for(this.sortedSeen&&(this.sortedSeen.length=0),t=0,e=0;t<this.seenSyms;t++){var n=this.sym[t],s=this.prob[t+1]-this.prob[t];(s>>>=1)>0&&(n===this.numSyms&&(r=!1),this.sym[e]=n,this.prob[e++]=i,i+=s,this.sortedSeen&&this.sortedSeen.push(n))}this.prob[e]=i,this.seenSyms=e,this.sortedSeen&&this.sortedSeen.sort(si),r&&this.seenSyms<this.numSyms&&this._update(this.numSyms,this.seenSyms)},oi.prototype.decode=function(){var t,e=this.prob[this.seenSyms],i=this.coder.decodeCulFreq(e);for(t=this.seenSyms-1;t>=0&&!(this.prob[t]<=i);t--);var r=this.sym[t],n=this.prob[t],s=this.prob[t+1]-n;if(this.coder.decodeUpdate(s,n,e),this._update(r,t,s),r===this.numSyms){if(s=1,e=this.numSyms,this.sortedSeen){var o=this.sortedSeen;for(e=this.numSyms-this.seenSyms,o[o.length-1]===this.numSyms&&e++,r=n=this.coder.decodeCulFreq(e),t=0;t<o.length&&o[t]<=r;t++)r++}else r=n=this.coder.decodeCulFreq(e);this.coder.decodeUpdate(s,n,e),this._update(r,this.seenSyms)}return r},oi.prototype.encode=function(t){var e,i,r,n;for(e=this.seenSyms-1;e>=0;e--)if(t===this.sym[e])return r=this.prob[e],i=this.prob[e+1]-r,n=this.prob[this.seenSyms],this.coder.encodeFreq(i,r,n),this._update(t,e,i);if(this.encode(this.numSyms),i=1,r=t,n=this.numSyms,this.sortedSeen){var s=this.sortedSeen;for(n-=this.seenSyms,s[s.length-1]===this.numSyms&&n++,e=0;e<s.length&&s[e]<t;e++)r--}return this.coder.encodeFreq(i,r,n),this._update(t,this.seenSyms)},oi.MAGIC="mtfm",oi.compressFile=ni.compressFileHelper(oi.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);var o=new oi(s,i<0?257:256);ni.compressWithModel(t,i,o),s.encodeFinish()}),!0),oi.decompressFile=ni.decompressFileHelper(oi.MAGIC,(function(t,e,i){var r=new We(t);r.decodeStart(!0);var n=new oi(r,i<0?257:256);ni.decompressWithModel(e,i,n),r.decodeFinish()})),ri=oi;var hi={},ai=function(t,e){this.bitstream=t,this.bits=Le.fls(e-1)};ai.factory=function(t){return function(e){return new ai(t,e)}},ai.prototype.encode=function(t){var e;for(e=this.bits-1;e>=0;e--){var i=t>>>e&1;this.bitstream.writeBit(i)}},ai.prototype.decode=function(){var t,e=0;for(t=this.bits-1;t>=0;t--)e<<=1,this.bitstream.readBit()&&e++;return e},ai.MAGIC="nomo",ai.compressFile=Le.compressFileHelper(ai.MAGIC,(function(t,e,i,r){var n=new me(e),s=new ai(n,i<0?257:256);Le.compressWithModel(t,i,s),n.flush()})),ai.decompressFile=Le.decompressFileHelper(ai.MAGIC,(function(t,e,i){var r=new me(t),n=new ai(r,i<0?257:256);Le.decompressWithModel(e,i,n)})),hi=ai;var ui={},li=function(t,e,i,r){var n,s=Le.fls(t-1);for(this.extraStates=+e||0,this.lgDistanceModel=i(1+s+e),this.distanceModel=[],n=2;n<=s;n++){var o=n-1;this.distanceModel[n]=r(1<<o)}};li.prototype.encode=function(t){if(t<2)this.lgDistanceModel.encode(t+this.extraStates);else{var e=Le.fls(t);this.lgDistanceModel.encode(e+this.extraStates);var i=t&(1<<e-1)-1;this.distanceModel[e].encode(i)}},li.prototype.decode=function(){var t=this.lgDistanceModel.decode()-this.extraStates;return t<2?t:(1<<t-1)+this.distanceModel[t].decode()},ui=li;var ci;de.EOF,BWTC=Object.create(null),BWTC.MAGIC="bwtc",BWTC.compressFile=Le.compressFileHelper(BWTC.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);var o=9;"number"==typeof r&&r>=1&&r<=9&&(o=r),s.encodeByte(o);var h=o<=5;o*=1e5;var a,u,l,c,f,d,p=Le.makeU8Buffer(o),m=function(){var e;for(e=0;e<o;){var i=t.readByte();if(i<0)break;p[e++]=i}return e},g=Le.makeU8Buffer(o),y=Le.makeS32Buffer(o),b=Le.makeU8Buffer(256),w=hi.factory(s),v=new ui(o,0,w,w);do{if(0===(a=m()))break;a===p.length?(s.encodeFreq(1,0,3),u=p):(s.encodeFreq(1,1,3),v.encode(a),u=p.subarray(0,a)),c=Re.bwtransform(u,g,y,a,256),v.encode(c);var M=Le.makeU16Buffer(512);for(f=0;f<a;f++)M[256+(l=g[f])]=1;for(f=255;f>0;f--)M[f]=M[2*f]+M[2*f+1];for(M[0]=1,f=1;f<512;f++){var S=f>>>1,_=1<<9-Le.fls(f);if(0===M[S]||M[S]===2*_);else if(f>=256)s.encodeBit(M[f]);else{var I=M[f];I=0===I?0:I===_?2:1,s.encodeFreq(1,I,3)}}var C=0;for(f=0;f<256;f++)M[256+f]&&(b[C++]=f);for(M=null,f=0;f<a;f++){for(l=g[f],d=0;d<C&&b[d]!==l;d++);for(g[f]=d;d>0;d--)b[d]=b[d-1];b[0]=l}var k=new ti(s,C+1,65280,256);h&&(k=new $e(s,C+1));var T=0,A=function(){for(;0!==T;)1&T?(k.encode(0),T-=1):(k.encode(1),T-=2),T>>>=1};for(f=0;f<a;f++)0===(l=g[f])?T++:(A(),k.encode(l+1),T=0);A()}while(a===p.length);s.encodeFreq(1,2,3),s.encodeFinish()}),!0),BWTC.decompressFile=Le.decompressFileHelper(BWTC.MAGIC,(function(t,e,i){var r=new We(t);r.decodeStart(!0);var n=r.decodeByte(),s=n<=5;n*=1e5;for(var o,h,a,u,l,c=Le.makeU8Buffer(n),f=Le.makeU8Buffer(n),d=Le.makeS32Buffer(n),p=Le.makeU8Buffer(256),m=hi.factory(r),g=new ui(n,0,m,m);;){var y=r.decodeCulFreq(3);if(r.decodeUpdate(1,y,3),0===y)h=n,o=c;else if(1===y)h=g.decode(),o=c.subarray(0,h);else if(2===y)break;var b=g.decode(),w=Le.makeU16Buffer(512);for(w[0]=1,a=1;a<512;a++){var v=a>>>1,M=1<<9-Le.fls(a);if(0===w[v]||w[v]===2*M)w[a]=w[v]>>>1;else if(a>=256)w[a]=r.decodeBit();else{var S=r.decodeCulFreq(3);r.decodeUpdate(1,S,3),w[a]=2===S?M:S}}var _=0;for(a=0;a<256;a++)w[256+a]&&(p[_++]=a);w=null;var I=new ti(r,_+1,65280,256);s&&(I=new $e(r,_+1,!0));var C=1;for(a=0;a<h;)if(0===(l=I.decode())){for(u=0;u<C;u++)o[a++]=0;C*=2}else if(1===l){for(u=0;u<C;u++)o[a++]=0,o[a++]=0;C*=2}else C=1,o[a++]=l-1;for(a=0;a<h;a++){for(u=o[a],o[a]=l=p[u];u>0;u--)p[u]=p[u-1];p[0]=l}Re.unbwtransform(c,f,d,h,b),e.write(f,0,h)}r.decodeFinish()})),ci=BWTC;var fi,di=Le.arraycopy(Le.makeU32Buffer(256),[0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]),pi=function(){var t=4294967295;this.getCRC=function(){return~t>>>0},this.updateCRC=function(e){t=t<<8^di[255&(t>>>24^e)]},this.updateCRCRun=function(e,i){for(;i-- >0;)t=t<<8^di[255&(t>>>24^e)]}},mi=function(t,e,i){for(var r=t.length,n=e,s=t.length-2;e>=i&&t[e]%r>n;)s=e,e-=n-e+1;for(e=Math.max(i-1,e);s>e+1;){var o=e+s>>1;t[o]%r>n?s=o:e=o}return s},gi=fe({allocateHuffmanCodeLengths:function(t,e){switch(t.length){case 2:t[1]=1;case 1:return void(t[0]=1)}!function(t){var e,i,r,n,s=t.length;for(t[0]+=t[1],e=0,i=1,r=2;i<s-1;i++)r>=s||t[e]<t[r]?(n=t[e],t[e++]=i):n=t[r++],r>=s||e<i&&t[e]<t[r]?(n+=t[e],t[e++]=i+s):n+=t[r++],t[i]=n}(t);var i=function(t,e){var i,r=t.length-2;for(i=1;i<e-1&&r>1;i++)r=mi(t,r-1,0);return r}(t,e);t[0]%t.length>=i?function(t){var e,i,r,n,s=t.length-2,o=t.length-1;for(e=1,i=2;i>0;e++){for(n=i-((r=s)-(s=mi(t,r-1,0)));n>0;n--)t[o--]=e;i=r-s<<1}}(t):function(t,e,i){var r,n,s,o,h=t.length-2,a=t.length-1,u=1==i?2:1,l=1==i?e-2:e;for(r=u<<1;r>0;u++){for(n=h,h=h<=e?h:mi(t,n-1,e),s=0,u>=i?s=Math.min(l,1<<u-i):u==i-1&&(s=1,t[h]==n&&h++),o=r-(n-h+s);o>0;o--)t[a--]=u;l-=s,r=n-h+s<<1}}(t,i,e-Le.fls(i-1))}}),yi=de.EOF,bi=function(t,e){var i,r=t[e];for(i=e;i>0;i--)t[i]=t[i-1];return t[0]=r,r},wi={OK:0,LAST_BLOCK:-1,NOT_BZIP_DATA:-2,UNEXPECTED_INPUT_EOF:-3,UNEXPECTED_OUTPUT_EOF:-4,DATA_ERROR:-5,OUT_OF_MEMORY:-6,OBSOLETE_INPUT:-7,END_OF_BLOCK:-8},vi={};vi[wi.LAST_BLOCK]="Bad file checksum",vi[wi.NOT_BZIP_DATA]="Not bzip data",vi[wi.UNEXPECTED_INPUT_EOF]="Unexpected input EOF",vi[wi.UNEXPECTED_OUTPUT_EOF]="Unexpected output EOF",vi[wi.DATA_ERROR]="Data error",vi[wi.OUT_OF_MEMORY]="Out of memory",vi[wi.OBSOLETE_INPUT]="Obsolete (pre 0.9.5) bzip format not supported.";var Mi=function(t,e){var i=vi[t]||"unknown error";e&&(i+=": "+e);var r=new TypeError(i);throw r.errorCode=t,r},Si=function(t,e){this.writePos=this.writeCurrent=this.writeCount=0,this._start_bunzip(t,e)};Si.prototype._init_block=function(){return this._get_next_block()?(this.blockCRC=new pi,!0):(this.writeCount=-1,!1)},Si.prototype._start_bunzip=function(t,e){var i=Le.makeU8Buffer(4);4===t.read(i,0,4)&&"BZh"===String.fromCharCode(i[0],i[1],i[2])||Mi(wi.NOT_BZIP_DATA,"bad magic");var r=i[3]-48;(r<1||r>9)&&Mi(wi.NOT_BZIP_DATA,"level out of range"),this.reader=new me(t),this.dbufSize=1e5*r,this.nextoutput=0,this.outputStream=e,this.streamCRC=0},Si.prototype._get_next_block=function(){var t,e,i,r=this.reader,n=r.readBits(48);if(25779555029136===n)return!1;54156738319193!==n&&Mi(wi.NOT_BZIP_DATA),this.targetBlockCRC=r.readBits(32),this.streamCRC=(this.targetBlockCRC^(this.streamCRC<<1|this.streamCRC>>>31))>>>0,r.readBits(1)&&Mi(wi.OBSOLETE_INPUT);var s=r.readBits(24);s>this.dbufSize&&Mi(wi.DATA_ERROR,"initial position out of bounds");var o=r.readBits(16),h=Le.makeU8Buffer(256),a=0;for(t=0;t<16;t++)if(o&1<<15-t){var u=16*t;for(i=r.readBits(16),e=0;e<16;e++)i&1<<15-e&&(h[a++]=u+e)}var l=r.readBits(3);(l<2||l>6)&&Mi(wi.DATA_ERROR);var c=r.readBits(15);0===c&&Mi(wi.DATA_ERROR);var f=Le.makeU8Buffer(256);for(t=0;t<l;t++)f[t]=t;var d=Le.makeU8Buffer(c);for(t=0;t<c;t++){for(e=0;r.readBits(1);e++)e>=l&&Mi(wi.DATA_ERROR);d[t]=bi(f,e)}var p,m=a+2,g=[];for(e=0;e<l;e++){var y,b,w=Le.makeU8Buffer(m),v=Le.makeU16Buffer(21);for(o=r.readBits(5),t=0;t<m;t++){for(;(o<1||o>20)&&Mi(wi.DATA_ERROR),r.readBits(1);)r.readBits(1)?o--:o++;w[t]=o}for(y=b=w[0],t=1;t<m;t++)w[t]>b?b=w[t]:w[t]<y&&(y=w[t]);p={},g.push(p),p.permute=Le.makeU16Buffer(258),p.limit=Le.makeU32Buffer(22),p.base=Le.makeU32Buffer(21),p.minLen=y,p.maxLen=b;var M=0;for(t=y;t<=b;t++)for(v[t]=p.limit[t]=0,o=0;o<m;o++)w[o]===t&&(p.permute[M++]=o);for(t=0;t<m;t++)v[w[t]]++;for(M=o=0,t=y;t<b;t++)M+=v[t],p.limit[t]=M-1,M<<=1,o+=v[t],p.base[t+1]=M-o;p.limit[b+1]=Number.MAX_VALUE,p.limit[b]=M+v[b]-1,p.base[y]=0}var S=Le.makeU32Buffer(256);for(t=0;t<256;t++)f[t]=t;var _,I=0,C=0,k=0,T=this.dbuf=Le.makeU32Buffer(this.dbufSize);for(m=0;;){for(m--||(m=49,k>=c&&Mi(wi.DATA_ERROR),p=g[d[k++]]),t=p.minLen,e=r.readBits(t);t>p.maxLen&&Mi(wi.DATA_ERROR),!(e<=p.limit[t]);t++)e=e<<1|r.readBits(1);((e-=p.base[t])<0||e>=258)&&Mi(wi.DATA_ERROR);var A=p.permute[e];if(0!==A&&1!==A){if(I)for(I=0,C+o>this.dbufSize&&Mi(wi.DATA_ERROR),S[_=h[f[0]]]+=o;o--;)T[C++]=_;if(A>a)break;C>=this.dbufSize&&Mi(wi.DATA_ERROR),S[_=h[_=bi(f,t=A-1)]]++,T[C++]=_}else I||(I=1,o=0),o+=0===A?I:2*I,I<<=1}for((s<0||s>=C)&&Mi(wi.DATA_ERROR),e=0,t=0;t<256;t++)i=e+S[t],S[t]=e,e=i;for(t=0;t<C;t++)T[S[_=255&T[t]]]|=t<<8,S[_]++;var x=0,E=0,B=0;return C&&(E=255&(x=T[s]),x>>=8,B=-1),this.writePos=x,this.writeCurrent=E,this.writeCount=C,this.writeRun=B,!0},Si.prototype._read_bunzip=function(t,e){var i,r,n;if(this.writeCount<0)return 0;for(var s=this.dbuf,o=this.writePos,h=this.writeCurrent,a=this.writeCount,u=(this.outputsize,this.writeRun);a;){for(a--,r=h,h=255&(o=s[o]),o>>=8,3==u++?(i=h,n=r,h=-1):(i=1,n=h),this.blockCRC.updateCRCRun(n,i);i--;)this.outputStream.writeByte(n),this.nextoutput++;h!=r&&(u=0)}return this.writeCount=a,this.blockCRC.getCRC()!==this.targetBlockCRC&&Mi(wi.DATA_ERROR,"Bad block CRC (got "+this.blockCRC.getCRC().toString(16)+" expected "+this.targetBlockCRC.toString(16)+")"),this.nextoutput},Si.Err=wi,Si.decode=function(t,e,i){for(var r=Le.coerceInputStream(t),n=Le.coerceOutputStream(e,e),s=n.stream,o=new Si(r,s);!("eof"in r)||!r.eof();)if(o._init_block())o._read_bunzip();else{var h=o.reader.readBits(32);if(h!==o.streamCRC&&Mi(wi.DATA_ERROR,"Bad stream CRC (got "+o.streamCRC.toString(16)+" expected "+h.toString(16)+")"),!i||!("eof"in r)||r.eof())break;o._start_bunzip(r,s)}return n.retval},Si.decodeBlock=function(t,e,i){var r=Le.coerceInputStream(t),n=Le.coerceOutputStream(i,i),s=n.stream,o=new Si(r,s);return o.reader.seekBit(e),o._get_next_block()&&(o.blockCRC=new pi,o.writeCopies=0,o._read_bunzip()),n.retval},Si.table=function(t,e,i){var r=new de;r.delegate=Le.coerceInputStream(t),r.pos=0,r.readByte=function(){return this.pos++,this.delegate.readByte()},r.tell=function(){return this.pos},r.delegate.eof&&(r.eof=r.delegate.eof.bind(r.delegate));var n=new de;n.pos=0,n.writeByte=function(){this.pos++};var s=new Si(r,n);for(s.dbufSize;!("eof"in r)||!r.eof();){var o=s.reader.tellBit();if(s._init_block()){var h=n.pos;s._read_bunzip(),e(o,n.pos-h)}else{if(s.reader.readBits(32),!i||!("eof"in r)||r.eof())break;s._start_bunzip(r,n)}}};var _i=function(t,e){var i,r=[];for(i=0;i<e;i++)r[i]=t[i]<<9|i;r.sort((function(t,e){return t-e}));var n=r.map((function(t){return t>>>9}));for(gi.allocateHuffmanCodeLengths(n,20),this.codeLengths=Le.makeU8Buffer(e),i=0;i<e;i++){var s=511&r[i];this.codeLengths[s]=n[i]}};_i.prototype.computeCanonical=function(){var t,e=this.codeLengths.length,i=[];for(t=0;t<e;t++)i[t]=this.codeLengths[t]<<9|t;i.sort((function(t,e){return t-e})),this.code=Le.makeU32Buffer(e);var r=0,n=0;for(t=0;t<e;t++){var s=i[t]>>>9,o=511&i[t];r<<=s-n,this.code[o]=r++,n=s}},_i.prototype.cost=function(t,e,i){var r,n=0;for(r=0;r<i;r++)n+=this.codeLengths[t[e+r]];return n},_i.prototype.emit=function(t){var e,i=this.codeLengths[0];for(t.writeBits(5,i),e=0;e<this.codeLengths.length;e++){var r,n,s=this.codeLengths[e];for(i<s?(r=2,n=s-i):(r=3,n=i-s);n-- >0;)t.writeBits(2,r);t.writeBit(0),i=s}},_i.prototype.encode=function(t,e){t.writeBits(this.codeLengths[e],this.code[e])};var Ii=function(t,e,i,r){for(var n=0,s=-1,o=0;n<i&&!(4===o&&(e[n++]=0,n>=i));){var h=t.readByte();if(h===yi)break;if(r.updateCRC(h),h!==s)s=h,o=1;else if(++o>4){if(o<256){e[n-1]++;continue}o=1}e[n++]=h}return n},Ci=function(t,e,i){var r,n,s;for(r=0,s=0;r<i.length;r+=50){var o=Math.min(50,i.length-r),h=0,a=e[0].cost(i,r,o);for(n=1;n<e.length;n++){var u=e[n].cost(i,r,o);u<a&&(h=n,a=u)}t[s++]=h}},ki=function(t,e,i){var r,n,s,o,h=Le.makeU8Buffer(e),a=Re.bwtransform2(t,h,e,256);i.writeBit(0),i.writeBits(24,a);var u=[],l=[];for(n=0;n<e;n++)u[r=t[n]]=!0,l[r>>>4]=!0;for(n=0;n<16;n++)i.writeBit(!!l[n]);for(n=0;n<16;n++)if(l[n])for(s=0;s<16;s++)i.writeBit(!!u[n<<4|s]);var c=0;for(n=0;n<256;n++)u[n]&&c++;var f=Le.makeU16Buffer(e+1),d=c+1,p=[];for(n=0;n<=d;n++)p[n]=0;var m=Le.makeU8Buffer(c);for(n=0,s=0;n<256;n++)u[n]&&(m[s++]=n);u=null,l=null;var g=0,y=0,b=function(t){f[g++]=t,p[t]++},w=function(){for(;0!==y;)1&y?(b(0),y-=1):(b(1),y-=2),y>>>=1};for(n=0;n<h.length;n++){for(r=h[n],s=0;s<c&&m[s]!==r;s++);bi(m,s),0===s?y++:(w(),b(s+1),y=0)}w(),b(d),f=f.subarray(0,g);var v,M=[];for(v=g>=2400?6:g>=1200?5:g>=600?4:g>=200?3:2,M.push(new _i(p,d+1)),n=0;n<=d;n++)p[n]=1;M.push(new _i(p,d+1)),p=null;var S=Le.makeU8Buffer(Math.ceil(g/50));for(function(t,e,i,r,n){for(var s,o,h,a=[];t.length<e;){for(Ci(r,t,i),s=0;s<t.length;s++)a[s]=0;for(s=0;s<r.length;s++)a[r[s]]++;var u=a.indexOf(Math.max.apply(Math,a)),l=[];for(s=0,o=0;s<r.length;s++)if(r[s]===u){var c=50*s,f=Math.min(c+50,i.length);l.push({index:s,cost:t[u].cost(i,c,f-c)})}for(l.sort((function(t,e){return t.cost-e.cost})),s=l.length>>>1;s<l.length;s++)r[l[s].index]=t.length;t.push(null);var d,p=[];for(s=0;s<t.length;s++)for(d=p[s]=[],o=0;o<n;o++)d[o]=0;for(s=0,o=0;s<i.length;)for(d=p[r[o++]],h=0;h<50&&s<i.length;h++)d[i[s++]]++;for(s=0;s<t.length;s++)t[s]=new _i(p[s],n)}}(M,v,f,S,d+1),Ci(S,M,f),i.writeBits(3,M.length),i.writeBits(15,S.length),n=0;n<M.length;n++)m[n]=n;for(n=0;n<S.length;n++){var _=S[n];for(s=0;s<M.length&&m[s]!==_;s++);for(bi(m,s);s>0;s--)i.writeBit(1);i.writeBit(0)}for(n=0;n<M.length;n++)M[n].emit(i),M[n].computeCanonical();for(n=0,o=0;n<g;){var I=M[S[o++]];for(s=0;s<50&&n<g;s++)I.encode(i,f[n++])}},Ti=Object.create(null);Ti.compressFile=function(t,e,i){t=Le.coerceInputStream(t);var r=Le.coerceOutputStream(e,e);e=new me(r.stream);var n=9;if("number"==typeof i&&(n=i),n<1||n>9)throw new Error("Invalid block size multiplier");var s=1e5*n;s-=19,e.writeByte("B".charCodeAt(0)),e.writeByte("Z".charCodeAt(0)),e.writeByte("h".charCodeAt(0)),e.writeByte("0".charCodeAt(0)+n);var o,h=Le.makeU8Buffer(s),a=0;do{var u=new pi;(o=Ii(t,h,s,u))>0&&(a=((a<<1|a>>>31)^u.getCRC())>>>0,e.writeBits(48,54156738319193),e.writeBits(32,u.getCRC()),ki(h,o,e))}while(o===s);return e.writeBits(48,25779555029136),e.writeBits(32,a),e.flush(),r.retval},Ti.decompressFile=Si.decode,Ti.decompressBlock=Si.decodeBlock,Ti.table=Si.table,fi=Ti;var Ai,xi=Object.create(null);xi.MAGIC="dmc!";var Ei=function(t,e,i){this.out=[],this.model=i?i.clone():new ri(t,e,65280,256),this.count=Le.makeU16Buffer(e),this.sum=0};Ei.prototype.clone=function(t,e){var i,r=new Ei(t,e,null);for(i=0;i<e;i++)r.out[i]=this.out[i];return r};var Bi=function(t,e,i,r){var n,s;for(this.coder=t,this.size=e,this.MIN_CNT1=i||8,this.MIN_CNT2=r||128,this.nodes=[],n=0;n<e;n++)this.nodes[n]=new Ei(t,e);for(n=0;n<e;n++)for(s=0;s<e;s++)this.nodes[n].out[s]=this.nodes[s];this.current=this.nodes[0]};Bi.prototype.maybeSplit=function(t,e,i){var r,n=t.count[e],s=i.sum;if(n<=this.MIN_CNT1||s-n<=this.MIN_CNT2)return i;var o=i.clone(this.coder,this.size);for(this.nodes.push(o),t.out[e]=o,o.sum=i.sum=0,r=0;r<this.size;r++)o.count[r]=i.count[r]*n/s,o.sum+=o.count[r],i.count[r]-=o.count[r],i.sum+=i.count[r];return o},Bi.prototype.encode=function(t){var e=this.current;e.model.encode(t);var i=e.out[t];65535!==e.count[t]&&(e.count[t]++,e.sum++),this.current=this.maybeSplit(e,t,i)},Bi.prototype.decode=function(){var t=this.current,e=t.model.decode(),i=t.out[e];return 65535!==t.count[e]&&(t.count[e]++,t.sum++),this.current=this.maybeSplit(t,e,i),e},xi.compressFile=Le.compressFileHelper(xi.MAGIC,(function(t,e,i,r){var n=+(r=r||{}).m||8,s=+r.n||128;Le.writeUnsignedNumber(e,n),Le.writeUnsignedNumber(e,s);var o=new We(e);o.encodeStart(202,0);for(var h=new Bi(o,i<0?257:256,n,s),a=0;a!==i;){var u=t.readByte();if(u===de.EOF){h.encode(256);break}h.encode(u),a++}o.encodeFinish()})),xi.decompressFile=Le.decompressFileHelper(xi.MAGIC,(function(t,e,i){var r=Le.readUnsignedNumber(t),n=Le.readUnsignedNumber(t),s=new We(t);s.decodeStart();for(var o=new Bi(s,i<0?257:256,r,n),h=0;h!==i;){var a=o.decode();if(256===a)break;e.writeByte(a),h++}s.decodeFinish()})),Ai=xi;var Li,Ri=Object.create(null);Ri.MAGIC="lzjb";var Pi=de.EOF;Ri.compressFile=Le.compressFileHelper(Ri.MAGIC,(function(t,e,i,r){var n,s,o,h,a,u,l,c=1024,f=1;"number"==typeof r&&(c*=2,r=Math.max(1,Math.min(9,r))-1,f=1<<Math.floor(r/2),1&r&&(f=Math.round(1.5*f)),r>=2&&r<=4&&f++),u=Le.makeU16Buffer(c*f);for(var d=Le.makeU8Buffer(1024),p=0,m=function(t){return d[p++]=t,p>=d.length&&(p=0),t},g=Le.makeU8Buffer(17),y=0,b=function(){var t;for(t=0;t<y;t++)e.writeByte(g[t]);y=0},w=[],v=function(){return w.length?w.pop():t.readByte()},M=function(t){w.push(t)},S=128,_=[];;){var I=v();if(I===Pi)break;256==(S<<=1)&&(b(),S=1,g[0]=0,y=1);var C=v();if(C===Pi){g[y++]=m(I);break}var k=v();if(k!==Pi){for(h=(I<<16)+(C<<8)+k,h^=h>>9,h+=h>>5,a=((h^=I)&c-1)*f,_.length=0,l=0;l<f;l++){o=p-u[a+l]&1023,n=d.length+p-o;var T=d[1023&n],A=d[n+1&1023],x=d[n+2&1023];0===o?T=1^I:1==o?(A=I,x=C):2==o&&(x=I),I===T&&C===A&&k===x&&_.push(o)}for(l=f-1;l>0;l--)u[a+l]=u[a+l-1];if(u[a]=p,0===_.length)g[y++]=m(I),M(k),M(C);else{g[0]|=S,m(I),m(C),m(k);var E=v(),B=_[0],L=d.length+p;for(s=3;s<66&&E!==Pi;s++,L++){for(l=0;l<_.length;)E!==d[L-_[l]&1023]?(B=_[l],_.splice(l,1)):l++;if(0===_.length)break;m(E),E=v()}0!==_.length&&(B=_[0]),M(E),g[y++]=s-3<<2|B>>8,g[y++]=255&B}}else g[y++]=m(I),M(C)}b()})),Ri.decompressFile=Le.decompressFileHelper(Ri.MAGIC,(function(t,e,i){for(var r,n,s,o,h=Le.makeU8Buffer(1024),a=0,u=128;0!==i&&(o=t.readByte())!==Pi;)if(256==(u<<=1)&&(u=1,n=o,o=t.readByte()),n&u)for(s=3+(o>>2),(r=a-(1023&(o<<8|t.readByte())))<0&&(r+=h.length),i>=0&&(i-=s);--s>=0;)o=h[a++]=h[r++],e.writeByte(o),a>=h.length&&(a=0),r>=h.length&&(r=0);else e.writeByte(o),h[a++]=o,a>=h.length&&(a=0),i>=0&&i--})),Li=Ri;var Oi,ji=Object.create(null);ji.MAGIC="lzjR",ji.compressFile=Le.compressFileHelper(ji.MAGIC,(function(t,e,i,r,n){var s,o,h,a,u,l,c,f=1024,d=1;"number"==typeof r&&(f*=2,r=Math.max(1,Math.min(9,r))-1,d=1<<Math.floor(r/2),1&r&&(d=Math.round(1.5*d)),r>=2&&r<=4&&d++);var p=new We(e);p.encodeStart(n,1),l=Le.makeU16Buffer(f*d);for(var m=Le.makeU8Buffer(1024),g=0,y=function(t){return m[g++]=t,g>=m.length&&(g=0),t},b=[],w=function(){return b.length?b.pop():t.readByte()},v=function(t){b.push(t)},M=[],S=hi.factory(p),_=ti.factory(p,65280,256),I=new Fe(_,256,1+(i<0?257:256)),C=function(t){return t<=32?_(t):S(t)},k=new ui(64,0,_,C),T=new ui(1024,1,_,C),A=32,x=0;;){var E=g,B=w();if(B===de.EOF)break;var L=w();if(L===de.EOF){I.encode(y(B),A);break}var R=w();if(R!==de.EOF){for(a=(B<<16)+(L<<8)+R,a^=a>>9,a+=a>>5,u=((a^=B)&f-1)*d,M.length=0,c=0;c<d;c++){h=g-l[u+c]&1023,s=m.length+g-h;var P=m[1023&s],O=m[s+1&1023],j=m[s+2&1023];1==h?(O=B,j=L):2==h&&(j=B),B===P&&L===O&&R===j&&M.push(h)}for(c=d-1;c>0;c--)l[u+c]=l[u+c-1];if(l[u]=g,0===M.length)I.encode(y(B),A),v(R),v(L),A=B;else{I.encode(256,A),y(B),y(L),y(R),A=R;var D=w(),Y=M[0],U=m.length+g;for(o=3;o<66&&D!==de.EOF;o++,U++){for(c=0;c<M.length;)D!==m[U-M[c]&1023]?(Y=M[c],M.splice(c,1)):c++;if(0===M.length)break;y(D),A=D,D=w()}0!==M.length&&(Y=M[0]),v(D),k.encode(o-3),(h=E-Y&1023)===x?T.encode(-1):(T.encode(h),x=h)}}else I.encode(y(B),A),v(L),A=B}i<0&&I.encode(257,A),p.encodeFinish()}),!0),ji.decompressFile=Le.decompressFileHelper(ji.MAGIC,(function(t,e,i){var r,n,s,o=Le.makeU8Buffer(1024),h=0,a=new We(t);a.decodeStart(!0);for(var u=hi.factory(a),l=ti.factory(a,65280,256),c=new Fe(l,256,1+(i<0?257:256)),f=function(t){return t<=32?l(t):u(t)},d=new ui(64,0,l,f),p=new ui(1024,1,l,f),m=32,g=0;0!==i&&257!==(s=c.decode(m));)if(256===s)for(n=d.decode()+3,(r=p.decode())<0?r=g:g=r,i>=0&&(i-=n);--n>=0;)s=m=o[h++]=o[r++],e.writeByte(s),h>=o.length&&(h=0),r>=o.length&&(r=0);else e.writeByte(s),o[h++]=m=s,h>=o.length&&(h=0),i>=0&&i--;a.decodeFinish()})),Oi=ji;var Di;const Yi=ti;var Ui=Object.create(null);Ui.MAGIC="lzp3";var Xi=function(t){this.buffer=Le.makeU8Buffer(Math.min(t+4,1<<20)),this.pos=0,this.ctxt4=Le.makeU32Buffer(65536),this.ctxt3=Le.makeU32Buffer(4096),this.ctxt2=Le.makeU32Buffer(65536),this.put(99),this.put(83),this.put(97),this.put(32)};Xi.prototype.put=function(t){return this.buffer[this.pos++]=t,this.pos>=1<<20&&(this.pos=0),t},Xi.prototype.get=function(t){return this.buffer[1048575&t]},Xi.prototype.context=function(t,e){var i,r=0;for(t=t-e&1048575,i=0;i<e;i++)r=r<<8|this.buffer[t++],t>=1<<20&&(t=0);return r},Xi.prototype.getIndex=function(t,e){var i=this.context(t,4),r=65535&(i>>>15^i),n=4095&(i>>>11^i),s=65535&i,o=0;return 0===e&&(0!==(o=this.ctxt4[r])&&i!==this.context(o-1,4)&&(o=0),0===o&&(0!==(o=this.ctxt3[n])&&(16777215&i)!==this.context(o-1,3)&&(o=0),0===o&&0!==(o=this.ctxt2[s])&&(i&&65535)!==this.context(o-1,2)&&(o=0))),e&&e--,this.ctxt4[r]=this.ctxt3[n]=this.ctxt2[s]=1+(t|e<<20),o},Ui.compressFile=Le.compressFileHelper(Ui.MAGIC,(function(t,e,i,r){var n,s,o,h=new Xi(i>=0?i:1<<20),a=new We(e);a.encodeStart(0,0),n=Yi.factory(a,65280,256);var u=hi.factory(a);s=function(t){return t>256?u(t):n(t)},o=function(){a.encodeFinish()};var l,c=new Fe(n,256,i<0?257:256),f=[];for(l=0;l<16;l++)f[l]=new ui(1048576,1,n,s);for(var d,p=0,m=0;p!==i;){var g=t.readByte();d=h.pos;var y=h.getIndex(d,0);if(0!==y){for(var b=1+(--y>>>20),w=0;h.get(y+w)===g&&w<1048575;)w++,h.put(g),g=t.readByte();b===w?f[15&m].encode(-1):f[15&m].encode(w),h.getIndex(d,w),p+=w,m<<=1,w>0&&(m|=1)}var v=h.get(h.pos-1);if(g===de.EOF){i<0&&c.encode(256,v);break}c.encode(g,v),h.put(g),p++}o&&o()})),Ui.decompressFile=Le.decompressFileHelper(Ui.MAGIC,(function(t,e,i){var r,n,s,o=!!(128&t.readByte()),h=new Xi(i>=0?i:1<<20);if(o){var a=new me(t);r=Ue.factory(a,65535),n=hi.factory(a)}else{var u=new We(t);u.decodeStart(!0),r=Yi.factory(u,65280,256);var l=hi.factory(u);n=function(t){return t>256?l(t):r(t)},s=function(){u.decodeFinish()}}var c,f=new Fe(r,256,i<0?257:256),d=[];for(c=0;c<16;c++)d[c]=new ui(1048576,1,r,n);for(var p,m,g=0,y=0;g!==i;){p=h.pos;var b=h.getIndex(p,0);if(0!==b){var w=1+(--b>>>20),v=d[15&y].decode();for(v<0&&(v=w),c=0;c<v;c++)m=h.get(b+c),e.writeByte(h.put(m));h.getIndex(p,v),g+=v,y<<=1,v>0&&(y|=1)}if(g===i)break;var M=h.get(h.pos-1);if(256===(m=f.decode(M)))break;e.writeByte(h.put(m)),g++}s&&s()})),Di=Ui;var Ni,Fi=function(){this.buffer=Le.makeU8Buffer(1<<18),this.pos=0,this.firstPass=!0;for(var t=0;t<5;t++)this.put("cSaCsA".charCodeAt(t%6))};Fi.prototype.put=function(t){return this.buffer[this.pos++]=t,this.pos>=1<<18&&(this.pos=0,this.firstPass=!1),t},Fi.prototype.get=function(t){return this.buffer[262143&t]},Fi.prototype.context=function(t,e){var i,r=[];for(t=t-e&262143,i=0;i<e;i++)r.push(this.buffer[t++]),t>=1<<18&&(t=0);return String.fromCharCode.apply(String,r)};var Hi=function(t,e){this.window=new Fi,this.contexts=Object.create(null);var i=function(){};i.prototype.encode=function(i,r){var n,s=0;for(n=0;n<i;n++)r[n]||s++;var o=e-r.total;t.encodeFreq(1,s,o)},i.prototype.decode=function(i){var r,n,s,o=e-i.total;for(n=s=t.decodeCulFreq(o),r=0;r<=n;r++)i[r]&&n++;return t.decodeUpdate(1,s,o),n},this.cm1coder=new i;var r=function(){this.sym=[e],this.prob=[0,256],this.refcount=0};r.prototype._rescale=function(){var t,i,r=this.sym.length,n=0,s=!0;for(t=0,i=0;t<r;t++){var o=this.sym[t],h=this.prob[t+1]-this.prob[t];(h>>>=1)>0&&(o===e&&(s=!1),this.sym[i]=o,this.prob[i++]=n,n+=h)}return this.prob[i]=n,r=this.sym.length=i,this.prob.length=r+1,s&&r<e&&(n=this._update(e,r,0,1)),n},r.prototype.update=function(t,e){var i=0;for(i=0;i<this.sym.length;i++)if(this.sym[i]===t)return this._update(t,i,this.prob[i+1]-this.prob[i],e);return this._update(t,i,0,e)},r.prototype._update=function(t,i,r,n){var s,o,h,a=this.sym.length;for(o=i;o<a-1;o++)this.sym[o]=this.sym[o+1],this.prob[o]=this.prob[o+1]-r;if(i<a)this.sym[o]=t,this.prob[o]=this.prob[o+1]-r,this.prob[a]=h=this.prob[a]+n;else if(h=this.prob[a],this.sym[i]=t,this.prob[i]=h,h+=n,this.prob[++a]=h,this.sym.length>e)for(s=0;s<a;s++)e===this.sym[s]&&(this._update(e,s,this.prob[s+1]-this.prob[s],-1),this.sym.length--,this.prob.length--,h=this.prob[this.prob.length-1]);return h>=65280&&(h=this._rescale()),h},r.prototype.encode=function(i,r){var n,s,o,h,a,u,l=this.sym.length,c=0,f=0,d=0;for(n=l-1;n>=0;n--){if(h=this.prob[n],o=this.prob[n+1]-h,i===this.sym[n]){for(s=n-1;s>=0&&c<r.total;s--)r[this.sym[s]]&&(c+=1,f+=u=this.prob[s+1]-this.prob[s],d+=u);return a=this.prob[l],h-=f,a-=d,t.encodeFreq(o,h,a),i!==e||(this._update(i,n,o,128),!1)}r[this.sym[n]]&&(c+=1,d+=o)}for(this.encode(e,r),n=0;n<this.sym.length-1;n++)r[this.sym[n]]||(r[this.sym[n]]=!0,r.total++)},r.prototype.decode=function(i){var r,n,s=this.sym.length,o=this.prob[s],h=0,a=0,u=0;for(n=s-1;n>=0&&h<i.total;n--)i[this.sym[n]]&&(h+=1,u+=this.prob[n+1]-this.prob[n]);var l=t.decodeCulFreq(o-u)+u;for(a=u,n=s-1;n>=0;n--)if(i[this.sym[n]])a-=r=this.prob[n+1]-this.prob[n],l-=r;else if(this.prob[n]<=l)break;var c=this.sym[n],f=this.prob[n],d=this.prob[n+1]-f;if(t.decodeUpdate(d,f-a,o-u),c<e)return c;for(this._update(c,n,d,128),n=0;n<this.sym.length-1;n++)i[this.sym[n]]||(i[this.sym[n]]=!0,i.total++);return-1},this.newContext=function(t){return new r},this.newExclude=function(){var t=Object.create(null);return t.total=0,t},function(){var t,e;for(t=0;t<5;t++)for(e=0;e<=t;e++){var i=this.window.context(e+(4-t),e);this.contexts[i]||(this.contexts[i]=this.newContext()),this.contexts[i].refcount++}}.call(this)};Hi.prototype.update=function(t,e,i){var r,n,s;for(n=0;n<=5;n++)s=e.slice(5-n),(r=this.contexts[s])||(r=this.contexts[s]=this.newContext()),n>=i&&r.update(t,128),r.refcount++;e=this.window.context(this.window.pos+5,5);var o=this.window.firstPass;for(n=5;n>=0&&!o;n--)s=e.slice(0,n),--(r=this.contexts[s]).refcount<=0&&delete this.contexts[s];this.window.put(t)},Hi.prototype.decode=function(){var t,e,i,r,n=this.window.context(this.window.pos,5),s=this.newExclude();for(e=5;e>=0;e--)if(i=n.slice(5-e),(t=this.contexts[i])&&(r=t.decode(s))>=0)return this.update(r,n,e),r;return r=this.cm1coder.decode(s),this.update(r,n,e),r},Hi.prototype.encode=function(t){var e,i=this.window.context(this.window.pos,5),r=this.newExclude();for(e=5;e>=0;e--){var n=i.slice(5-e),s=this.contexts[n];if(s&&s.encode(t,r))return void this.update(t,i,e)}this.cm1coder.encode(t,r),this.update(t,i,e)},Hi.MAGIC="ppm2",Hi.compressFile=Le.compressFileHelper(Hi.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);var o=new Hi(s,i<0?257:256);Le.compressWithModel(t,i,o),s.encodeFinish()}),!0),Hi.decompressFile=Le.decompressFileHelper(Hi.MAGIC,(function(t,e,i){var r=new We(t);r.decodeStart(!0);var n=new Hi(r,i<0?257:256);Le.decompressWithModel(e,i,n),r.decodeFinish()})),Ni=Hi;var Wi=Object.create(null);Wi.MAGIC="smpl",Wi.compressFile=Le.compressFileHelper(Wi.MAGIC,(function(t,e,i,r,n){var s=new We(e);s.encodeStart(n,1);for(var o=Le.makeU8Buffer(1<<17),h=[],a=0,u=!1,l=function(){var e=0;for(e=0;e<256;e++)h[e]=0;if(u)a=0;else{for(e=0;e<1<<17;){var i=t.readByte();if(i===de.EOF){u=!0;break}if(o[e++]=i,h[i]++,65535===h[i])break}a=e}};;){var c;if(l(),u&&0===a)break;for(s.encodeBit(!0),c=0;c<256;c++)s.encodeShort(h[c]);for(h[256]=a,c=256;c;c--)h[c-1]=h[c]-h[c-1];for(c=0;c<a;c++){var f=o[c];s.encodeFreq(h[f+1]-h[f],h[f],h[256])}}s.encodeBit(!1),s.encodeFinish()}),!0),Wi.decompressFile=Le.decompressFileHelper(Wi.MAGIC,(function(t,e,i){var r=new We(t);for(r.decodeStart(!0);r.decodeBit();){var n,s=[];for(n=0;n<256;n++)s[n]=r.decodeShort();var o=0;for(n=0;n<256;n++){var h=s[n];s[n]=o,o+=h}for(s[256]=o,n=0;n<o;n++){var a,u=r.decodeCulFreq(o);for(a=0;a<256&&!(s[a]<=u&&u<s[a+1]);a++);r.decodeUpdate(s[a+1]-s[a],s[a],o),e.writeByte(a)}}r.decodeFinish()}));var qi=fe({version:"1.2.0",BitStream:me,Stream:de,BWT:Re,Context1Model:Fe,DefSumModel:$e,FenwickModel:ti,MTFModel:ri,NoModel:hi,Huffman:Ue,RangeCoder:We,BWTC:ci,Bzip2:fi,Dmc:Ai,Lzjb:Li,LzjbR:Oi,Lzp3:Di,PPM:Ni,Simple:Wi}),zi={};const Vi=ce.Buffer,{Bzip2:Zi}=qi,Gi=Vi.from("BZh1".split("").map(t=>t.charCodeAt(0)));zi.decompress=function(t,e,i,r,n){const s=Vi.from(i.slice(n,r+n)),o=Zi.decompressFile(Vi.concat([Gi,s]));t.set(o)};var Ki={},$i=_t({}),Ji=$i.Buffer;function Qi(t,e){for(var i in t)e[i]=t[i]}function tr(t,e,i){return Ji(t,e,i)}Ji.from&&Ji.alloc&&Ji.allocUnsafe&&Ji.allocUnsafeSlow?Ki=$i:(Qi($i,Ki),Ki.Buffer=tr),tr.prototype=Object.create(Ji.prototype),Qi(Ji,tr),tr.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return Ji(t,e,i)},tr.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=Ji(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},tr.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return Ji(t)},tr.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return $i.SlowBuffer(t)};var er={};(function(t,e){(function(){"use strict";var i=Ki.Buffer,r=e.crypto||e.msCrypto;er=r&&r.getRandomValues?function(e,n){if(e>4294967295)throw new RangeError("requested too many random bytes");var s=i.allocUnsafe(e);if(e>0)if(e>65536)for(var o=0;o<e;o+=65536)r.getRandomValues(s.slice(o,o+65536));else r.getRandomValues(s);return"function"==typeof n?t.nextTick((function(){n(null,s)})):s}:function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ir={};ir="function"==typeof Object.create?function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}};var rr,nr={},sr="object"==typeof Reflect?Reflect:null,or=sr&&"function"==typeof sr.apply?sr.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};rr=sr&&"function"==typeof sr.ownKeys?sr.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var hr=Number.isNaN||function(t){return t!=t};function ar(){ar.init.call(this)}(nr=ar).once=function(t,e){return new Promise((function(i,r){function n(i){t.removeListener(e,s),r(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}yr(t,e,s,{once:!0}),"error"!==e&&function(t,e,i){"function"==typeof t.on&&yr(t,"error",e,{once:!0})}(t,n)}))},ar.EventEmitter=ar,ar.prototype._events=void 0,ar.prototype._eventsCount=0,ar.prototype._maxListeners=void 0;var ur=10;function lr(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function cr(t){return void 0===t._maxListeners?ar.defaultMaxListeners:t._maxListeners}function fr(t,e,i,r){var n,s,o,h;if(lr(i),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),s=t._events),o=s[e]),void 0===o)o=s[e]=i,++t._eventsCount;else if("function"==typeof o?o=s[e]=r?[i,o]:[o,i]:r?o.unshift(i):o.push(i),(n=cr(t))>0&&o.length>n&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,h=a,console&&console.warn&&console.warn(h)}return t}function dr(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return n.listener=i,r.wrapFn=n,n}function pr(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):gr(n,n.length)}function mr(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function gr(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function yr(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function n(s){r.once&&t.removeEventListener(e,n),i(s)}))}}Object.defineProperty(ar,"defaultMaxListeners",{enumerable:!0,get:function(){return ur},set:function(t){if("number"!=typeof t||t<0||hr(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");ur=t}}),ar.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ar.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||hr(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},ar.prototype.getMaxListeners=function(){return cr(this)},ar.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)or(h,this,e);else{var a=h.length,u=gr(h,a);for(i=0;i<a;++i)or(u[i],this,e)}return!0},ar.prototype.addListener=function(t,e){return fr(this,t,e,!1)},ar.prototype.on=ar.prototype.addListener,ar.prototype.prependListener=function(t,e){return fr(this,t,e,!0)},ar.prototype.once=function(t,e){return lr(e),this.on(t,dr(this,t,e)),this},ar.prototype.prependOnceListener=function(t,e){return lr(e),this.prependListener(t,dr(this,t,e)),this},ar.prototype.removeListener=function(t,e){var i,r,n,s,o;if(lr(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,n=s;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},ar.prototype.off=ar.prototype.removeListener,ar.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,s=Object.keys(i);for(r=0;r<s.length;++r)"removeListener"!==(n=s[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},ar.prototype.listeners=function(t){return pr(this,t,!0)},ar.prototype.rawListeners=function(t){return pr(this,t,!1)},ar.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):mr.call(t,e)},ar.prototype.listenerCount=mr,ar.prototype.eventNames=function(){return this._eventsCount>0?rr(this._events):[]};var br=nr.EventEmitter;function wr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function vr(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Mr(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Sr=_t({}).Buffer,_r=St({}).inspect,Ir=_r&&_r.custom||"inspect",Cr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return Sr.alloc(0);for(var e,i,r,n=Sr.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=n,r=o,Sr.prototype.copy.call(e,i,r),o+=s.data.length,s=s.next;return n}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?r+=n:r+=n.slice(0,t),0==(t-=s)){s===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=Sr.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0==(t-=s)){s===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(s));break}++r}return this.length-=r,e}},{key:Ir,value:function(t,e){return _r(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?wr(Object(i),!0).forEach((function(e){vr(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):wr(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&Mr(e.prototype,i),t}(),kr={};(function(t){(function(){"use strict";function e(t,e){r(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}kr={destroy:function(n,s){var o=this,h=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return h||a?(s?s(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,n)):t.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(r){!s&&r?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(e,o,r)):t.nextTick(e,o,r):s?(t.nextTick(i,o),s(r)):t.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,we);var Tr={},Ar={};function xr(t,e,i){i||(i=Error);var r=function(t){var i,r;function n(i,r,n){return t.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,n))||this}return r=t,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,n}(i);r.prototype.name=i.name,r.prototype.code=t,Ar[t]=r}function Er(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}xr("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),xr("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,n,s,o;if("string"==typeof e&&("not ","not "===e.substr(0,"not ".length))?(r="must not be",e=e.replace(/^not /,"")):r="must be",s=t,(void 0===o||o>s.length)&&(o=s.length)," argument"===s.substring(o-" argument".length,o))n="The ".concat(t," ").concat(r," ").concat(Er(e,"type"));else{var h=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+".".length>t.length)&&-1!==t.indexOf(".",i)}(t)?"property":"argument";n='The "'.concat(t,'" ').concat(h," ").concat(r," ").concat(Er(e,"type"))}return n+". Received type ".concat(typeof i)}),TypeError),xr("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),xr("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),xr("ERR_STREAM_PREMATURE_CLOSE","Premature close"),xr("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),xr("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),xr("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),xr("ERR_STREAM_WRITE_AFTER_END","write after end"),xr("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),xr("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),xr("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Tr.codes=Ar;var Br=Tr.codes.ERR_INVALID_OPT_VALUE,Lr={getHighWaterMark:function(t,e,i,r){var n=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,i);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new Br(r?i:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}},Rr={};(function(t){(function(){function e(e){try{if(!t.localStorage)return!1}catch(r){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}Rr=function(t,i){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),r=!0}return t.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Pr=Fr,Or=Tr.codes,jr=Or.ERR_METHOD_NOT_IMPLEMENTED,Dr=Or.ERR_MULTIPLE_CALLBACK,Yr=Or.ERR_TRANSFORM_ALREADY_TRANSFORMING,Ur=Or.ERR_TRANSFORM_WITH_LENGTH_0,Xr=vt({});function Nr(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new Dr);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Fr(t){if(!(this instanceof Fr))return new Fr(t);Xr.call(this,t),this._transformState={afterTransform:Nr.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",Hr)}function Hr(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?Wr(this,null,null):this._flush((function(e,i){Wr(t,e,i)}))}function Wr(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Ur;if(t._transformState.transforming)throw new Yr;return t.push(null)}ir(Fr,Xr),Fr.prototype.push=function(t,e){return this._transformState.needTransform=!1,Xr.prototype.push.call(this,t,e)},Fr.prototype._transform=function(t,e,i){i(new jr("_transform()"))},Fr.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},Fr.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Fr.prototype._destroy=function(t,e){Xr.prototype._destroy.call(this,t,(function(t){e(t)}))};var qr,zr=Vr;function Vr(t){if(!(this instanceof Vr))return new Vr(t);Pr.call(this,t)}ir(Vr,Pr),Vr.prototype._transform=function(t,e,i){i(null,t)};var Zr=Tr.codes,Gr=Zr.ERR_MISSING_ARGS,Kr=Zr.ERR_STREAM_DESTROYED;function $r(t){if(t)throw t}function Jr(t){t()}function Qr(t,e){return t.pipe(e)}var tn={};(tn=tn=mt({})).Stream=tn,tn.Readable=tn,tn.Writable=Mt({}),tn.Duplex=vt({}),tn.Transform=Pr,tn.PassThrough=zr,tn.finished=bt({}),tn.pipeline=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,n=function(t){return t.length?"function"!=typeof t[t.length-1]?$r:t.pop():$r}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Gr("streams");var s=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,r){r=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(r);var n=!1;t.on("close",(function(){n=!0})),void 0===qr&&(qr=bt({})),qr(t,{readable:e,writable:i},(function(t){if(t)return r(t);n=!0,r()}));var s=!1;return function(e){if(!n&&!s)return s=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new Kr("pipe"))}}(t,o,i>0,(function(t){r||(r=t),t&&s.forEach(Jr),o||(s.forEach(Jr),n(r))}))}));return e.reduce(Qr)};var en={},rn=Ki.Buffer,nn=tn.Transform;function sn(t){nn.call(this),this._block=rn.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}ir(sn,nn),sn.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(n){r=n}i(r)},sn.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(i){e=i}t(e)},sn.prototype.update=function(t,e){if(function(t,e){if(!rn.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");rn.isBuffer(t)||(t=rn.from(t,e));for(var i=this._block,r=0;this._blockOffset+t.length-r>=this._blockSize;){for(var n=this._blockOffset;n<this._blockSize;)i[n++]=t[r++];this._update(),this._blockOffset=0}for(;r<t.length;)i[this._blockOffset++]=t[r++];for(var s=0,o=8*t.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},sn.prototype._update=function(){throw new Error("_update is not implemented")},sn.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},sn.prototype._digest=function(){throw new Error("_digest is not implemented")},en=sn;var on={},hn=Ki.Buffer,an=new Array(16);function un(){en.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function ln(t,e){return t<<e|t>>>32-e}function cn(t,e,i,r,n,s,o){return ln(t+(e&i|~e&r)+n+s|0,o)+e|0}function fn(t,e,i,r,n,s,o){return ln(t+(e&r|i&~r)+n+s|0,o)+e|0}function dn(t,e,i,r,n,s,o){return ln(t+(e^i^r)+n+s|0,o)+e|0}function pn(t,e,i,r,n,s,o){return ln(t+(i^(e|~r))+n+s|0,o)+e|0}ir(un,en),un.prototype._update=function(){for(var t=an,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,s=this._d;i=cn(i,r,n,s,t[0],3614090360,7),s=cn(s,i,r,n,t[1],3905402710,12),n=cn(n,s,i,r,t[2],606105819,17),r=cn(r,n,s,i,t[3],3250441966,22),i=cn(i,r,n,s,t[4],4118548399,7),s=cn(s,i,r,n,t[5],1200080426,12),n=cn(n,s,i,r,t[6],2821735955,17),r=cn(r,n,s,i,t[7],4249261313,22),i=cn(i,r,n,s,t[8],1770035416,7),s=cn(s,i,r,n,t[9],2336552879,12),n=cn(n,s,i,r,t[10],4294925233,17),r=cn(r,n,s,i,t[11],2304563134,22),i=cn(i,r,n,s,t[12],1804603682,7),s=cn(s,i,r,n,t[13],4254626195,12),n=cn(n,s,i,r,t[14],2792965006,17),i=fn(i,r=cn(r,n,s,i,t[15],1236535329,22),n,s,t[1],4129170786,5),s=fn(s,i,r,n,t[6],3225465664,9),n=fn(n,s,i,r,t[11],643717713,14),r=fn(r,n,s,i,t[0],3921069994,20),i=fn(i,r,n,s,t[5],3593408605,5),s=fn(s,i,r,n,t[10],38016083,9),n=fn(n,s,i,r,t[15],3634488961,14),r=fn(r,n,s,i,t[4],3889429448,20),i=fn(i,r,n,s,t[9],568446438,5),s=fn(s,i,r,n,t[14],3275163606,9),n=fn(n,s,i,r,t[3],4107603335,14),r=fn(r,n,s,i,t[8],1163531501,20),i=fn(i,r,n,s,t[13],2850285829,5),s=fn(s,i,r,n,t[2],4243563512,9),n=fn(n,s,i,r,t[7],1735328473,14),i=dn(i,r=fn(r,n,s,i,t[12],2368359562,20),n,s,t[5],4294588738,4),s=dn(s,i,r,n,t[8],2272392833,11),n=dn(n,s,i,r,t[11],1839030562,16),r=dn(r,n,s,i,t[14],4259657740,23),i=dn(i,r,n,s,t[1],2763975236,4),s=dn(s,i,r,n,t[4],1272893353,11),n=dn(n,s,i,r,t[7],4139469664,16),r=dn(r,n,s,i,t[10],3200236656,23),i=dn(i,r,n,s,t[13],681279174,4),s=dn(s,i,r,n,t[0],3936430074,11),n=dn(n,s,i,r,t[3],3572445317,16),r=dn(r,n,s,i,t[6],76029189,23),i=dn(i,r,n,s,t[9],3654602809,4),s=dn(s,i,r,n,t[12],3873151461,11),n=dn(n,s,i,r,t[15],530742520,16),i=pn(i,r=dn(r,n,s,i,t[2],3299628645,23),n,s,t[0],4096336452,6),s=pn(s,i,r,n,t[7],1126891415,10),n=pn(n,s,i,r,t[14],2878612391,15),r=pn(r,n,s,i,t[5],4237533241,21),i=pn(i,r,n,s,t[12],1700485571,6),s=pn(s,i,r,n,t[3],2399980690,10),n=pn(n,s,i,r,t[10],4293915773,15),r=pn(r,n,s,i,t[1],2240044497,21),i=pn(i,r,n,s,t[8],1873313359,6),s=pn(s,i,r,n,t[15],4264355552,10),n=pn(n,s,i,r,t[6],2734768916,15),r=pn(r,n,s,i,t[13],1309151649,21),i=pn(i,r,n,s,t[4],4149444226,6),s=pn(s,i,r,n,t[11],3174756917,10),n=pn(n,s,i,r,t[2],718787259,15),r=pn(r,n,s,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+s|0},un.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=hn.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},on=un;var mn={},gn=_t({}).Buffer,yn=new Array(16),bn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],wn=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],vn=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Mn=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],Sn=[0,1518500249,1859775393,2400959708,2840853838],_n=[1352829926,1548603684,1836072691,2053994217,0];function In(){en.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function Cn(t,e){return t<<e|t>>>32-e}function kn(t,e,i,r,n,s,o,h){return Cn(t+(e^i^r)+s+o|0,h)+n|0}function Tn(t,e,i,r,n,s,o,h){return Cn(t+(e&i|~e&r)+s+o|0,h)+n|0}function An(t,e,i,r,n,s,o,h){return Cn(t+((e|~i)^r)+s+o|0,h)+n|0}function xn(t,e,i,r,n,s,o,h){return Cn(t+(e&r|i&~r)+s+o|0,h)+n|0}function En(t,e,i,r,n,s,o,h){return Cn(t+(e^(i|~r))+s+o|0,h)+n|0}ir(In,en),In.prototype._update=function(){for(var t=yn,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,o=0|this._e,h=0|this._a,a=0|this._b,u=0|this._c,l=0|this._d,c=0|this._e,f=0;f<80;f+=1){var d,p;f<16?(d=kn(i,r,n,s,o,t[bn[f]],Sn[0],vn[f]),p=En(h,a,u,l,c,t[wn[f]],_n[0],Mn[f])):f<32?(d=Tn(i,r,n,s,o,t[bn[f]],Sn[1],vn[f]),p=xn(h,a,u,l,c,t[wn[f]],_n[1],Mn[f])):f<48?(d=An(i,r,n,s,o,t[bn[f]],Sn[2],vn[f]),p=An(h,a,u,l,c,t[wn[f]],_n[2],Mn[f])):f<64?(d=xn(i,r,n,s,o,t[bn[f]],Sn[3],vn[f]),p=Tn(h,a,u,l,c,t[wn[f]],_n[3],Mn[f])):(d=En(i,r,n,s,o,t[bn[f]],Sn[4],vn[f]),p=kn(h,a,u,l,c,t[wn[f]],_n[4],Mn[f])),i=o,o=s,s=Cn(n,10),n=r,r=d,h=c,c=l,l=Cn(u,10),u=a,a=p}var m=this._b+n+l|0;this._b=this._c+s+c|0,this._c=this._d+o+h|0,this._d=this._e+i+a|0,this._e=this._a+r+u|0,this._a=m},In.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=gn.alloc?gn.alloc(20):new gn(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},mn=In;var Bn={},Ln=Ki.Buffer;function Rn(t,e){this._block=Ln.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Rn.prototype.update=function(t,e){"string"==typeof t&&(e=e||"utf8",t=Ln.from(t,e));for(var i=this._block,r=this._blockSize,n=t.length,s=this._len,o=0;o<n;){for(var h=s%r,a=Math.min(n-o,r-h),u=0;u<a;u++)i[h+u]=t[o+u];o+=a,(s+=a)%r==0&&this._update(i)}return this._len+=n,this},Rn.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,n=(i-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s},Rn.prototype._update=function(){throw new Error("_update must be implemented by subclass")},Bn=Rn;var Pn,On=Ki.Buffer,jn=[1518500249,1859775393,-1894007588,-899497514],Dn=new Array(80);function Yn(){this.init(),this._w=Dn,Bn.call(this,64,56)}function Un(t){return t<<30|t>>>2}function Xn(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}ir(Yn,Bn),Yn.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},Yn.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,o=0|this._d,h=0|this._e,a=0;a<16;++a)i[a]=t.readInt32BE(4*a);for(;a<80;++a)i[a]=i[a-3]^i[a-8]^i[a-14]^i[a-16];for(var u=0;u<80;++u){var l=~~(u/20),c=0|((e=r)<<5|e>>>27)+Xn(l,n,s,o)+h+i[u]+jn[l];h=o,o=s,s=Un(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0},Yn.prototype._hash=function(){var t=On.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},Pn=Yn;var Nn,Fn=Ki.Buffer,Hn=[1518500249,1859775393,-1894007588,-899497514],Wn=new Array(80);function qn(){this.init(),this._w=Wn,Bn.call(this,64,56)}function zn(t){return t<<5|t>>>27}function Vn(t){return t<<30|t>>>2}function Zn(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}ir(qn,Bn),qn.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},qn.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,o=0|this._d,h=0|this._e,a=0;a<16;++a)i[a]=t.readInt32BE(4*a);for(;a<80;++a)i[a]=(e=i[a-3]^i[a-8]^i[a-14]^i[a-16])<<1|e>>>31;for(var u=0;u<80;++u){var l=~~(u/20),c=zn(r)+Zn(l,n,s,o)+h+i[u]+Hn[l]|0;h=o,o=s,s=Vn(n),n=r,r=c}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0},qn.prototype._hash=function(){var t=Fn.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},Nn=qn;var Gn,Kn=Ki.Buffer,$n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Jn=new Array(64);function Qn(){this.init(),this._w=Jn,Bn.call(this,64,56)}function ts(t,e,i){return i^t&(e^i)}function es(t,e,i){return t&e|i&(t|e)}function is(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function rs(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function ns(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}ir(Qn,Bn),Qn.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},Qn.prototype._update=function(t){for(var e,i=this._w,r=0|this._a,n=0|this._b,s=0|this._c,o=0|this._d,h=0|this._e,a=0|this._f,u=0|this._g,l=0|this._h,c=0;c<16;++c)i[c]=t.readInt32BE(4*c);for(;c<64;++c)i[c]=0|(((e=i[c-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+i[c-7]+ns(i[c-15])+i[c-16];for(var f=0;f<64;++f){var d=l+rs(h)+ts(h,a,u)+$n[f]+i[f]|0,p=is(r)+es(r,n,s)|0;l=u,u=a,a=h,h=o+d|0,o=s,s=n,n=r,r=d+p|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=o+this._d|0,this._e=h+this._e|0,this._f=a+this._f|0,this._g=u+this._g|0,this._h=l+this._h|0},Qn.prototype._hash=function(){var t=Kn.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},Gn=Qn;var ss,os=Ki.Buffer,hs=new Array(64);function as(){this.init(),this._w=hs,Bn.call(this,64,56)}ir(as,Gn),as.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},as.prototype._hash=function(){var t=os.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},ss=as;var us,ls=Ki.Buffer,cs=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],fs=new Array(160);function ds(){this.init(),this._w=fs,Bn.call(this,128,112)}function ps(t,e,i){return i^t&(e^i)}function ms(t,e,i){return t&e|i&(t|e)}function gs(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function ys(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function bs(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function ws(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function vs(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Ms(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function Ss(t,e){return t>>>0<e>>>0?1:0}ir(ds,Bn),ds.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},ds.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,n=0|this._ch,s=0|this._dh,o=0|this._eh,h=0|this._fh,a=0|this._gh,u=0|this._hh,l=0|this._al,c=0|this._bl,f=0|this._cl,d=0|this._dl,p=0|this._el,m=0|this._fl,g=0|this._gl,y=0|this._hl,b=0;b<32;b+=2)e[b]=t.readInt32BE(4*b),e[b+1]=t.readInt32BE(4*b+4);for(;b<160;b+=2){var w=e[b-30],v=e[b-30+1],M=bs(w,v),S=ws(v,w),_=vs(w=e[b-4],v=e[b-4+1]),I=Ms(v,w),C=e[b-14],k=e[b-14+1],T=e[b-32],A=e[b-32+1],x=S+k|0,E=M+C+Ss(x,S)|0;E=(E=E+_+Ss(x=x+I|0,I)|0)+T+Ss(x=x+A|0,A)|0,e[b]=E,e[b+1]=x}for(var B=0;B<160;B+=2){E=e[B],x=e[B+1];var L=ms(i,r,n),R=ms(l,c,f),P=gs(i,l),O=gs(l,i),j=ys(o,p),D=ys(p,o),Y=cs[B],U=cs[B+1],X=ps(o,h,a),N=ps(p,m,g),F=y+D|0,H=u+j+Ss(F,y)|0;H=(H=(H=H+X+Ss(F=F+N|0,N)|0)+Y+Ss(F=F+U|0,U)|0)+E+Ss(F=F+x|0,x)|0;var W=O+R|0,q=P+L+Ss(W,O)|0;u=a,y=g,a=h,g=m,h=o,m=p,o=s+H+Ss(p=d+F|0,d)|0,s=n,d=f,n=r,f=c,r=i,c=l,i=H+q+Ss(l=F+W|0,F)|0}this._al=this._al+l|0,this._bl=this._bl+c|0,this._cl=this._cl+f|0,this._dl=this._dl+d|0,this._el=this._el+p|0,this._fl=this._fl+m|0,this._gl=this._gl+g|0,this._hl=this._hl+y|0,this._ah=this._ah+i+Ss(this._al,l)|0,this._bh=this._bh+r+Ss(this._bl,c)|0,this._ch=this._ch+n+Ss(this._cl,f)|0,this._dh=this._dh+s+Ss(this._dl,d)|0,this._eh=this._eh+o+Ss(this._el,p)|0,this._fh=this._fh+h+Ss(this._fl,m)|0,this._gh=this._gh+a+Ss(this._gl,g)|0,this._hh=this._hh+u+Ss(this._hl,y)|0},ds.prototype._hash=function(){var t=ls.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},us=ds;var _s,Is=Ki.Buffer,Cs=new Array(160);function ks(){this.init(),this._w=Cs,Bn.call(this,128,112)}ir(ks,us),ks.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},ks.prototype._hash=function(){var t=Is.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},_s=ks;var Ts,As=Ts=function(t){t=t.toLowerCase();var e=As[t];if(!e)throw new Error(t+" is not supported (we accept pull requests)");return new e};As.sha=Pn,As.sha1=Nn,As.sha224=ss,As.sha256=Gn,As.sha384=_s,As.sha512=us;var xs=nr.EventEmitter;function Es(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Bs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ls(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rs=_t({}).Buffer,Ps=St({}).inspect,Os=Ps&&Ps.custom||"inspect",js=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return Rs.alloc(0);for(var e,i,r,n=Rs.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=n,r=o,Rs.prototype.copy.call(e,i,r),o+=s.data.length,s=s.next;return n}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?r+=n:r+=n.slice(0,t),0==(t-=s)){s===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=Rs.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0==(t-=s)){s===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(s));break}++r}return this.length-=r,e}},{key:Os,value:function(t,e){return Ps(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Es(Object(i),!0).forEach((function(e){Bs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Es(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&Ls(e.prototype,i),t}(),Ds={};(function(t){(function(){"use strict";function e(t,e){r(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}Ds={destroy:function(n,s){var o=this,h=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return h||a?(s?s(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,n)):t.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(r){!s&&r?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(e,o,r)):t.nextTick(e,o,r):s?(t.nextTick(i,o),s(r)):t.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,we);var Ys={},Us={};function Xs(t,e,i){i||(i=Error);var r=function(t){var i,r;function n(i,r,n){return t.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,n))||this}return r=t,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,n}(i);r.prototype.name=i.name,r.prototype.code=t,Us[t]=r}function Ns(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Xs("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),Xs("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,n,s,o;if("string"==typeof e&&("not ","not "===e.substr(0,"not ".length))?(r="must not be",e=e.replace(/^not /,"")):r="must be",s=t,(void 0===o||o>s.length)&&(o=s.length)," argument"===s.substring(o-" argument".length,o))n="The ".concat(t," ").concat(r," ").concat(Ns(e,"type"));else{var h=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+".".length>t.length)&&-1!==t.indexOf(".",i)}(t)?"property":"argument";n='The "'.concat(t,'" ').concat(h," ").concat(r," ").concat(Ns(e,"type"))}return n+". Received type ".concat(typeof i)}),TypeError),Xs("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Xs("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),Xs("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Xs("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),Xs("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Xs("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Xs("ERR_STREAM_WRITE_AFTER_END","write after end"),Xs("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Xs("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),Xs("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Ys.codes=Us;var Fs=Ys.codes.ERR_INVALID_OPT_VALUE,Hs={getHighWaterMark:function(t,e,i,r){var n=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,i);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new Fs(r?i:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}},Ws=Js,qs=Ys.codes,zs=qs.ERR_METHOD_NOT_IMPLEMENTED,Vs=qs.ERR_MULTIPLE_CALLBACK,Zs=qs.ERR_TRANSFORM_ALREADY_TRANSFORMING,Gs=qs.ERR_TRANSFORM_WITH_LENGTH_0,Ks=dt({});function $s(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new Vs);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function Js(t){if(!(this instanceof Js))return new Js(t);Ks.call(this,t),this._transformState={afterTransform:$s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",Qs)}function Qs(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?to(this,null,null):this._flush((function(e,i){to(t,e,i)}))}function to(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Gs;if(t._transformState.transforming)throw new Zs;return t.push(null)}ir(Js,Ks),Js.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ks.prototype.push.call(this,t,e)},Js.prototype._transform=function(t,e,i){i(new zs("_transform()"))},Js.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},Js.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},Js.prototype._destroy=function(t,e){Ks.prototype._destroy.call(this,t,(function(t){e(t)}))};var eo,io=ro;function ro(t){if(!(this instanceof ro))return new ro(t);Ws.call(this,t)}ir(ro,Ws),ro.prototype._transform=function(t,e,i){i(null,t)};var no=Ys.codes,so=no.ERR_MISSING_ARGS,oo=no.ERR_STREAM_DESTROYED;function ho(t){if(t)throw t}function ao(t){t()}function uo(t,e){return t.pipe(e)}var lo=fo,co=nr.EventEmitter;function fo(){co.call(this)}ir(fo,co),fo.Readable=ut({}),fo.Writable=pt({}),fo.Duplex=dt({}),fo.Transform=Ws,fo.PassThrough=io,fo.finished=ft({}),fo.pipeline=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,n=function(t){return t.length?"function"!=typeof t[t.length-1]?ho:t.pop():ho}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new so("streams");var s=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,r){r=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(r);var n=!1;t.on("close",(function(){n=!0})),void 0===eo&&(eo=ft({})),eo(t,{readable:e,writable:i},(function(t){if(t)return r(t);n=!0,r()}));var s=!1;return function(e){if(!n&&!s)return s=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new oo("pipe"))}}(t,o,i>0,(function(t){r||(r=t),t&&s.forEach(ao),o||(s.forEach(ao),n(r))}))}));return e.reduce(uo)},fo.Stream=fo,fo.prototype.pipe=function(t,e){var i=this;function r(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function n(){i.readable&&i.resume&&i.resume()}i.on("data",r),t.on("drain",n),t._isStdio||e&&!1===e.end||(i.on("end",o),i.on("close",h));var s=!1;function o(){s||(s=!0,t.end())}function h(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===co.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",r),t.removeListener("drain",n),i.removeListener("end",o),i.removeListener("close",h),i.removeListener("error",a),t.removeListener("error",a),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",a),t.on("error",a),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t};var po={},mo=Ki.Buffer,go=lo.Transform,yo=wt({}).StringDecoder;function bo(t){go.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}ir(bo,go),bo.prototype.update=function(t,e,i){"string"==typeof t&&(t=mo.from(t,e));var r=this._update(t);return this.hashMode?this:(i&&(r=this._toString(r,i)),r)},bo.prototype.setAutoPadding=function(){},bo.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},bo.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},bo.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},bo.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(Kd){r=Kd}finally{i(r)}},bo.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(Kd){e=Kd}t(e)},bo.prototype._finalOrDigest=function(t){var e=this.__final()||mo.alloc(0);return t&&(e=this._toString(e,t,!0)),e},bo.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new yo(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r};var wo;function vo(t){po.call(this,"digest"),this._hash=t}ir(vo,po=bo),vo.prototype._update=function(t){this._hash.update(t)},vo.prototype._final=function(){return this._hash.digest()},wo=function(t){return"md5"===(t=t.toLowerCase())?new on:"rmd160"===t||"ripemd160"===t?new mn:new vo(Ts(t))};var Mo={},So=Ki.Buffer,_o=So.alloc(128);function Io(t,e){po.call(this,"digest"),"string"==typeof e&&(e=So.from(e)),this._alg=t,this._key=e,e.length>64?e=t(e):e.length<64&&(e=So.concat([e,_o],64));for(var i=this._ipad=So.allocUnsafe(64),r=this._opad=So.allocUnsafe(64),n=0;n<64;n++)i[n]=54^e[n],r[n]=92^e[n];this._hash=[i]}ir(Io,po),Io.prototype._update=function(t){this._hash.push(t)},Io.prototype._final=function(){var t=this._alg(So.concat(this._hash));return this._alg(So.concat([this._opad,t]))},Mo=Io;var Co,ko=function(t){return(new on).update(t).digest()},To=Ki.Buffer,Ao=To.alloc(128);function xo(t,e){po.call(this,"digest"),"string"==typeof e&&(e=To.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new mn:Ts(t)).update(e).digest():e.length<i&&(e=To.concat([e,Ao],i));for(var r=this._ipad=To.allocUnsafe(i),n=this._opad=To.allocUnsafe(i),s=0;s<i;s++)r[s]=54^e[s],n[s]=92^e[s];this._hash="rmd160"===t?new mn:Ts(t),this._hash.update(r)}ir(xo,po),xo.prototype._update=function(t){this._hash.update(t)},xo.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new mn:Ts(this._alg)).update(this._opad).update(t).digest()},Co=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new xo("rmd160",e):"md5"===t?new Mo(ko,e):new xo(t,e)};var Eo={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}},Bo=Eo,Lo=Math.pow(2,30)-1,Ro=function(t,e){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof e)throw new TypeError("Key length not a number");if(e<0||e>Lo||e!=e)throw new TypeError("Bad key length")},Po={};(function(t){(function(){var e;e=t.browser?"utf-8":t.version?parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",Po=e}).call(this)}).call(this,we);var Oo,jo=Ki.Buffer,Do=function(t,e,i){if(jo.isBuffer(t))return t;if("string"==typeof t)return jo.from(t,e);if(ArrayBuffer.isView(t))return jo.from(t.buffer);throw new TypeError(i+" must be a string, a Buffer, a typed array or a DataView")},Yo=Ki.Buffer,Uo=Yo.alloc(128),Xo={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function No(t,e,i){var r=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new mn).update(t).digest()}:"md5"===t?ko:function(e){return Ts(t).update(e).digest()}}(t),n="sha512"===t||"sha384"===t?128:64;e.length>n?e=r(e):e.length<n&&(e=Yo.concat([e,Uo],n));for(var s=Yo.allocUnsafe(n+Xo[t]),o=Yo.allocUnsafe(n+Xo[t]),h=0;h<n;h++)s[h]=54^e[h],o[h]=92^e[h];var a=Yo.allocUnsafe(n+i+4);s.copy(a,0,0,n),this.ipad1=a,this.ipad2=s,this.opad=o,this.alg=t,this.blocksize=n,this.hash=r,this.size=Xo[t]}No.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},Oo=function(t,e,i,r,n){Ro(i,r);var s=new No(n=n||"sha1",t=Do(t,Po,"Password"),(e=Do(e,Po,"Salt")).length),o=Yo.allocUnsafe(r),h=Yo.allocUnsafe(e.length+4);e.copy(h,0,0,e.length);for(var a=0,u=Xo[n],l=Math.ceil(r/u),c=1;c<=l;c++){h.writeUInt32BE(c,e.length);for(var f=s.run(h,s.ipad1),d=f,p=1;p<i;p++){d=s.run(d,s.ipad2);for(var m=0;m<u;m++)f[m]^=d[m]}f.copy(o,a),a+=u}return o};(function(t,e){(function(){var i,r=Ki.Buffer,n=e.crypto&&e.crypto.subtle,s={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},o=[];function h(t,e,i,s,o){return n.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then((function(t){return n.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:o}},t,s<<3)})).then((function(t){return r.from(t)}))}(function(a,u,l,c,f,d){"function"==typeof f&&(d=f,f=void 0);var p=s[(f=f||"sha1").toLowerCase()];if(!p||"function"!=typeof e.Promise)return t.nextTick((function(){var t;try{t=Oo(a,u,l,c,f)}catch(Kd){return d(Kd)}d(null,t)}));if(Ro(l,c),a=Do(a,Po,"Password"),u=Do(u,Po,"Salt"),"function"!=typeof d)throw new Error("No callback provided to pbkdf2");!function(e,i){e.then((function(e){t.nextTick((function(){i(null,e)}))}),(function(e){t.nextTick((function(){i(e)}))}))}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!n||!n.importKey||!n.deriveBits)return Promise.resolve(!1);if(void 0!==o[t])return o[t];var s=h(i=i||r.alloc(8),i,10,128,t).then((function(){return!0})).catch((function(){return!1}));return o[t]=s,s}(p).then((function(t){return t?h(a,u,l,c,p):Oo(a,u,l,c,f)})),d)})}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Fo={};Fo.pbkdf2Sync=Oo;var Ho={readUInt32BE:function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},writeUInt32BE:function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},ip:function(t,e,i,r){for(var n=0,s=0,o=6;o>=0;o-=2){for(var h=0;h<=24;h+=8)n<<=1,n|=e>>>h+o&1;for(h=0;h<=24;h+=8)n<<=1,n|=t>>>h+o&1}for(o=6;o>=0;o-=2){for(h=1;h<=25;h+=8)s<<=1,s|=e>>>h+o&1;for(h=1;h<=25;h+=8)s<<=1,s|=t>>>h+o&1}i[r+0]=n>>>0,i[r+1]=s>>>0},rip:function(t,e,i,r){for(var n=0,s=0,o=0;o<4;o++)for(var h=24;h>=0;h-=8)n<<=1,n|=e>>>h+o&1,n<<=1,n|=t>>>h+o&1;for(o=4;o<8;o++)for(h=24;h>=0;h-=8)s<<=1,s|=e>>>h+o&1,s<<=1,s|=t>>>h+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},pc1:function(t,e,i,r){for(var n=0,s=0,o=7;o>=5;o--){for(var h=0;h<=24;h+=8)n<<=1,n|=e>>h+o&1;for(h=0;h<=24;h+=8)n<<=1,n|=t>>h+o&1}for(h=0;h<=24;h+=8)n<<=1,n|=e>>h+o&1;for(o=1;o<=3;o++){for(h=0;h<=24;h+=8)s<<=1,s|=e>>h+o&1;for(h=0;h<=24;h+=8)s<<=1,s|=t>>h+o&1}for(h=0;h<=24;h+=8)s<<=1,s|=t>>h+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},r28shl:function(t,e){return t<<e&268435455|t>>>28-e}},Wo=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];Ho.pc2=function(t,e,i,r){for(var n=0,s=0,o=Wo.length>>>1,h=0;h<o;h++)n<<=1,n|=t>>>Wo[h]&1;for(h=o;h<Wo.length;h++)s<<=1,s|=e>>>Wo[h]&1;i[r+0]=n>>>0,i[r+1]=s>>>0},Ho.expand=function(t,e,i){var r=0,n=0;r=(1&t)<<5|t>>>27;for(var s=23;s>=15;s-=4)r<<=6,r|=t>>>s&63;for(s=11;s>=3;s-=4)n|=t>>>s&63,n<<=6;n|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=n>>>0};var qo=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];Ho.substitute=function(t,e){for(var i=0,r=0;r<4;r++)i<<=4,i|=qo[64*r+(t>>>18-6*r&63)];for(r=0;r<4;r++)i<<=4,i|=qo[256+64*r+(e>>>18-6*r&63)];return i>>>0};var zo=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];Ho.permute=function(t){for(var e=0,i=0;i<zo.length;i++)e<<=1,e|=t>>>zo[i]&1;return e>>>0},Ho.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var n=[],s=0;s<e;s+=i)n.push(r.slice(s,s+i));return n.join(" ")};var Vo;function Zo(t,e){if(!t)throw new Error(e||"Assertion failed")}Vo=Zo,Zo.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)};var Go={};function Ko(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}Go=Ko,Ko.prototype._init=function(){},Ko.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},Ko.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},Ko.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},Ko.prototype._updateEncrypt=function(t){var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(n,i)));for(var s=t.length-(t.length-e)%this.blockSize;e<s;e+=this.blockSize)this._update(t,e,n,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},Ko.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(n,i);return e+=this._buffer(t,e),n},Ko.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},Ko.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},Ko.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},Ko.prototype._unpad=function(t){return t},Ko.prototype._finalDecrypt=function(){var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)};var $o={};function Jo(){this.tmp=new Array(2),this.keys=null}function Qo(t){Go.call(this,t);var e=new Jo;this._desState=e,this.deriveKeys(e,t.key)}ir(Qo,Go),$o=Qo,Qo.create=function(t){return new Qo(t)};var th=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];Qo.prototype.deriveKeys=function(t,e){t.keys=new Array(32);var i=Ho.readUInt32BE(e,0),r=Ho.readUInt32BE(e,4);Ho.pc1(i,r,t.tmp,0),i=t.tmp[0],r=t.tmp[1];for(var n=0;n<t.keys.length;n+=2){var s=th[n>>>1];i=Ho.r28shl(i,s),r=Ho.r28shl(r,s),Ho.pc2(i,r,t.keys,n)}},Qo.prototype._update=function(t,e,i,r){var n=this._desState,s=Ho.readUInt32BE(t,e),o=Ho.readUInt32BE(t,e+4);Ho.ip(s,o,n.tmp,0),s=n.tmp[0],o=n.tmp[1],"encrypt"===this.type?this._encrypt(n,s,o,n.tmp,0):this._decrypt(n,s,o,n.tmp,0),s=n.tmp[0],o=n.tmp[1],Ho.writeUInt32BE(i,s,r),Ho.writeUInt32BE(i,o,r+4)},Qo.prototype._pad=function(t,e){for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},Qo.prototype._unpad=function(t){for(var e=t[t.length-1],i=t.length-e;i<t.length;i++);return t.slice(0,t.length-e)},Qo.prototype._encrypt=function(t,e,i,r,n){for(var s=e,o=i,h=0;h<t.keys.length;h+=2){var a=t.keys[h],u=t.keys[h+1];Ho.expand(o,t.tmp,0),a^=t.tmp[0],u^=t.tmp[1];var l=Ho.substitute(a,u),c=o;o=(s^Ho.permute(l))>>>0,s=c}Ho.rip(o,s,r,n)},Qo.prototype._decrypt=function(t,e,i,r,n){for(var s=i,o=e,h=t.keys.length-2;h>=0;h-=2){var a=t.keys[h],u=t.keys[h+1];Ho.expand(s,t.tmp,0),a^=t.tmp[0],u^=t.tmp[1];var l=Ho.substitute(a,u),c=s;s=(o^Ho.permute(l))>>>0,o=c}Ho.rip(s,o,r,n)};var eh={},ih={};function rh(t){this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}eh.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}ir(e,t);for(var i=Object.keys(ih),r=0;r<i.length;r++){var n=i[r];e.prototype[n]=ih[n]}return e.create=function(t){return new e(t)},e},ih._cbcInit=function(){var t=new rh(this.options.iv);this._cbcState=t},ih._update=function(t,e,i,r){var n=this._cbcState,s=this.constructor.super_.prototype,o=n.iv;if("encrypt"===this.type){for(var h=0;h<this.blockSize;h++)o[h]^=t[e+h];for(s._update.call(this,o,0,i,r),h=0;h<this.blockSize;h++)o[h]=i[r+h]}else{for(s._update.call(this,t,e,i,r),h=0;h<this.blockSize;h++)i[r+h]^=o[h];for(h=0;h<this.blockSize;h++)o[h]=t[e+h]}};var nh;function sh(t,e){var i=e.slice(0,8),r=e.slice(8,16),n=e.slice(16,24);this.ciphers="encrypt"===t?[$o.create({type:"encrypt",key:i}),$o.create({type:"decrypt",key:r}),$o.create({type:"encrypt",key:n})]:[$o.create({type:"decrypt",key:n}),$o.create({type:"encrypt",key:r}),$o.create({type:"decrypt",key:i})]}function oh(t){Go.call(this,t);var e=new sh(this.type,this.options.key);this._edeState=e}ir(oh,Go),nh=oh,oh.create=function(t){return new oh(t)},oh.prototype._update=function(t,e,i,r){var n=this._edeState;n.ciphers[0]._update(t,e,i,r),n.ciphers[1]._update(i,r,i,r),n.ciphers[2]._update(i,r,i,r)},oh.prototype._pad=$o.prototype._pad,oh.prototype._unpad=$o.prototype._unpad;var hh={};hh.DES=$o,hh.CBC=eh,hh.EDE=nh;var ah=Ki.Buffer,uh={"des-ede3-cbc":hh.CBC.instantiate(hh.EDE),"des-ede3":hh.EDE,"des-ede-cbc":hh.CBC.instantiate(hh.EDE),"des-ede":hh.EDE,"des-cbc":hh.CBC.instantiate(hh.DES),"des-ecb":hh.DES};function lh(t){po.call(this);var e,i=t.mode.toLowerCase(),r=uh[i];e=t.decrypt?"decrypt":"encrypt";var n=t.key;ah.isBuffer(n)||(n=ah.from(n)),"des-ede"!==i&&"des-ede-cbc"!==i||(n=ah.concat([n,n.slice(0,8)]));var s=t.iv;ah.isBuffer(s)||(s=ah.from(s)),this._des=r.create({key:n,iv:s,type:e})}uh.des=uh["des-cbc"],uh.des3=uh["des-ede3-cbc"],ir(lh,po),lh.prototype._update=function(t){return ah.from(this._des.update(t))},lh.prototype._final=function(){return ah.from(this._des.final())};var ch={encrypt:function(t,e){return t._cipher.encryptBlock(e)},decrypt:function(t,e){return t._cipher.decryptBlock(e)}},fh={};(function(t){(function(){fh=function(e,i){for(var r=Math.min(e.length,i.length),n=new t(r),s=0;s<r;++s)n[s]=e[s]^i[s];return n}}).call(this)}).call(this,_t({}).Buffer);var dh={encrypt:function(t,e){var i=fh(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},decrypt:function(t,e){var i=t._prev;t._prev=e;var r=t._cipher.decryptBlock(e);return fh(r,i)}},ph={},mh=Ki.Buffer;function gh(t,e,i){var r=e.length,n=fh(e,t._cache);return t._cache=t._cache.slice(r),t._prev=mh.concat([t._prev,i?e:n]),n}ph.encrypt=function(t,e,i){for(var r,n=mh.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=mh.allocUnsafe(0)),!(t._cache.length<=e.length)){n=mh.concat([n,gh(t,e,i)]);break}r=t._cache.length,n=mh.concat([n,gh(t,e.slice(0,r),i)]),e=e.slice(r)}return n};var yh={},bh=Ki.Buffer;function wh(t,e,i){var r=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=bh.concat([t._prev.slice(1),bh.from([i?e:r])]),r}yh.encrypt=function(t,e,i){for(var r=e.length,n=bh.allocUnsafe(r),s=-1;++s<r;)n[s]=wh(t,e[s],i);return n};var vh={},Mh=Ki.Buffer;function Sh(t,e,i){for(var r,n,s=-1,o=0;++s<8;)r=e&1<<7-s?128:0,o+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^r))>>s%8,t._prev=_h(t._prev,i?r:n);return o}function _h(t,e){var i=t.length,r=-1,n=Mh.allocUnsafe(t.length);for(t=Mh.concat([t,Mh.from([e])]);++r<i;)n[r]=t[r]<<1|t[r+1]>>7;return n}vh.encrypt=function(t,e,i){for(var r=e.length,n=Mh.allocUnsafe(r),s=-1;++s<r;)n[s]=Sh(t,e[s],i);return n};var Ih={};(function(t){(function(){function e(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}Ih.encrypt=function(i,r){for(;i._cache.length<r.length;)i._cache=t.concat([i._cache,e(i)]);var n=i._cache.slice(0,r.length);return i._cache=i._cache.slice(r.length),fh(r,n)}}).call(this)}).call(this,_t({}).Buffer);var Ch=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}},kh={},Th=Ki.Buffer;function Ah(t){var e=t._cipher.encryptBlockRaw(t._prev);return Ch(t._prev),e}kh.encrypt=function(t,e){var i=Math.ceil(e.length/16),r=t._cache.length;t._cache=Th.concat([t._cache,Th.allocUnsafe(16*i)]);for(var n=0;n<i;n++){var s=Ah(t),o=r+16*n;t._cache.writeUInt32BE(s[0],o+0),t._cache.writeUInt32BE(s[1],o+4),t._cache.writeUInt32BE(s[2],o+8),t._cache.writeUInt32BE(s[3],o+12)}var h=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),fh(e,h)};var xh={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}},Eh={ECB:ch,CBC:dh,CFB:ph,CFB8:yh,CFB1:vh,OFB:Ih,CTR:kh,GCM:kh};for(var Bh in xh)xh[Bh].module=Eh[xh[Bh].mode];var Lh={},Rh=Ki.Buffer;function Ph(t){Rh.isBuffer(t)||(t=Rh.from(t));for(var e=t.length/4|0,i=new Array(e),r=0;r<e;r++)i[r]=t.readUInt32BE(4*r);return i}function Oh(t){for(;0<t.length;t++)t[0]=0}function jh(t,e,i,r,n){for(var s,o,h,a,u=i[0],l=i[1],c=i[2],f=i[3],d=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],y=4,b=1;b<n;b++)s=u[d>>>24]^l[p>>>16&255]^c[m>>>8&255]^f[255&g]^e[y++],o=u[p>>>24]^l[m>>>16&255]^c[g>>>8&255]^f[255&d]^e[y++],h=u[m>>>24]^l[g>>>16&255]^c[d>>>8&255]^f[255&p]^e[y++],a=u[g>>>24]^l[d>>>16&255]^c[p>>>8&255]^f[255&m]^e[y++],d=s,p=o,m=h,g=a;return s=(r[d>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^e[y++],o=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&d])^e[y++],h=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[d>>>8&255]<<8|r[255&p])^e[y++],a=(r[g>>>24]<<24|r[d>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^e[y++],[s>>>=0,o>>>=0,h>>>=0,a>>>=0]}var Dh=[0,1,2,4,8,16,32,64,128,27,54],Yh=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],n=[[],[],[],[]],s=[[],[],[],[]],o=0,h=0,a=0;a<256;++a){var u=h^h<<1^h<<2^h<<3^h<<4;u=u>>>8^255&u^99,i[o]=u,r[u]=o;var l=t[o],c=t[l],f=t[c],d=257*t[u]^16843008*u;n[0][o]=d<<24|d>>>8,n[1][o]=d<<16|d>>>16,n[2][o]=d<<8|d>>>24,n[3][o]=d,d=16843009*f^65537*c^257*l^16843008*o,s[0][u]=d<<24|d>>>8,s[1][u]=d<<16|d>>>16,s[2][u]=d<<8|d>>>24,s[3][u]=d,0===o?o=h=1:(o=l^t[t[t[f^l]]],h^=t[t[h]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:s}}();function Uh(t){this._key=Ph(t),this._reset()}Uh.blockSize=16,Uh.keySize=32,Uh.prototype.blockSize=Uh.blockSize,Uh.prototype.keySize=Uh.keySize,Uh.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),n=[],s=0;s<e;s++)n[s]=t[s];for(s=e;s<r;s++){var o=n[s-1];s%e==0?(o=o<<8|o>>>24,o=Yh.SBOX[o>>>24]<<24|Yh.SBOX[o>>>16&255]<<16|Yh.SBOX[o>>>8&255]<<8|Yh.SBOX[255&o],o^=Dh[s/e|0]<<24):e>6&&s%e==4&&(o=Yh.SBOX[o>>>24]<<24|Yh.SBOX[o>>>16&255]<<16|Yh.SBOX[o>>>8&255]<<8|Yh.SBOX[255&o]),n[s]=n[s-e]^o}for(var h=[],a=0;a<r;a++){var u=r-a,l=n[u-(a%4?0:4)];h[a]=a<4||u<=4?l:Yh.INV_SUB_MIX[0][Yh.SBOX[l>>>24]]^Yh.INV_SUB_MIX[1][Yh.SBOX[l>>>16&255]]^Yh.INV_SUB_MIX[2][Yh.SBOX[l>>>8&255]]^Yh.INV_SUB_MIX[3][Yh.SBOX[255&l]]}this._nRounds=i,this._keySchedule=n,this._invKeySchedule=h},Uh.prototype.encryptBlockRaw=function(t){return jh(t=Ph(t),this._keySchedule,Yh.SUB_MIX,Yh.SBOX,this._nRounds)},Uh.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=Rh.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},Uh.prototype.decryptBlock=function(t){var e=(t=Ph(t))[1];t[1]=t[3],t[3]=e;var i=jh(t,this._invKeySchedule,Yh.INV_SUB_MIX,Yh.INV_SBOX,this._nRounds),r=Rh.allocUnsafe(16);return r.writeUInt32BE(i[0],0),r.writeUInt32BE(i[3],4),r.writeUInt32BE(i[2],8),r.writeUInt32BE(i[1],12),r},Uh.prototype.scrub=function(){Oh(this._keySchedule),Oh(this._invKeySchedule),Oh(this._key)},Lh.AES=Uh;var Xh={},Nh=Ki.Buffer,Fh=Nh.alloc(16,0);function Hh(t){var e=Nh.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function Wh(t){this.h=t,this.state=Nh.alloc(16,0),this.cache=Nh.allocUnsafe(0)}Wh.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},Wh.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],n=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),i=0!=(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=Hh(n)},Wh.prototype.update=function(t){var e;for(this.cache=Nh.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},Wh.prototype.final=function(t,e){return this.cache.length&&this.ghash(Nh.concat([this.cache,Fh],16)),this.ghash(Hh([0,t,0,e])),this.state},Xh=Wh;var qh=Ki.Buffer;function zh(t,e,i,r){po.call(this);var n=qh.alloc(4,0);this._cipher=new Lh.AES(e);var s=this._cipher.encryptBlock(n);this._ghash=new Xh(s),i=function(t,e,i){if(12===e.length)return t._finID=qh.concat([e,qh.from([0,0,0,1])]),qh.concat([e,qh.from([0,0,0,2])]);var r=new Xh(i),n=e.length,s=n%16;r.update(e),s&&(s=16-s,r.update(qh.alloc(s,0))),r.update(qh.alloc(8,0));var o=8*n,h=qh.alloc(8);h.writeUIntBE(o,0,8),r.update(h),t._finID=r.state;var a=qh.from(t._finID);return Ch(a),a}(this,i,s),this._prev=qh.from(i),this._cache=qh.allocUnsafe(0),this._secCache=qh.allocUnsafe(0),this._decrypt=r,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}ir(zh,po),zh.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=qh.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},zh.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=fh(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),n=0;n<r;++n)i+=t[n]^e[n];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},zh.prototype.getAuthTag=function(){if(this._decrypt||!qh.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},zh.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},zh.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length};var Vh=Ki.Buffer;function Zh(t,e,i,r){po.call(this),this._cipher=new Lh.AES(e),this._prev=Vh.from(i),this._cache=Vh.allocUnsafe(0),this._secCache=Vh.allocUnsafe(0),this._decrypt=r,this._mode=t}ir(Zh,po),Zh.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},Zh.prototype._final=function(){this._cipher.scrub()};var Gh=Ki.Buffer,Kh=function(t,e,i,r){if(Gh.isBuffer(t)||(t=Gh.from(t,"binary")),e&&(Gh.isBuffer(e)||(e=Gh.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var n=i/8,s=Gh.alloc(n),o=Gh.alloc(r||0),h=Gh.alloc(0);n>0||r>0;){var a=new on;a.update(h),a.update(t),e&&a.update(e),h=a.digest();var u=0;if(n>0){var l=s.length-n;u=Math.min(n,h.length),h.copy(s,l,0,u),n-=u}if(u<h.length&&r>0){var c=o.length-r,f=Math.min(r,h.length-u);h.copy(o,c,u,u+f),r-=f}}return h.fill(0),{key:s,iv:o}},$h={},Jh=Ki.Buffer;function Qh(t,e,i){po.call(this),this._cache=new ea,this._cipher=new Lh.AES(e),this._prev=Jh.from(i),this._mode=t,this._autopadding=!0}ir(Qh,po),Qh.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return Jh.concat(r)};var ta=Jh.alloc(16,16);function ea(){this.cache=Jh.allocUnsafe(0)}Qh.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(ta))throw this._cipher.scrub(),new Error("data not multiple of block length")},Qh.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},ea.prototype.add=function(t){this.cache=Jh.concat([this.cache,t])},ea.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},ea.prototype.flush=function(){for(var t=16-this.cache.length,e=Jh.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return Jh.concat([this.cache,e])};var ia={},ra=Ki.Buffer;function na(t,e,i){po.call(this),this._cache=new sa,this._last=void 0,this._cipher=new Lh.AES(e),this._prev=ra.from(i),this._mode=t,this._autopadding=!0}function sa(){this.cache=ra.allocUnsafe(0)}ir(na,po),na.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return ra.concat(r)},na.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},na.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},sa.prototype.add=function(t){this.cache=ra.concat([this.cache,t])},sa.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},sa.prototype.flush=function(){if(this.cache.length)return this.cache};var oa={};oa.createCipheriv=$h.createCipheriv,oa.createDecipheriv=ia.createDecipheriv;var ha={"des-ecb":{key:8,iv:0}};ha["des-cbc"]=ha.des={key:8,iv:8},ha["des-ede3-cbc"]=ha.des3={key:24,iv:8},ha["des-ede3"]={key:24,iv:0},ha["des-ede-cbc"]={key:16,iv:8},ha["des-ede"]={key:16,iv:0};var aa={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(aa,this),aa=aa.exports;var ua={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(ua,this),ua=ua.exports;var la,ca;function fa(t){this.rand=t}if((la=function(t){return ca||(ca=new fa(null)),ca.generate(t)}).Rand=fa,fa.prototype.generate=function(t){return this._rand(t)},fa.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?fa.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?fa.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(fa.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var da=St({});if("function"!=typeof da.randomBytes)throw new Error("Not supported");fa.prototype._rand=function(t){return da.randomBytes(t)}}catch(Kd){}var pa={};function ma(t){this.rand=t||new la.Rand}pa=ma,ma.create=function(t){return new ma(t)},ma.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var r=new ua(this.rand.generate(i))}while(r.cmp(t)>=0);return r},ma.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},ma.prototype.test=function(t,e,i){var r=t.bitLength(),n=ua.mont(t),s=new ua(1).toRed(n);e||(e=Math.max(1,r/48|0));for(var o=t.subn(1),h=0;!o.testn(h);h++);for(var a=t.shrn(h),u=o.toRed(n);e>0;e--){var l=this._randrange(new ua(2),o);i&&i(l);var c=l.toRed(n).redPow(a);if(0!==c.cmp(s)&&0!==c.cmp(u)){for(var f=1;f<h;f++){if(0===(c=c.redSqr()).cmp(s))return!1;if(0===c.cmp(u))break}if(f===h)return!1}}return!0},ma.prototype.getDivisor=function(t,e){var i=t.bitLength(),r=ua.mont(t),n=new ua(1).toRed(r);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),o=0;!s.testn(o);o++);for(var h=t.shrn(o),a=s.toRed(r);e>0;e--){var u=this._randrange(new ua(2),s),l=t.gcd(u);if(0!==l.cmpn(1))return l;var c=u.toRed(r).redPow(h);if(0!==c.cmp(n)&&0!==c.cmp(a)){for(var f=1;f<o;f++){if(0===(c=c.redSqr()).cmp(n))return c.fromRed().subn(1).gcd(t);if(0===c.cmp(a))break}if(f===o)return(c=c.redSqr()).fromRed().subn(1).gcd(t)}}return!1};var ga={};ga=Ea,Ea.simpleSieve=Aa,Ea.fermatTest=xa;var ya=new aa(24),ba=new pa,wa=new aa(1),va=new aa(2),Ma=new aa(5),Sa=(new aa(16),new aa(8),new aa(10)),_a=new aa(3),Ia=(new aa(7),new aa(11)),Ca=new aa(4),ka=(new aa(12),null);function Ta(){if(null!==ka)return ka;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),n=0;n<e&&t[n]<=r&&i%t[n]!=0;n++);e!==n&&t[n]<=r||(t[e++]=i)}return ka=t,t}function Aa(t){for(var e=Ta(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function xa(t){var e=aa.mont(t);return 0===va.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function Ea(t,e){if(t<16)return new aa(2===e||5===e?[140,123]:[140,39]);var i,r;for(e=new aa(e);;){for(i=new aa(er(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(wa),i.testn(1)||i.iadd(va),e.cmp(va)){if(!e.cmp(Ma))for(;i.mod(Sa).cmp(_a);)i.iadd(Ca)}else for(;i.mod(ya).cmp(Ia);)i.iadd(Ca);if(Aa(r=i.shrn(1))&&Aa(i)&&xa(r)&&xa(i)&&ba.test(r)&&ba.test(i))return i}}(function(t){(function(){var e=new pa,i=new aa(24),r=new aa(11),n=new aa(10),s=new aa(3),o=new aa(7);function h(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._pub=new aa(e),this}function a(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this._priv=new aa(e),this}l;var u={};function l(t,e,i){this.setGenerator(e),this.__prime=new aa(t),this._prime=aa.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=h,this.setPrivateKey=a):this._primeCode=8}function c(e,i){var r=new t(e.toArray());return i?r.toString(i):r}Object.defineProperty(l.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,h){var a=h.toString("hex"),l=[a,t.toString(16)].join("_");if(l in u)return u[l];var c,f=0;if(t.isEven()||!ga.simpleSieve||!ga.fermatTest(t)||!e.test(t))return f+=1,f+="02"===a||"05"===a?8:4,u[l]=f,f;switch(e.test(t.shrn(1))||(f+=2),a){case"02":t.mod(i).cmp(r)&&(f+=8);break;case"05":(c=t.mod(n)).cmp(s)&&c.cmp(o)&&(f+=8);break;default:f+=4}return u[l]=f,f}(this.__prime,this.__gen)),this._primeCode}}),l.prototype.generateKeys=function(){return this._priv||(this._priv=new aa(er(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},l.prototype.computeSecret=function(e){var i=(e=(e=new aa(e)).toRed(this._prime)).redPow(this._priv).fromRed(),r=new t(i.toArray()),n=this.getPrime();if(r.length<n.length){var s=new t(n.length-r.length);s.fill(0),r=t.concat([s,r])}return r},l.prototype.getPublicKey=function(t){return c(this._pub,t)},l.prototype.getPrivateKey=function(t){return c(this._priv,t)},l.prototype.getPrime=function(t){return c(this.__prime,t)},l.prototype.getGenerator=function(t){return c(this._gen,t)},l.prototype.setGenerator=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.__gen=e,this._gen=new aa(e),this}}).call(this)}).call(this,_t({}).Buffer);(function(t){(function(){}).call(this)}).call(this,_t({}).Buffer);var Ba=nr.EventEmitter;function La(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Ra(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Pa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oa=_t({}).Buffer,ja=St({}).inspect,Da=ja&&ja.custom||"inspect",Ya=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return Oa.alloc(0);for(var e,i,r,n=Oa.allocUnsafe(t>>>0),s=this.head,o=0;s;)e=s.data,i=n,r=o,Oa.prototype.copy.call(e,i,r),o+=s.data.length,s=s.next;return n}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?r+=n:r+=n.slice(0,t),0==(t-=s)){s===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=Oa.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0==(t-=s)){s===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(s));break}++r}return this.length-=r,e}},{key:Da,value:function(t,e){return ja(this,function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?La(Object(i),!0).forEach((function(e){Ra(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):La(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},e,{depth:0,customInspect:!1}))}}])&&Pa(e.prototype,i),t}(),Ua={};(function(t){(function(){"use strict";function e(t,e){r(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(t,e){t.emit("error",e)}Ua={destroy:function(n,s){var o=this,h=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return h||a?(s?s(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(r,this,n)):t.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(r){!s&&r?o._writableState?o._writableState.errorEmitted?t.nextTick(i,o):(o._writableState.errorEmitted=!0,t.nextTick(e,o,r)):t.nextTick(e,o,r):s?(t.nextTick(i,o),s(r)):t.nextTick(i,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}}).call(this)}).call(this,we);var Xa={},Na={};function Fa(t,e,i){i||(i=Error);var r=function(t){var i,r;function n(i,r,n){return t.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,n))||this}return r=t,(i=n).prototype=Object.create(r.prototype),i.prototype.constructor=i,i.__proto__=r,n}(i);r.prototype.name=i.name,r.prototype.code=t,Na[t]=r}function Ha(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map((function(t){return String(t)})),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}Fa("ERR_INVALID_OPT_VALUE",(function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'}),TypeError),Fa("ERR_INVALID_ARG_TYPE",(function(t,e,i){var r,n,s,o;if("string"==typeof e&&("not ","not "===e.substr(0,"not ".length))?(r="must not be",e=e.replace(/^not /,"")):r="must be",s=t,(void 0===o||o>s.length)&&(o=s.length)," argument"===s.substring(o-" argument".length,o))n="The ".concat(t," ").concat(r," ").concat(Ha(e,"type"));else{var h=function(t,e,i){return"number"!=typeof i&&(i=0),!(i+".".length>t.length)&&-1!==t.indexOf(".",i)}(t)?"property":"argument";n='The "'.concat(t,'" ').concat(h," ").concat(r," ").concat(Ha(e,"type"))}return n+". Received type ".concat(typeof i)}),TypeError),Fa("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),Fa("ERR_METHOD_NOT_IMPLEMENTED",(function(t){return"The "+t+" method is not implemented"})),Fa("ERR_STREAM_PREMATURE_CLOSE","Premature close"),Fa("ERR_STREAM_DESTROYED",(function(t){return"Cannot call "+t+" after a stream was destroyed"})),Fa("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),Fa("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),Fa("ERR_STREAM_WRITE_AFTER_END","write after end"),Fa("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),Fa("ERR_UNKNOWN_ENCODING",(function(t){return"Unknown encoding: "+t}),TypeError),Fa("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Xa.codes=Na;var Wa=Xa.codes.ERR_INVALID_OPT_VALUE,qa={getHighWaterMark:function(t,e,i,r){var n=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,r,i);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new Wa(r?i:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}},za=tu,Va=Xa.codes,Za=Va.ERR_METHOD_NOT_IMPLEMENTED,Ga=Va.ERR_MULTIPLE_CALLBACK,Ka=Va.ERR_TRANSFORM_ALREADY_TRANSFORMING,$a=Va.ERR_TRANSFORM_WITH_LENGTH_0,Ja=ht({});function Qa(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new Ga);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function tu(t){if(!(this instanceof tu))return new tu(t);Ja.call(this,t),this._transformState={afterTransform:Qa.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",eu)}function eu(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?iu(this,null,null):this._flush((function(e,i){iu(t,e,i)}))}function iu(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new $a;if(t._transformState.transforming)throw new Ka;return t.push(null)}ir(tu,Ja),tu.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ja.prototype.push.call(this,t,e)},tu.prototype._transform=function(t,e,i){i(new Za("_transform()"))},tu.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},tu.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},tu.prototype._destroy=function(t,e){Ja.prototype._destroy.call(this,t,(function(t){e(t)}))};var ru,nu=su;function su(t){if(!(this instanceof su))return new su(t);za.call(this,t)}ir(su,za),su.prototype._transform=function(t,e,i){i(null,t)};var ou=Xa.codes,hu=ou.ERR_MISSING_ARGS,au=ou.ERR_STREAM_DESTROYED;function uu(t){if(t)throw t}function lu(t){t()}function cu(t,e){return t.pipe(e)}var fu={};(fu=fu=rt({})).Stream=fu,fu.Readable=fu,fu.Writable=at({}),fu.Duplex=ht({}),fu.Transform=za,fu.PassThrough=nu,fu.finished=ot({}),fu.pipeline=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r,n=function(t){return t.length?"function"!=typeof t[t.length-1]?uu:t.pop():uu}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new hu("streams");var s=e.map((function(t,i){var o=i<e.length-1;return function(t,e,i,r){r=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(r);var n=!1;t.on("close",(function(){n=!0})),void 0===ru&&(ru=ot({})),ru(t,{readable:e,writable:i},(function(t){if(t)return r(t);n=!0,r()}));var s=!1;return function(e){if(!n&&!s)return s=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void r(e||new au("pipe"))}}(t,o,i>0,(function(t){r||(r=t),t&&s.forEach(lu),o||(s.forEach(lu),n(r))}))}));return e.reduce(cu)};var du={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(du,this),du=du.exports;var pu={};(function(t){(function(){function e(e,r){var n=function(t){var e=i(t);return{blinder:e.toRed(du.mont(t.modulus)).redPow(new du(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(r),s=r.modulus.byteLength(),o=(du.mont(r.modulus),new du(e).mul(n.blinder).umod(r.modulus)),h=o.toRed(du.mont(r.prime1)),a=o.toRed(du.mont(r.prime2)),u=r.coefficient,l=r.prime1,c=r.prime2,f=h.redPow(r.exponent1),d=a.redPow(r.exponent2);f=f.fromRed(),d=d.fromRed();var p=f.isub(d).imul(u).umod(l);return p.imul(c),d.iadd(p),new t(d.imul(n.unblinder).umod(r.modulus).toArray(!1,s))}function i(t){for(var e=t.modulus.byteLength(),i=new du(er(e));i.cmp(t.modulus)>=0||!i.umod(t.prime1)||!i.umod(t.prime2);)i=new du(er(e));return i}pu=e,e.getr=i}).call(this)}).call(this,_t({}).Buffer);var mu={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(mu,this),mu=mu.exports;var gu={},yu=gu;function bu(t){return 1===t.length?"0"+t:t}function wu(t){for(var e="",i=0;i<t.length;i++)e+=bu(t[i].toString(16));return e}yu.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var n=t.charCodeAt(r),s=n>>8,o=255&n;s?i.push(s,o):i.push(o)}return i},yu.zero2=bu,yu.toHex=wu,yu.encode=function(t,e){return"hex"===e?wu(t):t};var vu={},Mu=vu;Mu.assert=Vo,Mu.toArray=gu.toArray,Mu.zero2=gu.zero2,Mu.toHex=gu.toHex,Mu.encode=gu.encode,Mu.getNAF=function(t,e,i){var r=new Array(Math.max(t.bitLength(),i)+1);r.fill(0);for(var n=1<<e+1,s=t.clone(),o=0;o<r.length;o++){var h,a=s.andln(n-1);s.isOdd()?(h=a>(n>>1)-1?(n>>1)-a:a,s.isubn(h)):h=0,r[o]=h,s.iushrn(1)}return r},Mu.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,n=0,s=0;t.cmpn(-n)>0||e.cmpn(-s)>0;){var o,h,a=t.andln(3)+n&3,u=e.andln(3)+s&3;3===a&&(a=-1),3===u&&(u=-1),o=0==(1&a)?0:3!=(r=t.andln(7)+n&7)&&5!==r||2!==u?a:-a,i[0].push(o),h=0==(1&u)?0:3!=(r=e.andln(7)+s&7)&&5!==r||2!==a?u:-u,i[1].push(h),2*n===o+1&&(n=1-n),2*s===h+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return i},Mu.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},Mu.parseBytes=function(t){return"string"==typeof t?Mu.toArray(t,"hex"):t},Mu.intFromLE=function(t){return new mu(t,"hex","le")};var Su={},_u=vu.getNAF,Iu=vu.getJSF;function Cu(t,e){this.type=t,this.p=new mu(e.p,16),this.red=e.prime?mu.red(e.prime):mu.mont(this.p),this.zero=new mu(0).toRed(this.red),this.one=new mu(1).toRed(this.red),this.two=new mu(2).toRed(this.red),this.n=e.n&&new mu(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function ku(t,e){this.curve=t,this.type=e,this.precomputed=null}vu.assert,Su=Cu,Cu.prototype.point=function(){throw new Error("Not implemented")},Cu.prototype.validate=function(){throw new Error("Not implemented")},Cu.prototype._fixedNafMul=function(t,e){var i=t._getDoubles(),r=_u(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var s,o,h=[];for(s=0;s<r.length;s+=i.step){o=0;for(var a=s+i.step-1;a>=s;a--)o=(o<<1)+r[a];h.push(o)}for(var u=this.jpoint(null,null,null),l=this.jpoint(null,null,null),c=n;c>0;c--){for(s=0;s<h.length;s++)(o=h[s])===c?l=l.mixedAdd(i.points[s]):o===-c&&(l=l.mixedAdd(i.points[s].neg()));u=u.add(l)}return u.toP()},Cu.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,s=_u(e,i,this._bitLength),o=this.jpoint(null,null,null),h=s.length-1;h>=0;h--){for(var a=0;h>=0&&0===s[h];h--)a++;if(h>=0&&a++,o=o.dblp(a),h<0)break;var u=s[h];o="affine"===t.type?u>0?o.mixedAdd(n[u-1>>1]):o.mixedAdd(n[-u-1>>1].neg()):u>0?o.add(n[u-1>>1]):o.add(n[-u-1>>1].neg())}return"affine"===t.type?o.toP():o},Cu.prototype._wnafMulAdd=function(t,e,i,r,n){var s,o,h,a=this._wnafT1,u=this._wnafT2,l=this._wnafT3,c=0;for(s=0;s<r;s++){var f=(h=e[s])._getNAFPoints(t);a[s]=f.wnd,u[s]=f.points}for(s=r-1;s>=1;s-=2){var d=s-1,p=s;if(1===a[d]&&1===a[p]){var m=[e[d],null,null,e[p]];0===e[d].y.cmp(e[p].y)?(m[1]=e[d].add(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg())):0===e[d].y.cmp(e[p].y.redNeg())?(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].add(e[p].neg())):(m[1]=e[d].toJ().mixedAdd(e[p]),m[2]=e[d].toJ().mixedAdd(e[p].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],y=Iu(i[d],i[p]);for(c=Math.max(y[0].length,c),l[d]=new Array(c),l[p]=new Array(c),o=0;o<c;o++){var b=0|y[0][o],w=0|y[1][o];l[d][o]=g[3*(b+1)+(w+1)],l[p][o]=0,u[d]=m}}else l[d]=_u(i[d],a[d],this._bitLength),l[p]=_u(i[p],a[p],this._bitLength),c=Math.max(l[d].length,c),c=Math.max(l[p].length,c)}var v=this.jpoint(null,null,null),M=this._wnafT4;for(s=c;s>=0;s--){for(var S=0;s>=0;){var _=!0;for(o=0;o<r;o++)M[o]=0|l[o][s],0!==M[o]&&(_=!1);if(!_)break;S++,s--}if(s>=0&&S++,v=v.dblp(S),s<0)break;for(o=0;o<r;o++){var I=M[o];0!==I&&(I>0?h=u[o][I-1>>1]:I<0&&(h=u[o][-I-1>>1].neg()),v="affine"===h.type?v.mixedAdd(h):v.add(h))}}for(s=0;s<r;s++)u[s]=null;return n?v:v.toP()},Cu.BasePoint=ku,ku.prototype.eq=function(){throw new Error("Not implemented")},ku.prototype.validate=function(){return this.curve.validate(this)},Cu.prototype.decodePoint=function(t,e){t=vu.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]||t[0],this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},ku.prototype.encodeCompressed=function(t){return this.encode(t,!0)},ku.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},ku.prototype.encode=function(t,e){return vu.encode(this._encode(e),t)},ku.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},ku.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},ku.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var s=0;s<t;s++)r=r.dbl();i.push(r)}return{step:t,points:i}},ku.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},ku.prototype._getBeta=function(){return null},ku.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e};var Tu;function Au(t){Su.call(this,"short",t),this.a=new mu(t.a,16).toRed(this.red),this.b=new mu(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function xu(t,e,i,r){Su.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new mu(e,16),this.y=new mu(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function Eu(t,e,i,r){Su.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new mu(0)):(this.x=new mu(e,16),this.y=new mu(i,16),this.z=new mu(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}vu.assert,ir(Au,Su),Tu=Au,Au.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new mu(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new mu(t.lambda,16);else{var n=this._getEndoRoots(this.n);i=0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))?n[0]:n[1]}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(t){return{a:new mu(t.a,16),b:new mu(t.b,16)}})):this._getEndoBasis(i)}}},Au.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:mu.mont(t),i=new mu(2).toRed(e).redInvm(),r=i.redNeg(),n=new mu(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(n).fromRed(),r.redSub(n).fromRed()]},Au.prototype._getEndoBasis=function(t){for(var e,i,r,n,s,o,h,a,u,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),c=t,f=this.n.clone(),d=new mu(1),p=new mu(0),m=new mu(0),g=new mu(1),y=0;0!==c.cmpn(0);){var b=f.div(c);a=f.sub(b.mul(c)),u=m.sub(b.mul(d));var w=g.sub(b.mul(p));if(!r&&a.cmp(l)<0)e=h.neg(),i=d,r=a.neg(),n=u;else if(r&&2==++y)break;h=a,f=c,c=a,m=d,d=u,g=p,p=w}s=a.neg(),o=u;var v=r.sqr().add(n.sqr());return s.sqr().add(o.sqr()).cmp(v)>=0&&(s=e,o=i),r.negative&&(r=r.neg(),n=n.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:n},{a:s,b:o}]},Au.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),h=s.mul(r.a),a=n.mul(i.b),u=s.mul(r.b);return{k1:t.sub(o).sub(h),k2:a.add(u).neg()}},Au.prototype.pointFromX=function(t,e){(t=new mu(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var n=r.fromRed().isOdd();return(e&&!n||!e&&n)&&(r=r.redNeg()),this.point(t,r)},Au.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},Au.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),h=t[s],a=h._getBeta();o.k1.negative&&(o.k1.ineg(),h=h.neg(!0)),o.k2.negative&&(o.k2.ineg(),a=a.neg(!0)),r[2*s]=h,r[2*s+1]=a,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var u=this._wnafMulAdd(1,r,n,2*s,i),l=0;l<2*s;l++)r[l]=null,n[l]=null;return u},ir(xu,Su.BasePoint),Au.prototype.point=function(t,e,i){return new xu(this,t,e,i)},Au.prototype.pointFromJSON=function(t,e){return xu.fromJSON(this,t,e)},xu.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},xu.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},xu.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var s=e[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(n))}},r},xu.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},xu.prototype.isInfinity=function(){return this.inf},xu.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},xu.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},xu.prototype.getX=function(){return this.x.fromRed()},xu.prototype.getY=function(){return this.y.fromRed()},xu.prototype.mul=function(t){return t=new mu(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},xu.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},xu.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},xu.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},xu.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},xu.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},ir(Eu,Su.BasePoint),Au.prototype.jpoint=function(t,e,i){return new Eu(this,t,e,i)},Eu.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},Eu.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},Eu.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),h=r.redSub(n),a=s.redSub(o);if(0===h.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=h.redSqr(),l=u.redMul(h),c=r.redMul(u),f=a.redSqr().redIAdd(l).redISub(c).redISub(c),d=a.redMul(c.redISub(f)).redISub(s.redMul(l)),p=this.z.redMul(t.z).redMul(h);return this.curve.jpoint(f,d,p)},Eu.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,s=t.y.redMul(e).redMul(this.z),o=i.redSub(r),h=n.redSub(s);if(0===o.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var a=o.redSqr(),u=a.redMul(o),l=i.redMul(a),c=h.redSqr().redIAdd(u).redISub(l).redISub(l),f=h.redMul(l.redISub(c)).redISub(n.redMul(u)),d=this.z.redMul(o);return this.curve.jpoint(c,f,d)},Eu.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,h=this.z,a=h.redSqr().redSqr(),u=o.redAdd(o);for(e=0;e<t;e++){var l=s.redSqr(),c=u.redSqr(),f=c.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(a)),p=s.redMul(c),m=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),y=d.redMul(g);y=y.redIAdd(y).redISub(f);var b=u.redMul(h);e+1<t&&(a=a.redMul(f)),s=m,h=b,u=y}return this.curve.jpoint(s,u.redMul(n),h)},Eu.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},Eu.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var h=r.redAdd(r).redIAdd(r),a=h.redSqr().redISub(o).redISub(o),u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),t=a,e=h.redMul(o.redISub(a)).redISub(u),i=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),c=this.y.redSqr(),f=c.redSqr(),d=this.x.redAdd(c).redSqr().redISub(l).redISub(f);d=d.redIAdd(d);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},Eu.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var h=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),a=h.redSqr().redISub(o).redISub(o);t=a;var u=s.redIAdd(s);u=(u=u.redIAdd(u)).redIAdd(u),e=h.redMul(o.redISub(a)).redISub(u),i=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),c=this.y.redSqr(),f=this.x.redMul(c),d=this.x.redSub(l).redMul(this.x.redAdd(l));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),m=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(l);var g=c.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,i)},Eu.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),s=e.redSqr(),o=i.redSqr(),h=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(n)),a=e.redAdd(e),u=(a=a.redIAdd(a)).redMul(o),l=h.redSqr().redISub(u.redAdd(u)),c=u.redISub(l),f=o.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=h.redMul(c).redISub(f),p=i.redAdd(i).redMul(r);return this.curve.jpoint(l,d,p)},Eu.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),s=n.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),h=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),a=r.redIAdd(r);a=(a=(a=a.redIAdd(a)).redIAdd(a)).redIAdd(a);var u=n.redIAdd(o).redSqr().redISub(s).redISub(h).redISub(a),l=e.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var c=this.x.redMul(h).redISub(l);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.y.redMul(u.redMul(a.redISub(u)).redISub(o.redMul(h)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(o).redSqr().redISub(i).redISub(h);return this.curve.jpoint(c,f,d)},Eu.prototype.mul=function(t,e){return t=new mu(t,e),this.curve._wnafMul(this,t)},Eu.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},Eu.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},Eu.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},Eu.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var Bu;function Lu(t){Su.call(this,"mont",t),this.a=new mu(t.a,16).toRed(this.red),this.b=new mu(t.b,16).toRed(this.red),this.i4=new mu(4).toRed(this.red).redInvm(),this.two=new mu(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Ru(t,e,i){Su.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new mu(e,16),this.z=new mu(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}ir(Lu,Su),Bu=Lu,Lu.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},ir(Ru,Su.BasePoint),Lu.prototype.decodePoint=function(t,e){return this.point(vu.toArray(t,e),1)},Lu.prototype.point=function(t,e){return new Ru(this,t,e)},Lu.prototype.pointFromJSON=function(t){return Ru.fromJSON(this,t)},Ru.prototype.precompute=function(){},Ru.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Ru.fromJSON=function(t,e){return new Ru(t,e[0],e[1]||t.one)},Ru.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Ru.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Ru.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),n=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,n)},Ru.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Ru.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=t.x.redAdd(t.z),s=t.x.redSub(t.z).redMul(i),o=n.redMul(r),h=e.z.redMul(s.redAdd(o).redSqr()),a=e.x.redMul(s.redISub(o).redSqr());return this.curve.point(h,a)},Ru.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},Ru.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Ru.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Ru.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},Ru.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Ru.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var Pu;function Ou(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,Su.call(this,"edwards",t),this.a=new mu(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new mu(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new mu(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),this.oneC=1==(0|t.c)}function ju(t,e,i,r,n){Su.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new mu(e,16),this.y=new mu(i,16),this.z=r?new mu(r,16):this.curve.one,this.t=n&&new mu(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}vu.assert,ir(Ou,Su),Pu=Ou,Ou.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},Ou.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},Ou.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},Ou.prototype.pointFromX=function(t,e){(t=new mu(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=this.c2.redSub(this.a.redMul(i)),n=this.one.redSub(this.c2.redMul(this.d).redMul(i)),s=r.redMul(n.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var h=o.fromRed().isOdd();return(e&&!h||!e&&h)&&(o=o.redNeg()),this.point(t,o)},Ou.prototype.pointFromY=function(t,e){(t=new mu(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=i.redSub(this.c2),n=i.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(n.redInvm());if(0===s.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==e&&(o=o.redNeg()),this.point(o,t)},Ou.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(n)},ir(ju,Su.BasePoint),Ou.prototype.pointFromJSON=function(t){return ju.fromJSON(this,t)},Ou.prototype.point=function(t,e,i,r){return new ju(this,t,e,i,r)},ju.fromJSON=function(t,e){return new ju(t,e[0],e[1],e[2])},ju.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},ju.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},ju.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=r.redAdd(e),o=s.redSub(i),h=r.redSub(e),a=n.redMul(o),u=s.redMul(h),l=n.redMul(h),c=o.redMul(s);return this.curve.point(a,u,c,l)},ju.prototype._projDbl=function(){var t,e,i,r,n,s,o=this.x.redAdd(this.y).redSqr(),h=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var u=(r=this.curve._mulA(h)).redAdd(a);this.zOne?(t=o.redSub(h).redSub(a).redMul(u.redSub(this.curve.two)),e=u.redMul(r.redSub(a)),i=u.redSqr().redSub(u).redSub(u)):(n=this.z.redSqr(),s=u.redSub(n).redISub(n),t=o.redSub(h).redISub(a).redMul(s),e=u.redMul(r.redSub(a)),i=u.redMul(s))}else r=h.redAdd(a),n=this.curve._mulC(this.z).redSqr(),s=r.redSub(n).redSub(n),t=this.curve._mulC(o.redISub(r)).redMul(s),e=this.curve._mulC(r).redMul(h.redISub(a)),i=r.redMul(s);return this.curve.point(t,e,i)},ju.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},ju.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),s=i.redSub(e),o=n.redSub(r),h=n.redAdd(r),a=i.redAdd(e),u=s.redMul(o),l=h.redMul(a),c=s.redMul(a),f=o.redMul(h);return this.curve.point(u,l,f,c)},ju.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),n=r.redSqr(),s=this.x.redMul(t.x),o=this.y.redMul(t.y),h=this.curve.d.redMul(s).redMul(o),a=n.redSub(h),u=n.redAdd(h),l=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(o),c=r.redMul(a).redMul(l);return this.curve.twisted?(e=r.redMul(u).redMul(o.redSub(this.curve._mulA(s))),i=a.redMul(u)):(e=r.redMul(u).redMul(o.redSub(s)),i=this.curve._mulC(a).redMul(u)),this.curve.point(c,e,i)},ju.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},ju.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},ju.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},ju.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},ju.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},ju.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},ju.prototype.getX=function(){return this.normalize(),this.x.fromRed()},ju.prototype.getY=function(){return this.normalize(),this.y.fromRed()},ju.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},ju.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},ju.prototype.toP=ju.prototype.normalize,ju.prototype.mixedAdd=ju.prototype.add;var Du={},Yu=Du;Yu.base=Su,Yu.short=Tu,Yu.mont=Bu,Yu.edwards=Pu;var Uu={};function Xu(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function Nu(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function Fu(t){return 1===t.length?"0"+t:t}function Hu(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}Uu.inherits=ir,Uu.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var s=t.charCodeAt(n);s<128?i[r++]=s:s<2048?(i[r++]=s>>6|192,i[r++]=63&s|128):Xu(t,n)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++n)),i[r++]=s>>18|240,i[r++]=s>>12&63|128,i[r++]=s>>6&63|128,i[r++]=63&s|128):(i[r++]=s>>12|224,i[r++]=s>>6&63|128,i[r++]=63&s|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},Uu.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=Fu(t[i].toString(16));return e},Uu.htonl=Nu,Uu.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=Nu(n)),i+=Hu(n.toString(16))}return i},Uu.zero2=Fu,Uu.zero8=Hu,Uu.join32=function(t,e,i,r){for(var n=new Array((i-e)/4),s=0,o=e;s<n.length;s++,o+=4){var h;h="big"===r?t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],n[s]=h>>>0}return n},Uu.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var s=t[r];"big"===e?(i[n]=s>>>24,i[n+1]=s>>>16&255,i[n+2]=s>>>8&255,i[n+3]=255&s):(i[n+3]=s>>>24,i[n+2]=s>>>16&255,i[n+1]=s>>>8&255,i[n]=255&s)}return i},Uu.rotr32=function(t,e){return t>>>e|t<<32-e},Uu.rotl32=function(t,e){return t<<e|t>>>32-e},Uu.sum32=function(t,e){return t+e>>>0},Uu.sum32_3=function(t,e,i){return t+e+i>>>0},Uu.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},Uu.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},Uu.sum64=function(t,e,i,r){var n=t[e],s=r+t[e+1]>>>0,o=(s<r?1:0)+i+n;t[e]=o>>>0,t[e+1]=s},Uu.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},Uu.sum64_lo=function(t,e,i,r){return e+r>>>0},Uu.sum64_4_hi=function(t,e,i,r,n,s,o,h){var a=0,u=e;return a+=(u=u+r>>>0)<e?1:0,a+=(u=u+s>>>0)<s?1:0,t+i+n+o+(a+=(u=u+h>>>0)<h?1:0)>>>0},Uu.sum64_4_lo=function(t,e,i,r,n,s,o,h){return e+r+s+h>>>0},Uu.sum64_5_hi=function(t,e,i,r,n,s,o,h,a,u){var l=0,c=e;return l+=(c=c+r>>>0)<e?1:0,l+=(c=c+s>>>0)<s?1:0,l+=(c=c+h>>>0)<h?1:0,t+i+n+o+a+(l+=(c=c+u>>>0)<u?1:0)>>>0},Uu.sum64_5_lo=function(t,e,i,r,n,s,o,h,a,u){return e+r+s+h+u>>>0},Uu.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},Uu.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},Uu.shr64_hi=function(t,e,i){return t>>>i},Uu.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0};var Wu={};function qu(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Wu.BlockHash=qu,qu.prototype.update=function(t,e){if(t=Uu.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=Uu.join32(t,0,t.length-i,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},qu.prototype.digest=function(t){return this.update(this._pad()),this._digest(t)},qu.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,s=8;s<this.padLength;s++)r[n++]=0;return r};var zu={},Vu=Uu.rotr32;function Zu(t,e,i){return t&e^~t&i}function Gu(t,e,i){return t&e^t&i^e&i}function Ku(t,e,i){return t^e^i}zu.ft_1=function(t,e,i,r){return 0===t?Zu(e,i,r):1===t||3===t?Ku(e,i,r):2===t?Gu(e,i,r):void 0},zu.ch32=Zu,zu.maj32=Gu,zu.s0_256=function(t){return Vu(t,2)^Vu(t,13)^Vu(t,22)},zu.s1_256=function(t){return Vu(t,6)^Vu(t,11)^Vu(t,25)},zu.g0_256=function(t){return Vu(t,7)^Vu(t,18)^t>>>3},zu.g1_256=function(t){return Vu(t,17)^Vu(t,19)^t>>>10};var $u,Ju=Uu.rotl32,Qu=Uu.sum32,tl=Uu.sum32_5,el=zu.ft_1,il=Wu.BlockHash,rl=[1518500249,1859775393,2400959708,3395469782];function nl(){if(!(this instanceof nl))return new nl;il.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Uu.inherits(nl,il),$u=nl,nl.blockSize=512,nl.outSize=160,nl.hmacStrength=80,nl.padLength=64,nl.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=Ju(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],s=this.h[1],o=this.h[2],h=this.h[3],a=this.h[4];for(r=0;r<i.length;r++){var u=~~(r/20),l=tl(Ju(n,5),el(u,s,o,h),a,i[r],rl[u]);a=h,h=o,o=Ju(s,30),s=n,n=l}this.h[0]=Qu(this.h[0],n),this.h[1]=Qu(this.h[1],s),this.h[2]=Qu(this.h[2],o),this.h[3]=Qu(this.h[3],h),this.h[4]=Qu(this.h[4],a)},nl.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h,"big"):Uu.split32(this.h,"big")};var sl={},ol=Uu.sum32,hl=Uu.sum32_4,al=Uu.sum32_5,ul=zu.ch32,ll=zu.maj32,cl=zu.s0_256,fl=zu.s1_256,dl=zu.g0_256,pl=zu.g1_256,ml=Wu.BlockHash,gl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yl(){if(!(this instanceof yl))return new yl;ml.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=gl,this.W=new Array(64)}Uu.inherits(yl,ml),sl=yl,yl.blockSize=512,yl.outSize=256,yl.hmacStrength=192,yl.padLength=64,yl.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=hl(pl(i[r-2]),i[r-7],dl(i[r-15]),i[r-16]);var n=this.h[0],s=this.h[1],o=this.h[2],h=this.h[3],a=this.h[4],u=this.h[5],l=this.h[6],c=this.h[7];for(r=0;r<i.length;r++){var f=al(c,fl(a),ul(a,u,l),this.k[r],i[r]),d=ol(cl(n),ll(n,s,o));c=l,l=u,u=a,a=ol(h,f),h=o,o=s,s=n,n=ol(f,d)}this.h[0]=ol(this.h[0],n),this.h[1]=ol(this.h[1],s),this.h[2]=ol(this.h[2],o),this.h[3]=ol(this.h[3],h),this.h[4]=ol(this.h[4],a),this.h[5]=ol(this.h[5],u),this.h[6]=ol(this.h[6],l),this.h[7]=ol(this.h[7],c)},yl.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h,"big"):Uu.split32(this.h,"big")};var bl;function wl(){if(!(this instanceof wl))return new wl;sl.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Uu.inherits(wl,sl),bl=wl,wl.blockSize=512,wl.outSize=224,wl.hmacStrength=192,wl.padLength=64,wl.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h.slice(0,7),"big"):Uu.split32(this.h.slice(0,7),"big")};var vl={},Ml=Uu.rotr64_hi,Sl=Uu.rotr64_lo,_l=Uu.shr64_hi,Il=Uu.shr64_lo,Cl=Uu.sum64,kl=Uu.sum64_hi,Tl=Uu.sum64_lo,Al=Uu.sum64_4_hi,xl=Uu.sum64_4_lo,El=Uu.sum64_5_hi,Bl=Uu.sum64_5_lo,Ll=Wu.BlockHash,Rl=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Pl(){if(!(this instanceof Pl))return new Pl;Ll.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=Rl,this.W=new Array(160)}function Ol(t,e,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function jl(t,e,i,r,n,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function Dl(t,e,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function Yl(t,e,i,r,n,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function Ul(t,e){var i=Ml(t,e,28)^Ml(e,t,2)^Ml(e,t,7);return i<0&&(i+=4294967296),i}function Xl(t,e){var i=Sl(t,e,28)^Sl(e,t,2)^Sl(e,t,7);return i<0&&(i+=4294967296),i}function Nl(t,e){var i=Ml(t,e,14)^Ml(t,e,18)^Ml(e,t,9);return i<0&&(i+=4294967296),i}function Fl(t,e){var i=Sl(t,e,14)^Sl(t,e,18)^Sl(e,t,9);return i<0&&(i+=4294967296),i}function Hl(t,e){var i=Ml(t,e,1)^Ml(t,e,8)^_l(t,e,7);return i<0&&(i+=4294967296),i}function Wl(t,e){var i=Sl(t,e,1)^Sl(t,e,8)^Il(t,e,7);return i<0&&(i+=4294967296),i}function ql(t,e){var i=Ml(t,e,19)^Ml(e,t,29)^_l(t,e,6);return i<0&&(i+=4294967296),i}function zl(t,e){var i=Sl(t,e,19)^Sl(e,t,29)^Il(t,e,6);return i<0&&(i+=4294967296),i}Uu.inherits(Pl,Ll),vl=Pl,Pl.blockSize=1024,Pl.outSize=512,Pl.hmacStrength=192,Pl.padLength=128,Pl.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=ql(i[r-4],i[r-3]),s=zl(i[r-4],i[r-3]),o=i[r-14],h=i[r-13],a=Hl(i[r-30],i[r-29]),u=Wl(i[r-30],i[r-29]),l=i[r-32],c=i[r-31];i[r]=Al(n,s,o,h,a,u,l,c),i[r+1]=xl(n,s,o,h,a,u,l,c)}},Pl.prototype._update=function(t,e){this._prepareBlock(t,e);for(var i=this.W,r=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],h=this.h[4],a=this.h[5],u=this.h[6],l=this.h[7],c=this.h[8],f=this.h[9],d=this.h[10],p=this.h[11],m=this.h[12],g=this.h[13],y=this.h[14],b=this.h[15],w=0;w<i.length;w+=2){var v=y,M=b,S=Nl(c,f),_=Fl(c,f),I=Ol(c,0,d,0,m),C=jl(0,f,0,p,0,g),k=this.k[w],T=this.k[w+1],A=i[w],x=i[w+1],E=El(v,M,S,_,I,C,k,T,A,x),B=Bl(v,M,S,_,I,C,k,T,A,x);v=Ul(r,n),M=Xl(r,n),S=Dl(r,0,s,0,h),_=Yl(0,n,0,o,0,a);var L=kl(v,M,S,_),R=Tl(v,M,S,_);y=m,b=g,m=d,g=p,d=c,p=f,c=kl(u,l,E,B),f=Tl(l,l,E,B),u=h,l=a,h=s,a=o,s=r,o=n,r=kl(E,B,L,R),n=Tl(E,B,L,R)}Cl(this.h,0,r,n),Cl(this.h,2,s,o),Cl(this.h,4,h,a),Cl(this.h,6,u,l),Cl(this.h,8,c,f),Cl(this.h,10,d,p),Cl(this.h,12,m,g),Cl(this.h,14,y,b)},Pl.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h,"big"):Uu.split32(this.h,"big")};var Vl;function Zl(){if(!(this instanceof Zl))return new Zl;vl.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Uu.inherits(Zl,vl),Vl=Zl,Zl.blockSize=1024,Zl.outSize=384,Zl.hmacStrength=192,Zl.padLength=128,Zl.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h.slice(0,12),"big"):Uu.split32(this.h.slice(0,12),"big")};var Gl={};Gl.sha1=$u,Gl.sha224=bl,Gl.sha256=sl,Gl.sha384=Vl,Gl.sha512=vl;var Kl={},$l=Uu.rotl32,Jl=Uu.sum32,Ql=Uu.sum32_3,tc=Uu.sum32_4,ec=Wu.BlockHash;function ic(){if(!(this instanceof ic))return new ic;ec.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function rc(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function nc(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function sc(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}Uu.inherits(ic,ec),Kl.ripemd160=ic,ic.blockSize=512,ic.outSize=160,ic.hmacStrength=192,ic.padLength=64,ic.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],s=this.h[3],o=this.h[4],h=i,a=r,u=n,l=s,c=o,f=0;f<80;f++){var d=Jl($l(tc(i,rc(f,r,n,s),t[hc[f]+e],nc(f)),uc[f]),o);i=o,o=s,s=$l(n,10),n=r,r=d,d=Jl($l(tc(h,rc(79-f,a,u,l),t[ac[f]+e],sc(f)),lc[f]),c),h=c,c=l,l=$l(u,10),u=a,a=d}d=Ql(this.h[1],n,l),this.h[1]=Ql(this.h[2],s,c),this.h[2]=Ql(this.h[3],o,h),this.h[3]=Ql(this.h[4],i,a),this.h[4]=Ql(this.h[0],r,u),this.h[0]=d},ic.prototype._digest=function(t){return"hex"===t?Uu.toHex32(this.h,"little"):Uu.split32(this.h,"little")};var oc,hc=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],ac=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],uc=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],lc=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];function cc(t,e,i){if(!(this instanceof cc))return new cc(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(Uu.toArray(e,i))}oc=cc,cc.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest());for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},cc.prototype.update=function(t,e){return this.inner.update(t,e),this},cc.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};var fc={},dc=fc;dc.utils=Uu,dc.common=Wu,dc.sha=Gl,dc.ripemd=Kl,dc.hmac=oc,dc.sha1=dc.sha.sha1,dc.sha256=dc.sha.sha256,dc.sha224=dc.sha.sha224,dc.sha384=dc.sha.sha384,dc.sha512=dc.sha.sha512,dc.ripemd160=dc.ripemd.ripemd160;var pc,mc={},gc=mc;function yc(t){"short"===t.type?this.curve=new Du.short(t):"edwards"===t.type?this.curve=new Du.edwards(t):this.curve=new Du.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash}function bc(t,e){Object.defineProperty(gc,t,{configurable:!0,enumerable:!0,get:function(){var i=new yc(e);return Object.defineProperty(gc,t,{configurable:!0,enumerable:!0,value:i}),i}})}vu.assert,gc.PresetCurve=yc,bc("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:fc.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),bc("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:fc.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),bc("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:fc.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),bc("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:fc.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),bc("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:fc.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),bc("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fc.sha256,gRed:!1,g:["9"]}),bc("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:fc.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pc={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}}catch(Kd){pc=void 0}bc("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:fc.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pc]});var wc={};function vc(t){if(!(this instanceof vc))return new vc(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=gu.toArray(t.entropy,t.entropyEnc||"hex"),i=gu.toArray(t.nonce,t.nonceEnc||"hex"),r=gu.toArray(t.pers,t.persEnc||"hex");this._init(e,i,r)}wc=vc,vc.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},vc.prototype._hmac=function(){return new fc.hmac(this.hash,this.K)},vc.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},vc.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=gu.toArray(t,e),i=gu.toArray(i,r),this._update(t.concat(i||[])),this._reseed=1},vc.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=gu.toArray(i,r||"hex"),this._update(i));for(var n=[];n.length<t;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var s=n.slice(0,t);return this._update(i),this._reseed++,gu.encode(s,e)};var Mc;function Sc(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}vu.assert,Mc=Sc,Sc.fromPublic=function(t,e,i){return e instanceof Sc?e:new Sc(t,{pub:e,pubEnc:i})},Sc.fromPrivate=function(t,e,i){return e instanceof Sc?e:new Sc(t,{priv:e,privEnc:i})},Sc.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Sc.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Sc.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Sc.prototype._importPrivate=function(t,e){this.priv=new mu(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Sc.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type||"short"===this.ec.curve.type||this.ec.curve.type,void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Sc.prototype.derive=function(t){return t.validate(),t.mul(this.priv).getX()},Sc.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},Sc.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Sc.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var _c={};function Ic(t,e){if(t instanceof Ic)return t;this._importDER(t,e)||(this.r=new mu(t.r,16),this.s=new mu(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function Cc(){this.place=0}function kc(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;for(var n=0,s=0,o=e.place;s<r;s++,o++)n<<=8,n|=t[o],n>>>=0;return!(n<=127)&&(e.place=o,n)}function Tc(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function Ac(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}vu.assert,_c=Ic,Ic.prototype._importDER=function(t,e){t=vu.toArray(t,e);var i=new Cc;if(48!==t[i.place++])return!1;var r=kc(t,i);if(!1===r)return!1;if(r+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var n=kc(t,i);if(!1===n)return!1;var s=t.slice(i.place,n+i.place);if(i.place+=n,2!==t[i.place++])return!1;var o=kc(t,i);if(!1===o)return!1;if(t.length!==o+i.place)return!1;var h=t.slice(i.place,o+i.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===h[0]){if(!(128&h[1]))return!1;h=h.slice(1)}return this.r=new mu(s),this.s=new mu(h),this.recoveryParam=null,!0},Ic.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=Tc(e),i=Tc(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];Ac(r,e.length),(r=r.concat(e)).push(2),Ac(r,i.length);var n=r.concat(i),s=[48];return Ac(s,n.length),s=s.concat(n),vu.encode(s,t)};var xc,Ec=(vu.assert,Mc);function Bc(t){if(!(this instanceof Bc))return new Bc(t);"string"==typeof t&&(t=mc[t]),t instanceof mc.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}xc=Bc,Bc.prototype.keyPair=function(t){return new Ec(this,t)},Bc.prototype.keyFromPrivate=function(t,e){return Ec.fromPrivate(this,t,e)},Bc.prototype.keyFromPublic=function(t,e){return Ec.fromPublic(this,t,e)},Bc.prototype.genKeyPair=function(t){t||(t={});for(var e=new wc({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||la(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new mu(2));;){var n=new mu(e.generate(i));if(!(n.cmp(r)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Bc.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Bc.prototype.sign=function(t,e,i,r){"object"==typeof i&&(r=i,i=null),r||(r={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new mu(t,16));for(var n=this.n.byteLength(),s=e.getPrivate().toArray("be",n),o=t.toArray("be",n),h=new wc({hash:this.hash,entropy:s,nonce:o,pers:r.pers,persEnc:r.persEnc||"utf8"}),a=this.n.sub(new mu(1)),u=0;;u++){var l=r.k?r.k(u):new mu(h.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(a)>=0)){var c=this.g.mul(l);if(!c.isInfinity()){var f=c.getX(),d=f.umod(this.n);if(0!==d.cmpn(0)){var p=l.invm(this.n).mul(d.mul(e.getPrivate()).iadd(t));if(0!==(p=p.umod(this.n)).cmpn(0)){var m=(c.getY().isOdd()?1:0)|(0!==f.cmp(d)?2:0);return r.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),m^=1),new _c({r:d,s:p,recoveryParam:m})}}}}}},Bc.prototype.verify=function(t,e,i,r){t=this._truncateToN(new mu(t,16)),i=this.keyFromPublic(i,r);var n=(e=new _c(e,"hex")).r,s=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,h=s.invm(this.n),a=h.mul(t).umod(this.n),u=h.mul(n).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(a,i.getPublic(),u)).isInfinity()&&o.eqXToP(n):!(o=this.g.mulAdd(a,i.getPublic(),u)).isInfinity()&&0===o.getX().umod(this.n).cmp(n)},Bc.prototype.recoverPubKey=function(t,e,i,r){e=new _c(e,r);var n=this.n,s=new mu(t),o=e.r,h=e.s,a=1&i,u=i>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");o=u?this.curve.pointFromX(o.add(this.curve.n),a):this.curve.pointFromX(o,a);var l=e.r.invm(n),c=n.sub(s).mul(l).umod(n),f=h.mul(l).umod(n);return this.g.mulAdd(c,o,f)},Bc.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new _c(e,r)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(i))return n}throw new Error("Unable to find valid recovery factor")};var Lc={},Rc=(vu.assert,vu.parseBytes),Pc=vu.cachedProperty;function Oc(t,e){this.eddsa=t,this._secret=Rc(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=Rc(e.pub)}Oc.fromPublic=function(t,e){return e instanceof Oc?e:new Oc(t,{pub:e})},Oc.fromSecret=function(t,e){return e instanceof Oc?e:new Oc(t,{secret:e})},Oc.prototype.secret=function(){return this._secret},Pc(Oc,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),Pc(Oc,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),Pc(Oc,"privBytes",(function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r})),Pc(Oc,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),Pc(Oc,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),Pc(Oc,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),Oc.prototype.sign=function(t){return this.eddsa.sign(t,this)},Oc.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},Oc.prototype.getSecret=function(t){return vu.encode(this.secret(),t)},Oc.prototype.getPublic=function(t){return vu.encode(this.pubBytes(),t)},Lc=Oc;var jc={},Dc=(vu.assert,vu.cachedProperty),Yc=vu.parseBytes;function Uc(t,e){this.eddsa=t,"object"!=typeof e&&(e=Yc(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof mu&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}Dc(Uc,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),Dc(Uc,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),Dc(Uc,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),Dc(Uc,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Uc.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Uc.prototype.toHex=function(){return vu.encode(this.toBytes(),"hex").toUpperCase()},jc=Uc;var Xc,Nc=(vu.assert,vu.parseBytes);function Fc(t){if(!(this instanceof Fc))return new Fc(t);t=mc[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=fc.sha512}Xc=Fc,Fc.prototype.sign=function(t,e){t=Nc(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),n=this.g.mul(r),s=this.encodePoint(n),o=this.hashInt(s,i.pubBytes(),t).mul(i.priv()),h=r.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:h,Rencoded:s})},Fc.prototype.verify=function(t,e,i){t=Nc(t),e=this.makeSignature(e);var r=this.keyFromPublic(i),n=this.hashInt(e.Rencoded(),r.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(r.pub().mul(n)).eq(s)},Fc.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return vu.intFromLE(t.digest()).umod(this.curve.n)},Fc.prototype.keyFromPublic=function(t){return Lc.fromPublic(this,t)},Fc.prototype.keyFromSecret=function(t){return Lc.fromSecret(this,t)},Fc.prototype.makeSignature=function(t){return t instanceof jc?t:new jc(this,t)},Fc.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},Fc.prototype.decodePoint=function(t){var e=(t=vu.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=0!=(128&t[e]),n=vu.intFromLE(i);return this.curve.pointFromY(n,r)},Fc.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},Fc.prototype.decodeInt=function(t){return vu.intFromLE(t)},Fc.prototype.isPoint=function(t){return t instanceof this.pointClass};var Hc={},Wc=Hc;Wc.version="6.5.4",Wc.utils=vu,Wc.rand=la,Wc.curve=Du,Wc.curves=mc,Wc.ec=xc,Wc.eddsa=Xc;var qc={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}function h(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this._strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this._strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this._strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype._move=function(t){h(t,this)},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=a}catch(Kd){r.prototype.inspect=a}else r.prototype.inspect=a;function a(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i._strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],h=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?u[6-h.length]+h+i:h+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var a=l[t],f=c[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modrn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:u[a-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16,2)},n&&(r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)}),r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){this._strip();var r=this.byteLength(),n=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,i||Math.max(1,r));return this["_toArrayLike"+("le"===e?"LE":"BE")](n,r),n},r.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===s?(i<t.length&&(t[i++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},r.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===s?(i>=0&&(t[i--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this._strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this._strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function p(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i._strip()}function m(t,e,i){return p(t,e,i)}function g(t,e){this.x=t,this.y=e}Math.imul||(d=f),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):i<63?f(this,t,e):i<1024?p(this,t,e):m(this,t,e)},g.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},g.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},g.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},g.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},g.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},g.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},g.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},g.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},g.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},g.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),m(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){var e=t<0;e&&(t=-t);for(var i=0,r=0;r<this.length;r++){var n=(0|this.words[r])*t,s=(67108863&n)+(67108863&i);i>>=26,i+=n/67108864|0,i+=s>>>26,this.words[r]=67108863&s}return 0!==i&&(this.words[r]=i,this.length++),e?this.ineg():this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this._strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this._strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this._strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this._strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h._strip(),n._strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modrn=function(t){var e=t<0;e&&(t=-t);for(var i=(1<<26)%t,r=0,n=this.length-1;n>=0;n--)r=(i*r+(0|this.words[n]))%t;return e?-r:r},r.prototype.modn=function(t){return this.modrn(t)},r.prototype.idivn=function(t){var e=t<0;e&&(t=-t);for(var i=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*i;this.words[r]=n/t|0,i=n%t}return this._strip(),e?this.ineg():this},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new _(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var y={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function I(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(w,b),w.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(v,b),i(M,b),i(S,b),S.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(y[t])return y[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new v;else if("p192"===t)e=new M;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return y[t]=e,e},_.prototype._verify1=function(t){},_.prototype._verify2=function(t,e){},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(h(t,t.umod(this.m)._forceRed(this)),t)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},_.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new I(t)},i(I,_),I.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},I.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},I.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},I.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},I.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(qc,this),qc=qc.exports;var zc={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(zc,this),zc=zc.exports;var Vc={};(function(t){(function(){"use strict";var e,i=_t({}),r=i.Buffer,n={};for(e in i)i.hasOwnProperty(e)&&"SlowBuffer"!==e&&"Buffer"!==e&&(n[e]=i[e]);var s=n.Buffer={};for(e in r)r.hasOwnProperty(e)&&"allocUnsafe"!==e&&"allocUnsafeSlow"!==e&&(s[e]=r[e]);if(n.Buffer.prototype=r.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(t,e,i){if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&void 0===t.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return r(t,e,i)}),s.alloc||(s.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=r(t);return e&&0!==e.length?"string"==typeof i?n.fill(e,i):n.fill(e):n.fill(0),n}),!n.kStringMaxLength)try{n.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(Kd){}n.constants||(n.constants={MAX_LENGTH:n.kMaxLength},n.kStringMaxLength&&(n.constants.MAX_STRING_LENGTH=n.kStringMaxLength)),Vc=n}).call(this)}).call(this,we);var Zc={};function Gc(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function Kc(t,e){this.path=t,this.rethrow(e)}Zc.Reporter=Gc,Gc.prototype.isError=function(t){return t instanceof Kc},Gc.prototype.save=function(){const t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},Gc.prototype.restore=function(t){const e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},Gc.prototype.enterKey=function(t){return this._reporterState.path.push(t)},Gc.prototype.exitKey=function(t){const e=this._reporterState;e.path=e.path.slice(0,t-1)},Gc.prototype.leaveKey=function(t,e,i){const r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},Gc.prototype.path=function(){return this._reporterState.path.join("/")},Gc.prototype.enterObject=function(){const t=this._reporterState,e=t.obj;return t.obj={},e},Gc.prototype.leaveObject=function(t){const e=this._reporterState,i=e.obj;return e.obj=t,i},Gc.prototype.error=function(t){let e;const i=this._reporterState,r=t instanceof Kc;if(e=r?t:new Kc(i.path.map((function(t){return"["+JSON.stringify(t)+"]"})).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},Gc.prototype.wrapResult=function(t){const e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},ir(Kc,Error),Kc.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,Kc),!this.stack)try{throw new Error(this.message)}catch(Kd){this.stack=Kd.stack}return this};var $c={};const Jc=Zc.Reporter,Qc=Vc.Buffer;function tf(t,e){Jc.call(this,e),Qc.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function ef(t,e){if(Array.isArray(t))this.length=0,this.value=t.map((function(t){return ef.isEncoderBuffer(t)||(t=new ef(t,e)),this.length+=t.length,t}),this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=Qc.byteLength(t);else{if(!Qc.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}ir(tf,Jc),$c.DecoderBuffer=tf,tf.isDecoderBuffer=function(t){return t instanceof tf||"object"==typeof t&&Qc.isBuffer(t.base)&&"DecoderBuffer"===t.constructor.name&&"number"==typeof t.offset&&"number"==typeof t.length&&"function"==typeof t.save&&"function"==typeof t.restore&&"function"==typeof t.isEmpty&&"function"==typeof t.readUInt8&&"function"==typeof t.skip&&"function"==typeof t.raw},tf.prototype.save=function(){return{offset:this.offset,reporter:Jc.prototype.save.call(this)}},tf.prototype.restore=function(t){const e=new tf(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,Jc.prototype.restore.call(this,t.reporter),e},tf.prototype.isEmpty=function(){return this.offset===this.length},tf.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},tf.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");const i=new tf(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},tf.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},$c.EncoderBuffer=ef,ef.isEncoderBuffer=function(t){return t instanceof ef||"object"==typeof t&&"EncoderBuffer"===t.constructor.name&&"number"==typeof t.length&&"function"==typeof t.join},ef.prototype.join=function(t,e){return t||(t=Qc.alloc(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(i){i.join(t,e),e+=i.length})):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):Qc.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t};const rf=Zc.Reporter,nf=$c.EncoderBuffer,sf=$c.DecoderBuffer,of=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],hf=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(of);function af(t,e,i){const r={};this._baseState=r,r.name=i,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}var uf=af;const lf=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];af.prototype.clone=function(){const t=this._baseState,e={};lf.forEach((function(i){e[i]=t[i]}));const i=new this.constructor(e.parent);return i._baseState=e,i},af.prototype._wrap=function(){const t=this._baseState;hf.forEach((function(e){this[e]=function(){const i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}}),this)},af.prototype._init=function(t){const e=this._baseState;t.call(this),e.children=e.children.filter((function(t){return t._baseState.parent===this}),this)},af.prototype._useArgs=function(t){const e=this._baseState,i=t.filter((function(t){return t instanceof this.constructor}),this);t=t.filter((function(t){return!(t instanceof this.constructor)}),this),0!==i.length&&(e.children=i,i.forEach((function(t){t._baseState.parent=this}),this)),0!==t.length&&(e.args=t,e.reverseArgs=t.map((function(t){if("object"!=typeof t||t.constructor!==Object)return t;const e={};return Object.keys(t).forEach((function(i){i==(0|i)&&(i|=0);const r=t[i];e[r]=i})),e})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(t){af.prototype[t]=function(){const e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}})),of.forEach((function(t){af.prototype[t]=function(){const e=this._baseState,i=Array.prototype.slice.call(arguments);return e.tag=t,this._useArgs(i),this}})),af.prototype.use=function(t){return this._baseState.use=t,this},af.prototype.optional=function(){return this._baseState.optional=!0,this},af.prototype.def=function(t){const e=this._baseState;return e.default=t,e.optional=!0,this},af.prototype.explicit=function(t){return this._baseState.explicit=t,this},af.prototype.implicit=function(t){return this._baseState.implicit=t,this},af.prototype.obj=function(){const t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},af.prototype.key=function(t){return this._baseState.key=t,this},af.prototype.any=function(){return this._baseState.any=!0,this},af.prototype.choice=function(t){return this._baseState.choice=t,this._useArgs(Object.keys(t).map((function(e){return t[e]}))),this},af.prototype.contains=function(t){return this._baseState.contains=t,this},af.prototype._decode=function(t,e){const i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));let r,n=i.default,s=!0,o=null;if(null!==i.key&&(o=t.enterKey(i.key)),i.optional){let r=null;if(null!==i.explicit?r=i.explicit:null!==i.implicit?r=i.implicit:null!==i.tag&&(r=i.tag),null!==r||i.any){if(s=this._peekTag(t,r,i.any),t.isError(s))return s}else{const r=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),s=!0}catch(Kd){s=!1}t.restore(r)}}if(i.obj&&s&&(r=t.enterObject()),s){if(null!==i.explicit){const e=this._decodeTag(t,i.explicit);if(t.isError(e))return e;t=e}const r=t.offset;if(null===i.use&&null===i.choice){let e;i.any&&(e=t.save());const r=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(r))return r;i.any?n=t.raw(e):t=r}if(e&&e.track&&null!==i.tag&&e.track(t.path(),r,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),i.any||(n=null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e)),t.isError(n))return n;if(i.any||null!==i.choice||null===i.children||i.children.forEach((function(i){i._decode(t,e)})),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){const r=new sf(n);n=this._getUse(i.contains,t._reporterState.obj)._decode(r,e)}}return i.obj&&s&&(n=t.leaveObject(r)),null===i.key||null===n&&!0!==s?null!==o&&t.exitKey(o):t.leaveKey(o,i.key,n),n},af.prototype._decodeGeneric=function(t,e,i){const r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},af.prototype._getUse=function(t,e){const i=this._baseState;return i.useDecoder=this._use(t,e),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},af.prototype._decodeChoice=function(t,e){const i=this._baseState;let r=null,n=!1;return Object.keys(i.choice).some((function(s){const o=t.save(),h=i.choice[s];try{const i=h._decode(t,e);if(t.isError(i))return!1;r={type:s,value:i},n=!0}catch(Kd){return t.restore(o),!1}return!0}),this),n?r:t.error("Choice not matched")},af.prototype._createEncoderBuffer=function(t){return new nf(t,this.reporter)},af.prototype._encode=function(t,e,i){const r=this._baseState;if(null!==r.default&&r.default===t)return;const n=this._encodeValue(t,e,i);return void 0===n||this._skipDefault(n,e,i)?void 0:n},af.prototype._encodeValue=function(t,e,i){const r=this._baseState;if(null===r.parent)return r.children[0]._encode(t,e||new rf);let n=null;if(this.reporter=e,r.optional&&void 0===t){if(null===r.default)return;t=r.default}let s=null,o=!1;if(r.any)n=this._createEncoderBuffer(t);else if(r.choice)n=this._encodeChoice(t,e);else if(r.contains)s=this._getUse(r.contains,i)._encode(t,e),o=!0;else if(r.children)s=r.children.map((function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");const r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");const n=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),n}),this).filter((function(t){return t})),s=this._createEncoderBuffer(s);else if("seqof"===r.tag||"setof"===r.tag){if(!r.args||1!==r.args.length)return e.error("Too many args for : "+r.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");const i=this.clone();i._baseState.implicit=null,s=this._createEncoderBuffer(t.map((function(i){const r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)}),i))}else null!==r.use?n=this._getUse(r.use,i)._encode(t,e):(s=this._encodePrimitive(r.tag,t),o=!0);if(!r.any&&null===r.choice){const t=null!==r.implicit?r.implicit:r.tag,i=null===r.implicit?"universal":"context";null===t?null===r.use&&e.error("Tag could be omitted only for .use()"):null===r.use&&(n=this._encodeComposite(t,o,i,s))}return null!==r.explicit&&(n=this._encodeComposite(r.explicit,!1,"context",n)),n},af.prototype._encodeChoice=function(t,e){return this._baseState.choice[t.type]._encode(t.value,e)},af.prototype._encodePrimitive=function(t,e){const i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},af.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},af.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(t)};var cf={};function ff(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const r=t[i];e[r]=i})),e}cf.tagClass={0:"universal",1:"application",2:"context",3:"private"},cf.tagClassByName=ff(cf.tagClass),cf.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},cf.tagByName=ff(cf.tag);var df={};const pf=Vc.Buffer;function mf(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new gf,this.tree._init(t.body)}function gf(t){uf.call(this,"der",t)}function yf(t){return t<10?"0"+t:t}df=mf,mf.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},ir(gf,uf),gf.prototype._encodeComposite=function(t,e,i,r){const n=function(t,e,i,r){let n;if("seqof"===t?t="seq":"setof"===t&&(t="set"),cf.tagByName.hasOwnProperty(t))n=cf.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);n=t}return n>=31?r.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|cf.tagClassByName[i||"universal"]<<6)}(t,e,i,this.reporter);if(r.length<128){const t=pf.alloc(2);return t[0]=n,t[1]=r.length,this._createEncoderBuffer([t,r])}let s=1;for(let h=r.length;h>=256;h>>=8)s++;const o=pf.alloc(2+s);o[0]=n,o[1]=128|s;for(let h=1+s,a=r.length;a>0;h--,a>>=8)o[h]=255&a;return this._createEncoderBuffer([o,r])},gf.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){const e=pf.alloc(2*t.length);for(let i=0;i<t.length;i++)e.writeUInt16BE(t.charCodeAt(i),2*i);return this._createEncoderBuffer(e)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},gf.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s.]+/g);for(let e=0;e<t.length;e++)t[e]|=0}else if(Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}let r=0;for(let o=0;o<t.length;o++){let e=t[o];for(r++;e>=128;e>>=7)r++}const n=pf.alloc(r);let s=n.length-1;for(let o=t.length-1;o>=0;o--){let e=t[o];for(n[s--]=127&e;(e>>=7)>0;)n[s--]=128|127&e}return this._createEncoderBuffer(n)},gf.prototype._encodeTime=function(t,e){let i;const r=new Date(t);return"gentime"===e?i=[yf(r.getUTCFullYear()),yf(r.getUTCMonth()+1),yf(r.getUTCDate()),yf(r.getUTCHours()),yf(r.getUTCMinutes()),yf(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[yf(r.getUTCFullYear()%100),yf(r.getUTCMonth()+1),yf(r.getUTCDate()),yf(r.getUTCHours()),yf(r.getUTCMinutes()),yf(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},gf.prototype._encodeNull=function(){return this._createEncoderBuffer("")},gf.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!pf.isBuffer(t)){const e=t.toArray();!t.sign&&128&e[0]&&e.unshift(0),t=pf.from(e)}if(pf.isBuffer(t)){let e=t.length;0===t.length&&e++;const i=pf.alloc(e);return t.copy(i),0===t.length&&(i[0]=0),this._createEncoderBuffer(i)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);let i=1;for(let n=t;n>=256;n>>=8)i++;const r=new Array(i);for(let n=r.length-1;n>=0;n--)r[n]=255&t,t>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(pf.from(r))},gf.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},gf.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},gf.prototype._skipDefault=function(t,e,i){const r=this._baseState;let n;if(null===r.default)return!1;const s=t.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,e,i).join()),s.length!==r.defaultBuffer.length)return!1;for(n=0;n<s.length;n++)if(s[n]!==r.defaultBuffer[n])return!1;return!0};var bf;function wf(t){df.call(this,t),this.enc="pem"}ir(wf,df),bf=wf,wf.prototype.encode=function(t,e){const i=df.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"];for(let n=0;n<i.length;n+=64)r.push(i.slice(n,n+64));return r.push("-----END "+e.label+"-----"),r.join("\n")};var vf={};const Mf=vf;Mf.der=df,Mf.pem=bf;var Sf={};const _f=$c.DecoderBuffer;function If(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Cf,this.tree._init(t.body)}function Cf(t){uf.call(this,"der",t)}function kf(t,e){let i=t.readUInt8(e);if(t.isError(i))return i;const r=cf.tagClass[i>>6],n=0==(32&i);if(31==(31&i)){let r=i;for(i=0;128==(128&r);){if(r=t.readUInt8(e),t.isError(r))return r;i<<=7,i|=127&r}}else i&=31;return{cls:r,primitive:n,tag:i,tagStr:cf.tag[i]}}function Tf(t,e,i){let r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if(0==(128&r))return r;const n=127&r;if(n>4)return t.error("length octect is too long");r=0;for(let s=0;s<n;s++){r<<=8;const e=t.readUInt8(i);if(t.isError(e))return e;r|=e}return r}Sf=If,If.prototype.decode=function(t,e){return _f.isDecoderBuffer(t)||(t=new _f(t,e)),this.tree._decode(t,e)},ir(Cf,uf),Cf.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;const r=t.save(),n=kf(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||i)},Cf.prototype._decodeTag=function(t,e,i){const r=kf(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;let n=Tf(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');const s=t.save(),o=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(o)?o:(n=t.offset-s.offset,t.restore(s),t.skip(n,'Failed to match body of: "'+e+'"'))},Cf.prototype._skipUntilEnd=function(t,e){for(;;){const i=kf(t,e);if(t.isError(i))return i;const r=Tf(t,i.primitive,e);if(t.isError(r))return r;let n;if(n=i.primitive||null!==r?t.skip(r):this._skipUntilEnd(t,e),t.isError(n))return n;if("end"===i.tagStr)break}},Cf.prototype._decodeList=function(t,e,i,r){const n=[];for(;!t.isEmpty();){const e=this._peekTag(t,"end");if(t.isError(e))return e;const s=i.decode(t,"der",r);if(t.isError(s)&&e)break;n.push(s)}return n},Cf.prototype._decodeStr=function(t,e){if("bitstr"===e){const e=t.readUInt8();return t.isError(e)?e:{unused:e,data:t.raw()}}if("bmpstr"===e){const e=t.raw();if(e.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");let i="";for(let t=0;t<e.length/2;t++)i+=String.fromCharCode(e.readUInt16BE(2*t));return i}if("numstr"===e){const e=t.raw().toString("ascii");return this._isNumstr(e)?e:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){const e=t.raw().toString("ascii");return this._isPrintstr(e)?e:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},Cf.prototype._decodeObjid=function(t,e,i){let r;const n=[];let s=0,o=0;for(;!t.isEmpty();)s<<=7,s|=127&(o=t.readUInt8()),0==(128&o)&&(n.push(s),s=0);128&o&&n.push(s);const h=n[0]/40|0,a=n[0]%40;if(r=i?n:[h,a].concat(n.slice(1)),e){let t=e[r.join(" ")];void 0===t&&(t=e[r.join(".")]),void 0!==t&&(r=t)}return r},Cf.prototype._decodeTime=function(t,e){const i=t.raw().toString();let r,n,s,o,h,a;if("gentime"===e)r=0|i.slice(0,4),n=0|i.slice(4,6),s=0|i.slice(6,8),o=0|i.slice(8,10),h=0|i.slice(10,12),a=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),n=0|i.slice(2,4),s=0|i.slice(4,6),o=0|i.slice(6,8),h=0|i.slice(8,10),a=0|i.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,s,o,h,a,0)},Cf.prototype._decodeNull=function(){return null},Cf.prototype._decodeBool=function(t){const e=t.readUInt8();return t.isError(e)?e:0!==e},Cf.prototype._decodeInt=function(t,e){const i=t.raw();let r=new zc(i);return e&&(r=e[r.toString(10)]||r),r},Cf.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree};var Af;const xf=Vc.Buffer;function Ef(t){Sf.call(this,t),this.enc="pem"}ir(Ef,Sf),Af=Ef,Ef.prototype.decode=function(t,e){const i=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),n=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,o=-1;for(let u=0;u<i.length;u++){const t=i[u].match(n);if(null!==t&&t[2]===r){if(-1!==s){if("END"!==t[1])break;o=u;break}if("BEGIN"!==t[1])break;s=u}}if(-1===s||-1===o)throw new Error("PEM section not found for: "+r);const h=i.slice(s+1,o).join("");h.replace(/[^a-z0-9+/=]+/gi,"");const a=xf.from(h,"base64");return Sf.prototype.decode.call(this,a,e)};var Bf={};const Lf=Bf;Lf.der=Sf,Lf.pem=Af;var Rf={};function Pf(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}Rf.define=function(t,e){return new Pf(t,e)},Pf.prototype._createNamed=function(t){const e=this.name;function i(t){this._initNamed(t,e)}return ir(i,t),i.prototype._initNamed=function(e,i){t.call(this,e,i)},new i(this)},Pf.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(Bf[t])),this.decoders[t]},Pf.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},Pf.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(vf[t])),this.encoders[t]},Pf.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)};var Of={};const jf=Of;jf.Reporter=Zc.Reporter,jf.DecoderBuffer=$c.DecoderBuffer,jf.EncoderBuffer=$c.EncoderBuffer,jf.Node=uf;var Df={};const Yf=Df;Yf._reverse=function(t){const e={};return Object.keys(t).forEach((function(i){(0|i)==i&&(i|=0);const r=t[i];e[r]=i})),e},Yf.der=cf;var Uf={};const Xf=Uf;Xf.bignum=zc,Xf.define=Rf.define,Xf.base=Of,Xf.constants=Df,Xf.decoders=Bf,Xf.encoders=vf;var Nf=Uf.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),Ff=Uf.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),Hf=Uf.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),Wf=Uf.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(Hf),this.key("subjectPublicKey").bitstr())})),qf=Uf.define("RelativeDistinguishedName",(function(){this.setof(Ff)})),zf=Uf.define("RDNSequence",(function(){this.seqof(qf)})),Vf=Uf.define("Name",(function(){this.choice({rdnSequence:this.use(zf)})})),Zf=Uf.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(Nf),this.key("notAfter").use(Nf))})),Gf=Uf.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),Kf=Uf.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(Hf),this.key("issuer").use(Vf),this.key("validity").use(Zf),this.key("subject").use(Vf),this.key("subjectPublicKeyInfo").use(Wf),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Gf).optional())})),$f=Uf.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(Kf),this.key("signatureAlgorithm").use(Hf),this.key("signatureValue").bitstr())})),Jf={};Jf.certificate=$f;var Qf=Uf.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));Jf.RSAPrivateKey=Qf;var td=Uf.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));Jf.RSAPublicKey=td;var ed=Uf.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(id),this.key("subjectPublicKey").bitstr())}));Jf.PublicKey=ed;var id=Uf.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),rd=Uf.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(id),this.key("subjectPrivateKey").octstr())}));Jf.PrivateKey=rd;var nd=Uf.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));Jf.EncryptedPrivateKey=nd;var sd=Uf.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));Jf.DSAPrivateKey=sd,Jf.DSAparam=Uf.define("DSAparam",(function(){this.int()}));var od=Uf.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(hd),this.key("publicKey").optional().explicit(1).bitstr())}));Jf.ECPrivateKey=od;var hd=Uf.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));Jf.signature=Uf.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}));var ad={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"},ud=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,ld=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,cd=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,fd=Ki.Buffer,dd={},pd=Ki.Buffer;function md(t){var e;"object"!=typeof t||pd.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=pd.from(t));var i,r,n=function(t,e){var i,r=t.toString(),n=r.match(ud);if(n){var s="aes"+n[1],o=fd.from(n[2],"hex"),h=fd.from(n[3].replace(/[\r\n]/g,""),"base64"),a=Kh(e,o.slice(0,8),parseInt(n[1],10)).key,u=[],l=oa.createDecipheriv(s,a,o);u.push(l.update(h)),u.push(l.final()),i=fd.concat(u)}else{var c=r.match(cd);i=fd.from(c[2].replace(/[\r\n]/g,""),"base64")}return{tag:r.match(ld)[1],data:i}}(t,e),s=n.tag,o=n.data;switch(s){case"CERTIFICATE":r=Jf.certificate.decode(o,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(r||(r=Jf.PublicKey.decode(o,"der")),i=r.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return Jf.RSAPublicKey.decode(r.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return r.subjectPrivateKey=r.subjectPublicKey,{type:"ec",data:r};case"1.2.840.10040.4.1":return r.algorithm.params.pub_key=Jf.DSAparam.decode(r.subjectPublicKey.data,"der"),{type:"dsa",data:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":o=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),n=ad[t.algorithm.decrypt.cipher.algo.join(".")],s=t.algorithm.decrypt.cipher.iv,o=t.subjectPrivateKey,h=parseInt(n.split("-")[1],10)/8,a=Fo.pbkdf2Sync(e,i,r,h,"sha1"),u=oa.createDecipheriv(n,a,s),l=[];return l.push(u.update(o)),l.push(u.final()),pd.concat(l)}(o=Jf.EncryptedPrivateKey.decode(o,"der"),e);case"PRIVATE KEY":switch(i=(r=Jf.PrivateKey.decode(o,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return Jf.RSAPrivateKey.decode(r.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:r.algorithm.curve,privateKey:Jf.ECPrivateKey.decode(r.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return r.algorithm.params.priv_key=Jf.DSAparam.decode(r.subjectPrivateKey,"der"),{type:"dsa",params:r.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return Jf.RSAPublicKey.decode(o,"der");case"RSA PRIVATE KEY":return Jf.RSAPrivateKey.decode(o,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:Jf.DSAPrivateKey.decode(o,"der")};case"EC PRIVATE KEY":return{curve:(o=Jf.ECPrivateKey.decode(o,"der")).parameters.value,privateKey:o.privateKey};default:throw new Error("unknown key type "+s)}}dd=md,md.signature=Jf.signature;var gd,yd={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"},bd=Ki.Buffer,wd=Hc.ec;function vd(t,e,i,r){if((t=bd.from(t.toArray())).length<e.byteLength()){var n=bd.alloc(e.byteLength()-t.length);t=bd.concat([n,t])}var s=i.length,o=function(t,e){t=(t=Md(t,e)).mod(e);var i=bd.from(t.toArray());if(i.length<e.byteLength()){var r=bd.alloc(e.byteLength()-i.length);i=bd.concat([r,i])}return i}(i,e),h=bd.alloc(s);h.fill(1);var a=bd.alloc(s);return a=Co(r,a).update(h).update(bd.from([0])).update(t).update(o).digest(),h=Co(r,a).update(h).digest(),{k:a=Co(r,a).update(h).update(bd.from([1])).update(t).update(o).digest(),v:h=Co(r,a).update(h).digest()}}function Md(t,e){var i=new qc(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function Sd(t,e,i){var r,n;do{for(r=bd.alloc(0);8*r.length<t.bitLength();)e.v=Co(i,e.k).update(e.v).digest(),r=bd.concat([r,e.v]);n=Md(r,t),e.k=Co(i,e.k).update(e.v).update(bd.from([0])).digest(),e.v=Co(i,e.k).update(e.v).digest()}while(-1!==n.cmp(t));return n}function _d(t,e,i,r){return t.toRed(qc.mont(i)).redPow(e).fromRed().mod(r)}(gd=function(t,e,i,r,n){var s=dd(e);if(s.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return function(t,e){var i=yd[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var r=new wd(i).keyFromPrivate(e.privateKey).sign(t);return bd.from(r.toDER())}(t,s)}if("dsa"===s.type){if("dsa"!==r)throw new Error("wrong private key type");return function(t,e,i){for(var r,n=e.params.priv_key,s=e.params.p,o=e.params.q,h=e.params.g,a=new qc(0),u=Md(t,o).mod(o),l=!1,c=vd(n,o,t,i);!1===l;)a=_d(h,r=Sd(o,c,i),s,o),0===(l=r.invm(o).imul(u.add(n.mul(a))).mod(o)).cmpn(0)&&(l=!1,a=new qc(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),bd.from(i)}(a,l)}(t,s,i)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");t=bd.concat([n,t]);for(var o=s.modulus.byteLength(),h=[0,1];t.length+h.length+1<o;)h.push(255);h.push(0);for(var a=-1;++a<t.length;)h.push(t[a]);return pu(h,s)}).getKey=vd,gd.makeKey=Sd;var Id=Ki.Buffer,Cd=Hc.ec;function kd(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}var Td=Ki.Buffer;function Ad(t){fu.Writable.call(this);var e=Eo[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=wo(e.hash),this._tag=e.id,this._signType=e.sign}function xd(t){fu.Writable.call(this);var e=Eo[t];if(!e)throw new Error("Unknown message digest");this._hash=wo(e.hash),this._tag=e.id,this._signType=e.sign}Object.keys(Eo).forEach((function(t){Eo[t].id=Td.from(Eo[t].id,"hex"),Eo[t.toLowerCase()]=Eo[t]})),ir(Ad,fu.Writable),Ad.prototype._write=function(t,e,i){this._hash.update(t),i()},Ad.prototype.update=function(t,e){return"string"==typeof t&&(t=Td.from(t,e)),this._hash.update(t),this},Ad.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=gd(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},ir(xd,fu.Writable),xd.prototype._write=function(t,e,i){this._hash.update(t),i()},xd.prototype.update=function(t,e){return"string"==typeof t&&(t=Td.from(t,e)),this._hash.update(t),this},xd.prototype.verify=function(t,e,i){return"string"==typeof e&&(e=Td.from(e,i)),this.end(),function(t,e,i,r,n){var s=dd(i);if("ec"===s.type){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong public key type");return function(t,e,i){var r=yd[i.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var n=new Cd(r),s=i.data.subjectPrivateKey.data;return n.verify(e,t,s)}(t,e,s)}if("dsa"===s.type){if("dsa"!==r)throw new Error("wrong public key type");return function(t,e,i){var r=i.data.p,n=i.data.q,s=i.data.g,o=i.data.pub_key,h=dd.signature.decode(t,"der"),a=h.s,u=h.r;kd(a,n),kd(u,n);var l=qc.mont(r),c=a.invm(n);return 0===s.toRed(l).redPow(new qc(e).mul(c).mod(n)).fromRed().mul(o.toRed(l).redPow(u.mul(c).mod(n)).fromRed()).mod(r).mod(n).cmp(u)}(t,e,s)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong public key type");e=Id.concat([n,e]);for(var o=s.modulus.byteLength(),h=[1],a=0;e.length+h.length+2<o;)h.push(255),a++;h.push(0);for(var u=-1;++u<e.length;)h.push(e[u]);h=Id.from(h);var l=qc.mont(s.modulus);t=(t=new qc(t).toRed(l)).redPow(new qc(s.publicExponent)),t=Id.from(t.fromRed().toArray());var c=a<8?1:0;for(o=Math.min(t.length,h.length),t.length!==h.length&&(c=1),u=-1;++u<o;)c|=t[u]^h[u];return 0===c}(e,this._hash.digest(),t,this._signType,this._tag)};var Ed={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Ed,this),Ed=Ed.exports;(function(t){(function(){(function(t){return new i(t)});var e={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function i(t){this.curveType=e[t],this.curveType||(this.curveType={name:t}),this.curve=new Hc.ec(this.curveType.name),this.keys=void 0}function r(e,i,r){Array.isArray(e)||(e=e.toArray());var n=new t(e);if(r&&n.length<r){var s=new t(r-n.length);s.fill(0),n=t.concat([s,n])}return i?n.toString(i):n}e.p224=e.secp224r1,e.p256=e.secp256r1=e.prime256v1,e.p192=e.secp192r1=e.prime192v1,e.p384=e.secp384r1,e.p521=e.secp521r1,i.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},i.prototype.computeSecret=function(e,i,n){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),r(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},i.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),r(i,t)},i.prototype.getPrivateKey=function(t){return r(this.keys.getPrivate(),t)},i.prototype.setPublicKey=function(e,i){return i=i||"utf8",t.isBuffer(e)||(e=new t(e,i)),this.keys._importPublic(e),this},i.prototype.setPrivateKey=function(e,i){i=i||"utf8",t.isBuffer(e)||(e=new t(e,i));var r=new Ed(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this)}).call(this,_t({}).Buffer);Ki.Buffer;var Bd={exports:{}};!function(t,e){"use strict";function i(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function r(t,e,i){if(r.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var n;"object"==typeof t?t.exports=r:e.BN=r,r.BN=r,r.wordSize=26;try{n=St({}).Buffer}catch(Kd){}function s(t,e,i){for(var r=0,n=Math.min(t.length,i),s=e;s<n;s++){var o=t.charCodeAt(s)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var h=t.charCodeAt(o)-48;n*=r,n+=h>=49?h-49+10:h>=17?h-17+10:h}return n}r.isBN=function(t){return t instanceof r||null!==t&&"object"==typeof t&&t.constructor.wordSize===r.wordSize&&Array.isArray(t.words)},r.max=function(t,e){return t.cmp(e)>0?t:e},r.min=function(t,e){return t.cmp(e)<0?t:e},r.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&r++,16===e?this._parseHex(t,r):this._parseBase(t,e,r),"-"===t[0]&&(this.negative=1),this.strip(),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},r.prototype._initArray=function(t,e,i){if(t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s,o=0;if("be"===i)for(r=t.length-1,n=0;r>=0;r-=3)s=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);else if("le"===i)for(r=0,n=0;r<t.length;r+=3)s=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[n]|=s<<o&67108863,this.words[n+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,n++);return this.strip()},r.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,n,o=0;for(i=t.length-6,r=0;i>=e;i-=6)n=s(t,i,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);i+6!==e&&(n=s(t,e,i+6),this.words[r]|=n<<o&67108863,this.words[r+1]|=n>>>26-o&4194303),this.strip()},r.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,h=s%r,a=Math.min(s,s-h)+i,u=0,l=i;l<a;l+=r)u=o(t,l,l+r,e),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==h){var c=1;for(u=o(t,l,t.length,e),l=0;l<h;l++)c*=e;this.imuln(c),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},r.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},r.prototype.clone=function(){var t=new r(null);return this.copy(t),t},r.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],a=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function l(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,h=67108863&o,a=o/67108864|0;i.words[0]=h;for(var u=1;u<r;u++){for(var l=a>>>26,c=67108863&a,f=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=f;d++){var p=u-d|0;l+=(o=(n=0|t.words[p])*(s=0|e.words[d])+c)/67108864|0,c=67108863&o}i.words[u]=0|c,a=0|l}return 0!==a?i.words[u]=0|a:i.length--,i.strip()}r.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var r=0,n=0,s=0;s<this.length;s++){var o=this.words[s],l=(16777215&(o<<r|n)).toString(16);i=0!=(n=o>>>24-r&16777215)||s!==this.length-1?h[6-l.length]+l+i:l+i,(r+=2)>=26&&(r-=26,s--)}for(0!==n&&(i=n.toString(16)+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var c=a[t],f=u[t];i="";var d=this.clone();for(d.negative=0;!d.isZero();){var p=d.modn(f).toString(t);i=(d=d.idivn(f)).isZero()?p+i:h[c-p.length]+p+i}for(this.isZero()&&(i="0"+i);i.length%e!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}},r.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length,0!==this.negative?-t:t},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(t,e){return this.toArrayLike(n,t,e)},r.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},r.prototype.toArrayLike=function(t,e,i){var r=this.byteLength(),n=i||Math.max(1,r);this.strip();var s,o,h="le"===e,a=new t(n),u=this.clone();if(h){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[o]=s;for(;o<n;o++)a[o]=0}else{for(o=0;o<n-r;o++)a[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),a[n-o-1]=s}return a},Math.clz32?r.prototype._countBits=function(t){return 32-Math.clz32(t)}:r.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},r.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 0==(8191&e)&&(i+=13,e>>>=13),0==(127&e)&&(i+=7,e>>>=7),0==(15&e)&&(i+=4,e>>>=4),0==(3&e)&&(i+=2,e>>>=2),0==(1&e)&&i++,i},r.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},r.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},r.prototype.ior=function(t){return this.iuor(t)},r.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},r.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},r.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},r.prototype.iand=function(t){return this.iuand(t)},r.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},r.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},r.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},r.prototype.ixor=function(t){return this.iuxor(t)},r.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},r.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},r.prototype.inotn=function(t){var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var r=0;r<e;r++)this.words[r]=67108863&~this.words[r];return i>0&&(this.words[r]=~this.words[r]&67108863>>26-i),this.strip()},r.prototype.notn=function(t){return this.clone().inotn(t)},r.prototype.setn=function(t,e){var i=t/26|0,r=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<r:this.words[i]&~(1<<r),this.strip()},r.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},r.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},r.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(t){return this.clone().isub(t)};var c=function(t,e,i){var r,n,s,o=t.words,h=e.words,a=i.words,u=0,l=0|o[0],c=8191&l,f=l>>>13,d=0|o[1],p=8191&d,m=d>>>13,g=0|o[2],y=8191&g,b=g>>>13,w=0|o[3],v=8191&w,M=w>>>13,S=0|o[4],_=8191&S,I=S>>>13,C=0|o[5],k=8191&C,T=C>>>13,A=0|o[6],x=8191&A,E=A>>>13,B=0|o[7],L=8191&B,R=B>>>13,P=0|o[8],O=8191&P,j=P>>>13,D=0|o[9],Y=8191&D,U=D>>>13,X=0|h[0],N=8191&X,F=X>>>13,H=0|h[1],W=8191&H,q=H>>>13,z=0|h[2],V=8191&z,Z=z>>>13,G=0|h[3],K=8191&G,$=G>>>13,J=0|h[4],Q=8191&J,tt=J>>>13,et=0|h[5],it=8191&et,rt=et>>>13,nt=0|h[6],st=8191&nt,ot=nt>>>13,ht=0|h[7],at=8191&ht,ut=ht>>>13,lt=0|h[8],ct=8191&lt,ft=lt>>>13,dt=0|h[9],pt=8191&dt,mt=dt>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(u+(r=Math.imul(c,N))|0)+((8191&(n=(n=Math.imul(c,F))+Math.imul(f,N)|0))<<13)|0;u=((s=Math.imul(f,F))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,N),n=(n=Math.imul(p,F))+Math.imul(m,N)|0,s=Math.imul(m,F);var yt=(u+(r=r+Math.imul(c,W)|0)|0)+((8191&(n=(n=n+Math.imul(c,q)|0)+Math.imul(f,W)|0))<<13)|0;u=((s=s+Math.imul(f,q)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(y,N),n=(n=Math.imul(y,F))+Math.imul(b,N)|0,s=Math.imul(b,F),r=r+Math.imul(p,W)|0,n=(n=n+Math.imul(p,q)|0)+Math.imul(m,W)|0,s=s+Math.imul(m,q)|0;var bt=(u+(r=r+Math.imul(c,V)|0)|0)+((8191&(n=(n=n+Math.imul(c,Z)|0)+Math.imul(f,V)|0))<<13)|0;u=((s=s+Math.imul(f,Z)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,N),n=(n=Math.imul(v,F))+Math.imul(M,N)|0,s=Math.imul(M,F),r=r+Math.imul(y,W)|0,n=(n=n+Math.imul(y,q)|0)+Math.imul(b,W)|0,s=s+Math.imul(b,q)|0,r=r+Math.imul(p,V)|0,n=(n=n+Math.imul(p,Z)|0)+Math.imul(m,V)|0,s=s+Math.imul(m,Z)|0;var wt=(u+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(f,K)|0))<<13)|0;u=((s=s+Math.imul(f,$)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(_,N),n=(n=Math.imul(_,F))+Math.imul(I,N)|0,s=Math.imul(I,F),r=r+Math.imul(v,W)|0,n=(n=n+Math.imul(v,q)|0)+Math.imul(M,W)|0,s=s+Math.imul(M,q)|0,r=r+Math.imul(y,V)|0,n=(n=n+Math.imul(y,Z)|0)+Math.imul(b,V)|0,s=s+Math.imul(b,Z)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var vt=(u+(r=r+Math.imul(c,Q)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(f,Q)|0))<<13)|0;u=((s=s+Math.imul(f,tt)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(k,N),n=(n=Math.imul(k,F))+Math.imul(T,N)|0,s=Math.imul(T,F),r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,q)|0)+Math.imul(I,W)|0,s=s+Math.imul(I,q)|0,r=r+Math.imul(v,V)|0,n=(n=n+Math.imul(v,Z)|0)+Math.imul(M,V)|0,s=s+Math.imul(M,Z)|0,r=r+Math.imul(y,K)|0,n=(n=n+Math.imul(y,$)|0)+Math.imul(b,K)|0,s=s+Math.imul(b,$)|0,r=r+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,Q)|0,s=s+Math.imul(m,tt)|0;var Mt=(u+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(f,it)|0))<<13)|0;u=((s=s+Math.imul(f,rt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(x,N),n=(n=Math.imul(x,F))+Math.imul(E,N)|0,s=Math.imul(E,F),r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,q)|0)+Math.imul(T,W)|0,s=s+Math.imul(T,q)|0,r=r+Math.imul(_,V)|0,n=(n=n+Math.imul(_,Z)|0)+Math.imul(I,V)|0,s=s+Math.imul(I,Z)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(M,K)|0,s=s+Math.imul(M,$)|0,r=r+Math.imul(y,Q)|0,n=(n=n+Math.imul(y,tt)|0)+Math.imul(b,Q)|0,s=s+Math.imul(b,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var St=(u+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(f,st)|0))<<13)|0;u=((s=s+Math.imul(f,ot)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(L,N),n=(n=Math.imul(L,F))+Math.imul(R,N)|0,s=Math.imul(R,F),r=r+Math.imul(x,W)|0,n=(n=n+Math.imul(x,q)|0)+Math.imul(E,W)|0,s=s+Math.imul(E,q)|0,r=r+Math.imul(k,V)|0,n=(n=n+Math.imul(k,Z)|0)+Math.imul(T,V)|0,s=s+Math.imul(T,Z)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(I,K)|0,s=s+Math.imul(I,$)|0,r=r+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(M,Q)|0,s=s+Math.imul(M,tt)|0,r=r+Math.imul(y,it)|0,n=(n=n+Math.imul(y,rt)|0)+Math.imul(b,it)|0,s=s+Math.imul(b,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var _t=(u+(r=r+Math.imul(c,at)|0)|0)+((8191&(n=(n=n+Math.imul(c,ut)|0)+Math.imul(f,at)|0))<<13)|0;u=((s=s+Math.imul(f,ut)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(O,N),n=(n=Math.imul(O,F))+Math.imul(j,N)|0,s=Math.imul(j,F),r=r+Math.imul(L,W)|0,n=(n=n+Math.imul(L,q)|0)+Math.imul(R,W)|0,s=s+Math.imul(R,q)|0,r=r+Math.imul(x,V)|0,n=(n=n+Math.imul(x,Z)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,Z)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(_,Q)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(I,Q)|0,s=s+Math.imul(I,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(M,it)|0,s=s+Math.imul(M,rt)|0,r=r+Math.imul(y,st)|0,n=(n=n+Math.imul(y,ot)|0)+Math.imul(b,st)|0,s=s+Math.imul(b,ot)|0,r=r+Math.imul(p,at)|0,n=(n=n+Math.imul(p,ut)|0)+Math.imul(m,at)|0,s=s+Math.imul(m,ut)|0;var It=(u+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,ft)|0)+Math.imul(f,ct)|0))<<13)|0;u=((s=s+Math.imul(f,ft)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(Y,N),n=(n=Math.imul(Y,F))+Math.imul(U,N)|0,s=Math.imul(U,F),r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,q)|0)+Math.imul(j,W)|0,s=s+Math.imul(j,q)|0,r=r+Math.imul(L,V)|0,n=(n=n+Math.imul(L,Z)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,Z)|0,r=r+Math.imul(x,K)|0,n=(n=n+Math.imul(x,$)|0)+Math.imul(E,K)|0,s=s+Math.imul(E,$)|0,r=r+Math.imul(k,Q)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(T,Q)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(I,it)|0,s=s+Math.imul(I,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(M,st)|0,s=s+Math.imul(M,ot)|0,r=r+Math.imul(y,at)|0,n=(n=n+Math.imul(y,ut)|0)+Math.imul(b,at)|0,s=s+Math.imul(b,ut)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,ft)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,ft)|0;var Ct=(u+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(f,pt)|0))<<13)|0;u=((s=s+Math.imul(f,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(Y,W),n=(n=Math.imul(Y,q))+Math.imul(U,W)|0,s=Math.imul(U,q),r=r+Math.imul(O,V)|0,n=(n=n+Math.imul(O,Z)|0)+Math.imul(j,V)|0,s=s+Math.imul(j,Z)|0,r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(R,K)|0,s=s+Math.imul(R,$)|0,r=r+Math.imul(x,Q)|0,n=(n=n+Math.imul(x,tt)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(I,st)|0,s=s+Math.imul(I,ot)|0,r=r+Math.imul(v,at)|0,n=(n=n+Math.imul(v,ut)|0)+Math.imul(M,at)|0,s=s+Math.imul(M,ut)|0,r=r+Math.imul(y,ct)|0,n=(n=n+Math.imul(y,ft)|0)+Math.imul(b,ct)|0,s=s+Math.imul(b,ft)|0;var kt=(u+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;u=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(Y,V),n=(n=Math.imul(Y,Z))+Math.imul(U,V)|0,s=Math.imul(U,Z),r=r+Math.imul(O,K)|0,n=(n=n+Math.imul(O,$)|0)+Math.imul(j,K)|0,s=s+Math.imul(j,$)|0,r=r+Math.imul(L,Q)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,tt)|0,r=r+Math.imul(x,it)|0,n=(n=n+Math.imul(x,rt)|0)+Math.imul(E,it)|0,s=s+Math.imul(E,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(_,at)|0,n=(n=n+Math.imul(_,ut)|0)+Math.imul(I,at)|0,s=s+Math.imul(I,ut)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,ft)|0)+Math.imul(M,ct)|0,s=s+Math.imul(M,ft)|0;var Tt=(u+(r=r+Math.imul(y,pt)|0)|0)+((8191&(n=(n=n+Math.imul(y,mt)|0)+Math.imul(b,pt)|0))<<13)|0;u=((s=s+Math.imul(b,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(Y,K),n=(n=Math.imul(Y,$))+Math.imul(U,K)|0,s=Math.imul(U,$),r=r+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,tt)|0)+Math.imul(j,Q)|0,s=s+Math.imul(j,tt)|0,r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(R,it)|0,s=s+Math.imul(R,rt)|0,r=r+Math.imul(x,st)|0,n=(n=n+Math.imul(x,ot)|0)+Math.imul(E,st)|0,s=s+Math.imul(E,ot)|0,r=r+Math.imul(k,at)|0,n=(n=n+Math.imul(k,ut)|0)+Math.imul(T,at)|0,s=s+Math.imul(T,ut)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,ft)|0)+Math.imul(I,ct)|0,s=s+Math.imul(I,ft)|0;var At=(u+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((s=s+Math.imul(M,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(Y,Q),n=(n=Math.imul(Y,tt))+Math.imul(U,Q)|0,s=Math.imul(U,tt),r=r+Math.imul(O,it)|0,n=(n=n+Math.imul(O,rt)|0)+Math.imul(j,it)|0,s=s+Math.imul(j,rt)|0,r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(R,st)|0,s=s+Math.imul(R,ot)|0,r=r+Math.imul(x,at)|0,n=(n=n+Math.imul(x,ut)|0)+Math.imul(E,at)|0,s=s+Math.imul(E,ut)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,ft)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,ft)|0;var xt=(u+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(I,pt)|0))<<13)|0;u=((s=s+Math.imul(I,mt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(Y,it),n=(n=Math.imul(Y,rt))+Math.imul(U,it)|0,s=Math.imul(U,rt),r=r+Math.imul(O,st)|0,n=(n=n+Math.imul(O,ot)|0)+Math.imul(j,st)|0,s=s+Math.imul(j,ot)|0,r=r+Math.imul(L,at)|0,n=(n=n+Math.imul(L,ut)|0)+Math.imul(R,at)|0,s=s+Math.imul(R,ut)|0,r=r+Math.imul(x,ct)|0,n=(n=n+Math.imul(x,ft)|0)+Math.imul(E,ct)|0,s=s+Math.imul(E,ft)|0;var Et=(u+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(T,pt)|0))<<13)|0;u=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(Y,st),n=(n=Math.imul(Y,ot))+Math.imul(U,st)|0,s=Math.imul(U,ot),r=r+Math.imul(O,at)|0,n=(n=n+Math.imul(O,ut)|0)+Math.imul(j,at)|0,s=s+Math.imul(j,ut)|0,r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,ft)|0)+Math.imul(R,ct)|0,s=s+Math.imul(R,ft)|0;var Bt=(u+(r=r+Math.imul(x,pt)|0)|0)+((8191&(n=(n=n+Math.imul(x,mt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((s=s+Math.imul(E,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,r=Math.imul(Y,at),n=(n=Math.imul(Y,ut))+Math.imul(U,at)|0,s=Math.imul(U,ut),r=r+Math.imul(O,ct)|0,n=(n=n+Math.imul(O,ft)|0)+Math.imul(j,ct)|0,s=s+Math.imul(j,ft)|0;var Lt=(u+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((s=s+Math.imul(R,mt)|0)+(n>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(Y,ct),n=(n=Math.imul(Y,ft))+Math.imul(U,ct)|0,s=Math.imul(U,ft);var Rt=(u+(r=r+Math.imul(O,pt)|0)|0)+((8191&(n=(n=n+Math.imul(O,mt)|0)+Math.imul(j,pt)|0))<<13)|0;u=((s=s+Math.imul(j,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(r=Math.imul(Y,pt))|0)+((8191&(n=(n=Math.imul(Y,mt))+Math.imul(U,pt)|0))<<13)|0;return u=((s=Math.imul(U,mt))+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,a[0]=gt,a[1]=yt,a[2]=bt,a[3]=wt,a[4]=vt,a[5]=Mt,a[6]=St,a[7]=_t,a[8]=It,a[9]=Ct,a[10]=kt,a[11]=Tt,a[12]=At,a[13]=xt,a[14]=Et,a[15]=Bt,a[16]=Lt,a[17]=Rt,a[18]=Pt,0!==u&&(a[19]=u,i.length++),i};function f(t,e,i){return(new d).mulp(t,e,i)}function d(t,e){this.x=t,this.y=e}Math.imul||(c=l),r.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?c(this,t,e):i<63?l(this,t,e):i<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var h=67108863&r,a=Math.min(s,e.length-1),u=Math.max(0,s-t.length+1);u<=a;u++){var l=s-u,c=(0|t.words[l])*(0|e.words[u]),f=67108863&c;h=67108863&(f=f+h|0),n+=(o=(o=o+(c/67108864|0)|0)+(f>>>26)|0)>>>26,o&=67108863}i.words[s]=h,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):f(this,t,e)},d.prototype.makeRBT=function(t){for(var e=new Array(t),i=r.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,i,t);return e},d.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},d.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},d.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var h=o<<1,a=Math.cos(2*Math.PI/h),u=Math.sin(2*Math.PI/h),l=0;l<n;l+=h)for(var c=a,f=u,d=0;d<o;d++){var p=i[l+d],m=r[l+d],g=i[l+d+o],y=r[l+d+o],b=c*g-f*y;y=c*y+f*g,g=b,i[l+d]=p+g,r[l+d]=m+y,i[l+d+o]=p-g,r[l+d+o]=m-y,d!==h&&(b=a*c-u*f,f=a*f+u*c,c=b)}},d.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},d.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},d.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},d.prototype.convert13b=function(t,e,i,r){for(var n=0,s=0;s<e;s++)n+=0|t[s],i[2*s]=8191&n,n>>>=13,i[2*s+1]=8191&n,n>>>=13;for(s=2*e;s<r;++s)i[s]=0},d.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},d.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),h=new Array(r),a=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=i.words;f.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,u,r),this.transform(o,s,h,a,r,n),this.transform(u,s,l,c,r,n);for(var d=0;d<r;d++){var p=h[d]*l[d]-a[d]*c[d];a[d]=h[d]*c[d]+a[d]*l[d],h[d]=p}return this.conjugate(h,a,r),this.transform(h,a,f,s,r,n),this.conjugate(f,s,r),this.normalize13b(f,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},r.prototype.mul=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},r.prototype.mulf=function(t){var e=new r(null);return e.words=new Array(this.length+t.length),f(this,t,e)},r.prototype.imul=function(t){return this.clone().mulTo(t,this)},r.prototype.imuln=function(t){for(var e=0,i=0;i<this.length;i++){var r=(0|this.words[i])*t,n=(67108863&r)+(67108863&e);e>>=26,e+=r/67108864|0,e+=n>>>26,this.words[i]=67108863&n}return 0!==e&&(this.words[i]=e,this.length++),this},r.prototype.muln=function(t){return this.clone().imuln(t)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new r(1);for(var i=this,n=0;n<e.length&&0===e[n];n++,i=i.sqr());if(++n<e.length)for(var s=i.sqr();n<e.length;n++,s=s.sqr())0!==e[n]&&(i=i.mul(s));return i},r.prototype.iushln=function(t){var e,i=t%26,r=(t-i)/26,n=67108863>>>26-i<<26-i;if(0!==i){var s=0;for(e=0;e<this.length;e++){var o=this.words[e]&n,h=(0|this.words[e])-o<<i;this.words[e]=h|s,s=o>>>26-i}s&&(this.words[e]=s,this.length++)}if(0!==r){for(e=this.length-1;e>=0;e--)this.words[e+r]=this.words[e];for(e=0;e<r;e++)this.words[e]=0;this.length+=r}return this.strip()},r.prototype.ishln=function(t){return this.iushln(t)},r.prototype.iushrn=function(t,e,i){var r;r=e?(e-e%26)/26:0;var n=t%26,s=Math.min((t-n)/26,this.length),o=67108863^67108863>>>n<<n,h=i;if(r-=s,r=Math.max(0,r),h){for(var a=0;a<s;a++)h.words[a]=this.words[a];h.length=s}if(0===s);else if(this.length>s)for(this.length-=s,a=0;a<this.length;a++)this.words[a]=this.words[a+s];else this.words[0]=0,this.length=1;var u=0;for(a=this.length-1;a>=0&&(0!==u||a>=r);a--){var l=0|this.words[a];this.words[a]=u<<26-n|l>>>n,u=l&o}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(t,e,i){return this.iushrn(t,e,i)},r.prototype.shln=function(t){return this.clone().ishln(t)},r.prototype.ushln=function(t){return this.clone().iushln(t)},r.prototype.shrn=function(t){return this.clone().ishrn(t)},r.prototype.ushrn=function(t){return this.clone().iushrn(t)},r.prototype.testn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;return!(this.length<=i||!(this.words[i]&r))},r.prototype.imaskn=function(t){var e=t%26,i=(t-e)/26;if(this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var r=67108863^67108863>>>e<<e;this.words[this.length-1]&=r}return this.strip()},r.prototype.maskn=function(t){return this.clone().imaskn(t)},r.prototype.iaddn=function(t){return t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},r.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},r.prototype.isubn=function(t){if(t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},r.prototype.addn=function(t){return this.clone().iaddn(t)},r.prototype.subn=function(t){return this.clone().isubn(t)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(t,e,i){var r,n,s=t.length+i;this._expand(s);var o=0;for(r=0;r<t.length;r++){n=(0|this.words[r+i])+o;var h=(0|t.words[r])*e;o=((n-=67108863&h)>>26)-(h/67108864|0),this.words[r+i]=67108863&n}for(;r<this.length-i;r++)o=(n=(0|this.words[r+i])+o)>>26,this.words[r+i]=67108863&n;if(0===o)return this.strip();for(o=0,r=0;r<this.length;r++)o=(n=-(0|this.words[r])+o)>>26,this.words[r]=67108863&n;return this.negative=1,this.strip()},r.prototype._wordDiv=function(t,e){var i=(this.length,t.length),n=this.clone(),s=t,o=0|s.words[s.length-1];0!=(i=26-this._countBits(o))&&(s=s.ushln(i),n.iushln(i),o=0|s.words[s.length-1]);var h,a=n.length-s.length;if("mod"!==e){(h=new r(null)).length=a+1,h.words=new Array(h.length);for(var u=0;u<h.length;u++)h.words[u]=0}var l=n.clone()._ishlnsubmul(s,1,a);0===l.negative&&(n=l,h&&(h.words[a]=1));for(var c=a-1;c>=0;c--){var f=67108864*(0|n.words[s.length+c])+(0|n.words[s.length+c-1]);for(f=Math.min(f/o|0,67108863),n._ishlnsubmul(s,f,c);0!==n.negative;)f--,n.negative=0,n._ishlnsubmul(s,1,c),n.isZero()||(n.negative^=1);h&&(h.words[c]=f)}return h&&h.strip(),n.strip(),"div"!==e&&0!==i&&n.iushrn(i),{div:h||null,mod:n}},r.prototype.divmod=function(t,e,i){return this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,e),"mod"!==e&&(n=o.div.neg()),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.iadd(t)),{div:n,mod:s}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),e),"mod"!==e&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&t.negative)?(o=this.neg().divmod(t.neg(),e),"div"!==e&&(s=o.mod.neg(),i&&0!==s.negative&&s.isub(t)),{div:o.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new r(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new r(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new r(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,s,o},r.prototype.div=function(t){return this.divmod(t,"div",!1).div},r.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},r.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},r.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},r.prototype.modn=function(t){for(var e=(1<<26)%t,i=0,r=this.length-1;r>=0;r--)i=(e*i+(0|this.words[r]))%t;return i},r.prototype.idivn=function(t){for(var e=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*e;this.words[i]=r/t|0,e=r%t}return this.strip()},r.prototype.divn=function(t){return this.clone().idivn(t)},r.prototype.egcd=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new r(1),s=new r(0),o=new r(0),h=new r(1),a=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++a;for(var u=i.clone(),l=e.clone();!e.isZero();){for(var c=0,f=1;0==(e.words[0]&f)&&c<26;++c,f<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(l)),n.iushrn(1),s.iushrn(1);for(var d=0,p=1;0==(i.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(i.iushrn(d);d-- >0;)(o.isOdd()||h.isOdd())&&(o.iadd(u),h.isub(l)),o.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(o),s.isub(h)):(i.isub(e),o.isub(n),h.isub(s))}return{a:o,b:h,gcd:i.iushln(a)}},r.prototype._invmp=function(t){var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,s=new r(1),o=new r(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var a=0,u=1;0==(e.words[0]&u)&&a<26;++a,u<<=1);if(a>0)for(e.iushrn(a);a-- >0;)s.isOdd()&&s.iadd(h),s.iushrn(1);for(var l=0,c=1;0==(i.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);e.cmp(i)>=0?(e.isub(i),s.isub(o)):(i.isub(e),o.isub(s))}return(n=0===e.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(t),n},r.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},r.prototype.invm=function(t){return this.egcd(t).a.umod(t)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(t){return this.words[0]&t},r.prototype.bincn=function(t){var e=t%26,i=(t-e)/26,r=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=r,this;for(var n=r,s=i;0!==n&&s<this.length;s++){var o=0|this.words[s];n=(o+=n)>>>26,o&=67108863,this.words[s]=o}return 0!==n&&(this.words[s]=n,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t);var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},r.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},r.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},r.prototype.gtn=function(t){return 1===this.cmpn(t)},r.prototype.gt=function(t){return 1===this.cmp(t)},r.prototype.gten=function(t){return this.cmpn(t)>=0},r.prototype.gte=function(t){return this.cmp(t)>=0},r.prototype.ltn=function(t){return-1===this.cmpn(t)},r.prototype.lt=function(t){return-1===this.cmp(t)},r.prototype.lten=function(t){return this.cmpn(t)<=0},r.prototype.lte=function(t){return this.cmp(t)<=0},r.prototype.eqn=function(t){return 0===this.cmpn(t)},r.prototype.eq=function(t){return 0===this.cmp(t)},r.red=function(t){return new v(t)},r.prototype.toRed=function(t){return t.convertTo(this)._forceRed(t)},r.prototype.fromRed=function(){return this.red.convertFrom(this)},r.prototype._forceRed=function(t){return this.red=t,this},r.prototype.forceRed=function(t){return this._forceRed(t)},r.prototype.redAdd=function(t){return this.red.add(this,t)},r.prototype.redIAdd=function(t){return this.red.iadd(this,t)},r.prototype.redSub=function(t){return this.red.sub(this,t)},r.prototype.redISub=function(t){return this.red.isub(this,t)},r.prototype.redShl=function(t){return this.red.shl(this,t)},r.prototype.redMul=function(t){return this.red._verify2(this,t),this.red.mul(this,t)},r.prototype.redIMul=function(t){return this.red._verify2(this,t),this.red.imul(this,t)},r.prototype.redSqr=function(){return this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(t){return this.red._verify1(this),this.red.pow(this,t)};var p={k256:null,p224:null,p192:null,p25519:null};function m(t,e){this.name=t,this.p=new r(e,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function g(){m.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){m.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function b(){m.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){m.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function v(t){if("string"==typeof t){var e=r._prime(t);this.m=e.p,this.prime=e}else this.m=t,this.prime=null}function M(t){v.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}m.prototype._tmp=function(){var t=new r(null);return t.words=new Array(Math.ceil(this.n/13)),t},m.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},m.prototype.split=function(t,e){t.iushrn(this.n,0,e)},m.prototype.imulK=function(t){return t.imul(this.k)},i(g,m),g.prototype.split=function(t,e){for(var i=Math.min(t.length,9),r=0;r<i;r++)e.words[r]=t.words[r];if(e.length=i,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(e.words[e.length++]=4194303&n,r=10;r<t.length;r++){var s=0|t.words[r];t.words[r-10]=(4194303&s)<<4|n>>>22,n=s}n>>>=22,t.words[r-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},g.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(y,m),i(b,m),i(w,m),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},r._prime=function(t){if(p[t])return p[t];var e;if("k256"===t)e=new g;else if("p224"===t)e=new y;else if("p192"===t)e=new b;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return p[t]=e,e},v.prototype._verify1=function(t){},v.prototype._verify2=function(t,e){},v.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},v.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},v.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},v.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},v.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},v.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},v.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},v.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},v.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},v.prototype.isqr=function(t){return this.imul(t,t.clone())},v.prototype.sqr=function(t){return this.mul(t,t)},v.prototype.sqrt=function(t){if(t.isZero())return t.clone();if(3===this.m.andln(3)){var e=this.m.add(new r(1)).iushrn(2);return this.pow(t,e)}for(var i=this.m.subn(1),n=0;!i.isZero()&&0===i.andln(1);)n++,i.iushrn(1);var s=new r(1).toRed(this),o=s.redNeg(),h=this.m.subn(1).iushrn(1),a=this.m.bitLength();for(a=new r(2*a*a).toRed(this);0!==this.pow(a,h).cmp(o);)a.redIAdd(o);for(var u=this.pow(a,i),l=this.pow(t,i.addn(1).iushrn(1)),c=this.pow(t,i),f=n;0!==c.cmp(s);){for(var d=c,p=0;0!==d.cmp(s);p++)d=d.redSqr();var m=this.pow(u,new r(1).iushln(f-p-1));l=l.redMul(m),u=m.redSqr(),c=c.redMul(u),f=p}return l},v.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},v.prototype.pow=function(t,e){if(e.isZero())return new r(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new r(1).toRed(this),i[1]=t;for(var n=2;n<i.length;n++)i[n]=this.mul(i[n-1],t);var s=i[0],o=0,h=0,a=e.bitLength()%26;for(0===a&&(a=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],l=a-1;l>=0;l--){var c=u>>l&1;s!==i[0]&&(s=this.sqr(s)),0!==c||0!==o?(o<<=1,o|=c,(4==++h||0===n&&0===l)&&(s=this.mul(s,i[o]),h=0,o=0)):h=0}a=26}return s},v.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},v.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},r.mont=function(t){return new M(t)},i(M,v),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new r(0)._forceRed(this);var i=t.mul(e),n=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),s=i.isub(n).iushrn(this.shift),o=s;return s.cmp(this.m)>=0?o=s.isub(this.m):s.cmpn(0)<0&&(o=s.iadd(this.m)),o._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Bd,this),Bd=Bd.exports;Ki.Buffer,Ki.Buffer,Ki.Buffer;var Ld={};(function(t,e){(function(){"use strict";Ki.Buffer,Ki.kMaxLength;var i=e.crypto||e.msCrypto;Math.pow(2,32);i&&i.getRandomValues||t.browser}).call(this)}).call(this,we,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Rd={};Rd.randomBytes=Rd.pseudoRandomBytes=er;var Pd=Object.keys(Bo);["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(Pd);Fo.pbkdf2,Fo.pbkdf2Sync,Ld.publicEncrypt,Ld.privateEncrypt,Ld.publicDecrypt,Ld.privateDecrypt;var Od={};(function(t){(function(){!function(){"use strict";var e=Rd.pseudoRandomBytes||Rd.randomBytes,i="abcdefghijklmnopqrstuvwxyz",r=i.toUpperCase(),n="0123456789"+r+i,s="default",o="default";var h=function(h){switch((h=h||{}).chars=h.chars||s,h.source=h.source||o,h.chars){case"default":h.chars=n;break;case"a-z":case"alpha":h.chars=i;break;case"A-Z":case"ALPHA":h.chars=r;break;case"0-9":case"numeric":h.chars="0123456789";break;case"base32":h.chars=r+"234567"}switch(h.chars,h.source){case"default":h.source=e;break;case"crypto":h.source=Rd.randomBytes;break;case"math":h.source=function(e){for(var i=function(e){return t.alloc?t.alloc(e):new t(e)}(e),r=0;r<e;r++)i.writeUInt8(Math.floor(256*Math.random()),r);return i}}return{generate:function(t,e){e||(e=h.chars);for(var i=Math.floor(256/e.length)*e.length,r="";r.length<t;)for(var n=h.source(t-r.length),s=0;s<n.length;s++){var o=n.readUInt8(s);o<i&&(r+=e[o%e.length])}return r}}}();Od={uid:h.generate}}()}).call(this)}).call(this,_t({}).Buffer);const{uid:jd}=Od;var Dd=class{constructor(t){this.worker=t,this.id=jd(64),this.worker.onmessage=t=>{t.data.id===this.id&&("data"===t.data.type?this.dispatchEvent("message",t.data):"disconnect"===t.data.type&&this.dispatchEvent("close"))},this.handlers={},setTimeout(()=>{this.worker.postMessage({id:this.id,type:"connect"}),this.dispatchEvent("open")},1)}send(t){this.worker.postMessage({id:this.id,type:"data",data:t})}dispatchEvent(t,e){const i=this.handlers[t];i&&i(e)}addEventListener(t,e){this.handlers[t]=e}close(){postMessage({id:this.id,type:"disconnect"}),this.dispatchEvent("close")}},Yd={};(function(t){(function(){_t({});Yd=class{constructor(t,e){this.host=t,this.port=e,this.client=null,this.connected=!1,this.bytesAvailable=0,this.buffers=[],this.currentBuffer=null,this.offset=0,this.bytesLeft=0}connect(){return new Promise((e,i)=>{if("string"==typeof this.host)this.client=new WebSocket(`ws://${this.host}:${this.port}`,"binary");else if("Worker"===this.host.constructor.name)this.client=new Dd(this.host);else if("Peer"===this.host.constructor.name){const e=this.host,i={onmessage(){},postMessage(i){"data"===i.type&&(i.data=t.from(i.data).toString("base64")),e.send(JSON.stringify(i))}};this.client=new Dd(i),e.on("data",e=>{"data"===(e=JSON.parse(e)).type&&(e.data=t.from(e.data,"base64")),i.onmessage({data:e})}),e.on("close",()=>{i.onmessage({data:{type:"disconnect"}})})}const r=setTimeout(()=>{this.connected||(this.client.close(),i(new Error("websocket connect timeout")))},5e3);this.client.binaryType="arraybuffer",this.client.addEventListener("error",t=>{this.onError&&(this.onError(t),this.onError=void 0),i(t)}),this.client.addEventListener("close",()=>{this.onClose&&(this.onClose(-1),this.onClose=void 0),this.connected=!1,this.clear()}),this.client.addEventListener("message",t=>{this.buffers.push(new Int8Array(t.data)),this.bytesAvailable+=t.data.byteLength,this.refreshCurrentBuffer(),this.onNextMessage&&(this.onNextMessage(t.data.byteLength),this.onNextMessage=void 0)}),this.client.addEventListener("open",()=>{this.connected=!0,clearTimeout(r),e()})})}write(t,e=0,i=-1){if(!this.connected)throw new Error("attempting to write to closed socket");i=-1===i?t.length:i,this.client.send(t.slice(e,e+i))}refreshCurrentBuffer(){0===this.bytesLeft&&this.bytesAvailable>0&&(this.currentBuffer=this.buffers.shift(),this.offset=0,this.currentBuffer&&this.currentBuffer.length?this.bytesLeft=this.currentBuffer.length:this.bytesLeft=0)}async read(){return this.connected?this.bytesLeft>0?(this.bytesLeft--,this.bytesAvailable--,255&this.currentBuffer[this.offset++]):-1===await new Promise((t,e)=>{this.onClose=t,this.onError=e,this.onNextMessage=t})?-1:await this.read():-1}async readBytes(t,e=0,i=-1){if(!this.connected)return-1;if(i=-1===i?t.length:i,!(this.bytesAvailable>=i))return-1===await new Promise((t,e)=>{this.onClose=t,this.onError=e,this.onNextMessage=t})?-1:await this.readBytes(t,e,i);for(;i>0;)t[e++]=255&this.currentBuffer[this.offset++],this.bytesLeft-=1,this.bytesAvailable-=1,i-=1,0===this.bytesLeft&&this.refreshCurrentBuffer()}close(){this.connected&&this.client.close()}available(){return this.bytesAvailable}clear(){this.connected&&this.client.close(),this.currentBuffer=null,this.buffers.length=0,this.bytesLeft=0}}}).call(this)}).call(this,_t({}).Buffer);var Ud={};const Xd="0".charCodeAt(0),Nd="9".charCodeAt(0),Fd="a".charCodeAt(0),Hd="A".charCodeAt(0),Wd="Z".charCodeAt(0),qd="z".charCodeAt(0);class zd{static openFile(t){return new class{constructor(t){this.url=t,this.xhr=new XMLHttpRequest,this.xhr.responseType="arraybuffer",this.xhr.open("GET",t,!0),this.buffer=null,this.pos=0}_loadResBytes(){return new Promise((t,e)=>{this.xhr.onerror=t=>e(t),this.xhr.onload=()=>{/^2/.test(this.xhr.status)?t(new Int8Array(this.xhr.response)):e(new Error(`unable to download ${this.url}.\n                        status code = ${this.xhr.status}`))},this.xhr.send()})}async readFully(t,e=0,i){void 0===i&&(i=t.length),this.buffer||(this.buffer=await this._loadResBytes()),t.set(this.buffer.slice(this.pos,this.pos+i),e),this.pos+=i}}(t)}static getUnsignedByte(t){return 255&t}static getUnsignedShort(t,e){return((255&t[e])<<8)+(255&t[e+1])}static getUnsignedInt(t,e){return((255&t[e])<<24)+((255&t[e+1])<<16)+((255&t[e+2])<<8)+(255&t[e+3])}static getUnsignedLong(t,e){return xt.fromInt(4294967295&zd.getUnsignedInt(t,e)).shiftLeft(32).add(new xt(4294967295&zd.getUnsignedInt(t,e+4)))}static getSignedShort(t,e){let i=256*zd.getUnsignedByte(t[e])+zd.getUnsignedByte(t[e+1])|0;return i>32767&&(i-=65536),i}static getStackInt(t,e){return(255&t[e])<128?t[e]:((255&t[e])-128<<24)+((255&t[e+1])<<16)+((255&t[e+2])<<8)+(255&t[e+3])}static getBitMask(t,e,i){let r=e>>3,n=8-(7&e),s=0;for(;i>n;n=8)s+=(t[r++]&zd.bitmask[n])<<i-n,i-=n;return s+(i===n?t[r]&zd.bitmask[n]:t[r]>>n-i&zd.bitmask[i])}static formatAuthString(t,e){let i="";for(let r=0;r<e;r++)if(r>=t.length)i+=" ";else{let e=t.charCodeAt(r);i+=e>=Fd&&e<=qd||e>=Hd&&e<=Wd||e>=Xd&&e<=Nd?String.fromCharCode(e):"_"}return i}static ipToString(t){return(t>>24&255)+"."+(t>>16&255)+"."+(t>>8&255)+"."+(255&t)}static usernameToHash(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);e+=i>=Fd&&i<=qd?String.fromCharCode(i):i>=Hd&&i<=Wd?String.fromCharCode(i+97-65):i>=Xd&&i<=Nd?String.fromCharCode(i):" "}(e=e.trim()).length>12&&(e=e.slice(0,12));let i=new xt(0);for(let r=0;r<e.length;r++){let t=e.charCodeAt(r);i=i.multiply(37),t>=Fd&&t<=qd?i=i.add(1+t-97):t>=Xd&&t<=Nd&&(i=i.add(27+t-48))}return i}static hashToUsername(t){if(t.lessThan(0))return"invalidName";let e="";for(;!t.equals(0);){let i=t.modulo(37).toInt();t=t.divide(37),e=0===i?" "+e:i<27?t.modulo(37).equals(0)?String.fromCharCode(i+65-1)+e:String.fromCharCode(i+97-1)+e:String.fromCharCode(i+48-27)+e}return e}static getDataFileOffset(t,e){let i=zd.getUnsignedShort(e,0),r=0;t=t.toUpperCase();for(let s=0;s<t.length;s++)r=(61*r|0)+t.charCodeAt(s)-32;let n=2+10*i;for(let s=0;s<i;s++){let t=16777216*(255&e[10*s+2])+65536*(255&e[10*s+3])+256*(255&e[10*s+4])+(255&e[10*s+5])|0,i=65536*(255&e[10*s+9])+256*(255&e[10*s+10])+(255&e[10*s+11])|0;if(t===r)return n;n+=i}return 0}static getDataFileLength(t,e){const i=zd.getUnsignedShort(e,0);let r=0;t=t.toUpperCase();for(let n=0;n<t.length;n++)r=(61*r|0)+t.charCodeAt(n)-32;for(let n=0;n<i;n++){let t=16777216*(255&e[10*n+2])+65536*(255&e[10*n+3])+256*(255&e[10*n+4])+(255&e[10*n+5])|0,i=65536*(255&e[10*n+6])+256*(255&e[10*n+7])+(255&e[10*n+8])|0;if(t===r)return i}return 0}static loadData(t,e,i){return zd.unpackData(t,e,i,null)}static unpackData(t,e,i,r){const n=256*(255&i[0])+(255&i[1])|0;let s=0;t=t.toUpperCase();for(let h=0;h<t.length;h++)s=(61*s|0)+t.charCodeAt(h)-32;let o=2+10*n;for(let h=0;h<n;h++){const t=16777216*(255&i[10*h+2])+65536*(255&i[10*h+3])+256*(255&i[10*h+4])+(255&i[10*h+5])|0,n=65536*(255&i[10*h+6])+256*(255&i[10*h+7])+(255&i[10*h+8])|0,a=65536*(255&i[10*h+9])+256*(255&i[10*h+10])+(255&i[10*h+11])|0;if(t===s){if(null===r&&(r=new Int8Array(n+e)),n!==a)zi.decompress(r,n,i,a,o);else for(let t=0;t<n;t++)r[t]=i[o+t];return r}o+=a}return null}static formatConfirmAmount(t){let e=t.toString();for(let i=e.length-3;i>0;i-=3)e=e.substring(0,i)+","+e.substring(i);return e.length>8?e="@gre@"+e.substring(0,e.length-8)+` million @whi@(${e})`:e.length>4&&(e="@cya@"+e.substring(0,e.length-4)+`K @whi@(${e})`),e}}zd.bitmask=new Int32Array([0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215,33554431,67108863,134217727,268435455,536870911,1073741823,2147483647,-1]),Ud=zd;const Vd="0".charCodeAt(0),Zd="9".charCodeAt(0);class Gd{constructor(t,e,i,r){this.mudclient=r,this.image=null,this.anIntArray340=null,this.anIntArray341=null,this.anIntArray342=null,this.anIntArray343=null,this.anIntArray344=null,this.anIntArray345=null,this.boundsTopY=0,this.boundsTopX=0,this.interlace=!1,this.loggedIn=!1,this.boundsBottomY=e,this.boundsBottomX=t,this.width1=this.width2=t,this.height1=this.height2=e,this.area=t*e,this.pixels=new Int32Array(t*e),this.surfacePixels=[],this.surfacePixels.length=i,this.surfacePixels.fill(null),this.spriteColoursUsed=[],this.spriteColoursUsed.length=i,this.spriteColoursUsed.fill(null),this.spriteColourList=[],this.spriteColourList.length=i,this.spriteColourList.fill(null),this.spriteTranslate=new Int8Array(i),this.spriteWidth=new Int32Array(i),this.spriteHeight=new Int32Array(i),this.spriteWidthFull=new Int32Array(i),this.spriteHeightFull=new Int32Array(i),this.spriteTranslateX=new Int32Array(i),this.spriteTranslateY=new Int32Array(i),this.rgbPixels=new Uint8Array(this.pixels.buffer,this.pixels.byteOffset),this.imageData=r._graphics.ctx.createImageData(t,e),this.setComplete()}static rgbToInt(t,e,i){return(t<<16)+(e<<8)+i}static createFont(t,e){Gd.gameFonts[e]=t}setComplete(){for(let t=0;t<4*this.area;t+=4){const e=this.rgbPixels[t];this.rgbPixels[t]=this.rgbPixels[t+2],this.rgbPixels[t+2]=e,this.rgbPixels[t+3]=255}this.imageData.data.set(this.rgbPixels)}setBounds(t,e,i,r){t<0&&(t=0),e<0&&(e=0),i>this.width2&&(i=this.width2),r>this.height2&&(r=this.height2),this.boundsTopX=t,this.boundsTopY=e,this.boundsBottomX=i,this.boundsBottomY=r}resetBounds(){this.boundsTopX=0,this.boundsTopY=0,this.boundsBottomX=this.width2,this.boundsBottomY=this.height2}draw(t,e,i){this.setComplete(),t.drawImage(this.imageData,e,i)}blackScreen(){const t=this.width2*this.height2;if(!this.interlace){for(let e=0;e<t;e++)this.pixels[e]=0;return}let e=0;for(let i=-this.height2;i<0;i+=2){for(let t=-this.width2;t<0;t++)this.pixels[e++]=0;e+=this.width2}}drawCircle(t,e,i,r,n){const s=256-n,o=(r>>16&255)*n,h=(r>>8&255)*n,a=(255&r)*n;let u=e-i;u<0&&(u=0);let l=e+i;l>=this.height2&&(l=this.height2-1);let c=1;this.interlace&&(c=2,0!=(1&u)&&u++);for(let f=u;f<=l;f+=c){const r=f-e,n=0|Math.sqrt(i*i-r*r);let u=t-n;u<0&&(u=0);let l=t+n;l>=this.width2&&(l=this.width2-1);let c=u+f*this.width2;for(let t=u;t<=l;t++){const t=(o+(this.pixels[c]>>16&255)*s>>8<<16)+(h+(this.pixels[c]>>8&255)*s>>8<<8)+(a+(255&this.pixels[c])*s>>8);this.pixels[c++]=t}}}drawBoxAlpha(t,e,i,r,n,s){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),e<this.boundsTopY&&(r-=this.boundsTopY-e,e=this.boundsTopY),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t),e+r>this.boundsBottomY&&(r=this.boundsBottomY-e);const o=256-s,h=(n>>16&255)*s,a=(n>>8&255)*s,u=(255&n)*s;let l=this.width2-i,c=1;this.interlace&&(c=2,l+=this.width2,0!=(1&e)&&(e++,r--));let f=t+e*this.width2;for(let d=0;d<r;d+=c){for(let t=-i;t<0;t++){const t=(h+(this.pixels[f]>>16&255)*o>>8<<16)+(a+(this.pixels[f]>>8&255)*o>>8<<8)+(u+(255&this.pixels[f])*o>>8);this.pixels[f++]=t}f+=l}}drawGradient(t,e,i,r,n,s){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t);const o=s>>16&255,h=s>>8&255,a=255&s,u=n>>16&255,l=n>>8&255,c=255&n;let f=this.width2-i,d=1;this.interlace&&(d=2,f+=this.width2,0!=(1&e)&&(e++,r--));let p=t+e*this.width2;for(let m=0;m<r;m+=d)if(m+e>=this.boundsTopY&&m+e<this.boundsBottomY){const t=((o*m+u*(r-m))/r<<16)+((h*m+l*(r-m))/r<<8)+((a*m+c*(r-m))/r|0);for(let e=-i;e<0;e++)this.pixels[p++]=t;p+=f}else p+=this.width2}drawBox(t,e,i,r,n){t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),e<this.boundsTopY&&(r-=this.boundsTopY-e,e=this.boundsTopY),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t),e+r>this.boundsBottomY&&(r=this.boundsBottomY-e);let s=this.width2-i,o=1;this.interlace&&(o=2,s+=this.width2,0!=(1&e)&&(e++,r--));let h=t+e*this.width2;for(let a=-r;a<0;a+=o){for(let t=-i;t<0;t++)this.pixels[h++]=n;h+=s}}drawBoxEdge(t,e,i,r,n){this.drawLineHoriz(t,e,i,n),this.drawLineHoriz(t,e+r-1,i,n),this.drawLineVert(t,e,r,n),this.drawLineVert(t+i-1,e,r,n)}drawLineHoriz(t,e,i,r){if(e<this.boundsTopY||e>=this.boundsBottomY)return;t<this.boundsTopX&&(i-=this.boundsTopX-t,t=this.boundsTopX),t+i>this.boundsBottomX&&(i=this.boundsBottomX-t);let n=t+e*this.width2;for(let s=0;s<i;s++)this.pixels[n+s]=r}drawLineVert(t,e,i,r){if(t<this.boundsTopX||t>=this.boundsBottomX)return;e<this.boundsTopY&&(i-=this.boundsTopY-e,e=this.boundsTopY),e+i>this.boundsBottomX&&(i=this.boundsBottomY-e);let n=t+e*this.width2;for(let s=0;s<i;s++)this.pixels[n+s*this.width2]=r}setPixel(t,e,i){t<this.boundsTopX||e<this.boundsTopY||t>=this.boundsBottomX||e>=this.boundsBottomY||(this.pixels[t+e*this.width2]=i)}fadeToBlack(){const t=this.width2*this.height2;for(let e=0;e<t;e++){let t=16777215&this.pixels[e];this.pixels[e]=(t>>>1&8355711)+(t>>>2&4144959)+(t>>>3&2039583)+(t>>>4&986895)}}drawLineAlpha(t,e,i,r,n,s){for(let o=i;o<i+n;o++)for(let i=r;i<r+s;i++){let r=0,n=0,s=0,h=0;for(let a=o-t;a<=o+t;a++)if(a>=0&&a<this.width2)for(let t=i-e;t<=i+e;t++)if(t>=0&&t<this.height2){let e=this.pixels[a+this.width2*t];r+=e>>16&255,n+=e>>8&255,s+=255&e,h++}this.pixels[o+this.width2*i]=(r/h<<16)+(n/h<<8)+(s/h|0)}}clear(){for(let t=0;t<this.surfacePixels.length;t++)this.surfacePixels[t]=null,this.spriteWidth[t]=0,this.spriteHeight[t]=0,this.spriteColoursUsed[t]=null,this.spriteColourList[t]=null}parseSprite(t,e,i,r){let n=Ud.getUnsignedShort(e,0);const s=Ud.getUnsignedShort(i,n);n+=2;const o=Ud.getUnsignedShort(i,n);n+=2;const h=255&i[n++],a=new Int32Array(h);a[0]=16711935;for(let l=0;l<h-1;l++)a[l+1]=((255&i[n])<<16)+((255&i[n+1])<<8)+(255&i[n+2]),n+=3;let u=2;for(let l=t;l<t+r;l++){this.spriteTranslateX[l]=255&i[n++],this.spriteTranslateY[l]=255&i[n++],this.spriteWidth[l]=Ud.getUnsignedShort(i,n),n+=2,this.spriteHeight[l]=Ud.getUnsignedShort(i,n),n+=2;const t=255&i[n++],r=this.spriteWidth[l]*this.spriteHeight[l];if(this.spriteColoursUsed[l]=new Int8Array(r),this.spriteColourList[l]=a,this.spriteWidthFull[l]=s,this.spriteHeightFull[l]=o,this.surfacePixels[l]=null,this.spriteTranslate[l]=!1,0===this.spriteTranslateX[l]&&0===this.spriteTranslateY[l]||(this.spriteTranslate[l]=!0),0===t)for(let i=0;i<r;i++)this.spriteColoursUsed[l][i]=e[u++],0===this.spriteColoursUsed[l][i]&&(this.spriteTranslate[l]=!0);else if(1===t)for(let i=0;i<this.spriteWidth[l];i++)for(let t=0;t<this.spriteHeight[l];t++)this.spriteColoursUsed[l][i+t*this.spriteWidth[l]]=e[u++],0===this.spriteColoursUsed[l][i+t*this.spriteWidth[l]]&&(this.spriteTranslate[l]=!0)}}readSleepWord(t,e){const i=this.surfacePixels[t]=new Int32Array(10200);this.spriteWidth[t]=255,this.spriteHeight[t]=40,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=255,this.spriteHeightFull[t]=40,this.spriteTranslate[t]=!1;let r=0,n=1,s=0;for(s=0;s<255;){const t=255&e[n++];for(let e=0;e<t;e++)i[s++]=r;r=16777215-r}for(let o=1;o<40;o++)for(let t=0;t<255;){const r=255&e[n++];for(let e=0;e<r;e++)i[s]=i[s-255],s++,t++;t<255&&(i[s]=16777215-i[s-255],s++,t++)}}drawWorld(t){let e=this.spriteWidth[t]*this.spriteHeight[t],i=this.surfacePixels[t],r=new Int32Array(32768);for(let h=0;h<e;h++){let t=i[h];r[((16252928&t)>>9)+((63488&t)>>6)+((248&t)>>3)]++}let n=new Int32Array(256);n[0]=16711935;let s=new Int32Array(256);for(let h=0;h<32768;h++){let t=r[h];if(t>s[255])for(let e=1;e<256;e++)if(!(t<=s[e])){for(let t=255;t>e;t--)n[t]=n[t-1],s[t]=s[t-1];n[e]=((31744&h)<<9)+((992&h)<<6)+((31&h)<<3)+263172,s[e]=t;break}r[h]=-1}let o=new Int8Array(e);for(let h=0;h<e;h++){let t=i[h],e=((16252928&t)>>9)+((63488&t)>>6)+((248&t)>>3),s=r[e];if(-1===s){let i=999999999,o=t>>16&255,h=t>>8&255,a=255&t;for(let t=0;t<256;t++){let e=n[t],r=e>>16&255,u=e>>8&255,l=255&e,c=(o-r)*(o-r)+(h-u)*(h-u)+(a-l)*(a-l);c<i&&(i=c,s=t)}r[e]=s}o[h]=255&s}this.spriteColoursUsed[t]=o,this.spriteColourList[t]=n,this.surfacePixels[t]=null}loadSprite(t){if(null===this.spriteColoursUsed[t])return;const e=this.spriteWidth[t]*this.spriteHeight[t],i=this.spriteColoursUsed[t],r=this.spriteColourList[t],n=new Int32Array(e);for(let s=0;s<e;s++){let t=r[255&i[s]];0===t?t=1:16711935===t&&(t=0),n[s]=t}this.surfacePixels[t]=n,this.spriteColoursUsed[t]=null,this.spriteColourList[t]=null}drawSpriteMinimap(t,e,i,r,n){this.spriteWidth[t]=r,this.spriteHeight[t]=n,this.spriteTranslate[t]=!1,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=r,this.spriteHeightFull[t]=n,this.surfacePixels[t]=new Int32Array(r*n);let s=0;for(let o=e;o<e+r;o++)for(let e=i;e<i+n;e++)this.surfacePixels[t][s++]=this.pixels[o+e*this.width2]}_drawSprite_from5(t,e,i,r,n){this.spriteWidth[t]=r,this.spriteHeight[t]=n,this.spriteTranslate[t]=!1,this.spriteTranslateX[t]=0,this.spriteTranslateY[t]=0,this.spriteWidthFull[t]=r,this.spriteHeightFull[t]=n,this.surfacePixels[t]=new Int32Array(r*n);let s=0;for(let o=i;o<i+n;o++)for(let i=e;i<e+r;i++)this.surfacePixels[t][s++]=this.pixels[i+o*this.width2]}_drawSprite_from3(t,e,i){this.spriteTranslate[i]&&(t+=this.spriteTranslateX[i],e+=this.spriteTranslateY[i]);let r=t+e*this.width2,n=0,s=this.spriteHeight[i],o=this.spriteWidth[i],h=this.width2-o,a=0;if(e<this.boundsTopY){let t=this.boundsTopY-e;s-=t,e=this.boundsTopY,n+=t*o,r+=t*this.width2}if(e+s>=this.boundsBottomY&&(s-=e+s-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;o-=e,t=this.boundsTopX,n+=e,r+=e,a+=e,h+=e}if(t+o>=this.boundsBottomX){let e=t+o-this.boundsBottomX+1;o-=e,a+=e,h+=e}if(o<=0||s<=0)return;let u=1;this.interlace&&(u=2,h+=this.width2,a+=this.spriteWidth[i],0!=(1&e)&&(r+=this.width2,s--)),null===this.surfacePixels[i]?this._drawSprite_from10A(this.pixels,this.spriteColoursUsed[i],this.spriteColourList[i],n,r,o,s,h,a,u):this._drawSprite_from10(this.pixels,this.surfacePixels[i],0,n,r,o,s,h,a,u)}_spriteClipping_from5(t,e,i,r,n){try{const s=this.spriteWidth[n],o=this.spriteHeight[n];let h=0,a=0,u=(s<<16)/i|0,l=(o<<16)/r|0;if(this.spriteTranslate[n]){let s=this.spriteWidthFull[n],o=this.spriteHeightFull[n];u=(s<<16)/i|0,l=(o<<16)/r|0,t+=(this.spriteTranslateX[n]*i+s-1)/s|0,e+=(this.spriteTranslateY[n]*r+o-1)/o|0,this.spriteTranslateX[n]*i%s!=0&&(h=(s-this.spriteTranslateX[n]*i%s<<16)/i|0),this.spriteTranslateY[n]*r%o!=0&&(a=(o-this.spriteTranslateY[n]*r%o<<16)/r|0),i=i*(this.spriteWidth[n]-(h>>16))/s|0,r=r*(this.spriteHeight[n]-(a>>16))/o|0}let c=t+e*this.width2,f=this.width2-i;if(e<this.boundsTopY){let t=this.boundsTopY-e;r-=t,e=0,c+=t*this.width2,a+=l*t}if(e+r>=this.boundsBottomY&&(r-=e+r-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;i-=e,t=0,c+=e,h+=u*e,f+=e}if(t+i>=this.boundsBottomX){let e=t+i-this.boundsBottomX+1;i-=e,f+=e}let d=1;this.interlace&&(d=2,f+=this.width2,l+=l,0!=(1&e)&&(c+=this.width2,r--)),this._plotScale_from13(this.pixels,this.surfacePixels[n],0,h,a,c,f,i,r,u,l,s,d)}catch(Kd){console.error(Kd)}}_spriteClipping_from7(t,e,i,r,n,s,o){n>=5e4?this.mudclientref.drawTeleportBubble(t,e,i,r,n-5e4,s,o):n>=4e4?this.mudclientref.drawItem(t,e,i,r,n-4e4,s,o):n>=2e4?this.mudclientref.drawNpc(t,e,i,r,n-2e4,s,o):n>=5e3?this.mudclientref.drawPlayer(t,e,i,r,n-5e3,s,o):this._spriteClipping_from5(t,e,i,r,n)}_drawSpriteAlpha_from4(t,e,i,r){this.spriteTranslate[i]&&(t+=this.spriteTranslateX[i],e+=this.spriteTranslateY[i]);let n=t+e*this.width2,s=0,o=this.spriteHeight[i],h=this.spriteWidth[i],a=this.width2-h,u=0;if(e<this.boundsTopY){let t=this.boundsTopY-e;o-=t,e=this.boundsTopY,s+=t*h,n+=t*this.width2}if(e+o>=this.boundsBottomY&&(o-=e+o-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;h-=e,t=this.boundsTopX,s+=e,n+=e,u+=e,a+=e}if(t+h>=this.boundsBottomX){let e=t+h-this.boundsBottomX+1;h-=e,u+=e,a+=e}if(h<=0||o<=0)return;let l=1;this.interlace&&(l=2,a+=this.width2,u+=this.spriteWidth[i],0!=(1&e)&&(n+=this.width2,o--)),null===this.surfacePixels[i]?this._drawSpriteAlpha_from11A(this.pixels,this.spriteColoursUsed[i],this.spriteColourList[i],s,n,h,o,a,u,l,r):this._drawSpriteAlpha_from11(this.pixels,this.surfacePixels[i],0,s,n,h,o,a,u,l,r)}drawActionBubble(t,e,i,r,n,s){try{const o=this.spriteWidth[n],h=this.spriteHeight[n];let a=0,u=0,l=(o<<16)/i|0,c=(h<<16)/r|0;if(this.spriteTranslate[n]){const s=this.spriteWidthFull[n],o=this.spriteHeightFull[n];l=(s<<16)/i|0,c=(o<<16)/r|0,t+=(this.spriteTranslateX[n]*i+s-1)/s|0,e+=(this.spriteTranslateY[n]*r+o-1)/o|0,this.spriteTranslateX[n]*i%s!=0&&(a=(s-this.spriteTranslateX[n]*i%s<<16)/i|0),this.spriteTranslateY[n]*r%o!=0&&(u=(o-this.spriteTranslateY[n]*r%o<<16)/r|0),i=i*(this.spriteWidth[n]-(a>>16))/s|0,r=r*(this.spriteHeight[n]-(u>>16))/o|0}let f=t+e*this.width2,d=this.width2-i;if(e<this.boundsTopY){let t=this.boundsTopY-e;r-=t,e=0,f+=t*this.width2,u+=c*t}if(e+r>=this.boundsBottomY&&(r-=e+r-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;i-=e,t=0,f+=e,a+=l*e,d+=e}if(t+i>=this.boundsBottomX){let e=t+i-this.boundsBottomX+1;i-=e,d+=e}let p=1;this.interlace&&(p=2,d+=this.width2,c+=c,0!=(1&e)&&(f+=this.width2,r--)),this.transparentScale(this.pixels,this.surfacePixels[n],0,a,u,f,d,i,r,l,c,o,p,s)}catch(Kd){console.error(Kd)}}_spriteClipping_from6(t,e,i,r,n,s){try{let o=this.spriteWidth[n],h=this.spriteHeight[n],a=0,u=0,l=(o<<16)/i|0,c=(h<<16)/r|0;if(this.spriteTranslate[n]){let s=this.spriteWidthFull[n],o=this.spriteHeightFull[n];l=(s<<16)/i|0,c=(o<<16)/r|0,t+=(this.spriteTranslateX[n]*i+s-1)/s|0,e+=(this.spriteTranslateY[n]*r+o-1)/o|0,this.spriteTranslateX[n]*i%s!=0&&(a=(s-this.spriteTranslateX[n]*i%s<<16)/i|0),this.spriteTranslateY[n]*r%o!=0&&(u=(o-this.spriteTranslateY[n]*r%o<<16)/r|0),i=i*(this.spriteWidth[n]-(a>>16))/s|0,r=r*(this.spriteHeight[n]-(u>>16))/o|0}let f=t+e*this.width2,d=this.width2-i;if(e<this.boundsTopY){let t=this.boundsTopY-e;r-=t,e=0,f+=t*this.width2,u+=c*t}if(e+r>=this.boundsBottomY&&(r-=e+r-this.boundsBottomY+1),t<this.boundsTopX){let e=this.boundsTopX-t;i-=e,t=0,f+=e,a+=l*e,d+=e}if(t+i>=this.boundsBottomX){let e=t+i-this.boundsBottomX+1;i-=e,d+=e}let p=1;this.interlace&&(p=2,d+=this.width2,c+=c,0!=(1&e)&&(f+=this.width2,r--)),this._plotScale_from14(this.pixels,this.surfacePixels[n],0,a,u,f,d,i,r,l,c,o,p,s)}catch(Kd){console.error(Kd)}}_drawSprite_from10(t,e,i,r,n,s,o,h,a,u){let l=-(s>>2);s=-(3&s);for(let c=-o;c<0;c+=u){for(let s=l;s<0;s++)0!==(i=e[r++])?t[n++]=i:n++,0!==(i=e[r++])?t[n++]=i:n++,0!==(i=e[r++])?t[n++]=i:n++,0!==(i=e[r++])?t[n++]=i:n++;for(let o=s;o<0;o++)0!==(i=e[r++])?t[n++]=i:n++;n+=h,r+=a}}_drawSprite_from10A(t,e,i,r,n,s,o,h,a,u){let l=-(s>>2);s=-(3&s);for(let c=-o;c<0;c+=u){for(let s=l;s<0;s++){let s=e[r++];0!==s?t[n++]=i[255&s]:n++,0!==(s=e[r++])?t[n++]=i[255&s]:n++,0!==(s=e[r++])?t[n++]=i[255&s]:n++,0!==(s=e[r++])?t[n++]=i[255&s]:n++}for(let o=s;o<0;o++){let s=e[r++];0!==s?t[n++]=i[255&s]:n++}n+=h,r+=a}}_plotScale_from13(t,e,i,r,n,s,o,h,a,u,l,c,f){try{let d=r;for(let p=-a;p<0;p+=f){let a=(n>>16)*c;for(let n=-h;n<0;n++)0!==(i=e[(r>>16)+a])?t[s++]=i:s++,r+=u;n+=l,r=d,s+=o}}catch(Kd){console.error(Kd)}}_drawSpriteAlpha_from11(t,e,i,r,n,s,o,h,a,u,l){let c=256-l;for(let f=-o;f<0;f+=u){for(let o=-s;o<0;o++)if(0!==(i=e[r++])){let e=t[n];t[n++]=((16711935&i)*l+(16711935&e)*c&-16711936)+((65280&i)*l+(65280&e)*c&16711680)>>8}else n++;n+=h,r+=a}}_drawSpriteAlpha_from11A(t,e,i,r,n,s,o,h,a,u,l){let c=256-l;for(let f=-o;f<0;f+=u){for(let o=-s;o<0;o++){let s=e[r++];if(0!==s){s=i[255&s];let e=t[n];t[n++]=((16711935&s)*l+(16711935&e)*c&-16711936)+((65280&s)*l+(65280&e)*c&16711680)>>8}else n++}n+=h,r+=a}}transparentScale(t,e,i,r,n,s,o,h,a,u,l,c,f,d){let p=256-d;try{let m=r;for(let g=-a;g<0;g+=f){let a=(n>>16)*c;for(let n=-h;n<0;n++){if(0!==(i=e[(r>>16)+a])){let e=t[s];t[s++]=((16711935&i)*d+(16711935&e)*p&-16711936)+((65280&i)*d+(65280&e)*p&16711680)>>8}else s++;r+=u}n+=l,r=m,s+=o}}catch(Kd){console.error(Kd)}}_plotScale_from14(t,e,i,r,n,s,o,h,a,u,l,c,f,d){let p=d>>16&255,m=d>>8&255,g=255&d;try{let d=r;for(let y=-a;y<0;y+=f){let a=(n>>16)*c;for(let n=-h;n<0;n++){if(0!==(i=e[(r>>16)+a])){let e=i>>16&255,r=i>>8&255,n=255&i;t[s++]=e===r&&r===n?(e*p>>8<<16)+(r*m>>8<<8)+(n*g>>8):i}else s++;r+=u}n+=l,r=d,s+=o}}catch(Kd){console.error(Kd)}}drawMinimapSprite(t,e,i,r,n){let s=this.width2,o=this.height2;if(!this.sinCosCache){this.sinCosCache=new Int32Array(512);for(let t=0;t<256;t++)this.sinCosCache[t]=32768*Math.sin(.02454369*t)|0,this.sinCosCache[t+256]=32768*Math.cos(.02454369*t)|0}let h=-(this.spriteWidthFull[i]/2|0),a=-(this.spriteHeightFull[i]/2|0);this.spriteTranslate[i]&&(h+=this.spriteTranslateX[i],a+=this.spriteTranslateY[i]);let u=h+this.spriteWidth[i],l=a+this.spriteHeight[i],c=u,f=a,d=h,p=l;r&=255;let m=this.sinCosCache[r]*n,g=this.sinCosCache[r+256]*n,y=t+(a*m+h*g>>22),b=e+(a*g-h*m>>22),w=t+(f*m+c*g>>22),v=e+(f*g-c*m>>22),M=t+(l*m+u*g>>22),S=e+(l*g-u*m>>22),_=t+(p*m+d*g>>22),I=e+(p*g-d*m>>22);192===n&&(63&r)==(63&Gd.anInt348)?Gd.anInt346++:128===n?Gd.anInt348=r:Gd.anInt347++;let C=b,k=b;v<C?C=v:v>k&&(k=v),S<C?C=S:S>k&&(k=S),I<C?C=I:I>k&&(k=I),C<this.boundsTopY&&(C=this.boundsTopY),k>this.boundsBottomY&&(k=this.boundsBottomY),null!==this.anIntArray340&&this.anIntArray340.length===o+1||(this.anIntArray340=new Int32Array(o+1),this.anIntArray341=new Int32Array(o+1),this.anIntArray342=new Int32Array(o+1),this.anIntArray343=new Int32Array(o+1),this.anIntArray344=new Int32Array(o+1),this.anIntArray345=new Int32Array(o+1));for(let U=C;U<=k;U++)this.anIntArray340[U]=99999999,this.anIntArray341[U]=-99999999;let T=0,A=0,x=0,E=this.spriteWidth[i],B=this.spriteHeight[i];h=0,a=0,c=E-1,f=0,u=E-1,l=B-1,d=0,p=B-1,I!==b&&(T=(_-y<<8)/(I-b)|0,x=(p-a<<8)/(I-b)|0);let L=0,R=0,P=0,O=0;b>I?(P=_<<8,O=p<<8,L=I,R=b):(P=y<<8,O=a<<8,L=b,R=I),L<0&&(P-=T*L,O-=x*L,L=0),R>o-1&&(R=o-1);for(let U=L;U<=R;U++)this.anIntArray340[U]=this.anIntArray341[U]=P,P+=T,this.anIntArray342[U]=this.anIntArray343[U]=0,this.anIntArray344[U]=this.anIntArray345[U]=O,O+=x;v!==b&&(T=(w-y<<8)/(v-b)|0,A=(c-h<<8)/(v-b)|0);let j=0;b>v?(P=w<<8,j=c<<8,L=v,R=b):(P=y<<8,j=h<<8,L=b,R=v),L<0&&(P-=T*L,j-=A*L,L=0),R>o-1&&(R=o-1);for(let U=L;U<=R;U++)P<this.anIntArray340[U]&&(this.anIntArray340[U]=P,this.anIntArray342[U]=j,this.anIntArray344[U]=0),P>this.anIntArray341[U]&&(this.anIntArray341[U]=P,this.anIntArray343[U]=j,this.anIntArray345[U]=0),P+=T,j+=A;S!==v&&(T=(M-w<<8)/(S-v)|0,x=(l-f<<8)/(S-v)|0),v>S?(P=M<<8,j=u<<8,O=l<<8,L=S,R=v):(P=w<<8,j=c<<8,O=f<<8,L=v,R=S),L<0&&(P-=T*L,O-=x*L,L=0),R>o-1&&(R=o-1);for(let U=L;U<=R;U++)P<this.anIntArray340[U]&&(this.anIntArray340[U]=P,this.anIntArray342[U]=j,this.anIntArray344[U]=O),P>this.anIntArray341[U]&&(this.anIntArray341[U]=P,this.anIntArray343[U]=j,this.anIntArray345[U]=O),P+=T,O+=x;I!==S&&(T=(_-M<<8)/(I-S)|0,A=(d-u<<8)/(I-S)|0),S>I?(P=_<<8,j=d<<8,O=p<<8,L=I,R=S):(P=M<<8,j=u<<8,O=l<<8,L=S,R=I),L<0&&(P-=T*L,j-=A*L,L=0),R>o-1&&(R=o-1);for(let U=L;U<=R;U++)P<this.anIntArray340[U]&&(this.anIntArray340[U]=P,this.anIntArray342[U]=j,this.anIntArray344[U]=O),P>this.anIntArray341[U]&&(this.anIntArray341[U]=P,this.anIntArray343[U]=j,this.anIntArray345[U]=O),P+=T,j+=A;let D=C*s,Y=this.surfacePixels[i];for(let U=C;U<k;U++){let t=this.anIntArray340[U]>>8,e=this.anIntArray341[U]>>8;if(e-t<=0)D+=s;else{let r=this.anIntArray342[U]<<9,n=((this.anIntArray343[U]<<9)-r)/(e-t)|0,o=this.anIntArray344[U]<<9,h=((this.anIntArray345[U]<<9)-o)/(e-t)|0;t<this.boundsTopX&&(r+=(this.boundsTopX-t)*n,o+=(this.boundsTopX-t)*h,t=this.boundsTopX),e>this.boundsBottomX&&(e=this.boundsBottomX),this.interlace&&0!=(1&U)||(this.spriteTranslate[i]?this.drawMinimapTranslate(this.pixels,Y,0,D+t,r,o,n,h,t-e,E):this.drawMinimap(this.pixels,Y,0,D+t,r,o,n,h,t-e,E)),D+=s}}}drawMinimap(t,e,i,r,n,s,o,h,a,u){for(i=a;i<0;i++)this.pixels[r++]=e[(n>>17)+(s>>17)*u],n+=o,s+=h}drawMinimapTranslate(t,e,i,r,n,s,o,h,a,u){for(let l=a;l<0;l++)0!==(i=e[(n>>17)+(s>>17)*u])?this.pixels[r++]=i:r++,n+=o,s+=h}_spriteClipping_from9(t,e,i,r,n,s,o,h,a){try{0===s&&(s=16777215),0===o&&(o=16777215);const u=this.spriteWidth[n],l=this.spriteHeight[n];let c=0,f=0,d=h<<16,p=(u<<16)/i|0,m=(l<<16)/r|0,g=-((h<<16)/r|0);if(this.spriteTranslate[n]){const s=this.spriteWidthFull[n],o=this.spriteHeightFull[n];p=(s<<16)/i|0,m=(o<<16)/r|0;let h=this.spriteTranslateX[n],u=this.spriteTranslateY[n];a&&(h=s-this.spriteWidth[n]-h),t+=(h*i+s-1)/s|0;let l=(u*r+o-1)/o|0;e+=l,d+=l*g,h*i%s!=0&&(c=(s-h*i%s<<16)/i|0),u*r%o!=0&&(f=(o-u*r%o<<16)/r|0),i=((this.spriteWidth[n]<<16)-c+p-1)/p|0,r=((this.spriteHeight[n]<<16)-f+m-1)/m|0}let y=e*this.width2;if(d+=t<<16,e<this.boundsTopY){let t=this.boundsTopY-e;r-=t,e=this.boundsTopY,y+=t*this.width2,f+=m*t,d+=g*t}e+r>=this.boundsBottomY&&(r-=e+r-this.boundsBottomY+1);let b=y/this.width2&1;if(this.interlace||(b=2),16777215===o)return null!==this.surfacePixels[n]?a?void this._transparentSpritePlot_from15(this.pixels,this.surfacePixels[n],0,(this.spriteWidth[n]<<16)-c-1,f,y,i,r,-p,m,u,s,d,g,b):void this._transparentSpritePlot_from15(this.pixels,this.surfacePixels[n],0,c,f,y,i,r,p,m,u,s,d,g,b):a?void this._transparentSpritePlot_from16A(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,(this.spriteWidth[n]<<16)-c-1,f,y,i,r,-p,m,u,s,d,g,b):void this._transparentSpritePlot_from16A(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,c,f,y,i,r,p,m,u,s,d,g,b);if(null!==this.surfacePixels[n])return a?void this._transparentSpritePlot_from16(this.pixels,this.surfacePixels[n],0,(this.spriteWidth[n]<<16)-c-1,f,y,i,r,-p,m,u,s,o,d,g,b):void this._transparentSpritePlot_from16(this.pixels,this.surfacePixels[n],0,c,f,y,i,r,p,m,u,s,o,d,g,b);a?this._transparentSpritePlot_from17(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,(this.spriteWidth[n]<<16)-c-1,f,y,i,r,-p,m,u,s,o,d,g,b):this._transparentSpritePlot_from17(this.pixels,this.spriteColoursUsed[n],this.spriteColourList[n],0,c,f,y,i,r,p,m,u,s,o,d,g,b)}catch(Kd){console.error(Kd)}}_transparentSpritePlot_from15(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p){let m=c>>16&255,g=c>>8&255,y=255&c;try{let c=r;for(let b=-h;b<0;b++){let h=(n>>16)*l,b=f>>16,w=o;if(b<this.boundsTopX){let t=this.boundsTopX-b;w-=t,b=this.boundsTopX,r+=a*t}if(b+w>=this.boundsBottomX&&(w-=b+w-this.boundsBottomX),0!=(p=1-p))for(let n=b;n<b+w;n++){if(0!==(i=e[(r>>16)+h])){let e=i>>16&255,r=i>>8&255,o=255&i;t[n+s]=e===r&&r===o?(e*m>>8<<16)+(r*g>>8<<8)+(o*y>>8):i}r+=a}n+=u,r=c,s+=this.width2,f+=d}}catch(Kd){console.error(Kd)}}_transparentSpritePlot_from16(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p,m){let g=c>>16&255,y=c>>8&255,b=255&c,w=f>>16&255,v=f>>8&255,M=255&f;try{let c=r;for(let f=-h;f<0;f++){let h=(n>>16)*l,f=d>>16,S=o;if(f<this.boundsTopX){let t=this.boundsTopX-f;S-=t,f=this.boundsTopX,r+=a*t}if(f+S>=this.boundsBottomX&&(S-=f+S-this.boundsBottomX),0!=(m=1-m))for(let n=f;n<f+S;n++){if(0!==(i=e[(r>>16)+h])){let e=i>>16&255,r=i>>8&255,o=255&i;t[n+s]=e===r&&r===o?(e*g>>8<<16)+(r*y>>8<<8)+(o*b>>8):255===e&&r===o?(e*w>>8<<16)+(r*v>>8<<8)+(o*M>>8):i}r+=a}n+=u,r=c,s+=this.width2,d+=p}}catch(Kd){console.error(Kd)}}_transparentSpritePlot_from16A(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p,m){let g=f>>16&255,y=f>>8&255,b=255&f;try{let f=n;for(let w=-a;w<0;w++){let a=(s>>16)*c,w=d>>16,v=h;if(w<this.boundsTopX){let t=this.boundsTopX-w;v-=t,w=this.boundsTopX,n+=u*t}if(w+v>=this.boundsBottomX&&(v-=w+v-this.boundsBottomX),0!=(m=1-m))for(let s=w;s<w+v;s++){if(0!=(r=255&e[(n>>16)+a])){let e=(r=i[r])>>16&255,n=r>>8&255,h=255&r;t[s+o]=e===n&&n===h?(e*g>>8<<16)+(n*y>>8<<8)+(h*b>>8):r}n+=u}s+=l,n=f,o+=this.width2,d+=p}}catch(Kd){console.error(Kd)}}_transparentSpritePlot_from17(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p,m,g){let y=f>>16&255,b=f>>8&255,w=255&f,v=d>>16&255,M=d>>8&255,S=255&d;try{let f=n;for(let d=-a;d<0;d++){let a=(s>>16)*c,d=p>>16,_=h;if(d<this.boundsTopX){let t=this.boundsTopX-d;_-=t,d=this.boundsTopX,n+=u*t}if(d+_>=this.boundsBottomX&&(_-=d+_-this.boundsBottomX),0!=(g=1-g))for(let s=d;s<d+_;s++){if(0!=(r=255&e[(n>>16)+a])){let e=(r=i[r])>>16&255,n=r>>8&255,h=255&r;t[s+o]=e===n&&n===h?(e*y>>8<<16)+(n*b>>8<<8)+(h*w>>8):255===e&&n===h?(e*v>>8<<16)+(n*M>>8<<8)+(h*S>>8):r}n+=u}s+=l,n=f,o+=this.width2,p+=m}}catch(Kd){console.error(Kd)}}drawStringRight(t,e,i,r,n){this.drawString(t,e-this.textWidth(t,r),i,r,n)}drawStringCenter(t,e,i,r,n){this.drawString(t,e-(this.textWidth(t,r)/2|0),i,r,n)}drawParagraph(t,e,i,r,n,s){try{let o=0;const h=Gd.gameFonts[r];let a=0,u=0;for(let l=0;l<t.length;l++)"@"===t[l]&&l+4<t.length&&"@"===t[l+4]||"~"===t[l]&&l+4<t.length&&"~"===t[l+4]?l+=4:o+=h[Gd.characterWidth[t.charCodeAt(l)]+7]," "===t[l]&&(u=l),"%"===t[l]&&(u=l,o=1e3),o>s&&(u<=a&&(u=l),this.drawStringCenter(t.slice(a,u),e,i,r,n),o=0,a=l=u+1,i+=this.textHeight(r));o>0&&this.drawStringCenter(t.slice(a),e,i,r,n)}catch(Kd){console.error(Kd)}}drawString(t,e,i,r,n){try{const s=Gd.gameFonts[r];for(let r=0;r<t.length;r++)if("@"===t[r]&&r+4<t.length&&"@"===t[r+4])"red"===t.slice(r+1,r+4).toLowerCase()?n=16711680:"lre"===t.slice(r+1,r+4).toLowerCase()?n=16748608:"yel"===t.slice(r+1,r+4).toLowerCase()?n=16776960:"gre"===t.slice(r+1,r+4).toLowerCase()?n=65280:"blu"===t.slice(r+1,r+4).toLowerCase()?n=255:"cya"===t.slice(r+1,r+4).toLowerCase()?n=65535:"mag"===t.slice(r+1,r+4).toLowerCase()?n=16711935:"whi"===t.slice(r+1,r+4).toLowerCase()?n=16777215:"bla"===t.slice(r+1,r+4).toLowerCase()?n=0:"dre"===t.slice(r+1,r+4).toLowerCase()?n=12582912:"ora"===t.slice(r+1,r+4).toLowerCase()?n=16748608:"ran"===t.slice(r+1,r+4).toLowerCase()?n=16777215*Math.random()|0:"or1"===t.slice(r+1,r+4).toLowerCase()?n=16756736:"or2"===t.slice(r+1,r+4).toLowerCase()?n=16740352:"or3"===t.slice(r+1,r+4).toLowerCase()?n=16723968:"gr1"===t.slice(r+1,r+4).toLowerCase()?n=12648192:"gr2"===t.slice(r+1,r+4).toLowerCase()?n=8453888:"gr3"===t.slice(r+1,r+4).toLowerCase()&&(n=4259584),r+=4;else if("~"===t[r]&&r+4<t.length&&"~"===t[r+4]){let i=t.charCodeAt(r+1),n=t.charCodeAt(r+2),s=t.charCodeAt(r+3);i>=Vd&&i<=Zd&&n>=Vd&&n<=Zd&&s>=Vd&&s<=Zd&&(e=0|Number(t.substring(r+1,r+4))),r+=4}else{const o=Gd.characterWidth[t.charCodeAt(r)];this.loggedIn&&0!==n&&(this.drawCharacter(o,e+1,i,0,s),this.drawCharacter(o,e,i+1,0,s)),this.drawCharacter(o,e,i,n,s),e+=s[o+7]}}catch(Kd){console.error(Kd)}}drawCharacter(t,e,i,r,n){let s=e+n[t+5],o=i-n[t+6],h=n[t+3],a=n[t+4],u=16384*n[t]+128*n[t+1]+n[t+2],l=s+o*this.width2,c=this.width2-h,f=0;if(o<this.boundsTopY){let t=this.boundsTopY-o;a-=t,o=this.boundsTopY,u+=t*h,l+=t*this.width2}if(o+a>=this.boundsBottomY&&(a-=o+a-this.boundsBottomY+1),s<this.boundsTopX){let t=this.boundsTopX-s;h-=t,s=this.boundsTopX,u+=t,l+=t,f+=t,c+=t}if(s+h>=this.boundsBottomX){let t=s+h-this.boundsBottomX+1;h-=t,f+=t,c+=t}h>0&&a>0&&this.plotLetter(this.pixels,n,r,u,l,h,a,c,f)}plotLetter(t,e,i,r,n,s,o,h,a){try{let u=-(s>>2);s=-(3&s);for(let l=-o;l<0;l++){for(let s=u;s<0;s++)0!==e[r++]?t[n++]=i:n++,0!==e[r++]?t[n++]=i:n++,0!==e[r++]?t[n++]=i:n++,0!==e[r++]?t[n++]=i:n++;for(let o=s;o<0;o++)0!==e[r++]?t[n++]=i:n++;n+=h,r+=a}}catch(Kd){console.error(Kd)}}method259(t,e,i,r,n,s,o,h,a){for(let u=-o;u<0;u++){for(let o=-s;o<0;o++){let s=255&e[r++];if(s>30)if(s>=230)t[n++]=i;else{let e=t[n];t[n++]=((16711935&i)*s+(16711935&e)*(256-s)&4278255360)+((65280&i)*s+(65280&e)*(256-s)&16711680)>>8}else n++}n+=h,r+=a}}textHeight(t){return 0===t?12:1===t||2===t?14:3===t||4===t?15:5===t?19:6===t?24:7===t?29:this.textHeightFont(t)}textHeightFont(t){return 0===t?Gd.gameFonts[t][8]-2:Gd.gameFonts[t][8]-1}textWidth(t,e){let i=0;const r=Gd.gameFonts[e];for(let n=0;n<t.length;n++)"@"===t[n]&&n+4<t.length&&"@"===t[n+4]||"~"===t[n]&&n+4<t.length&&"~"===t[n+4]?n+=4:i+=r[Gd.characterWidth[t.charCodeAt(n)]+7];return i}drawTabs(t,e,i,r,n,s){const o=i/n.length|0;let h=0;for(let a=0;a<n.length;a+=1){const i=s===a?14474460:10526880;this.drawBoxAlpha(t+h,e,o,r,i,128),this.drawStringCenter(n[a],t+h+(o/2|0),e+16,4,0),a>0&&this.drawLineVert(t+h,e,r,0),h+=o}this.drawLineHoriz(t,e+r,i,0)}}Gd.anInt346=0,Gd.anInt347=0,Gd.anInt348=0,Gd.gameFonts=[],Gd.gameFonts.length=50,Gd.gameFonts.fill(null),Gd.characterWidth=new Int32Array(256);for(let ng=0;ng<256;ng++){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ".indexOf(String.fromCharCode(ng));-1===t&&(t=74),Gd.characterWidth[ng]=9*t}var Kd,$d,Jd=Gd,Qd={exports:{}};Kd=this,$d=function(){"use strict";return function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"_checkHeader",value:function(){var t=this.header;if(0===t.imageType)throw Error("No data");if(t.hasColorMap){if(t.colorMapLength>256||24!==t.colorMapDepth||1!==t.colorMapType)throw Error("Invalid colormap for indexed type")}else if(t.colorMapType)throw Error("Why does the image contain a palette ?");if(!t.width||!t.height)throw Error("Invalid image size");if(8!==t.pixelDepth&&16!==t.pixelDepth&&24!==t.pixelDepth&&32!==t.pixelDepth)throw Error('Invalid pixel size "'+t.pixelDepth+'"')}},{key:"_decodeRLE",value:function(t,e,i,r){for(var n=new Uint8Array(r),s=new Uint8Array(i),o=0;o<r;){var h=t[e++],a=1+(127&h);if(128&h){for(var u=0;u<i;++u)s[u]=t[e+u];e+=i;for(var l=0;l<a;++l)n.set(s,o),o+=i}else{a*=i;for(var c=0;c<a;++c)n[o+c]=t[e+c];o+=a,e+=a}}return n}},{key:"_getImageData8bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l++){var d=e[l];t[4*(f+r*c)+3]=255,t[4*(f+r*c)+2]=i[3*d+0],t[4*(f+r*c)+1]=i[3*d+1],t[4*(f+r*c)+0]=i[3*d+2]}return t}},{key:"_getImageData16bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l+=2){var d=e[l+0]|e[l+1]<<8;t[4*(f+r*c)+0]=(31744&d)>>7,t[4*(f+r*c)+1]=(992&d)>>2,t[4*(f+r*c)+2]=(31&d)>>3,t[4*(f+r*c)+3]=32768&d?0:255}return t}},{key:"_getImageData24bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l+=3)t[4*(f+r*c)+3]=255,t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+1]=e[l+1],t[4*(f+r*c)+0]=e[l+2];return t}},{key:"_getImageData32bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l+=4)t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+1]=e[l+1],t[4*(f+r*c)+0]=e[l+2],t[4*(f+r*c)+3]=e[l+3];return t}},{key:"_getImageDataGrey8bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l++){var d=e[l];t[4*(f+r*c)+0]=d,t[4*(f+r*c)+1]=d,t[4*(f+r*c)+2]=d,t[4*(f+r*c)+3]=255}return t}},{key:"_getImageDataGrey16bits",value:function(t,e,i,r,n,s,o,h,a,u){for(var l=0,c=n;c!==o;c+=s)for(var f=h;f!==u;f+=a,l+=2)t[4*(f+r*c)+0]=e[l+0],t[4*(f+r*c)+1]=e[l+0],t[4*(f+r*c)+2]=e[l+0],t[4*(f+r*c)+3]=e[l+1];return t}},{key:"open",value:function(t,e){var i=this,r=new XMLHttpRequest;r.responseType="arraybuffer",r.open("GET",t,!0),r.onload=function(){200===r.status&&(i.load(new Uint8Array(r.response)),e&&e())},r.send(null)}},{key:"load",value:function(t){var e=0;if(t.length<18)throw Error("Not enough data to contain header");var i={idLength:t[e++],colorMapType:t[e++],imageType:t[e++],colorMapIndex:t[e++]|t[e++]<<8,colorMapLength:t[e++]|t[e++]<<8,colorMapDepth:t[e++],offsetX:t[e++]|t[e++]<<8,offsetY:t[e++]|t[e++]<<8,width:t[e++]|t[e++]<<8,height:t[e++]|t[e++]<<8,pixelDepth:t[e++],flags:t[e++]};if(i.hasEncoding=9===i.imageType||10===i.imageType||11===i.imageType,i.hasColorMap=9===i.imageType||1===i.imageType,i.isGreyColor=11===i.imageType||3===i.imageType,this.header=i,this._checkHeader(),(e+=i.idLength)>=t.length)throw Error("No data");if(i.hasColorMap){var r=i.colorMapLength*(i.colorMapDepth>>3);this.palette=t.subarray(e,e+r),e+=r}var n=i.pixelDepth>>3,s=i.width*i.height,o=s*n;i.hasEncoding?this.imageData=this._decodeRLE(t,e,n,o):this.imageData=t.subarray(e,e+(i.hasColorMap?s:o))}},{key:"getImageData",value:function(t){var e,i,r,n,s,o,h,a=this.header,u=a.width,l=a.height,c=a.flags,f=a.pixelDepth,d=a.isGreyColor,p=(48&c)>>4;switch(t||(t=document?document.createElement("canvas").getContext("2d").createImageData(u,l):{width:u,height:l,data:new Uint8ClampedArray(u*l*4)}),2===p||3===p?(n=0,s=1,o=l):(n=l-1,s=-1,o=-1),2===p||0===p?(e=0,i=1,r=u):(e=u-1,i=-1,r=-1),f){case 8:h=d?this._getImageDataGrey8bits:this._getImageData8bits;break;case 16:h=d?this._getImageDataGrey16bits:this._getImageData16bits;break;case 24:h=this._getImageData24bits;break;case 32:h=this._getImageData32bits}return h.call(this,t.data,this.imageData,this.palette,u,n,s,o,e,i,r),t}},{key:"getCanvas",value:function(){var t=this.header,e=t.width,i=t.height,r=document.createElement("canvas"),n=r.getContext("2d"),s=n.createImageData(e,i);return r.width=e,r.height=i,n.putImageData(this.getImageData(s),0,0),r}},{key:"getDataURL",value:function(t){return this.getCanvas().toDataURL(t||"image/png")}}])&&function(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(t.prototype,e),t}()},"object"==typeof Qd.exports?Qd.exports=$d():"function"==typeof define&&define.amd?define($d):(Kd=Kd||self).TgaLoader=$d(),Qd=Qd.exports;var tp=8,ep=13,ip=32,rp=17,np=33,sp=34,op=36,hp=37,ap=38,up=39,lp=40,cp=112,fp=204,dp=85,pp=24,mp=2,gp=1,yp=63,bp=58,wp=36,vp=1,Mp=17,Sp=setTimeout;function _p(t,e){var i=e.useCachedSetTimeout?Sp:setTimeout;return new Promise((function(e){i(e,t)}))}var Ip=function(t){var e=_p(t,{useCachedSetTimeout:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).useCachedSetTimeout});function i(t){return e.then((function(){return t}))}return i.then=function(){return e.then.apply(e,arguments)},i.catch=Promise.resolve().catch,i};const Cp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ",kp=["h11p.jf","h12b.jf","h12p.jf","h13b.jf","h14b.jf","h16b.jf","h20b.jf","h24b.jf"],Tp={position:"absolute",display:"none",padding:0,border:0,outline:0,opacity:0,fontFamily:"sans"};function Ap(t,e){const i=t.getBoundingClientRect(),r=t.width/i.width,n=t.height/i.height;return{x:(e.clientX-i.left)*r|0,y:(e.clientY-i.top)*n|0}}var xp={};class Ep{constructor(t){this.socket=t,this.closed=!1,this.closing=!1,this.delay=0,this.isaacIncoming=null,this.isaacOutgoing=null,this.length=0,this.maxReadTries=0,this.packet8Check=8,this.packetData=null,this.packetEnd=3,this.packetMaxLength=5e3,this.packetStart=0,this.readTries=0,this.socketException=!1,this.socketExceptionMessage=""}async readBytes(t,e){await this.readStreamBytes(t,0,e)}async readPacket(t){try{if(this.readTries++,this.maxReadTries>0&&this.readTries>this.maxReadTries)return this.socketException=!0,this.socketExceptionMessage="time-out",this.maxReadTries+=this.maxReadTries,0;if(0===this.length&&this.availableStream()>=2&&(this.length=await this.readStream(),this.length>=160&&(this.length=256*(this.length-160)+await this.readStream())),this.length>0&&this.availableStream()>=this.length){this.length>=160?await this.readBytes(this.length,t):(t[this.length-1]=255&await this.readStream(),this.length>1&&await this.readBytes(this.length-1,t));let e=this.length;return this.length=0,this.readTries=0,e}}catch(Kd){this.socketException=!0,this.socketExceptionMessage=Kd.message}return 0}hasPacket(){return this.packetStart>0}writePacket(t){if(this.socketException)throw this.packetStart=0,this.packetEnd=3,this.socketException=!1,new Error(this.socketExceptionMessage);this.delay++,this.delay<t||(this.packetStart>0&&(this.delay=0,this.writeStreamBytes(this.packetData,0,this.packetStart)),this.packetStart=0,this.packetEnd=3)}sendPacket(){if(null!==this.isaacOutgoing){let t=255&this.packetData[this.packetStart+2];this.packetData[this.packetStart+2]=t+this.isaacOutgoing.getNextValue()&255}8!==this.packet8Check&&this.packetEnd++;const t=this.packetEnd-this.packetStart-2;if(t>=160?(this.packetData[this.packetStart]=160+(t/256|0)&255,this.packetData[this.packetStart+1]=255&t):(this.packetData[this.packetStart]=255&t,this.packetEnd--,this.packetData[this.packetStart+1]=this.packetData[this.packetEnd]),this.packetMaxLength<=1e4){let t=255&this.packetData[this.packetStart+2];Ep.anIntArray537[t]++,Ep.anIntArray541[t]+=this.packetEnd-this.packetStart}this.packetStart=this.packetEnd}putBytes(t,e,i){for(let r=0;r<i;r++)this.packetData[this.packetEnd++]=255&t[e+r]}putLong(t){this.putInt(t.shiftRight(32).toInt()),this.putInt(t.toInt())}newPacket(t){if(this.packetStart>(4*this.packetMaxLength/5|0))try{this.writePacket(0)}catch(Kd){this.socketException=!0,this.socketExceptionMessage=Kd.message}null===this.packetData&&(this.packetData=new Int8Array(this.packetMaxLength)),this.packetData[this.packetStart+2]=255&t,this.packetData[this.packetStart+3]=0,this.packetEnd=this.packetStart+3,this.packet8Check=8}async getLong(){let t=await this.getShort(),e=await this.getShort(),i=await this.getShort(),r=await this.getShort();return xt.fromInt(t).shiftLeft(48).add(xt.fromInt(e).shiftLeft(32)).add(i<<16).add(r)}putShort(t){this.packetData[this.packetEnd++]=t>>8&255,this.packetData[this.packetEnd++]=255&t}putInt(t){this.packetData[this.packetEnd++]=t>>24&255,this.packetData[this.packetEnd++]=t>>16&255,this.packetData[this.packetEnd++]=t>>8&255,this.packetData[this.packetEnd++]=255&t}async getShort(){return 256*await this.getByte()+await this.getByte()}putString(t){this.putBytes(function(t){const e=new Uint16Array(t.length);for(let i=0;i<t.length;i+=1)e[i]=t.charCodeAt(i);return e}(t),0,t.length)}putByte(t){this.packetData[this.packetEnd++]=255&t}isaacCommand(t){return t}async getByte(){return 255&await this.readStream()}flushPacket(){this.sendPacket(),this.writePacket(0)}closeStream(){this.closing=!0,this.socket.close(),this.closed=!0}async readStream(){return this.closing?0:await this.socket.read()}availableStream(){return this.closing?0:this.socket.available()}async readStreamBytes(t,e,i){this.closing||await this.socket.readBytes(i,e,t)}writeStreamBytes(t,e,i){this.closing||this.socket.write(t,e,i)}}Ep.anIntArray537=new Int32Array(256),Ep.anIntArray541=new Int32Array(256),xp=Ep;var Bp={APPEARANCE:235,BANK_CLOSE:212,BANK_DEPOSIT:23,BANK_WITHDRAW:22,CAST_GROUND:158,CAST_GROUNDITEM:249,CAST_INVITEM:4,CAST_NPC:50,CAST_OBJECT:99,CAST_PLAYER:229,CAST_SELF:137,CAST_WALLOBJECT:180,CHANGE_PASSWORD:25,CHAT:216,CHOOSE_OPTION:116,CLOSE_CONNECTION:31,COMBAT_STYLE:29,COMMAND:38,DUEL_ACCEPT:176,DUEL_CONFIRM_ACCEPT:77,DUEL_DECLINE:197,DUEL_ITEM_UPDATE:33,DUEL_SETTINGS:8,FRIEND_ADD:195,FRIEND_REMOVE:167,GROUNDITEM_TAKE:247,IGNORE_ADD:132,IGNORE_REMOVE:241,INV_CMD:90,INV_DROP:246,INV_UNEQUIP:170,INV_WEAR:169,KNOWN_PLAYERS:163,LOGIN:0,LOGOUT:102,NPC_ATTACK:190,NPC_CMD:202,NPC_TALK:153,OBJECT_CMD1:136,OBJECT_CMD2:79,PACKET_EXCEPTION:3,PING:67,PLAYER_ATTACK:171,PLAYER_DUEL:103,PLAYER_FOLLOW:165,PLAYER_TRADE:142,PM:218,PRAYER_OFF:254,PRAYER_ON:60,RECOVER_CANCEL:196,RECOVER_GET_QUESTIONS:233,RECOVER_REQUEST:220,RECOVER_SET:208,RECOVER_SET_REQUEST:203,REGISTER:2,REPORT_ABUSE:206,SESSION:32,SETTINGS_GAME:111,SETTINGS_PRIVACY:64,SHOP_BUY:236,SHOP_CLOSE:166,SHOP_SELL:221,SLEEP_WORD:45,TRADE_ACCEPT:55,TRADE_CONFIRM_ACCEPT:104,TRADE_DECLINE:230,TRADE_ITEM_UPDATE:46,USEWITH_GROUNDITEM:53,USEWITH_INVITEM:91,USEWITH_NPC:135,USEWITH_OBJECT:115,USEWITH_PLAYER:113,USEWITH_WALLOBJECT:161,WALK:187,WALK_ACTION:16,WALL_OBJECT_COMMAND1:14,WALL_OBJECT_COMMAND2:127},Lp={};class Rp extends class{constructor(t){this._container=t,this._container.style.position="relative",this._canvas=document.createElement("canvas"),this._canvas.style.width="100%",this._canvas.style.height="100%",this._container.appendChild(this._canvas),this._graphics=new class{constructor(t){this.canvas=t,this.ctx=t.getContext("2d",{alpha:!1})}setColor(t){this.ctx.fillStyle=t.toCanvasStyle(),this.ctx.strokeStyle=t.toCanvasStyle()}fillRect(t,e,i,r){this.ctx.fillRect(t,e,i,r)}drawRect(t,e,i,r){this.ctx.strokeRect(t,e,i,r)}setFont(t){this.ctx.font=t.toCanvasFont()}drawString(t,e,i){this.ctx.fillText(t,e,i)}measureTextWidth(t){return this.ctx.measureText(t).width}drawImage(t,e,i){this.ctx.putImageData(t,e,i)}getImage(t,e){return this.ctx.getImageData(0,0,t,e)}}(this._canvas),this.options={middleClickCamera:!1,mouseWheel:!1,resetCompass:!1,zoomCamera:!1,showRoofs:!0,remainingExperience:!1,totalExperience:!1,wordFilter:!0,accountManagement:!0,fpsCounter:!1,retryLoginOnDisconnect:!0,mobile:!1},this.middleButtonDown=!1,this.mouseScrollDelta=0,this.mouseActionTimeout=0,this.logoHeaderText=null,this.mouseX=0,this.mouseY=0,this.mouseButtonDown=0,this.lastMouseButtonDown=0,this.timings=[],this.resetTimings(),this.stopTimeout=0,this.interlaceTimer=0,this.loadingProgressPercent=0,this.imageLogo=null,this.graphics=null,this.appletWidth=512,this.appletHeight=346,this.targetFPS=20,this.maxDrawTime=1e3,this.loadingStep=1,this.hasRefererLogoNotUsed=!1,this.loadingProgessText="Loading",this.fontTimesRoman15=new kt("Times New Roman",0,15),this.fontHelvetica13b=new kt("Helvetica",kt.BOLD,13),this.fontHelvetica12=new kt("Helvetica",0,12),this.keyLeft=!1,this.keyRight=!1,this.keyUp=!1,this.keyDown=!1,this.keySpace=!1,this.keyHome=!1,this.keyPgUp=!1,this.keyPgDown=!1,this.ctrl=!1,this.threadSleep=1,this.interlace=!1,this.inputTextCurrent="",this.inputTextFinal="",this.inputPMCurrent="",this.inputPMFinal=""}async startApplication(t,e,i){window.document.title=i,this._canvas.tabIndex=0,this._canvas.width=t,this._canvas.height=e,this._container.style.width=t+"px",this._container.style.height=e+"px",console.log("Started application"),this.appletWidth=t,this.appletHeight=e,this.options.mobile?(this._canvas.addEventListener("touchstart",t=>{console.log("touchstart"),1===t.touches.length&&(clearTimeout(this.rightClickTimeout),this.rightClickTimeout=setTimeout(()=>{this.disableEndClick=!0,t={button:2,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY},this.mousePressed(t),this.mouseReleased(t)},500))}),this._canvas.addEventListener("touchmove",t=>{console.log("touchmoving"),this.touchMoving?this.mouseMoved({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}):(clearTimeout(this.rightClickTimeout),this.mousePressed({button:1,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchMoving=!0)}),this._canvas.addEventListener("touchend",t=>{t.preventDefault(),console.log("touchend"),this.disableEndClick?this.disableEndClick=!1:(clearTimeout(this.rightClickTimeout),t={button:this.touchMoving?1:0,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},this.touchMoving?this.touchMoving=!1:this.mousePressed(t),this.mouseReleased(t))})):(this._canvas.addEventListener("mousedown",this.mousePressed.bind(this)),window.addEventListener("mousemove",this.mouseMoved.bind(this)),window.addEventListener("mouseup",this.mouseReleased.bind(this))),this._canvas.addEventListener("wheel",this.mouseWheel.bind(this)),this._canvas.addEventListener("contextmenu",t=>(t.preventDefault(),!1)),this._canvas.addEventListener("keydown",this.keyPressed.bind(this)),this._canvas.addEventListener("keyup",this.keyReleased.bind(this)),window.addEventListener("beforeunload",()=>this.onClosing()),this.options.mobile&&(this.toggleKeyboard=!1,this.mobileInput=document.createElement("input"),Object.assign(this.mobileInput.style,Tp),this.mobilePassword=document.createElement("input"),this.mobilePassword.type="password",Object.assign(this.mobilePassword.style,Tp),this.mobileInput.addEventListener("keydown",this.mobileKeyDown.bind(this)),this.mobilePassword.addEventListener("keydown",this.mobileKeyDown.bind(this)),this.mobileInput.addEventListener("blur",this.closeKeyboard.bind(this)),this.mobilePassword.addEventListener("blur",this.closeKeyboard.bind(this)),this._container.appendChild(this.mobileInput),this._container.appendChild(this.mobilePassword)),this.loadingStep=1,await this.run()}closeKeyboard(){clearInterval(this.keyboardUpdateInterval),this.mobileInputEl.style.display="none",this._canvas.focus()}openKeyboard(t="text",e,i,r){this.mobileInputCaret=-1,this.lastMobileInput=e,this.toggleKeyboard=!0,this.mobileInputEl="password"===t?this.mobilePassword:this.mobileInput,this.mobileInputEl.value=e,this.mobileInputEl.maxLength=i,this.mobileInputEl.style.display="block";for(const[n,s]of Object.entries(r))this.mobileInputEl.style[n]=s;this.keyboardUpdateInterval=setInterval(()=>{this.mobileKeyboardUpdate()},125)}mobileKeyDown(t){t.keyCode===ep&&(this.closeKeyboard(),this.keyPressed(t))}mobileKeyboardUpdate(){this.mobileInputCaret=this.mobileInputEl.selectionStart;const t=this.mobileInputEl.value;if(t!==this.lastMobileInput){for(let t=0;t<this.lastMobileInput.length;t+=1)this.keyPressed({keyCode:tp});for(let e=0;e<t.length;e+=1)this.keyPressed({key:t[e]});this.lastMobileInput=t}}keyPressed(t){const e=t.keyCode;let i=t.key&&1===t.key.length?t.key.charCodeAt(0):65535;t.preventDefault&&t.preventDefault(),[8,10,13,9].includes(e)&&(i=e),this.handleKeyPress(i),e===hp?this.keyLeft=!0:e===up?this.keyRight=!0:e===ap?this.keyUp=!0:e===lp?this.keyDown=!0:e===ip?this.keySpace=!0:e===cp?this.interlace=!this.interlace:e===op?this.keyHome=!0:e===np?this.keyPgUp=!0:e===sp?this.keyPgDown=!0:e===rp&&(this.ctrl=!0);let r=!1;for(let n=0;n<Cp.length;n++)if(Cp.charCodeAt(n)===i){r=!0;break}r&&(this.inputTextCurrent.length<20&&(this.inputTextCurrent+=String.fromCharCode(i)),this.inputPMCurrent.length<80&&(this.inputPMCurrent+=String.fromCharCode(i))),e===ep?(this.inputTextFinal=this.inputTextCurrent,this.inputPMFinal=this.inputPMCurrent):e===tp&&(this.inputTextCurrent.length>0&&(this.inputTextCurrent=this.inputTextCurrent.substring(0,this.inputTextCurrent.length-1)),this.inputPMCurrent.length>0&&(this.inputPMCurrent=this.inputPMCurrent.substring(0,this.inputPMCurrent.length-1))),this.options.mobile&&setTimeout(()=>{this.toggleKeyboard&&(this.toggleKeyboard=!1,this.mobileInputEl.focus())},125)}keyReleased(t){t.preventDefault();const e=t.keyCode;e===hp?this.keyLeft=!1:e===up?this.keyRight=!1:e===ap?this.keyUp=!1:e===lp?this.keyDown=!1:e===ip?this.keySpace=!1:e===op?this.keyHome=!1:e===np?this.keyPgUp=!1:e===sp?this.keyPgDown=!1:e===rp&&(this.ctrl=!1)}mouseMoved(t){const{x:e,y:i}=Ap(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseActionTimeout=0}mouseReleased(t){const{x:e,y:i}=Ap(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseButtonDown=0,1===t.button&&(this.middleButtonDown=!1)}mouseOut(t){const{x:e,y:i}=Ap(this._canvas,t);this.mouseX=e,this.mouseY=i,this.mouseButtonDown=0,this.middleButtonDown=!1}mousePressed(t){1===t.button&&t.preventDefault&&t.preventDefault(),this.options.mobile&&setTimeout(()=>{this.toggleKeyboard&&(this.toggleKeyboard=!1,this.mobileInputEl.focus())},125);const{x:e,y:i}=Ap(this._canvas,t);if(this.mouseX=e,this.mouseY=i,this.options.middleClickCamera&&1===t.button)return this.middleButtonDown=!0,this.originRotation=this.cameraRotation,void(this.originMouseX=this.mouseX);t.metaKey||2===t.button?this.mouseButtonDown=2:this.mouseButtonDown=1,this.lastMouseButtonDown=this.mouseButtonDown,this.mouseActionTimeout=0,this.handleMouseDown(this.mouseButtonDown,e,i)}mouseWheel(t){if(this.options.mouseWheel&&document.activeElement===this._canvas)return t.preventDefault(),0===t.deltaMode?this.mouseScrollDelta=Math.floor(t.deltaY/14):1===t.deltaMode&&(this.mouseScrollDelta=Math.floor(t.deltaY)),!1}setTargetFps(t){this.targetFPS=1e3/t}resetTimings(){for(let t=0;t<10;t+=1)this.timings[t]=0}start(){this.stopTimeout>=0&&(this.stopTimeout=0)}stop(){this.stopTimeout>=0&&(this.stopTimeout=4e3/this.targetFPS)}async run(){1===this.loadingStep&&(this.loadingStep=2,this.graphics=this.getGraphics(),await this.loadJagex(),this.drawLoadingScreen(0,"Loading..."),await this.startGame(),this.loadingStep=0);let t=0,e=256,i=1,r=0;for(let n=0;n<10;n++)this.timings[n]=Date.now();for(;this.stopTimeout>=0;){if(this.stopTimeout>0&&(this.stopTimeout--,0===this.stopTimeout))return void this.onClosing();const n=e,s=i;e=300,i=1;const o=Date.now();if(0===this.timings[t]?(e=n,i=s):o>this.timings[t]&&(e=2560*this.targetFPS/(o-this.timings[t])|0),e<25&&(e=25),e>256&&(e=256,(i=this.targetFPS-(o-this.timings[t])/10|0)<this.threadSleep&&(i=this.threadSleep)),await Ip(i),this.timings[t]=o,t=(t+1)%10,i>1)for(let t=0;t<10;t++)0!==this.timings[t]&&(this.timings[t]+=i);let h=0;for(;r<256;)if(await this.handleInputs(),r+=e,++h>this.maxDrawTime){r=0,this.interlaceTimer+=6,this.interlaceTimer>25&&(this.interlaceTimer=0,this.interlace=!0);break}this.interlaceTimer--,r&=255,this.draw(),this.fps=1e3*e/(256*this.targetFPS),this.mouseScrollDelta=0}}async loadJagex(){this.graphics.setColor(It.black),this.graphics.fillRect(0,0,this.appletWidth,this.appletHeight);const t=await this.readDataFile("jagex.jag","Jagex library",0);if(t){const e=Ud.loadData("logo.tga",0,t);this.imageLogo=this.parseTGA(e)}const e=await this.readDataFile(`fonts${gp}.jag`,"Game fonts",5);if(t)for(let i=0;i<kp.length;i+=1){const t=kp[i];Jd.createFont(Ud.loadData(t,0,e),i)}}drawLoadingScreen(t,e){let i=(this.appletWidth-281)/2|0,r=(this.appletHeight-148)/2|0;this.graphics.setColor(It.black),this.graphics.fillRect(0,0,this.appletWidth,this.appletHeight),this.hasRefererLogoNotUsed||this.graphics.drawImage(this.imageLogo,i,r),i+=2,r+=90,this.loadingProgressPercent=t,this.loadingProgessText=e,this.graphics.setColor(new It(132,132,132)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new It(220,0,0)),this.graphics.drawRect(i-2,r-2,280,23),this.graphics.fillRect(i,r,277*t/100|0,20),this.graphics.setColor(new It(198,198,198)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new It(255,255,255)),this.drawString(this.graphics,e,this.fontTimesRoman15,i+138,r+10),this.hasRefererLogoNotUsed?(this.graphics.setColor(new It(132,132,152)),this.drawString(this.graphics,"\xa92001-2002 Andrew Gower and Jagex Ltd",this.fontHelvetica12,i+138,this.appletHeight-20)):(this.drawString(this.graphics,"Created by JAGeX - visit www.jagex.com",this.fontHelvetica13b,i+138,r+30),this.drawString(this.graphics,"\xa92001-2002 Andrew Gower and Jagex Ltd",this.fontHelvetica13b,i+138,r+44)),this.logoHeaderText&&(this.graphics.setColor(It.white),this.drawString(this.graphics,this.logoHeaderText,this.fontHelvetica13b,i+138,r-120))}showLoadingProgress(t,e){const i=2+((this.appletWidth-281)/2|0),r=90+((this.appletHeight-148)/2|0);this.loadingProgressPercent=t,this.loadingProgessText=e,this.graphics.setColor(new It(132,132,132)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new It(220,0,0));const n=277*t/100|0;this.graphics.fillRect(i,r,n,20),this.graphics.setColor(It.black),this.graphics.fillRect(i+n,r,277-n,20),this.graphics.setColor(new It(198,198,198)),this.hasRefererLogoNotUsed&&this.graphics.setColor(new It(255,255,255)),this.drawString(this.graphics,e,this.fontTimesRoman15,i+138,r+10)}drawString(t,e,i,r,n){t.setFont(i);const{width:s,height:o}=t.ctx.measureText(e);t.drawString(e,r-(s/2|0),n+(o/4|0))}parseTGA(t){const e=new Qd;e.load(new Uint8Array(t.buffer));const i=e.getCanvas();return i.getContext("2d").getImageData(0,0,i.width,i.height)}async readDataFile(t,e,i){t="./data204/"+t,this.showLoadingProgress(i,`Loading ${e} - 0%`);const r=Ud.openFile(t),n=new Int8Array(6);await r.readFully(n,0,6);const s=((255&n[0])<<16)+((255&n[1])<<8)+(255&n[2]),o=((255&n[3])<<16)+((255&n[4])<<8)+(255&n[5]);this.showLoadingProgress(i,`Loading ${e} - 5%`);let h=0;const a=new Int8Array(o);for(;h<o;){let t=o-h;t>1e3&&(t=1e3),await r.readFully(a,h,t),h+=t,this.showLoadingProgress(i,`Loading ${e} - `+(5+95*h/o|0)+"%")}if(this.showLoadingProgress(i,"Unpacking "+e),o!==s){const t=new Int8Array(s);return zi.decompress(t,s,a,o,0),t}return a}getGraphics(){return this._graphics}async createSocket(t,e){const i=new Yd(t,e);return await i.connect(),i}}{constructor(t){super(t),this.friendListCount=0,this.ignoreListCount=0,this.settingsBlockChat=0,this.settingsBlockPrivate=0,this.settingsBlockTrade=0,this.settingsBlockDuel=0,this.sessionID=new xt(0),this.worldFullTimeout=0,this.moderatorLevel=0,this.autoLoginTimeout=0,this.packetLastRead=0,this.messageIndex=0,this.server="127.0.0.1",this.port=43594,this.username="",this.password="",this.incomingPacket=new Int8Array(5e3),this.friendListOnline=new Int32Array(200),this.friendListHashes=[];for(let e=0;e<200;e+=1)this.friendListHashes.push(new xt(0));this.ignoreList=[];for(let e=0;e<Rp.maxSocialListSize;e+=1)this.ignoreList.push(new xt(0));this.messageTokens=new Int32Array(Rp.maxSocialListSize)}async register(t,e){if(this.worldFullTimeout>0)return this.showLoginScreenStatus("Please wait...","Connecting to server"),await Ip(2e3),void this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later");try{t=Ud.formatAuthString(t,20),e=Ud.formatAuthString(e,20),this.showLoginScreenStatus("Please wait...","Connecting to server"),this.packetStream=new xp(await this.createSocket(this.server,this.port),this);const i=Ud.usernameToHash(t);this.packetStream.newPacket(Bp.SESSION),this.packetStream.putByte(i.shiftRight(16).and(31).toInt()),this.packetStream.flushPacket();const r=await this.packetStream.getLong();if(this.sessionID=r,r.equals(0))return void this.showLoginScreenStatus("Login server offline.","Please try again in a few mins");console.log("Verb: Session id: "+r),this.packetStream.newPacket(Bp.REGISTER),this.packetStream.putShort(Rp.clientVersion),this.packetStream.putString(t),this.packetStream.putString(e),this.packetStream.flushPacket();const n=await this.packetStream.readStream();switch(this.packetStream.closeStream(),console.log("Newplayer response: "+n),n){case 2:return void this.resetLoginVars();case 13:case 3:return void this.showLoginScreenStatus("Username already taken.","Please choose another username");case 4:return void this.showLoginScreenStatus("That username is already in use.","Wait 60 seconds then retry");case 5:return void this.showLoginScreenStatus("The client has been updated.","Please reload this page");case 6:return void this.showLoginScreenStatus("You may only use 1 character at once.","Your ip-address is already in use");case 7:return void this.showLoginScreenStatus("Login attempts exceeded!","Please try again in 5 minutes");case 11:return void this.showLoginScreenStatus("Account has been temporarily disabled","for cheating or abuse");case 12:return void this.showLoginScreenStatus("Account has been permanently disabled","for cheating or abuse");case 14:return this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later"),void(this.worldFullTimeout=1500);case 15:return void this.showLoginScreenStatus("You need a members account","to login to this server");case 16:return void this.showLoginScreenStatus("Please login to a members server","to access member-only features");default:return void this.showLoginScreenStatus("Error unable to create username.","Unrecognised response code")}}catch(Kd){console.error(Kd),this.showLoginScreenStatus("Error unable to create user.","Unrecognised response code")}}async login(t,e,i){if(this.worldFullTimeout>0)return this.showLoginScreenStatus("Please wait...","Connecting to server"),await Ip(2e3),void this.showLoginScreenStatus("Sorry! The server is currently full.","Please try again later");try{if(this.username=t,t=Ud.formatAuthString(t,20),this.password=e,e=Ud.formatAuthString(e,20),0===t.trim().length)return void this.showLoginScreenStatus("You must enter both a username","and a password - Please try again");i?this.drawTextBox("Connection lost! Please wait...","Attempting to re-establish"):this.showLoginScreenStatus("Please wait...","Connecting to server"),this.packetStream=new xp(await this.createSocket(this.server,this.port),this),this.packetStream.maxReadTries=Rp.maxReadTries,this.packetStream.newPacket(Bp.SESSION);const r=Ud.usernameToHash(t);this.packetStream.putByte(r.shiftRight(16).and(31).toInt()),this.packetStream.flushPacket();const n=await this.packetStream.getLong();if(this.sessionID=n,n.equals(0))return void this.showLoginScreenStatus("Login server offline.","Please try again in a few mins");console.log("Verb: Session id: "+n);const s=new Int32Array(4);s[0]=99999999*Math.random()|0,s[1]=99999999*Math.random()|0,s[2]=n.shiftRight(32).toInt(),s[3]=n.toInt(),this.packetStream.newPacket(Bp.LOGIN),this.packetStream.putByte(+i),this.packetStream.putShort(Rp.clientVersion),this.packetStream.putByte(0),this.packetStream.putByte(10),this.packetStream.putInt(s[0]),this.packetStream.putInt(s[1]),this.packetStream.putInt(s[2]),this.packetStream.putInt(s[3]),this.packetStream.putInt(0),this.packetStream.putString(t),this.packetStream.putString(e),this.packetStream.flushPacket();const o=await this.packetStream.readStream();if(console.log("login response:"+o),25===o)return this.moderatorLevel=1,this.autoLoginTimeout=0,void this.resetGame();if(0===o)return this.moderatorLevel=0,this.autoLoginTimeout=0,void this.resetGame();if(1===o)return void(this.autoLoginTimeout=0);if(i)return t="",e="",void this.resetLoginVars();switch(o){case-1:return void this.showLoginScreenStatus("Error unable to login.","Server timed out");case 3:return void this.showLoginScreenStatus("Invalid username or password.","Try again, or create a new account");case 4:return void this.showLoginScreenStatus("That username is already logged in.","Wait 60 seconds then retry");case 5:return void this.showLoginScreenStatus("The client has been updated.","Please reload this page");case 6:return void this.showLoginScreenStatus("You may only use 1 character at once.","Your ip-address is already in use");case 7:return void this.showLoginScreenStatus("Login attempts exceeded!","Please try again in 5 minutes");case 8:return void this.showLoginScreenStatus("Error unable to login.","Server rejected session");case 9:return void this.showLoginScreenStatus("Error unable to login.","Loginserver rejected session");case 10:return void this.showLoginScreenStatus("That username is already in use.","Wait 60 seconds then retry");case 11:return void this.showLoginScreenStatus("Account temporarily disabled.","Check your message inbox for details");case 12:return void this.showLoginScreenStatus("Account permanently disabled.","Check your message inbox for details");case 14:return this.showLoginScreenStatus("Sorry! This world is currently full.","Please try a different world"),void(this.worldFullTimeout=1500);case 15:return void this.showLoginScreenStatus("You need a members account","to login to this world");case 16:return void this.showLoginScreenStatus("Error - no reply from loginserver.","Please try again");case 17:return void this.showLoginScreenStatus("Error - failed to decode profile.","Contact customer support");case 18:return void this.showLoginScreenStatus("Account suspected stolen.","Press 'recover a locked account' on front page.");case 20:return void this.showLoginScreenStatus("Error - loginserver mismatch","Please try a different world");case 21:return void this.showLoginScreenStatus("Unable to login.","That is not an RS-Classic account");case 22:return void this.showLoginScreenStatus("Password suspected stolen.","Press 'change your password' on front page.");default:return void this.showLoginScreenStatus("Error unable to login.","Unrecognised response code")}}catch(Kd){console.error(Kd)}this.autoLoginTimeout>0&&(await Ip(5e3),this.autoLoginTimeout--,await this.login(this.username,this.password,i)),i?(this.username="",this.password="",this.resetLoginVars()):this.showLoginScreenStatus("Sorry! Unable to connect.","Check internet settings or try another world")}async recoverAttempt(t){this.showLoginScreenStatus("Please wait...","Connecting to server");try{this.packetStream=new xp(await this.createSocket(this.server,this.port),this),this.packetStream.maxReadTries=this.maxReadTries,this.packetStream.newPacket(),this.packetStream.putLong(Ud.usernameToHash(t)),this.packetStream.flushPacket();const i=await this.packetStream.readStream();if(console.log("Getpq response: "+i),0===i)return void this.showLoginScreenStatus("Sorry, the recovery questions for this user have not been set","");for(let t=0;t<5;t++){const i=await this.packetStream.readStream();if(i<0)throw new Error("invalid recovery question length");const r=new Int8Array(i);await this.packetStream.readBytes(i,r);const n=(e=r.slice(0,i),Array.from(e).map(t=>String.fromCharCode(t)).join(""));this.panelRecoverUser.updateText(this.controlRecoverQuestions[t],n)}if(this.recentRecoverFail)return void this.showLoginScreenStatus("Sorry, you have already attempted 1 recovery, try again later","");this.loginScreen=3,this.panelRecoverUser.updateText(this.controlRecoverInfo1,"@yel@To prove this is your account please provide the answers to"),this.panelRecoverUser.updateText(this.controlRecoverInfo2,"@yel@your security questions. You will then be able to reset your password");for(let t=0;t<5;t++)this.panelRecoverUser.updateText(this.controlRecoverAnswers[t],"");this.panelRecoverUser.updateText(this.controlRecoverOldPassword,""),this.panelRecoverUser.updateText(this.controlRecoverNewPassword,""),this.panelRecoverUser.updateText(this.controlRecoverConfirmPassword,"")}catch(Kd){return console.error(Kd),void this.showLoginScreenStatus("Sorry! Unable to connect.","Check leternet settings or try another world")}var e}closeConnection(){if(null!==this.packetStream)try{this.packetStream.newPacket(Bp.CLOSE_CONNECTION),this.packetStream.flushPacket()}catch(Kd){console.error(Kd)}this.username="",this.password="",this.resetLoginVars()}async lostConnection(){try{throw new Error("")}catch(Kd){console.error(Kd)}this.options.retryLoginOnDisconnect&&(this.autoLoginTimeout=10),await this.login(this.username,this.password,!0)}drawTextBox(t,e){const i=this.getGraphics(),r=new kt("Helvetica",1,15);i.setColor(It.black),i.fillRect(116,147,280,50),i.setColor(It.white),i.drawRect(116,147,280,50),this.drawString(i,t,r,256,162),this.drawString(i,e,r,256,182)}async checkConnection(){const t=Date.now();this.packetStream.hasPacket()&&(this.packetLastRead=t),t-this.packetLastRead>5e3&&(this.packetLastRead=t,this.packetStream.newPacket(Bp.PING),this.packetStream.sendPacket());try{this.packetStream.writePacket(20)}catch(Kd){return void await this.lostConnection()}const e=await this.packetStream.readPacket(this.incomingPacket);if(e>0){const t=this.packetStream.isaacCommand(255&this.incomingPacket[0]);this.handleIncomingPacket(t,e,this.incomingPacket)}}sortFriendsList(){let t=!0;for(;t;){t=!1;for(let e=0;e<this.friendListCount-1;e++)if(255!==this.friendListOnline[e]&&255===this.friendListOnline[e+1]||0===this.friendListOnline[e]&&0!==this.friendListOnline[e+1]){const i=this.friendListOnline[e];this.friendListOnline[e]=this.friendListOnline[e+1],this.friendListOnline[e+1]=i;const r=this.friendListHashes[e];this.friendListHashes[e]=this.friendListHashes[e+1],this.friendListHashes[e+1]=r,t=!0}}}sendPrivacySettings(t,e,i,r){this.packetStream.newPacket(Bp.SETTINGS_PRIVACY),this.packetStream.putByte(t),this.packetStream.putByte(e),this.packetStream.putByte(i),this.packetStream.putByte(r),this.packetStream.sendPacket()}ignoreAdd(t){const e=Ud.usernameToHash(t);this.packetStream.newPacket(Bp.IGNORE_ADD),this.packetStream.putLong(e),this.packetStream.sendPacket();for(let i=0;i<this.ignoreListCount;i++)if(this.ignoreList[i].equals(e))return;return this.ignoreListCount>=Rp.maxSocialListSize?void 0:void(this.ignoreList[this.ignoreListCount++]=e)}ignoreRemove(t){this.packetStream.newPacket(Bp.IGNORE_REMOVE),this.packetStream.putLong(t),this.packetStream.sendPacket();for(let e=0;e<this.ignoreListCount;e++)if(this.ignoreList[e].equals(t)){this.ignoreListCount--;for(let t=e;t<this.ignoreListCount;t++)this.ignoreList[t]=this.ignoreList[t+1];return}}friendAdd(t){this.packetStream.newPacket(Bp.FRIEND_ADD),this.packetStream.putLong(Ud.usernameToHash(t)),this.packetStream.sendPacket();const e=Ud.usernameToHash(t);for(let i=0;i<this.friendListCount;i++)if(this.friendListHashes[i].equals(e))return;return this.friendListCount>=Rp.maxSocialListSize?void 0:(this.friendListHashes[this.friendListCount]=e,this.friendListOnline[this.friendListCount]=0,void this.friendListCount++)}friendRemove(t){this.packetStream.newPacket(Bp.FRIEND_REMOVE),this.packetStream.putLong(t),this.packetStream.sendPacket();for(let e=0;e<this.friendListCount;e++)if(this.friendListHashes[e].equals(t)){this.friendListCount--;for(let t=e;t<this.friendListCount;t++)this.friendListHashes[t]=this.friendListHashes[t+1],this.friendListOnline[t]=this.friendListOnline[t+1];break}this.showServerMessage(`@pri@${Ud.hashToUsername(t)} has been removed from your friends list`)}sendPrivateMessage(t,e,i){this.packetStream.newPacket(Bp.PM),this.packetStream.putLong(t),this.packetStream.putBytes(e,0,i),this.packetStream.sendPacket()}sendChatMessage(t,e){this.packetStream.newPacket(Bp.CHAT),this.packetStream.putBytes(t,0,e),this.packetStream.sendPacket()}sendCommandString(t){this.packetStream.newPacket(Bp.COMMAND),this.packetStream.putString(t),this.packetStream.sendPacket()}}Rp.clientVersion=1,Rp.maxReadTries=0,Rp.maxSocialListSize=100,Lp=Rp;function Pp(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Op="undefined"!=typeof Float64Array;function jp(t,e){return t[0]-e[0]}function Dp(){var t,e=this.stride,i=new Array(e.length);for(t=0;t<i.length;++t)i[t]=[Math.abs(e[t]),t];i.sort(jp);var r=new Array(i.length);for(t=0;t<r.length;++t)r[t]=i[t][1];return r}function Yp(t,e){var i=["View",e,"d",t].join("");e<0&&(i="View_Nil"+t);var r="generic"===t;if(-1===e){var n="function "+i+"(a){this.data=a;};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+i+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+i+"(a){return new "+i+"(a);}";return new Function(n)()}if(0===e)return n="function "+i+"(a,d) {this.data = a;this.offset = d};var proto="+i+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+i+"_copy() {return new "+i+"(this.data,this.offset)};proto.pick=function "+i+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+i+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+i+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+i+"(a,b,c,d){return new "+i+"(a,d)}",new Function("TrivialArray",n)(Up[t][0]);n=["'use strict'"];var s=function(t){for(var e=new Array(t),i=0;i<t;++i)e[i]=i;return e}(e),o=s.map((function(t){return"i"+t})),h="this.offset+"+s.map((function(t){return"this.stride["+t+"]*i"+t})).join("+"),a=s.map((function(t){return"b"+t})).join(","),u=s.map((function(t){return"c"+t})).join(",");n.push("function "+i+"(a,"+a+","+u+",d){this.data=a","this.shape=["+a+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+i+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),n.push("Object.defineProperty(proto,'size',{get:function "+i+"_size(){return "+s.map((function(t){return"this.shape["+t+"]"})).join("*"),"}})"),1===e?n.push("proto.order=[0]"):(n.push("Object.defineProperty(proto,'order',{get:"),e<4?(n.push("function "+i+"_order(){"),2===e?n.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&n.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):n.push("ORDER})")),n.push("proto.set=function "+i+"_set("+o.join(",")+",v){"),r?n.push("return this.data.set("+h+",v)}"):n.push("return this.data["+h+"]=v}"),n.push("proto.get=function "+i+"_get("+o.join(",")+"){"),r?n.push("return this.data.get("+h+")}"):n.push("return this.data["+h+"]}"),n.push("proto.index=function "+i+"_index(",o.join(),"){return "+h+"}"),n.push("proto.hi=function "+i+"_hi("+o.join(",")+"){return new "+i+"(this.data,"+s.map((function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")})).join(",")+","+s.map((function(t){return"this.stride["+t+"]"})).join(",")+",this.offset)}");var l=s.map((function(t){return"a"+t+"=this.shape["+t+"]"})),c=s.map((function(t){return"c"+t+"=this.stride["+t+"]"}));n.push("proto.lo=function "+i+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+c.join(","));for(var f=0;f<e;++f)n.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");for(n.push("return new "+i+"(this.data,"+s.map((function(t){return"a"+t})).join(",")+","+s.map((function(t){return"c"+t})).join(",")+",b)}"),n.push("proto.step=function "+i+"_step("+o.join(",")+"){var "+s.map((function(t){return"a"+t+"=this.shape["+t+"]"})).join(",")+","+s.map((function(t){return"b"+t+"=this.stride["+t+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil"),f=0;f<e;++f)n.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");n.push("return new "+i+"(this.data,"+s.map((function(t){return"a"+t})).join(",")+","+s.map((function(t){return"b"+t})).join(",")+",c)}");var d=new Array(e),p=new Array(e);for(f=0;f<e;++f)d[f]="a[i"+f+"]",p[f]="b[i"+f+"]";for(n.push("proto.transpose=function "+i+"_transpose("+o+"){"+o.map((function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+i+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),n.push("proto.pick=function "+i+"_pick("+o+"){var a=[],b=[],c=this.offset"),f=0;f<e;++f)n.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return n.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),n.push("return function construct_"+i+"(data,shape,stride,offset){return new "+i+"(data,"+s.map((function(t){return"shape["+t+"]"})).join(",")+","+s.map((function(t){return"stride["+t+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",n.join("\n"))(Up[t],Dp)}var Up={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]},Xp=function(t,e,i,r){if(void 0===t)return(0,Up.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var n=e.length;if(void 0===i){i=new Array(n);for(var s=n-1,o=1;s>=0;--s)i[s]=o,o*=e[s]}if(void 0===r)for(r=0,s=0;s<n;++s)i[s]<0&&(r-=(e[s]-1)*i[s]);for(var h=function(t){if(null!=(e=t)&&(Pp(e)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Pp(t.slice(0,0))}(e)||e._isBuffer))return"buffer";var e;if(Op)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),a=Up[h];a.length<=n+1;)a.push(Yp(h,a.length-1));return(0,a[n+1])(t,e,i,r)},Np={};class Fp{static getModelIndex(t){if(/^na$/i.test(t))return 0;for(let e=0;e<Fp.modelCount;e++)if(Fp.modelName[e].toLowerCase()===t.toLowerCase())return e;return Fp.modelName[Fp.modelCount++]=t,Fp.modelCount-1}static getUnsignedByte(){let t=255&Fp.dataInteger[Fp.offset];return Fp.offset++,t}static getUnsignedShort(){let t=Ud.getUnsignedShort(Fp.dataInteger,Fp.offset);return Fp.offset+=2,t}static getUnsignedInt(){let t=Ud.getUnsignedInt(Fp.dataInteger,Fp.offset);return Fp.offset+=4,t>99999999&&(t=99999999-t),t}static getString(){let t="";for(t="";0!==Fp.dataString[Fp.stringOffset];t+=String.fromCharCode(Fp.dataString[Fp.stringOffset++]));return Fp.stringOffset++,t}static loadData(t,e){Fp.dataString=Ud.loadData("string.dat",0,t),Fp.stringOffset=0,Fp.dataInteger=Ud.loadData("integer.dat",0,t),Fp.offset=0;let i=0;for(Fp.itemCount=Fp.getUnsignedShort(),Fp.itemName=[],Fp.itemDescription=[],Fp.itemCommand=[],Fp.itemPicture=new Int32Array(Fp.itemCount),Fp.itemBasePrice=new Int32Array(Fp.itemCount),Fp.itemStackable=new Int32Array(Fp.itemCount),Fp.itemUnused=new Int32Array(Fp.itemCount),Fp.itemWearable=new Int32Array(Fp.itemCount),Fp.itemMask=new Int32Array(Fp.itemCount),Fp.itemSpecial=new Int32Array(Fp.itemCount),Fp.itemMembers=new Int32Array(Fp.itemCount),i=0;i<Fp.itemCount;i++)Fp.itemName.push(Fp.getString());for(i=0;i<Fp.itemCount;i++)Fp.itemDescription.push(Fp.getString());for(i=0;i<Fp.itemCount;i++)Fp.itemCommand.push(Fp.getString());for(i=0;i<Fp.itemCount;i++)Fp.itemPicture[i]=Fp.getUnsignedShort(),Fp.itemPicture[i]+1>Fp.itemSpriteCount&&(Fp.itemSpriteCount=Fp.itemPicture[i]+1);for(i=0;i<Fp.itemCount;i++)Fp.itemBasePrice[i]=Fp.getUnsignedInt();for(i=0;i<Fp.itemCount;i++)Fp.itemStackable[i]=Fp.getUnsignedByte();for(i=0;i<Fp.itemCount;i++)Fp.itemUnused[i]=Fp.getUnsignedByte();for(i=0;i<Fp.itemCount;i++)Fp.itemWearable[i]=Fp.getUnsignedShort();for(i=0;i<Fp.itemCount;i++)Fp.itemMask[i]=Fp.getUnsignedInt();for(i=0;i<Fp.itemCount;i++)Fp.itemSpecial[i]=Fp.getUnsignedByte();for(i=0;i<Fp.itemCount;i++)Fp.itemMembers[i]=Fp.getUnsignedByte();for(i=0;i<Fp.itemCount;i++)e||1!==Fp.itemMembers[i]||(Fp.itemName[i]="Members object",Fp.itemDescription[i]="You need to be a member to use this object",Fp.itemBasePrice[i]=0,Fp.itemCommand[i]="",Fp.itemUnused[0]=0,Fp.itemWearable[i]=0,Fp.itemSpecial[i]=1);for(Fp.npcCount=Fp.getUnsignedShort(),Fp.npcName=[],Fp.npcDescription=[],Fp.npcCommand=[],Fp.npcAttack=new Int32Array(Fp.npcCount),Fp.npcStrength=new Int32Array(Fp.npcCount),Fp.npcHits=new Int32Array(Fp.npcCount),Fp.npcDefense=new Int32Array(Fp.npcCount),Fp.npcAttackable=new Int32Array(Fp.npcCount),Fp.npcSprite=Xp(new Int32Array(12*Fp.npcCount),[Fp.npcCount,12]),Fp.npcColourHair=new Int32Array(Fp.npcCount),Fp.npcColourTop=new Int32Array(Fp.npcCount),Fp.npcColorBottom=new Int32Array(Fp.npcCount),Fp.npcColourSkin=new Int32Array(Fp.npcCount),Fp.npcWidth=new Int32Array(Fp.npcCount),Fp.npcHeight=new Int32Array(Fp.npcCount),Fp.npcWalkModel=new Int32Array(Fp.npcCount),Fp.npcCombatModel=new Int32Array(Fp.npcCount),Fp.npcCombatAnimation=new Int32Array(Fp.npcCount),i=0;i<Fp.npcCount;i++)Fp.npcName.push(Fp.getString());for(i=0;i<Fp.npcCount;i++)Fp.npcDescription.push(Fp.getString());for(i=0;i<Fp.npcCount;i++)Fp.npcAttack[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcStrength[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcHits[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcDefense[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcAttackable[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)for(let t=0;t<12;t++)Fp.npcSprite.set(i,t,Fp.getUnsignedByte()),255===Fp.npcSprite.get(i,t)&&Fp.npcSprite.set(i,t,-1);for(i=0;i<Fp.npcCount;i++)Fp.npcColourHair[i]=Fp.getUnsignedInt();for(i=0;i<Fp.npcCount;i++)Fp.npcColourTop[i]=Fp.getUnsignedInt();for(i=0;i<Fp.npcCount;i++)Fp.npcColorBottom[i]=Fp.getUnsignedInt();for(i=0;i<Fp.npcCount;i++)Fp.npcColourSkin[i]=Fp.getUnsignedInt();for(i=0;i<Fp.npcCount;i++)Fp.npcWidth[i]=Fp.getUnsignedShort();for(i=0;i<Fp.npcCount;i++)Fp.npcHeight[i]=Fp.getUnsignedShort();for(i=0;i<Fp.npcCount;i++)Fp.npcWalkModel[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcCombatModel[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcCombatAnimation[i]=Fp.getUnsignedByte();for(i=0;i<Fp.npcCount;i++)Fp.npcCommand[i]=Fp.getString();for(Fp.textureCount=Fp.getUnsignedShort(),Fp.textureName=[],Fp.textureSubtypeName=[],i=0;i<Fp.textureCount;i++)Fp.textureName.push(Fp.getString());for(i=0;i<Fp.textureCount;i++)Fp.textureSubtypeName.push(Fp.getString());for(Fp.animationCount=Fp.getUnsignedShort(),Fp.animationName=[],Fp.animationCharacterColour=new Int32Array(Fp.animationCount),Fp.animationGender=new Int32Array(Fp.animationCount),Fp.animationHasA=new Int32Array(Fp.animationCount),Fp.animationHasF=new Int32Array(Fp.animationCount),Fp.animationNumber=new Int32Array(Fp.animationCount),i=0;i<Fp.animationCount;i++)Fp.animationName.push(Fp.getString());for(i=0;i<Fp.animationCount;i++)Fp.animationCharacterColour[i]=Fp.getUnsignedInt();for(i=0;i<Fp.animationCount;i++)Fp.animationGender[i]=Fp.getUnsignedByte();for(i=0;i<Fp.animationCount;i++)Fp.animationHasA[i]=Fp.getUnsignedByte();for(i=0;i<Fp.animationCount;i++)Fp.animationHasF[i]=Fp.getUnsignedByte();for(i=0;i<Fp.animationCount;i++)Fp.animationNumber[i]=Fp.getUnsignedByte();for(Fp.objectCount=Fp.getUnsignedShort(),Fp.objectName=[],Fp.objectDescription=[],Fp.objectCommand1=[],Fp.objectCommand2=[],Fp.objectModelIndex=new Int32Array(Fp.objectCount),Fp.objectWidth=new Int32Array(Fp.objectCount),Fp.objectHeight=new Int32Array(Fp.objectCount),Fp.objectType=new Int32Array(Fp.objectCount),Fp.objectElevation=new Int32Array(Fp.objectCount),i=0;i<Fp.objectCount;i++)Fp.objectName.push(Fp.getString());for(i=0;i<Fp.objectCount;i++)Fp.objectDescription.push(Fp.getString());for(i=0;i<Fp.objectCount;i++)Fp.objectCommand1.push(Fp.getString());for(i=0;i<Fp.objectCount;i++)Fp.objectCommand2.push(Fp.getString());for(i=0;i<Fp.objectCount;i++)Fp.objectModelIndex[i]=Fp.getModelIndex(Fp.getString());for(i=0;i<Fp.objectCount;i++)Fp.objectWidth[i]=Fp.getUnsignedByte();for(i=0;i<Fp.objectCount;i++)Fp.objectHeight[i]=Fp.getUnsignedByte();for(i=0;i<Fp.objectCount;i++)Fp.objectType[i]=Fp.getUnsignedByte();for(i=0;i<Fp.objectCount;i++)Fp.objectElevation[i]=Fp.getUnsignedByte();for(Fp.wallObjectCount=Fp.getUnsignedShort(),Fp.wallObjectName=[],Fp.wallObjectDescription=[],Fp.wallObjectCommand1=[],Fp.wallObjectCommand2=[],Fp.wallObjectHeight=new Int32Array(Fp.wallObjectCount),Fp.wallObjectTextureFront=new Int32Array(Fp.wallObjectCount),Fp.wallObjectTextureBack=new Int32Array(Fp.wallObjectCount),Fp.wallObjectAdjacent=new Int32Array(Fp.wallObjectCount),Fp.wallObjectInvisible=new Int32Array(Fp.wallObjectCount),i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectName.push(Fp.getString());for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectDescription.push(Fp.getString());for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectCommand1.push(Fp.getString());for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectCommand2.push(Fp.getString());for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectHeight[i]=Fp.getUnsignedShort();for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectTextureFront[i]=Fp.getUnsignedInt();for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectTextureBack[i]=Fp.getUnsignedInt();for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectAdjacent[i]=Fp.getUnsignedByte();for(i=0;i<Fp.wallObjectCount;i++)Fp.wallObjectInvisible[i]=Fp.getUnsignedByte();for(Fp.roofCount=Fp.getUnsignedShort(),Fp.roofHeight=new Int32Array(Fp.roofCount),Fp.roofNumVertices=new Int32Array(Fp.roofCount),i=0;i<Fp.roofCount;i++)Fp.roofHeight[i]=Fp.getUnsignedByte();for(i=0;i<Fp.roofCount;i++)Fp.roofNumVertices[i]=Fp.getUnsignedByte();for(Fp.tileCount=Fp.getUnsignedShort(),Fp.tileDecoration=new Int32Array(Fp.tileCount),Fp.tileType=new Int32Array(Fp.tileCount),Fp.tileAdjacent=new Int32Array(Fp.tileCount),i=0;i<Fp.tileCount;i++)Fp.tileDecoration[i]=Fp.getUnsignedInt();for(i=0;i<Fp.tileCount;i++)Fp.tileType[i]=Fp.getUnsignedByte();for(i=0;i<Fp.tileCount;i++)Fp.tileAdjacent[i]=Fp.getUnsignedByte();for(Fp.projectileSprite=Fp.getUnsignedShort(),Fp.spellCount=Fp.getUnsignedShort(),Fp.spellName=[],Fp.spellDescription=[],Fp.spellLevel=new Int32Array(Fp.spellCount),Fp.spellRunesRequired=new Int32Array(Fp.spellCount),Fp.spellType=new Int32Array(Fp.spellCount),Fp.spellRunesId=[],Fp.spellRunesCount=[],i=0;i<Fp.spellCount;i++)Fp.spellName.push(Fp.getString());for(i=0;i<Fp.spellCount;i++)Fp.spellDescription.push(Fp.getString());for(i=0;i<Fp.spellCount;i++)Fp.spellLevel[i]=Fp.getUnsignedByte();for(i=0;i<Fp.spellCount;i++)Fp.spellRunesRequired[i]=Fp.getUnsignedByte();for(i=0;i<Fp.spellCount;i++)Fp.spellType[i]=Fp.getUnsignedByte();for(i=0;i<Fp.spellCount;i++){const t=Fp.getUnsignedByte();Fp.spellRunesId.push(new Int32Array(t));for(let e=0;e<t;e++)Fp.spellRunesId[i][e]=Fp.getUnsignedShort()}for(i=0;i<Fp.spellCount;i++){let t=Fp.getUnsignedByte();Fp.spellRunesCount.push(new Int32Array(t));for(let e=0;e<t;e++)Fp.spellRunesCount[i][e]=Fp.getUnsignedByte()}for(Fp.prayerCount=Fp.getUnsignedShort(),Fp.prayerName=[],Fp.prayerDescription=[],Fp.prayerLevel=new Int32Array(Fp.prayerCount),Fp.prayerDrain=new Int32Array(Fp.prayerCount),i=0;i<Fp.prayerCount;i++)Fp.prayerName.push(Fp.getString());for(i=0;i<Fp.prayerCount;i++)Fp.prayerDescription.push(Fp.getString());for(i=0;i<Fp.prayerCount;i++)Fp.prayerLevel[i]=Fp.getUnsignedByte();for(i=0;i<Fp.prayerCount;i++)Fp.prayerDrain[i]=Fp.getUnsignedByte();Fp.dataString=null,Fp.dataInteger=null}}Fp.modelName=[],Fp.modelName.length=5e3,Fp.modelName.fill(null),Fp.spellCount=0,Fp.itemCount=0,Fp.itemSpriteCount=0,Fp.tileCount=0,Fp.wallObjectCount=0,Fp.modelCount=0,Fp.prayerCount=0,Fp.projectileSprite=0,Fp.npcCount=0,Fp.textureCount=0,Fp.roofCount=0,Fp.objectCount=0,Fp.animationCount=0,Fp.stringOffset=0,Fp.offset=0,Np=Fp;var Hp=class{constructor(){this.minPlaneX=0,this.minPlaneY=0,this.maxPlaneX=0,this.maxPlaneY=0,this.minZ=0,this.maxZ=0,this.model=null,this.face=0,this.depth=0,this.normalX=0,this.normalY=0,this.normalZ=0,this.visibility=0,this.facefill=0,this.skipSomething=!1,this.index=0,this.index2=0}},Wp=class{constructor(){this.startX=0,this.endX=0,this.startS=0,this.endS=0}},qp={};class zp{constructor(t,e,i,r){this.lastVisiblePolygonsCount=0,this.anIntArray377=null,this.textureCount=0,this.textureColoursUsed=null,this.textureColourList=null,this.textureDimension=null,this.textureLoadedNumber=null,this.texturePixels=null,this.textureBackTransparent=null,this.textureColours64=null,this.textureColours128=null,this.scanlines=null,this.minY=0,this.maxY=0,this.interlace=!1,this.mouseX=0,this.mouseY=0,this.mousePickedCount=0,this.newStart=0,this.newEnd=0,this.cameraX=0,this.cameraY=0,this.cameraZ=0,this.cameraYaw=0,this.cameraPitch=0,this.cameraRoll=0,this.rampCount=50,this.gradientBase=new Int32Array(this.rampCount),this.gradientRamps=[];for(let n=0;n<this.rampCount;n+=1)this.gradientRamps.push(new Int32Array(256));this.clipNear=5,this.clipFar3d=1e3,this.clipFar2d=1e3,this.fogZFalloff=20,this.fogZDistance=10,this.wideBand=!1,this.mousePickingActive=!1,this.mousePickedMax=100,this.mousePickedModels=[],this.mousePickedModels.length=this.mousePickedMax,this.mousePickedModels.fill(null),this.mousePickedFaces=new Int32Array(this.mousePickedMax),this.width=512,this.clipX=256,this.clipY=192,this.baseX=256,this.baseY=256,this.viewDistance=8,this.normalMagnitude=4,this.planeX=new Int32Array(40),this.planeY=new Int32Array(40),this.vertexShade=new Int32Array(40),this.vertexX=new Int32Array(40),this.vertexY=new Int32Array(40),this.vertexZ=new Int32Array(40),this.interlace=!1,this.surface=t,this.clipX=t.width2/2|0,this.clipY=t.height2/2|0,this.raster=t.pixels,this.modelCount=0,this.maxModelCount=e,this.models=[],this.models.length=this.maxModelCount,this.models.fill(null),this.visiblePolygonsCount=0,this.visiblePolygons=[];for(let n=0;n<i;n++)this.visiblePolygons.push(new Hp);this.spriteCount=0,this.spriteId=new Int32Array(r),this.spriteWidth=new Int32Array(r),this.spriteHeight=new Int32Array(r),this.spriteX=new Int32Array(r),this.spriteZ=new Int32Array(r),this.spriteY=new Int32Array(r),this.spriteTranslateX=new Int32Array(r),this.cameraX=0,this.cameraY=0,this.cameraZ=0,this.cameraYaw=0,this.cameraPitch=0,this.cameraRoll=0;for(let n=0;n<256;n++)zp.sin512Cache[n]=32768*Math.sin(.02454369*n)|0,zp.sin512Cache[n+256]=32768*Math.cos(.02454369*n)|0;for(let n=0;n<1024;n++)zp.sinCosCache[n]=32768*Math.sin(.00613592315*n)|0,zp.sinCosCache[n+1024]=32768*Math.cos(.00613592315*n)|0}static textureScanline(t,e,i,r,n,s,o,h,a,u,l,c,f,d){if(l<=0)return;let p=0,m=0,g=0;0!==o&&(i=n/o<<7,r=s/o<<7),i<0?i=0:i>16256&&(i=16256),n+=h,s+=a,0!==(o+=u)&&(p=n/o<<7,m=s/o<<7),p<0?p=0:p>16256&&(p=16256);let y=p-i>>4,b=m-r>>4;for(let w=l>>4;w>0;w--)i+=6291456&f,g=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b,t[c++]=e[(16256&r)+(i>>7)]>>>g,i=p,r=m,n+=h,s+=a,0!==(o+=u)&&(p=n/o<<7,m=s/o<<7),p<0?p=0:p>16256&&(p=16256),y=p-i>>4,b=m-r>>4;for(let w=0;w<(15&l);w++)0==(3&w)&&(i=(16383&i)+(6291456&f),g=f>>23,f+=d),t[c++]=e[(16256&r)+(i>>7)]>>>g,i+=y,r+=b}static textureTranslucentScanline(t,e,i,r,n,s,o,h,a,u,l,c,f,d){if(l<=0)return;let p=0,m=0,g=0;0!==o&&(i=n/o<<7,r=s/o<<7),i<0?i=0:i>16256&&(i=16256),n+=h,s+=a,0!==(o+=u)&&(p=n/o<<7,m=s/o<<7),p<0?p=0:p>16256&&(p=16256);let y=p-i>>4,b=m-r>>4;for(let w=l>>4;w>0;w--)i+=6291456&f,g=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),r+=b,i=(16383&(i+=y))+(6291456&f),g=f>>23,f+=d,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b,t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i=p,r=m,n+=h,s+=a,0!==(o+=u)&&(p=n/o<<7,m=s/o<<7),p<0?p=0:p>16256&&(p=16256),y=p-i>>4,b=m-r>>4;for(let w=0;w<(15&l);w++)0==(3&w)&&(i=(16383&i)+(6291456&f),g=f>>23,f+=d),t[c++]=(e[(16256&r)+(i>>7)]>>>g)+(t[c]>>1&8355711),i+=y,r+=b}static textureBackTranslucentScanline(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p){if(c<=0)return;let m=0,g=0;p<<=2,0!==h&&(m=s/h<<7,g=o/h<<7),m<0?m=0:m>16256&&(m=16256);for(let y=c;y>0;y-=16){s+=a,o+=u,i=m,r=g,0!==(h+=l)&&(m=s/h<<7,g=o/h<<7),m<0?m=0:m>16256&&(m=16256);let c=m-i>>4,b=g-r>>4,w=d>>23;if(i+=6291456&d,d+=p,y<16)for(let s=0;s<y;s++)0!=(e=n[(16256&r)+(i>>7)]>>>w)&&(t[f]=e),f++,i+=c,r+=b,3==(3&s)&&(i=(16383&i)+(6291456&d),w=d>>23,d+=p);else 0!=(e=n[(16256&r)+(i>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),w=d>>23,d+=p,0!=(e=n[(16256&(r+=b))+(i>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),w=d>>23,d+=p,0!=(e=n[(16256&(r+=b))+(i>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,i=(16383&(i+=c))+(6291456&d),w=d>>23,d+=p,0!=(e=n[(16256&(r+=b))+(i>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++,0!=(e=n[(16256&(r+=b))+((i+=c)>>7)]>>>w)&&(t[f]=e),f++}}static textureScanline2(t,e,i,r,n,s,o,h,a,u,l,c,f,d){if(l<=0)return;let p=0,m=0;d<<=2,0!==o&&(p=n/o<<6,m=s/o<<6),p<0?p=0:p>4032&&(p=4032);for(let g=l;g>0;g-=16){n+=h,s+=a,i=p,r=m,0!==(o+=u)&&(p=n/o<<6,m=s/o<<6),p<0?p=0:p>4032&&(p=4032);let l=p-i>>4,y=m-r>>4,b=f>>20;if(i+=786432&f,f+=d,g<16)for(let n=0;n<g;n++)t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,3==(3&n)&&(i=(4095&i)+(786432&f),b=f>>20,f+=d);else t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b,i+=l,r+=y,t[c++]=e[(4032&r)+(i>>6)]>>>b}}static textureTranslucentScanline2(t,e,i,r,n,s,o,h,a,u,l,c,f,d){if(l<=0)return;let p=0,m=0;d<<=2,0!==o&&(p=n/o<<6,m=s/o<<6),p<0?p=0:p>4032&&(p=4032);for(let g=l;g>0;g-=16){n+=h,s+=a,i=p,r=m,0!==(o+=u)&&(p=n/o<<6,m=s/o<<6),p<0?p=0:p>4032&&(p=4032);let l=p-i>>4,y=m-r>>4,b=f>>20;if(i+=786432&f,f+=d,g<16)for(let n=0;n<g;n++)t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,3==(3&n)&&(i=(4095&i)+(786432&f),b=f>>20,f+=d);else t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),r+=y,i=(4095&(i+=l))+(786432&f),b=f>>20,f+=d,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711),i+=l,r+=y,t[c++]=(e[(4032&r)+(i>>6)]>>>b)+(t[c]>>1&8355711)}}static textureBackTranslucentScanline2(t,e,i,r,n,s,o,h,a,u,l,c,f,d,p){if(c<=0)return;let m=0,g=0;p<<=2,0!==h&&(m=s/h<<6,g=o/h<<6),m<0?m=0:m>4032&&(m=4032);for(let y=c;y>0;y-=16){s+=a,o+=u,i=m,r=g,0!==(h+=l)&&(m=s/h<<6,g=o/h<<6),m<0?m=0:m>4032&&(m=4032);let c=m-i>>4,b=g-r>>4,w=d>>20;if(i+=786432&d,d+=p,y<16)for(let s=0;s<y;s++)0!=(e=n[(4032&r)+(i>>6)]>>>w)&&(t[f]=e),f++,i+=c,r+=b,3==(3&s)&&(i=(4095&i)+(786432&d),w=d>>20,d+=p);else 0!=(e=n[(4032&r)+(i>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),w=d>>20,d+=p,0!=(e=n[(4032&(r+=b))+(i>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),w=d>>20,d+=p,0!=(e=n[(4032&(r+=b))+(i>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,i=(4095&(i+=c))+(786432&d),w=d>>20,d+=p,0!=(e=n[(4032&(r+=b))+(i>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++,0!=(e=n[(4032&(r+=b))+((i+=c)>>6)]>>>w)&&(t[f]=e),f++}}static gradientScanline(t,e,i,r,n,s,o){if(e>=0)return;o<<=1,r=n[s>>8&255],s+=o;let h=e/8|0;for(let a=h;a<0;a++)t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o;h=-e%8;for(let a=0;a<h;a++)t[i++]=r,1==(1&a)&&(r=n[s>>8&255],s+=o)}static textureGradientScanline(t,e,i,r,n,s,o){if(e>=0)return;o<<=2,r=n[s>>8&255],s+=o;let h=e/16|0;for(let a=h;a<0;a++)t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=n[s>>8&255],s+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=n[s>>8&255],s+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=n[s>>8&255],s+=o,t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),t[i++]=r+(t[i]>>1&8355711),r=n[s>>8&255],s+=o;h=-e%16;for(let a=0;a<h;a++)t[i++]=r+(t[i]>>1&8355711),3==(3&a)&&(r=n[s>>8&255],s+=o,s+=o)}static gradientScanline2(t,e,i,r,n,s,o){if(e>=0)return;o<<=2,r=n[s>>8&255],s+=o;let h=e/16|0;for(let a=h;a<0;a++)t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o,t[i++]=r,t[i++]=r,t[i++]=r,t[i++]=r,r=n[s>>8&255],s+=o;h=-e%16;for(let a=0;a<h;a++)t[i++]=r,3==(3&a)&&(r=n[s>>8&255],s+=o)}static rgb(t,e,i){return-1-1024*(t/8|0)-32*(e/8|0)-(i/8|0)}addModel(t){null===t&&console.log("Warning tried to add null object!"),this.modelCount<this.maxModelCount&&(this.models[this.modelCount++]=t)}removeModel(t){for(let e=0;e<this.modelCount;e++)if(this.models[e]===t){this.modelCount--;for(let t=e;t<this.modelCount;t++)this.models[t]=this.models[t+1]}}dispose(){this.clear();for(let t=0;t<this.modelCount;t++)this.models[t]=null;this.modelCount=0}clear(){this.spriteCount=0,this.view.clear()}reduceSprites(t){this.spriteCount-=t,this.view.reduce(t,2*t),this.spriteCount<0&&(this.spriteCount=0)}addSprite(t,e,i,r,n,s,o){this.spriteId[this.spriteCount]=t,this.spriteX[this.spriteCount]=e,this.spriteZ[this.spriteCount]=i,this.spriteY[this.spriteCount]=r,this.spriteWidth[this.spriteCount]=n,this.spriteHeight[this.spriteCount]=s,this.spriteTranslateX[this.spriteCount]=0;const h=this.view.createVertex(e,i,r),a=this.view.createVertex(e,i-s,r),u=new Int32Array([h,a]);return this.view.createFace(2,u,0,0),this.view.faceTag[this.spriteCount]=o,this.view.isLocalPlayer[this.spriteCount++]=0,this.spriteCount-1}setLocalPlayer(t){this.view.isLocalPlayer[t]=1}setSpriteTranslateX(t,e){this.spriteTranslateX[t]=e}setMouseLoc(t,e){this.mouseX=t-this.baseX,this.mouseY=e,this.mousePickedCount=0,this.mousePickingActive=!0}getMousePickedCount(){return this.mousePickedCount}getMousePickedFaces(){return this.mousePickedFaces}getMousePickedModels(){return this.mousePickedModels}setBounds(t,e,i,r,n,s){this.clipX=i,this.clipY=r,this.baseX=t,this.baseY=e,this.width=n,this.viewDistance=s,this.scanlines=[];for(let o=0;o<r+e;o++)this.scanlines.push(new Wp)}polygonsQSort(t,e,i){if(e<i){let r=e-1,n=i+1,s=(e+i)/2|0,o=t[s];t[s]=t[e],t[e]=o;let h=o.depth;for(;r<n;){do{n--}while(t[n].depth<h);do{r++}while(t[r].depth>h);if(r<n){let e=t[r];t[r]=t[n],t[n]=e}}this.polygonsQSort(t,e,n),this.polygonsQSort(t,n+1,i)}}polygonsIntersectSort(t,e,i){for(let n=0;n<=i;n++)e[n].skipSomething=!1,e[n].index=n,e[n].index2=-1;let r=0;for(;;){for(;e[r].skipSomething;)r++;if(r===i)return;let n=e[r];n.skipSomething=!0;let s=r,o=r+t;o>=i&&(o=i-1);for(let t=o;t>=s+1;t--){let i=e[t];n.minPlaneX<i.maxPlaneX&&i.minPlaneX<n.maxPlaneX&&n.minPlaneY<i.maxPlaneY&&i.minPlaneY<n.maxPlaneY&&n.index!==i.index2&&!this.separatePolygon(n,i)&&this.heuristicPolygon(i,n)&&(this.polygonsOrder(e,s,t),e[t]!==i&&t++,s=this.newStart,i.index2=n.index)}}}polygonsOrder(t,e,i){for(;;){let r=t[e];for(let s=e+1;s<=i;s++){let n=t[s];if(!this.separatePolygon(n,r))break;if(t[e]=n,t[s]=r,(e=s)===i)return this.newStart=e,this.newEnd=e-1,!0}let n=t[i];for(let s=i-1;s>=e;s--){let r=t[s];if(!this.separatePolygon(n,r))break;if(t[i]=r,t[s]=n,e===(i=s))return this.newStart=i+1,this.newEnd=i,!0}if(e+1>=i)return this.newStart=e,this.newEnd=i,!1;if(!this.polygonsOrder(t,e+1,i))return this.newStart=e,!1;i=this.newEnd}}setFrustum(t,e,i){let r=1024-this.cameraYaw&1023,n=1024-this.cameraPitch&1023,s=1024-this.cameraRoll&1023;if(0!==s){let i=zp.sinCosCache[s],r=zp.sinCosCache[s+1024],n=e*i+t*r>>15;e=e*r-t*i>>15,t=n}if(0!==r){let t=zp.sinCosCache[r],n=zp.sinCosCache[r+1024],s=e*n-i*t>>15;i=e*t+i*n>>15,e=s}if(0!==n){let e=zp.sinCosCache[n],r=zp.sinCosCache[n+1024],s=i*e+t*r>>15;i=i*r-t*e>>15,t=s}t<zp.frustumMaxX&&(zp.frustumMaxX=t),t>zp.frustumMinX&&(zp.frustumMinX=t),e<zp.frustumMaxY&&(zp.frustumMaxY=e),e>zp.frustumMinY&&(zp.frustumMinY=e),i<zp.frustumFarZ&&(zp.frustumFarZ=i),i>zp.frustumNearZ&&(zp.frustumNearZ=i)}render(){this.interlace=this.surface.interlace;let t=this.clipX*this.clipFar3d>>this.viewDistance,e=this.clipY*this.clipFar3d>>this.viewDistance;zp.frustumMaxX=0,zp.frustumMinX=0,zp.frustumMaxY=0,zp.frustumMinY=0,zp.frustumFarZ=0,zp.frustumNearZ=0,this.setFrustum(-t,-e,this.clipFar3d),this.setFrustum(-t,e,this.clipFar3d),this.setFrustum(t,-e,this.clipFar3d),this.setFrustum(t,e,this.clipFar3d),this.setFrustum(-this.clipX,-this.clipY,0),this.setFrustum(-this.clipX,this.clipY,0),this.setFrustum(this.clipX,-this.clipY,0),this.setFrustum(this.clipX,this.clipY,0),zp.frustumMaxX+=this.cameraX,zp.frustumMinX+=this.cameraX,zp.frustumMaxY+=this.cameraY,zp.frustumMinY+=this.cameraY,zp.frustumFarZ+=this.cameraZ,zp.frustumNearZ+=this.cameraZ,this.models[this.modelCount]=this.view,this.view.transformState=2;for(let r=0;r<this.modelCount;r++)this.models[r].project(this.cameraX,this.cameraY,this.cameraZ,this.cameraYaw,this.cameraPitch,this.cameraRoll,this.viewDistance,this.clipNear);this.models[this.modelCount].project(this.cameraX,this.cameraY,this.cameraZ,this.cameraYaw,this.cameraPitch,this.cameraRoll,this.viewDistance,this.clipNear),this.visiblePolygonsCount=0;for(let r=0;r<this.modelCount;r++){let t=this.models[r];if(t.visible)for(let e=0;e<t.numFaces;e++){let i=t.faceNumVertices[e],r=t.faceVertices[e],n=!1;for(let e=0;e<i;e++){let i=t.projectVertexZ[r[e]];if(!(i<=this.clipNear||i>=this.clipFar3d)){n=!0;break}}if(n){let n=0;for(let e=0;e<i;e++){let i=t.vertexViewX[r[e]];if(i>-this.clipX&&(n|=1),i<this.clipX&&(n|=2),3===n)break}if(3===n){let n=0;for(let e=0;e<i;e++){let i=t.vertexViewY[r[e]];if(i>-this.clipY&&(n|=1),i<this.clipY&&(n|=2),3===n)break}if(3===n){let n=this.visiblePolygons[this.visiblePolygonsCount];n.model=t,n.face=e,this.initialisePolygon3D(this.visiblePolygonsCount);let s=0;if(12345678!==(s=n.visibility<0?t.faceFillFront[e]:t.faceFillBack[e])){let e=0;for(let n=0;n<i;n++)e+=t.projectVertexZ[r[n]];n.depth=(e/i|0)+t.depth,n.facefill=s,this.visiblePolygonsCount++}}}}}}let i=this.view;if(i.visible)for(let r=0;r<i.numFaces;r++){let t=i.faceVertices[r],e=t[0],n=i.vertexViewX[e],s=i.vertexViewY[e],o=i.projectVertexZ[e];if(o>this.clipNear&&o<this.clipFar2d){let e=(this.spriteWidth[r]<<this.viewDistance)/o|0,h=(this.spriteHeight[r]<<this.viewDistance)/o|0;if(n-(e/2|0)<=this.clipX&&n+(e/2|0)>=-this.clipX&&s-h<=this.clipY&&s>=-this.clipY){let e=this.visiblePolygons[this.visiblePolygonsCount];e.model=i,e.face=r,this.initialisePolygon2D(this.visiblePolygonsCount),e.depth=(o+i.projectVertexZ[t[1]])/2|0,this.visiblePolygonsCount++}}}if(0!==this.visiblePolygonsCount){this.lastVisiblePolygonsCount=this.visiblePolygonsCount,this.polygonsQSort(this.visiblePolygons,0,this.visiblePolygonsCount-1),this.polygonsIntersectSort(100,this.visiblePolygons,this.visiblePolygonsCount);for(let t=0;t<this.visiblePolygonsCount;t++){let e=this.visiblePolygons[t],i=e.model,r=e.face;if(i===this.view){let t=i.faceVertices[r],e=t[0],n=i.vertexViewX[e],s=i.vertexViewY[e],o=i.projectVertexZ[e],h=(this.spriteWidth[r]<<this.viewDistance)/o|0,a=(this.spriteHeight[r]<<this.viewDistance)/o|0,u=i.vertexViewX[t[1]]-n,l=n-(h/2|0),c=this.baseY+s-a;this.surface._spriteClipping_from7(l+this.baseX,c,h,a,this.spriteId[r],u,(256<<this.viewDistance)/o|0),this.mousePickingActive&&this.mousePickedCount<this.mousePickedMax&&(l+=(this.spriteTranslateX[r]<<this.viewDistance)/o|0,this.mouseY>=c&&this.mouseY<=c+a&&this.mouseX>=l&&this.mouseX<=l+h&&!i.unpickable&&0===i.isLocalPlayer[r]&&(this.mousePickedModels[this.mousePickedCount]=i,this.mousePickedFaces[this.mousePickedCount]=r,this.mousePickedCount++))}else{let t=0,n=0,s=i.faceNumVertices[r],o=i.faceVertices[r];12345678!==i.faceIntensity[r]&&(n=e.visibility<0?i.lightAmbience-i.faceIntensity[r]:i.lightAmbience+i.faceIntensity[r]);for(let h=0;h<s;h++){let a=o[h];if(this.vertexX[h]=i.projectVertexX[a],this.vertexY[h]=i.projectVertexY[a],this.vertexZ[h]=i.projectVertexZ[a],12345678===i.faceIntensity[r]&&(n=e.visibility<0?i.lightAmbience-i.vertexIntensity[a]+i.vertexAmbience[a]:i.lightAmbience+i.vertexIntensity[a]+i.vertexAmbience[a]),i.projectVertexZ[a]>=this.clipNear)this.planeX[t]=i.vertexViewX[a],this.planeY[t]=i.vertexViewY[a],this.vertexShade[t]=n,i.projectVertexZ[a]>this.fogZDistance&&(this.vertexShade[t]+=(i.projectVertexZ[a]-this.fogZDistance)/this.fogZFalloff|0),t++;else{let e=0;if(e=0===h?o[s-1]:o[h-1],i.projectVertexZ[e]>=this.clipNear){let r=i.projectVertexZ[a]-i.projectVertexZ[e],s=i.projectVertexX[a]-((i.projectVertexX[a]-i.projectVertexX[e])*(i.projectVertexZ[a]-this.clipNear)/r|0),o=i.projectVertexY[a]-((i.projectVertexY[a]-i.projectVertexY[e])*(i.projectVertexZ[a]-this.clipNear)/r|0);this.planeX[t]=(s<<this.viewDistance)/this.clipNear|0,this.planeY[t]=(o<<this.viewDistance)/this.clipNear|0,this.vertexShade[t]=n,t++}if(e=h===s-1?o[0]:o[h+1],i.projectVertexZ[e]>=this.clipNear){let r=i.projectVertexZ[a]-i.projectVertexZ[e],s=i.projectVertexX[a]-((i.projectVertexX[a]-i.projectVertexX[e])*(i.projectVertexZ[a]-this.clipNear)/r|0),o=i.projectVertexY[a]-((i.projectVertexY[a]-i.projectVertexY[e])*(i.projectVertexZ[a]-this.clipNear)/r|0);this.planeX[t]=(s<<this.viewDistance)/this.clipNear|0,this.planeY[t]=(o<<this.viewDistance)/this.clipNear|0,this.vertexShade[t]=n,t++}}}for(let i=0;i<s;i++)this.vertexShade[i]<0?this.vertexShade[i]=0:this.vertexShade[i]>255&&(this.vertexShade[i]=255),e.facefill>=0&&(1===this.textureDimension[e.facefill]?this.vertexShade[i]<<=9:this.vertexShade[i]<<=6);this.generateScanlines(0,0,0,0,t,this.planeX,this.planeY,this.vertexShade,i,r),this.maxY>this.minY&&this.rasterize(0,0,s,this.vertexX,this.vertexY,this.vertexZ,e.facefill,i)}}this.mousePickingActive=!1}}generateScanlines(t,e,i,r,n,s,o,h,a,u){if(3===n){let n=o[0]+this.baseY,a=o[1]+this.baseY,u=o[2]+this.baseY,l=s[0],c=s[1],f=s[2],d=h[0],p=h[1],m=h[2],g=this.baseY+this.clipY-1,y=0,b=0,w=0,v=0,M=12345678,S=-12345678;u!==n&&(b=(f-l<<8)/(u-n)|0,v=(m-d<<8)/(u-n)|0,n<u?(y=l<<8,w=d<<8,M=n,S=u):(y=f<<8,w=m<<8,M=u,S=n),M<0&&(y-=b*M,w-=v*M,M=0),S>g&&(S=g));let _=0,I=0,C=0,k=0,T=12345678,A=-12345678;a!==n&&(I=(c-l<<8)/(a-n)|0,k=(p-d<<8)/(a-n)|0,n<a?(_=l<<8,C=d<<8,T=n,A=a):(_=c<<8,C=p<<8,T=a,A=n),T<0&&(_-=I*T|0,C-=k*T|0,T=0),A>g&&(A=g));let x=0,E=0,B=0,L=0,R=12345678,P=-12345678;u!==a&&(E=(f-c<<8)/(u-a)|0,L=(m-p<<8)/(u-a)|0,a<u?(x=c<<8,B=p<<8,R=a,P=u):(x=f<<8,B=m<<8,R=u,P=a),R<0&&(x-=E*R|0,B-=L*R|0,R=0),P>g&&(P=g)),this.minY=M,T<this.minY&&(this.minY=T),R<this.minY&&(this.minY=R),this.maxY=S,A>this.maxY&&(this.maxY=A),P>this.maxY&&(this.maxY=P);let O=0;for(i=this.minY;i<this.maxY;i++){i>=M&&i<S?(t=e=y,r=O=w,y+=b,w+=v):(t=655360,e=-655360),i>=T&&i<A&&(_<t&&(t=_,r=C),_>e&&(e=_,O=C),_+=I,C+=k),i>=R&&i<P&&(x<t&&(t=x,r=B),x>e&&(e=x,O=B),x+=E,B+=L);let n=this.scanlines[i];n.startX=t,n.endX=e,n.startS=r,n.endS=O}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}else if(4===n){let n=o[0]+this.baseY,a=o[1]+this.baseY,u=o[2]+this.baseY,l=o[3]+this.baseY,c=s[0],f=s[1],d=s[2],p=s[3],m=h[0],g=h[1],y=h[2],b=h[3],w=this.baseY+this.clipY-1,v=0,M=0,S=0,_=0,I=12345678,C=-12345678;l!==n&&(M=(p-c<<8)/(l-n)|0,_=(b-m<<8)/(l-n)|0,n<l?(v=c<<8,S=m<<8,I=n,C=l):(v=p<<8,S=b<<8,I=l,C=n),I<0&&(v-=M*I,S-=_*I,I=0),C>w&&(C=w));let k=0,T=0,A=0,x=0,E=12345678,B=-12345678;a!==n&&(T=(f-c<<8)/(a-n)|0,x=(g-m<<8)/(a-n)|0,n<a?(k=c<<8,A=m<<8,E=n,B=a):(k=f<<8,A=g<<8,E=a,B=n),E<0&&(k-=T*E,A-=x*E,E=0),B>w&&(B=w));let L=0,R=0,P=0,O=0,j=12345678,D=-12345678;u!==a&&(R=(d-f<<8)/(u-a)|0,O=(y-g<<8)/(u-a)|0,a<u?(L=f<<8,P=g<<8,j=a,D=u):(L=d<<8,P=y<<8,j=u,D=a),j<0&&(L-=R*j,P-=O*j,j=0),D>w&&(D=w));let Y=0,U=0,X=0,N=0,F=12345678,H=-12345678;l!==u&&(U=(p-d<<8)/(l-u)|0,N=(b-y<<8)/(l-u)|0,u<l?(Y=d<<8,X=y<<8,F=u,H=l):(Y=p<<8,X=b<<8,F=l,H=u),F<0&&(Y-=U*F,X-=N*F,F=0),H>w&&(H=w)),this.minY=I,E<this.minY&&(this.minY=E),j<this.minY&&(this.minY=j),F<this.minY&&(this.minY=F),this.maxY=C,B>this.maxY&&(this.maxY=B),D>this.maxY&&(this.maxY=D),H>this.maxY&&(this.maxY=H);let W=0;for(i=this.minY;i<this.maxY;i++){i>=I&&i<C?(t=e=v,r=W=S,v+=M,S+=_):(t=655360,e=-655360),i>=E&&i<B&&(k<t&&(t=k,r=A),k>e&&(e=k,W=A),k+=T,A+=x),i>=j&&i<D&&(L<t&&(t=L,r=P),L>e&&(e=L,W=P),L+=R,P+=O),i>=F&&i<H&&(Y<t&&(t=Y,r=X),Y>e&&(e=Y,W=X),Y+=U,X+=N);let n=this.scanlines[i];n.startX=t,n.endX=e,n.startS=r,n.endS=W}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}else{for(this.maxY=this.minY=o[0]+=this.baseY,i=1;i<n;i++){let t=0;(t=o[i]+=this.baseY)<this.minY?this.minY=t:t>this.maxY&&(this.maxY=t)}if(this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY),this.maxY>=this.baseY+this.clipY&&(this.maxY=this.baseY+this.clipY-1),this.minY>=this.maxY)return;for(i=this.minY;i<this.maxY;i++){let t=this.scanlines[i];t.startX=655360,t.endX=-655360}let t=n-1,e=o[0],r=o[t];if(e<r){let n=s[0]<<8,o=(s[t]-s[0]<<8)/(r-e)|0,a=h[0]<<8,u=(h[t]-h[0]<<8)/(r-e)|0;for(e<0&&(n-=o*e,a-=u*e,e=0),r>this.maxY&&(r=this.maxY),i=e;i<=r;i++){let t=this.scanlines[i];t.startX=t.endX=n,t.startS=t.endS=a,n+=o,a+=u}}else if(e>r){let n=s[t]<<8,o=(s[0]-s[t]<<8)/(e-r)|0,a=h[t]<<8,u=(h[0]-h[t]<<8)/(e-r)|0;for(r<0&&(n-=o*r,a-=u*r,r=0),e>this.maxY&&(e=this.maxY),i=r;i<=e;i++){let t=this.scanlines[i];t.startX=t.endX=n,t.startS=t.endS=a,n+=o,a+=u}}for(i=0;i<t;i++){let t=i+1,e=o[i],r=o[t];if(e<r){let n=s[i]<<8,o=(s[t]-s[i]<<8)/(r-e)|0,a=h[i]<<8,u=(h[t]-h[i]<<8)/(r-e)|0;e<0&&(n-=o*e,a-=u*e,e=0),r>this.maxY&&(r=this.maxY);for(let t=e;t<=r;t++){let e=this.scanlines[t];n<e.startX&&(e.startX=n,e.startS=a),n>e.endX&&(e.endX=n,e.endS=a),n+=o,a+=u}}else if(e>r){let n=s[t]<<8,o=(s[i]-s[t]<<8)/(e-r)|0,a=h[t]<<8,u=(h[i]-h[t]<<8)/(e-r)|0;r<0&&(n-=o*r,a-=u*r,r=0),e>this.maxY&&(e=this.maxY);for(let t=r;t<=e;t++){let e=this.scanlines[t];n<e.startX&&(e.startX=n,e.startS=a),n>e.endX&&(e.endX=n,e.endS=a),n+=o,a+=u}}}this.minY<this.baseY-this.clipY&&(this.minY=this.baseY-this.clipY)}if(this.mousePickingActive&&this.mousePickedCount<this.mousePickedMax&&this.mouseY>=this.minY&&this.mouseY<this.maxY){let t=this.scanlines[this.mouseY];this.mouseX>=t.startX>>8&&this.mouseX<=t.endX>>8&&t.startX<=t.endX&&!a.unpickable&&0===a.isLocalPlayer[u]&&(this.mousePickedModels[this.mousePickedCount]=a,this.mousePickedFaces[this.mousePickedCount]=u,this.mousePickedCount++)}}rasterize(t,e,i,r,n,s,o,h){if(-2===o)return;if(o>=0){o>=this.textureCount&&(o=0),this.prepareTexture(o);let a=r[0],u=n[0],l=s[0],c=a-r[1],f=u-n[1],d=l-s[1],p=r[--i]-a,m=n[i]-u,g=s[i]-l;if(1===this.textureDimension[o]){let i=p*u-m*a<<12,r=m*l-g*u<<5-this.viewDistance+7+4,n=g*a-p*l<<5-this.viewDistance+7,s=c*u-f*a<<12,y=f*l-d*u<<5-this.viewDistance+7+4,b=d*a-c*l<<5-this.viewDistance+7,w=f*p-c*m<<5,v=d*m-f*g<<5-this.viewDistance+4,M=c*g-d*p>>this.viewDistance-5,S=r>>4,_=y>>4,I=v>>4,C=this.minY-this.baseY,k=this.width,T=this.baseX+this.minY*k,A=1;if(i+=n*C,s+=b*C,w+=M*C,this.interlace&&(1==(1&this.minY)&&(this.minY++,i+=n,s+=b,w+=M,T+=k),n<<=1,b<<=1,M<<=1,k<<=1,A=2),h.textureTranslucent){for(t=this.minY;t<this.maxY;t+=A){let h=this.scanlines[t];e=h.startX>>8;let a=h.endX>>8,u=a-e;if(u<=0)i+=n,s+=b,w+=M,T+=k;else{let t=h.startS,l=(h.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=a-(e=-this.clipX)),a>this.clipX&&(u=this.clipX-e),zp.textureTranslucentScanline(this.raster,this.texturePixels[o],0,0,i+S*e,s+_*e,w+I*e,r,y,v,u,T+e,t,l<<2),i+=n,s+=b,w+=M,T+=k}}return}if(!this.textureBackTransparent[o]){for(t=this.minY;t<this.maxY;t+=A){let h=this.scanlines[t];e=h.startX>>8;let a=h.endX>>8,u=a-e;if(u<=0)i+=n,s+=b,w+=M,T+=k;else{let t=h.startS,l=(h.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=a-(e=-this.clipX)),a>this.clipX&&(u=this.clipX-e),zp.textureScanline(this.raster,this.texturePixels[o],0,0,i+S*e,s+_*e,w+I*e,r,y,v,u,T+e,t,l<<2),i+=n,s+=b,w+=M,T+=k}}return}for(t=this.minY;t<this.maxY;t+=A){let h=this.scanlines[t];e=h.startX>>8;let a=h.endX>>8,u=a-e;if(u<=0)i+=n,s+=b,w+=M,T+=k;else{let t=h.startS,l=(h.endS-t)/u|0;e<-this.clipX&&(t+=(-this.clipX-e)*l,u=a-(e=-this.clipX)),a>this.clipX&&(u=this.clipX-e),zp.textureBackTranslucentScanline(this.raster,0,0,0,this.texturePixels[o],i+S*e,s+_*e,w+I*e,r,y,v,u,T+e,t,l),i+=n,s+=b,w+=M,T+=k}}return}let y=p*u-m*a<<11,b=m*l-g*u<<5-this.viewDistance+6+4,w=g*a-p*l<<5-this.viewDistance+6,v=c*u-f*a<<11,M=f*l-d*u<<5-this.viewDistance+6+4,S=d*a-c*l<<5-this.viewDistance+6,_=f*p-c*m<<5,I=d*m-f*g<<5-this.viewDistance+4,C=c*g-d*p>>this.viewDistance-5,k=b>>4,T=M>>4,A=I>>4,x=this.minY-this.baseY,E=this.width,B=this.baseX+this.minY*E,L=1;if(y+=w*x,v+=S*x,_+=C*x,this.interlace&&(1==(1&this.minY)&&(this.minY++,y+=w,v+=S,_+=C,B+=E),w<<=1,S<<=1,C<<=1,E<<=1,L=2),h.textureTranslucent){for(t=this.minY;t<this.maxY;t+=L){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)y+=w,v+=S,_+=C,B+=E;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.textureTranslucentScanline2(this.raster,this.texturePixels[o],0,0,y+k*e,v+T*e,_+A*e,b,M,I,n,B+e,t,s),y+=w,v+=S,_+=C,B+=E}}return}if(!this.textureBackTransparent[o]){for(t=this.minY;t<this.maxY;t+=L){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)y+=w,v+=S,_+=C,B+=E;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.textureScanline2(this.raster,this.texturePixels[o],0,0,y+k*e,v+T*e,_+A*e,b,M,I,n,B+e,t,s),y+=w,v+=S,_+=C,B+=E}}return}for(t=this.minY;t<this.maxY;t+=L){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)y+=w,v+=S,_+=C,B+=E;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.textureBackTranslucentScanline2(this.raster,0,0,0,this.texturePixels[o],y+k*e,v+T*e,_+A*e,b,M,I,n,B+e,t,s),y+=w,v+=S,_+=C,B+=E}}return}for(let c=0;c<this.rampCount;c++){if(this.gradientBase[c]===o){this.anIntArray377=this.gradientRamps[c];break}if(c===this.rampCount-1){let t=Math.random()*this.rampCount|0;this.gradientBase[t]=o;let e=8*((o=-1-o)>>10&31),i=8*(o>>5&31),r=8*(31&o);for(let n=0;n<256;n++){let s=n*n,o=e*s/65536|0,h=i*s/65536|0,a=r*s/65536|0;this.gradientRamps[t][255-n]=(o<<16)+(h<<8)+a}this.anIntArray377=this.gradientRamps[t]}}let a=this.width,u=this.baseX+this.minY*a,l=1;if(this.interlace&&(1==(1&this.minY)&&(this.minY++,u+=a),a<<=1,l=2),h.transparent)for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)u+=a;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.textureGradientScanline(this.raster,-n,u+e,0,this.anIntArray377,t,s),u+=a}}else if(this.wideBand)for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)u+=a;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.gradientScanline(this.raster,-n,u+e,0,this.anIntArray377,t,s),u+=a}}else for(t=this.minY;t<this.maxY;t+=l){let i=this.scanlines[t];e=i.startX>>8;let r=i.endX>>8,n=r-e;if(n<=0)u+=a;else{let t=i.startS,s=(i.endS-t)/n|0;e<-this.clipX&&(t+=(-this.clipX-e)*s,n=r-(e=-this.clipX)),r>this.clipX&&(n=this.clipX-e),zp.gradientScanline2(this.raster,-n,u+e,0,this.anIntArray377,t,s),u+=a}}}setCamera(t,e,i,r,n,s,o){r&=1023,n&=1023,s&=1023,this.cameraYaw=1024-r&1023,this.cameraPitch=1024-n&1023,this.cameraRoll=1024-s&1023;let h=0,a=0,u=o;if(0!==r){let t=zp.sinCosCache[r],e=zp.sinCosCache[r+1024],i=a*e-u*t>>15;u=a*t+u*e>>15,a=i}if(0!==n){let t=zp.sinCosCache[n],e=zp.sinCosCache[n+1024],i=u*t+h*e>>15;u=u*e-h*t>>15,h=i}if(0!==s){let t=zp.sinCosCache[s],e=zp.sinCosCache[s+1024],i=a*t+h*e>>15;a=a*e-h*t>>15,h=i}this.cameraX=t-h,this.cameraY=e-a,this.cameraZ=i-u}initialisePolygon3D(t){let e=this.visiblePolygons[t],i=e.model,r=e.face,n=i.faceVertices[r],s=i.faceNumVertices[r],o=i.normalScale[r],h=i.projectVertexX[n[0]],a=i.projectVertexY[n[0]],u=i.projectVertexZ[n[0]],l=i.projectVertexX[n[1]]-h,c=i.projectVertexY[n[1]]-a,f=i.projectVertexZ[n[1]]-u,d=i.projectVertexX[n[2]]-h,p=i.projectVertexY[n[2]]-a,m=i.projectVertexZ[n[2]]-u,g=c*m-p*f,y=f*d-m*l,b=l*p-d*c;if(-1===o){for(o=0;g>25e3||y>25e3||b>25e3||g<-25e3||y<-25e3||b<-25e3;b>>=1)o++,g>>=1,y>>=1;i.normalScale[r]=o,i.normalMagnitude[r]=this.normalMagnitude*Math.sqrt(g*g+y*y+b*b)|0}else g>>=o,y>>=o,b>>=o;e.visibility=h*g+a*y+u*b,e.normalX=g,e.normalY=y,e.normalZ=b;let w=i.projectVertexZ[n[0]],v=w,M=i.vertexViewX[n[0]],S=M,_=i.vertexViewY[n[0]],I=_;for(let C=1;C<s;C++){let t=i.projectVertexZ[n[C]];t>v?v=t:t<w&&(w=t),(t=i.vertexViewX[n[C]])>S?S=t:t<M&&(M=t),(t=i.vertexViewY[n[C]])>I?I=t:t<_&&(_=t)}e.minZ=w,e.maxZ=v,e.minPlaneX=M,e.maxPlaneX=S,e.minPlaneY=_,e.maxPlaneY=I}initialisePolygon2D(t){let e=this.visiblePolygons[t],i=e.model,r=e.face,n=i.faceVertices[r],s=i.projectVertexX[n[0]],o=i.projectVertexY[n[0]],h=i.projectVertexZ[n[0]];i.normalMagnitude[r]=1,i.normalScale[r]=0,e.visibility=0*s+0*o+1*h,e.normalX=0,e.normalY=0,e.normalZ=1;let a=i.projectVertexZ[n[0]],u=a,l=i.vertexViewX[n[0]],c=l;i.vertexViewX[n[1]]<l?l=i.vertexViewX[n[1]]:c=i.vertexViewX[n[1]];let f=i.vertexViewY[n[1]],d=i.vertexViewY[n[0]],p=i.projectVertexZ[n[1]];p>u?u=p:p<a&&(a=p),(p=i.vertexViewX[n[1]])>c?c=p:p<l&&(l=p),(p=i.vertexViewY[n[1]])>d?d=p:p<f&&(f=p),e.minZ=a,e.maxZ=u,e.minPlaneX=l-20,e.maxPlaneX=c+20,e.minPlaneY=f,e.maxPlaneY=d}separatePolygon(t,e){if(t.minPlaneX>=e.maxPlaneX)return!0;if(e.minPlaneX>=t.maxPlaneX)return!0;if(t.minPlaneY>=e.maxPlaneY)return!0;if(e.minPlaneY>=t.maxPlaneY)return!0;if(t.minZ>=e.maxZ)return!0;if(e.minZ>t.maxZ)return!1;let i=t.model,r=e.model,n=t.face,s=e.face,o=i.faceVertices[n],h=r.faceVertices[s],a=i.faceNumVertices[n],u=r.faceNumVertices[s],l=r.projectVertexX[h[0]],c=r.projectVertexY[h[0]],f=r.projectVertexZ[h[0]],d=e.normalX,p=e.normalY,m=e.normalZ,g=r.normalMagnitude[s],y=e.visibility,b=!1;for(let _=0;_<a;_++){let t=o[_],e=(l-i.projectVertexX[t])*d+(c-i.projectVertexY[t])*p+(f-i.projectVertexZ[t])*m;if(!(e>=-g||y>=0)||!(e<=g||y<=0)){b=!0;break}}if(!b)return!0;l=i.projectVertexX[o[0]],c=i.projectVertexY[o[0]],f=i.projectVertexZ[o[0]],d=t.normalX,p=t.normalY,m=t.normalZ,g=i.normalMagnitude[n],y=t.visibility,b=!1;for(let _=0;_<u;_++){let t=h[_],e=(l-r.projectVertexX[t])*d+(c-r.projectVertexY[t])*p+(f-r.projectVertexZ[t])*m;if(!(e>=-g||y<=0)||!(e<=g||y>=0)){b=!0;break}}if(!b)return!0;let w=null,v=null;if(2===a){w=new Int32Array(4),v=new Int32Array(4);let t=o[0],e=o[1];w[0]=i.vertexViewX[t]-20,w[1]=i.vertexViewX[e]-20,w[2]=i.vertexViewX[e]+20,w[3]=i.vertexViewX[t]+20,v[0]=v[3]=i.vertexViewY[t],v[1]=v[2]=i.vertexViewY[e]}else{w=new Int32Array(a),v=new Int32Array(a);for(let t=0;t<a;t++){let e=o[t];w[t]=i.vertexViewX[e],v[t]=i.vertexViewY[e]}}let M=null,S=null;if(2===u){M=new Int32Array(4),S=new Int32Array(4);let t=h[0],e=h[1];M[0]=r.vertexViewX[t]-20,M[1]=r.vertexViewX[e]-20,M[2]=r.vertexViewX[e]+20,M[3]=r.vertexViewX[t]+20,S[0]=S[3]=r.vertexViewY[t],S[1]=S[2]=r.vertexViewY[e]}else{M=new Int32Array(u),S=new Int32Array(u);for(let t=0;t<u;t++){let e=h[t];M[t]=r.vertexViewX[e],S[t]=r.vertexViewY[e]}}return!this.intersect(w,v,M,S)}heuristicPolygon(t,e){let i=t.model,r=e.model,n=t.face,s=e.face,o=i.faceVertices[n],h=r.faceVertices[s],a=i.faceNumVertices[n],u=r.faceNumVertices[s],l=r.projectVertexX[h[0]],c=r.projectVertexY[h[0]],f=r.projectVertexZ[h[0]],d=e.normalX,p=e.normalY,m=e.normalZ,g=r.normalMagnitude[s],y=e.visibility,b=!1;for(let w=0;w<a;w++){let t=o[w],e=(l-i.projectVertexX[t])*d+(c-i.projectVertexY[t])*p+(f-i.projectVertexZ[t])*m;if(!(e>=-g||y>=0)||!(e<=g||y<=0)){b=!0;break}}if(!b)return!0;l=i.projectVertexX[o[0]],c=i.projectVertexY[o[0]],f=i.projectVertexZ[o[0]],d=t.normalX,p=t.normalY,m=t.normalZ,g=i.normalMagnitude[n],y=t.visibility,b=!1;for(let w=0;w<u;w++){let t=h[w],e=(l-r.projectVertexX[t])*d+(c-r.projectVertexY[t])*p+(f-r.projectVertexZ[t])*m;if(!(e>=-g||y<=0)||!(e<=g||y>=0)){b=!0;break}}return!b}allocateTextures(t,e,i){this.textureCount=t,this.textureColoursUsed=[],this.textureColoursUsed.length=t,this.textureColoursUsed.fill(null),this.textureColourList=[],this.textureColourList.length=t,this.textureColourList.fill(null),this.textureDimension=new Int32Array(t),this.textureLoadedNumber=[],this.textureLoadedNumber.length=t,this.textureLoadedNumber.fill(null),this.textureBackTransparent=new Int8Array(t),this.texturePixels=[],this.texturePixels.length=t,this.texturePixels.fill(null),zp.textureCountLoaded=new xt(0);for(let r=0;r<t;r+=1)this.textureLoadedNumber.push(new xt(0));this.textureColours64=[],this.textureColours64.length=e,this.textureColours64.fill(null),this.textureColours128=[],this.textureColours128.length=i,this.textureColours128.fill(null)}defineTexture(t,e,i,r){this.textureColoursUsed[t]=e,this.textureColourList[t]=i,this.textureDimension[t]=r,this.textureLoadedNumber[t]=new xt(0),this.textureBackTransparent[t]=!1,this.texturePixels[t]=null,this.prepareTexture(t)}prepareTexture(t){if(t<0)return;if(zp.textureCountLoaded=zp.textureCountLoaded.add(1),this.textureLoadedNumber[t]=new xt(zp.textureCountLoaded),null!==this.texturePixels[t])return;if(0===this.textureDimension[t]){for(let r=0;r<this.textureColours64.length;r++)if(null===this.textureColours64[r])return this.textureColours64[r]=new Int32Array(16384),this.texturePixels[t]=this.textureColours64[r],void this.setTexturePixels(t);let e=new xt(1).shiftLeft(30),i=0;for(let r=0;r<this.textureCount;r++)r!==t&&0===this.textureDimension[r]&&null!==this.texturePixels[r]&&this.textureLoadedNumber[r].lessThan(e)&&(e=this.textureLoadedNumber[r],i=r);return this.texturePixels[t]=this.texturePixels[i],this.texturePixels[i]=null,void this.setTexturePixels(t)}for(let r=0;r<this.textureColours128.length;r++)if(null===this.textureColours128[r])return this.textureColours128[r]=new Int32Array(65536),this.texturePixels[t]=this.textureColours128[r],void this.setTexturePixels(t);let e=new xt(1).shiftLeft(30),i=0;for(let r=0;r<this.textureCount;r++)r!==t&&1===this.textureDimension[r]&&null!==this.texturePixels[r]&&this.textureLoadedNumber[r].lessThan(e)&&(e=this.textureLoadedNumber[r],i=r);this.texturePixels[t]=this.texturePixels[i],this.texturePixels[i]=null,this.setTexturePixels(t)}setTexturePixels(t){let e=0;e=0===this.textureDimension[t]?64:128;let i=this.texturePixels[t],r=0;for(let n=0;n<e;n++)for(let s=0;s<e;s++){let o=this.textureColourList[t][255&this.textureColoursUsed[t][s+n*e]];0==(o&=16316671)?o=1:16253183===o&&(o=0,this.textureBackTransparent[t]=!0),i[r++]=o}for(let n=0;n<r;n++){let t=i[n];i[r+n]=t-(t>>>3)&16316671,i[2*r+n]=t-(t>>>2)&16316671,i[3*r+n]=t-(t>>>2)-(t>>>3)&16316671}}doSOemthingWithTheFuckinFountainFuck(t){if(null===this.texturePixels[t])return;let e=this.texturePixels[t];for(let r=0;r<64;r++){let i=r+4032,n=e[i];for(let t=0;t<63;t++)e[i]=e[i-64],i-=64;this.texturePixels[t][i]=n}let i=4096;for(let r=0;r<i;r++){let t=e[r];e[i+r]=t-(t>>>3)&16316671,e[8192+r]=t-(t>>>2)&16316671,e[3*i+r]=t-(t>>>2)-(t>>>3)&16316671}}method302(t){return 12345678===t?0:(this.prepareTexture(t),t>=0?this.texturePixels[t][0]:t<0?(((t=-(t+1))>>10&31)<<19)+((t>>5&31)<<11)+((31&t)<<3):0)}_setLight_from3(t,e,i){0===t&&0===e&&0===i&&(t=32);for(let r=0;r<this.modelCount;r++)this.models[r]._setLight_from3(t,e,i)}_setLight_from5(t,e,i,r,n){0===i&&0===r&&0===n&&(i=32);for(let s=0;s<this.modelCount;s++)this.models[s]._setLight_from5(t,e,i,r,n)}method306(t,e,i,r,n){return r===e?t:t+((i-t)*(n-e)/(r-e)|0)}method307(t,e,i,r,n){return n&&t<=i||t<i?t>r||e>i||e>r||!n:t<r||e<i||e<r||n}method308(t,e,i,r){return r&&t<=i||t<i?e>i||!r:e<i||r}intersect(t,e,i,r){let n,s,o=t.length,h=i.length,a=0,u=n=e[0],l=0,c=s=r[0],f=0;for(let w=1;w<o;w++)e[w]<n?(n=e[w],l=w):e[w]>u&&(u=e[w]);for(let w=1;w<h;w++)r[w]<s?(s=r[w],f=w):r[w]>c&&(c=r[w]);if(s>=u)return!1;if(n>=c)return!1;let d=0,p=0,m=!1;if(e[l]<r[f]){for(d=l;e[d]<r[f];d=(d+1)%o);for(;e[l]<r[f];l=(l-1+o)%o);let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f];if(m=n<u|s<u,this.method308(n,s,u,m))return!0;p=(f+1)%h,f=(f-1+h)%h,l===d&&(a=1)}else{for(p=f;r[p]<e[l];p=(p+1)%h);for(;r[f]<e[l];f=(f-1+h)%h);let n=t[l],s=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[l]),u=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[l]);if(m=n<s|n<u,this.method308(s,u,n,!m))return!0;d=(l+1)%o,l=(l-1+o)%o,f===p&&(a=2)}for(;0===a;)if(e[l]<e[d])if(e[l]<r[f])if(e[l]<r[p]){let n=t[l],s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],e[l]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[l]),c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[l]);if(this.method307(n,s,u,c,m))return!0;(l=(l-1+o)%o)===d&&(a=1)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=2)}else if(r[f]<r[p]){let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],r[f]);if(this.method307(n,s,u,c,m))return!0;(f=(f-1+h)%h)===p&&(a=2)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=2)}else if(e[d]<r[f])if(e[d]<r[p]){let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),s=t[d],u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[d]),c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[d]);if(this.method307(n,s,u,c,m))return!0;l===(d=(d+1)%o)&&(a=1)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=2)}else if(r[f]<r[p]){let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],r[f]);if(this.method307(n,s,u,c,m))return!0;(f=(f-1+h)%h)===p&&(a=2)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=2)}for(;1===a;)if(e[l]<r[f]){if(e[l]<r[p]){let n=t[l],s=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[l]),o=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[l]);return this.method308(s,o,n,!m)}let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=0)}else if(r[f]<r[p]){let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),u=i[f],c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],r[f]);if(this.method307(n,s,u,c,m))return!0;(f=(f-1+h)%h)===p&&(a=0)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[p]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[p]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],r[p]),c=i[p];if(this.method307(n,s,u,c,m))return!0;f===(p=(p+1)%h)&&(a=0)}for(;2===a;)if(r[f]<e[l]){if(r[f]<e[d]){let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),h=i[f];return this.method308(n,s,h,m)}let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),s=t[d],u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[d]),c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[d]);if(this.method307(n,s,u,c,m))return!0;l===(d=(d+1)%o)&&(a=0)}else if(e[l]<e[d]){let n=t[l],s=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],e[l]),u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[l]),c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[l]);if(this.method307(n,s,u,c,m))return!0;(l=(l-1+o)%o)===d&&(a=0)}else{let n=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],e[d]),s=t[d],u=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[d]),c=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[d]);if(this.method307(n,s,u,c,m))return!0;l===(d=(d+1)%o)&&(a=0)}if(e[l]<r[f]){let n=t[l],s=this.method306(i[(f+1)%h],r[(f+1)%h],i[f],r[f],e[l]),o=this.method306(i[(p-1+h)%h],r[(p-1+h)%h],i[p],r[p],e[l]);return this.method308(s,o,n,!m)}let g=this.method306(t[(l+1)%o],e[(l+1)%o],t[l],e[l],r[f]),y=this.method306(t[(d-1+o)%o],e[(d-1+o)%o],t[d],e[d],r[f]),b=i[f];return this.method308(g,y,b,m)}}zp.frustumFarZ=0,zp.frustumMaxX=0,zp.frustumMaxY=0,zp.frustumMinX=0,zp.frustumMinY=0,zp.frustumNearZ=0,zp.sin512Cache=new Int32Array(512),zp.sinCosCache=new Int32Array(2048),zp.textureCountLoaded=new xt(0),qp=zp;var Vp={};class Zp{constructor(){this.numVertices=0,this.numFaces=0,this.transformState=0,this.visible=!1,this.textureTranslucent=!1,this.transparent=!1,this.isolated=!1,this.unlit=!1,this.unpickable=!1,this.projected=!1,this.autocommit=!1,this.depth=0,this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.z1=0,this.z2=0,this.key=-1,this.maxVerts=0,this.lightDiffuse=512,this.lightAmbience=32,this.magic=0,this.maxFaces=0,this.baseX=0,this.baseY=0,this.baseZ=0,this.scaleFx=0,this.scaleFy=0,this.scaleFz=0,this.shearXy=0,this.shearXz=0,this.shearYx=0,this.shearYz=0,this.shearZx=0,this.shearZy=0,this.transformKind=0,this.diameter=0,this.lightDirectionX=180,this.lightDirectionY=155,this.lightDirectionZ=95,this.lightDirectionMagnitude=0,this.dataPtr=0,this.orientationYaw=0,this.orientationPitch=0,this.orientationRoll=0,this.projectVertexX=null,this.projectVertexY=null,this.projectVertexZ=null,this.vertexViewX=null,this.vertexViewY=null,this.vertexIntensity=null,this.vertexAmbience=null,this.faceNumVertices=null,this.faceVertices=null,this.faceFillFront=null,this.faceFillBack=null,this.normalMagnitude=null,this.normalScale=null,this.faceIntensity=null,this.faceNormalX=null,this.faceNormalY=null,this.faceNormalZ=null,this.faceTag=null,this.isLocalPlayer=null,this.vertexX=null,this.vertexY=null,this.vertexZ=null,this.vertexTransformedX=null,this.vertexTransformedY=null,this.vertexTransformedZ=null,this.faceTransStateThing=null,this.faceBoundLeft=null,this.faceBoundRight=null,this.faceBoundBottom=null,this.faceBoundTop=null,this.faceBoundNear=null,this.faceBoundFar=null}static _from2(t,e){let i=new Zp;i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=12345678,i.diameter=12345678,i.lightDirectionMagnitude=256,i.allocate(t,e),i.faceTransStateThing=[];for(let r=0;r<i.numFaces;r++)i.faceTransStateThing.push(new Int32Array([0]));return i}static _from2A(t,e){let i=new Zp;return i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=12345678,i.diameter=12345678,i.lightDirectionMagnitude=256,i.merge(t,e,!0),i}static fromBytes(t,e){let i=new Zp;i.transformState=1,i.visible=!0,i.textureTranslucent=!1,i.transparent=!1,i.autocommit=!1,i.isolated=!1,i.unlit=!1,i.unpickable=!1,i.projected=!1,i.magic=12345678,i.diameter=12345678,i.lightDirectionMagnitude=256;const r=Ud.getUnsignedShort(t,e);e+=2;const n=Ud.getUnsignedShort(t,e);e+=2,i.allocate(r,n),i.faceTransStateThing=[],i.faceTransStateThing.length=n;for(let s=0;s<n;s+=1)i.faceTransStateThing[s]=[0];for(let s=0;s<r;s++)i.vertexX[s]=Ud.getSignedShort(t,e),e+=2;for(let s=0;s<r;s++)i.vertexY[s]=Ud.getSignedShort(t,e),e+=2;for(let s=0;s<r;s++)i.vertexZ[s]=Ud.getSignedShort(t,e),e+=2;i.numVertices=r;for(let s=0;s<n;s++)i.faceNumVertices[s]=255&t[e++];for(let s=0;s<n;s++)i.faceFillFront[s]=Ud.getSignedShort(t,e),e+=2,32767===i.faceFillFront[s]&&(i.faceFillFront[s]=i.magic);for(let s=0;s<n;s++)i.faceFillBack[s]=Ud.getSignedShort(t,e),e+=2,32767===i.faceFillBack[s]&&(i.faceFillBack[s]=i.magic);for(let s=0;s<n;s++){const r=255&t[e++];i.faceIntensity[s]=0===r?0:i.magic}for(let s=0;s<n;s++){i.faceVertices[s]=new Int32Array(i.faceNumVertices[s]);for(let n=0;n<i.faceNumVertices[s];n++)r<256?i.faceVertices[s][n]=255&t[e++]:(i.faceVertices[s][n]=Ud.getUnsignedShort(t,e),e+=2)}return i.numFaces=n,i.transformState=1,i}static _from6(t,e,i,r,n,s){let o=new Zp;return o.transformState=1,o.visible=!0,o.textureTranslucent=!1,o.transparent=!1,o.projected=!1,o.magic=12345678,o.diameter=12345678,o.lightDirectionMagnitude=256,o.autocommit=i,o.isolated=r,o.unlit=n,o.unpickable=s,o.merge(t,e,!1),o}static _from7(t,e,i,r,n,s,o){let h=new Zp;return h.transformState=1,h.visible=!0,h.textureTranslucent=!1,h.transparent=!1,h.magic=12345678,h.diameter=12345678,h.lightDirectionMagnitude=256,h.autocommit=i,h.isolated=r,h.unlit=n,h.unpickable=s,h.projected=o,h.allocate(t,e),h}allocate(t,e){this.vertexX=new Int32Array(t),this.vertexY=new Int32Array(t),this.vertexZ=new Int32Array(t),this.vertexIntensity=new Int32Array(t),this.vertexAmbience=new Int8Array(t),this.faceNumVertices=new Int32Array(e),this.faceVertices=[],this.faceVertices.length=e,this.faceVertices.fill(null),this.faceFillFront=new Int32Array(e),this.faceFillBack=new Int32Array(e),this.faceIntensity=new Int32Array(e),this.normalScale=new Int32Array(e),this.normalMagnitude=new Int32Array(e),this.projected||(this.projectVertexX=new Int32Array(t),this.projectVertexY=new Int32Array(t),this.projectVertexZ=new Int32Array(t),this.vertexViewX=new Int32Array(t),this.vertexViewY=new Int32Array(t)),this.unpickable||(this.isLocalPlayer=new Int8Array(e),this.faceTag=new Int32Array(e)),this.autocommit?(this.vertexTransformedX=this.vertexX,this.vertexTransformedY=this.vertexY,this.vertexTransformedZ=this.vertexZ):(this.vertexTransformedX=new Int32Array(t),this.vertexTransformedY=new Int32Array(t),this.vertexTransformedZ=new Int32Array(t)),this.unlit&&this.isolated||(this.faceNormalX=new Int32Array(e),this.faceNormalY=new Int32Array(e),this.faceNormalZ=new Int32Array(e)),this.isolated||(this.faceBoundLeft=new Int32Array(e),this.faceBoundRight=new Int32Array(e),this.faceBoundBottom=new Int32Array(e),this.faceBoundTop=new Int32Array(e),this.faceBoundNear=new Int32Array(e),this.faceBoundFar=new Int32Array(e)),this.numFaces=0,this.numVertices=0,this.maxVerts=t,this.maxFaces=e,this.baseX=this.baseY=this.baseZ=0,this.orientationYaw=this.orientationPitch=this.orientationRoll=0,this.scaleFx=this.scaleFy=this.scaleFz=256,this.shearXy=this.shearXz=this.shearYx=this.shearYz=this.shearZx=this.shearZy=256,this.transformKind=0}projectionPrepare(){this.projectVertexX=new Int32Array(this.numVertices),this.projectVertexY=new Int32Array(this.numVertices),this.projectVertexZ=new Int32Array(this.numVertices),this.vertexViewX=new Int32Array(this.numVertices),this.vertexViewY=new Int32Array(this.numVertices)}clear(){this.numFaces=0,this.numVertices=0}reduce(t,e){this.numFaces-=t,this.numFaces<0&&(this.numFaces=0),this.numVertices-=e,this.numVertices<0&&(this.numVertices=0)}merge(t,e,i){let r=0,n=0;for(let s=0;s<e;s++)r+=t[s].numFaces,n+=t[s].numVertices;this.allocate(n,r),i&&(this.faceTransStateThing=[],this.faceTransStateThing.length=r);for(let s=0;s<e;s++){let r=t[s];r.commit(),this.lightAmbience=r.lightAmbience,this.lightDiffuse=r.lightDiffuse,this.lightDirectionX=r.lightDirectionX,this.lightDirectionY=r.lightDirectionY,this.lightDirectionZ=r.lightDirectionZ,this.lightDirectionMagnitude=r.lightDirectionMagnitude;for(let t=0;t<r.numFaces;t++){let n=new Int32Array(r.faceNumVertices[t]),o=r.faceVertices[t];for(let e=0;e<r.faceNumVertices[t];e++)n[e]=this.vertexAt(r.vertexX[o[e]],r.vertexY[o[e]],r.vertexZ[o[e]]);let h=this.createFace(r.faceNumVertices[t],n,r.faceFillFront[t],r.faceFillBack[t]);if(this.faceIntensity[h]=r.faceIntensity[t],this.normalScale[h]=r.normalScale[t],this.normalMagnitude[h]=r.normalMagnitude[t],i)if(e>1){this.faceTransStateThing[h]=new Int32Array(r.faceTransStateThing[t].length+1),this.faceTransStateThing[h][0]=s;for(let e=0;e<r.faceTransStateThing[t].length;e++)this.faceTransStateThing[h][e+1]=r.faceTransStateThing[t][e]}else{this.faceTransStateThing[h]=new Int32Array(r.faceTransStateThing[t].length);for(let e=0;e<r.faceTransStateThing[t].length;e++)this.faceTransStateThing[h][e]=r.faceTransStateThing[t][e]}}}this.transformState=1}vertexAt(t,e,i){for(let r=0;r<this.numVertices;r++)if(this.vertexX[r]===t&&this.vertexY[r]===e&&this.vertexZ[r]===i)return r;return this.numVertices>=this.maxVerts?-1:(this.vertexX[this.numVertices]=t,this.vertexY[this.numVertices]=e,this.vertexZ[this.numVertices]=i,this.numVertices++)}createVertex(t,e,i){return this.numVertices>=this.maxVerts?-1:(this.vertexX[this.numVertices]=t,this.vertexY[this.numVertices]=e,this.vertexZ[this.numVertices]=i,this.numVertices++)}createFace(t,e,i,r){return this.numFaces>=this.maxFaces?-1:(this.faceNumVertices[this.numFaces]=t,this.faceVertices[this.numFaces]=e,this.faceFillFront[this.numFaces]=i,this.faceFillBack[this.numFaces]=r,this.transformState=1,this.numFaces++)}split(t,e,i,r,n,s,o,h){this.commit();let a=new Int32Array(s),u=new Int32Array(s);for(let c=0;c<s;c++)a[c]=0,u[c]=0;for(let c=0;c<this.numFaces;c++){let t=0,e=0,s=this.faceNumVertices[c],o=this.faceVertices[c];for(let i=0;i<s;i++)t+=this.vertexX[o[i]],e+=this.vertexZ[o[i]];let h=(t/(s*i)|0)+(e/(s*r)|0)*n;a[h]+=s,u[h]++}let l=[];for(let c=0;c<s;c++)a[c]>o&&(a[c]=o),l.push(Zp._from7(a[c],u[c],!0,!0,!0,h,!0)),l[c].lightDiffuse=this.lightDiffuse,l[c].lightAmbience=this.lightAmbience;for(let c=0;c<this.numFaces;c++){let t=0,e=0,s=this.faceNumVertices[c],o=this.faceVertices[c];for(let i=0;i<s;i++)t+=this.vertexX[o[i]],e+=this.vertexZ[o[i]];let h=(t/(s*i)|0)+(e/(s*r)|0)*n;this.copyLighting(l[h],o,s,c)}for(let c=0;c<s;c++)l[c].projectionPrepare();return l}copyLighting(t,e,i,r){let n=new Int32Array(i);for(let o=0;o<i;o++){let i=n[o]=t.vertexAt(this.vertexX[e[o]],this.vertexY[e[o]],this.vertexZ[e[o]]);t.vertexIntensity[i]=this.vertexIntensity[e[o]],t.vertexAmbience[i]=this.vertexAmbience[e[o]]}let s=t.createFace(i,n,this.faceFillFront[r],this.faceFillBack[r]);t.unpickable||this.unpickable||(t.faceTag[s]=this.faceTag[r]),t.faceIntensity[s]=this.faceIntensity[r],t.normalScale[s]=this.normalScale[r],t.normalMagnitude[s]=this.normalMagnitude[r]}_setLight_from5(t,e,i,r,n){this.lightAmbience=256-4*t,this.lightDiffuse=16*(64-e)+128,this.unlit||(this.lightDirectionX=i,this.lightDirectionY=r,this.lightDirectionZ=n,this.lightDirectionMagnitude=0|Math.sqrt(i*i+r*r+n*n),this.light())}_setLight_from6(t,e,i,r,n,s){if(this.lightAmbience=256-4*e,this.lightDiffuse=16*(64-i)+128,!this.unlit){for(let e=0;e<this.numFaces;e++)this.faceIntensity[e]=t?this.magic:0;this.lightDirectionX=r,this.lightDirectionY=n,this.lightDirectionZ=s,this.lightDirectionMagnitude=0|Math.sqrt(r*r+n*n+s*s),this.light()}}_setLight_from3(t,e,i){this.unlit||(this.lightDirectionX=t,this.lightDirectionY=e,this.lightDirectionZ=i,this.lightDirectionMagnitude=0|Math.sqrt(t*t+e*e+i*i),this.light())}setVertexAmbience(t,e){this.vertexAmbience[t]=255&e}rotate(t,e,i){this.orientationYaw=this.orientationYaw+t&255,this.orientationPitch=this.orientationPitch+e&255,this.orientationRoll=this.orientationRoll+i&255,this.determineTransformKind(),this.transformState=1}orient(t,e,i){this.orientationYaw=255&t,this.orientationPitch=255&e,this.orientationRoll=255&i,this.determineTransformKind(),this.transformState=1}translate(t,e,i){this.baseX+=t,this.baseY+=e,this.baseZ+=i,this.determineTransformKind(),this.transformState=1}place(t,e,i){this.baseX=t,this.baseY=e,this.baseZ=i,this.determineTransformKind(),this.transformState=1}determineTransformKind(){256!==this.shearXy||256!==this.shearXz||256!==this.shearYx||256!==this.shearYz||256!==this.shearZx||256!==this.shearZy?this.transformKind=4:256!==this.scaleFx||256!==this.scaleFy||256!==this.scaleFz?this.transformKind=3:0!==this.orientationYaw||0!==this.orientationPitch||0!==this.orientationRoll?this.transformKind=2:0!==this.baseX||0!==this.baseY||0!==this.baseZ?this.transformKind=1:this.transformKind=0}applyTranslate(t,e,i){for(let r=0;r<this.numVertices;r++)this.vertexTransformedX[r]+=t,this.vertexTransformedY[r]+=e,this.vertexTransformedZ[r]+=i}applyRotation(t,e,i){for(let r=0;r<this.numVertices;r++){if(0!==i){let t=Zp.sine9[i],e=Zp.sine9[i+256],n=this.vertexTransformedY[r]*t+this.vertexTransformedX[r]*e>>15;this.vertexTransformedY[r]=this.vertexTransformedY[r]*e-this.vertexTransformedX[r]*t>>15,this.vertexTransformedX[r]=n}if(0!==t){let e=Zp.sine9[t],i=Zp.sine9[t+256],n=this.vertexTransformedY[r]*i-this.vertexTransformedZ[r]*e>>15;this.vertexTransformedZ[r]=this.vertexTransformedY[r]*e+this.vertexTransformedZ[r]*i>>15,this.vertexTransformedY[r]=n}if(0!==e){let t=Zp.sine9[e],i=Zp.sine9[e+256],n=this.vertexTransformedZ[r]*t+this.vertexTransformedX[r]*i>>15;this.vertexTransformedZ[r]=this.vertexTransformedZ[r]*i-this.vertexTransformedX[r]*t>>15,this.vertexTransformedX[r]=n}}}applyShear(t,e,i,r,n,s){for(let o=0;o<this.numVertices;o++)0!==t&&(this.vertexTransformedX[o]+=this.vertexTransformedY[o]*t>>8),0!==e&&(this.vertexTransformedZ[o]+=this.vertexTransformedY[o]*e>>8),0!==i&&(this.vertexTransformedX[o]+=this.vertexTransformedZ[o]*i>>8),0!==r&&(this.vertexTransformedY[o]+=this.vertexTransformedZ[o]*r>>8),0!==n&&(this.vertexTransformedZ[o]+=this.vertexTransformedX[o]*n>>8),0!==s&&(this.vertexTransformedY[o]+=this.vertexTransformedX[o]*s>>8)}applyScale(t,e,i){for(let r=0;r<this.numVertices;r++)this.vertexTransformedX[r]=this.vertexTransformedX[r]*t>>8,this.vertexTransformedY[r]=this.vertexTransformedY[r]*e>>8,this.vertexTransformedZ[r]=this.vertexTransformedZ[r]*i>>8}computeBounds(){this.x1=this.y1=this.z1=999999,this.diameter=this.x2=this.y2=this.z2=-999999;for(let t=0;t<this.numFaces;t++){let e=this.faceVertices[t],i=e[0],r=this.faceNumVertices[t],n=0,s=n=this.vertexTransformedX[i],o=0,h=o=this.vertexTransformedY[i],a=0,u=a=this.vertexTransformedZ[i];for(let t=0;t<r;t++)i=e[t],this.vertexTransformedX[i]<n?n=this.vertexTransformedX[i]:this.vertexTransformedX[i]>s&&(s=this.vertexTransformedX[i]),this.vertexTransformedY[i]<o?o=this.vertexTransformedY[i]:this.vertexTransformedY[i]>h&&(h=this.vertexTransformedY[i]),this.vertexTransformedZ[i]<a?a=this.vertexTransformedZ[i]:this.vertexTransformedZ[i]>u&&(u=this.vertexTransformedZ[i]);this.isolated||(this.faceBoundLeft[t]=n,this.faceBoundRight[t]=s,this.faceBoundBottom[t]=o,this.faceBoundTop[t]=h,this.faceBoundNear[t]=a,this.faceBoundFar[t]=u),s-n>this.diameter&&(this.diameter=s-n),h-o>this.diameter&&(this.diameter=h-o),u-a>this.diameter&&(this.diameter=u-a),n<this.x1&&(this.x1=n),s>this.x2&&(this.x2=s),o<this.y1&&(this.y1=o),h>this.y2&&(this.y2=h),a<this.z1&&(this.z1=a),u>this.z2&&(this.z2=u)}}light(){if(this.unlit)return;let t=this.lightDiffuse*this.lightDirectionMagnitude>>8;for(let s=0;s<this.numFaces;s++)this.faceIntensity[s]!==this.magic&&(this.faceIntensity[s]=(this.faceNormalX[s]*this.lightDirectionX+this.faceNormalY[s]*this.lightDirectionY+this.faceNormalZ[s]*this.lightDirectionZ)/t|0);let e=new Int32Array(this.numVertices),i=new Int32Array(this.numVertices),r=new Int32Array(this.numVertices),n=new Int32Array(this.numVertices);for(let s=0;s<this.numVertices;s++)e[s]=0,i[s]=0,r[s]=0,n[s]=0;for(let s=0;s<this.numFaces;s++)if(this.faceIntensity[s]===this.magic)for(let t=0;t<this.faceNumVertices[s];t++){let o=this.faceVertices[s][t];e[o]+=this.faceNormalX[s],i[o]+=this.faceNormalY[s],r[o]+=this.faceNormalZ[s],n[o]++}for(let s=0;s<this.numVertices;s++)n[s]>0&&(this.vertexIntensity[s]=(e[s]*this.lightDirectionX+i[s]*this.lightDirectionY+r[s]*this.lightDirectionZ)/(t*n[s])|0)}relight(){if(!this.unlit||!this.isolated){for(let t=0;t<this.numFaces;t++){let e,i=this.faceVertices[t],r=this.vertexTransformedX[i[0]],n=this.vertexTransformedY[i[0]],s=this.vertexTransformedZ[i[0]],o=this.vertexTransformedX[i[1]]-r,h=this.vertexTransformedY[i[1]]-n,a=this.vertexTransformedZ[i[1]]-s,u=this.vertexTransformedX[i[2]]-r,l=this.vertexTransformedY[i[2]]-n,c=this.vertexTransformedZ[i[2]]-s,f=h*c-l*a,d=a*u-c*o;for(e=o*l-u*h;f>8192||d>8192||e>8192||f<-8192||d<-8192||e<-8192;e>>=1)f>>=1,d>>=1;let p=256*Math.sqrt(f*f+d*d+e*e)|0;p<=0&&(p=1),this.faceNormalX[t]=65536*f/p|0,this.faceNormalY[t]=65536*d/p|0,this.faceNormalZ[t]=65535*e/p|0,this.normalScale[t]=-1}this.light()}}apply(){if(2===this.transformState){this.transformState=0;for(let t=0;t<this.numVertices;t++)this.vertexTransformedX[t]=this.vertexX[t],this.vertexTransformedY[t]=this.vertexY[t],this.vertexTransformedZ[t]=this.vertexZ[t];return this.x1=this.y1=this.z1=-9999999,void(this.diameter=this.x2=this.y2=this.z2=9999999)}if(1===this.transformState){this.transformState=0;for(let t=0;t<this.numVertices;t++)this.vertexTransformedX[t]=this.vertexX[t],this.vertexTransformedY[t]=this.vertexY[t],this.vertexTransformedZ[t]=this.vertexZ[t];this.transformKind>=2&&this.applyRotation(this.orientationYaw,this.orientationPitch,this.orientationRoll),this.transformKind>=3&&this.applyScale(this.scaleFx,this.scaleFy,this.scaleFz),this.transformKind>=4&&this.applyShear(this.shearXy,this.shearXz,this.shearYx,this.shearYz,this.shearZx,this.shearZy),this.transformKind>=1&&this.applyTranslate(this.baseX,this.baseY,this.baseZ),this.computeBounds(),this.relight()}}project(t,e,i,r,n,s,o,h){if(this.apply(),this.z1>qp.frustumNearZ||this.z2<qp.frustumFarZ||this.x1>qp.frustumMinX||this.x2<qp.frustumMaxX||this.y1>qp.frustumMinY||this.y2<qp.frustumMaxY)return void(this.visible=!1);this.visible=!0;let a=0,u=0,l=0,c=0,f=0,d=0;0!==s&&(a=Zp.sine11[s],u=Zp.sine11[s+1024]),0!==n&&(f=Zp.sine11[n],d=Zp.sine11[n+1024]),0!==r&&(l=Zp.sine11[r],c=Zp.sine11[r+1024]);for(let p=0;p<this.numVertices;p++){let m=this.vertexTransformedX[p]-t,g=this.vertexTransformedY[p]-e,y=this.vertexTransformedZ[p]-i;if(0!==s){let t=g*a+m*u>>15;g=g*u-m*a>>15,m=t}if(0!==n){let t=y*f+m*d>>15;y=y*d-m*f>>15,m=t}if(0!==r){let t=g*c-y*l>>15;y=g*l+y*c>>15,g=t}this.vertexViewX[p]=y>=h?(m<<o)/y|0:m<<o,this.vertexViewY[p]=y>=h?(g<<o)/y|0:g<<o,this.projectVertexX[p]=m,this.projectVertexY[p]=g,this.projectVertexZ[p]=y}}commit(){this.apply();for(let t=0;t<this.numVertices;t++)this.vertexX[t]=this.vertexTransformedX[t],this.vertexY[t]=this.vertexTransformedY[t],this.vertexZ[t]=this.vertexTransformedZ[t];this.baseX=this.baseY=this.baseZ=0,this.orientationYaw=this.orientationPitch=this.orientationRoll=0,this.scaleFx=this.scaleFy=this.scaleFz=256,this.shearXy=this.shearXz=this.shearYx=this.shearYz=this.shearZx=this.shearZy=256,this.transformKind=0}copy(...t){if(!t||!t.length){let t=Zp._from2A([this],1);return t.depth=this.depth,t.transparent=this.transparent,t}const[e,i,r,n]=t;let s=Zp._from6([this],1,e,i,r,n);return s.depth=this.depth,s}copyPosition(t){this.orientationYaw=t.orientationYaw,this.orientationPitch=t.orientationPitch,this.orientationRoll=t.orientationRoll,this.baseX=t.baseX,this.baseY=t.baseY,this.baseZ=t.baseZ,this.determineTransformKind(),this.transformState=1}readBase64(t){for(;10===t[this.dataPtr]||13===t[this.dataPtr];this.dataPtr++);let e=4096*Zp.base64Alphabet[255&t[this.dataPtr++]]+64*Zp.base64Alphabet[255&t[this.dataPtr++]]+Zp.base64Alphabet[255&t[this.dataPtr++]]-131072|0;return 123456===e&&(e=this.magic),e}}Zp.sine9=new Int32Array(512),Zp.sine11=new Int32Array(2048),Zp.base64Alphabet=new Int32Array(256);for(let ng=0;ng<256;ng++)Zp.sine9[ng]=32768*Math.sin(.02454369*ng)|0,Zp.sine9[ng+256]=32768*Math.cos(.02454369*ng)|0;for(let ng=0;ng<1024;ng++)Zp.sine11[ng]=32768*Math.sin(.00613592315*ng)|0,Zp.sine11[ng+1024]=32768*Math.cos(.00613592315*ng)|0;for(let ng=0;ng<10;ng++)Zp.base64Alphabet[48+ng]=ng;for(let ng=0;ng<26;ng++)Zp.base64Alphabet[65+ng]=ng+10;for(let ng=0;ng<26;ng++)Zp.base64Alphabet[97+ng]=ng+36;Zp.base64Alphabet[163]=62,Zp.base64Alphabet[36]=63,Vp=Zp;var Gp={};const Kp=0,$p=1,Jp=2,Qp=3,tm=4,em=5,im=6,rm=7,nm=8,sm=9,om=10,hm=11,am=12,um=14,lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!\"\xa3$%^&*()-_=+[{]};:'@#~,<.>/?\\| ";class cm{constructor(t,e){this.controlCount=0,this.mouseX=0,this.mouseY=0,this.mouseLastButtonDown=0,this.mouseButtonDown=0,this.mouseMetaButtonHeld=0,this.mouseScrollDelta=0,this.focusControlIndex=-1,this.aBoolean219=!0,this.surface=t,this.maxControls=e,this.controlShown=new Int8Array(e),this.controlListScrollbarHandleDragged=new Int8Array(e),this.controlMaskText=new Int8Array(e),this.controlClicked=new Int8Array(e),this.controlUseAlternativeColour=new Int8Array(e),this.controlFlashText=new Int32Array(e),this.controlListEntryCount=new Int32Array(e),this.controlListEntryMouseButtonDown=new Int32Array(e),this.controlListEntryMouseOver=new Int32Array(e),this.controlX=new Int32Array(e),this.controlY=new Int32Array(e),this.controlType=new Int32Array(e),this.controlWidth=new Int32Array(e),this.controlHeight=new Int32Array(e),this.controlInputMaxLen=new Int32Array(e),this.controlTextSize=new Int32Array(e),this.controlText=[],this.controlText.length=e,this.controlListEntries=[];for(let i=0;i<e;i+=1)this.controlListEntries.push([]);this.colourScrollbarTop=this.rgbToIntMod(114,114,176),this.colourScrollbarBottom=this.rgbToIntMod(14,14,62),this.colourScrollbarHandleLeft=this.rgbToIntMod(200,208,232),this.colourScrollbarHandleMid=this.rgbToIntMod(96,129,184),this.colourScrollbarHandleRight=this.rgbToIntMod(53,95,115),this.colourRoundedBoxOut=this.rgbToIntMod(117,142,171),this.colourRoundedBoxMid=this.rgbToIntMod(98,122,158),this.colourRoundedBoxIn=this.rgbToIntMod(86,100,136),this.colourBoxTopNBottom=this.rgbToIntMod(135,146,179),this.colourBoxTopNBottom2=this.rgbToIntMod(97,112,151),this.colourBoxLeftNRight2=this.rgbToIntMod(88,102,136),this.colourBoxLeftNRight=this.rgbToIntMod(84,93,120)}rgbToIntMod(t,e,i){return Jd.rgbToInt(cm.redMod*t/114|0,cm.greenMod*e/114|0,cm.blueMod*i/176|0)}handleMouse(t,e,i,r,n=0){if(this.mouseX=t,this.mouseY=e,this.mouseButtonDown=r,this.mouseScrollDelta=n,0!==i&&(this.mouseLastButtonDown=i),1===i)for(let s=0;s<this.controlCount;s++)this.controlShown[s]&&this.controlType[s]===om&&this.mouseX>=this.controlX[s]&&this.mouseY>=this.controlY[s]&&this.mouseX<=this.controlX[s]+this.controlWidth[s]&&this.mouseY<=this.controlY[s]+this.controlHeight[s]&&(this.controlClicked[s]=!0),this.controlShown[s]&&this.controlType[s]===um&&this.mouseX>=this.controlX[s]&&this.mouseY>=this.controlY[s]&&this.mouseX<=this.controlX[s]+this.controlWidth[s]&&this.mouseY<=this.controlY[s]+this.controlHeight[s]&&(this.controlListEntryMouseButtonDown[s]=1-this.controlListEntryMouseButtonDown[s]);1===r?this.mouseMetaButtonHeld++:this.mouseMetaButtonHeld=0}isClicked(t){return!(!this.controlShown[t]||!this.controlClicked[t]||(this.controlClicked[t]=!1,0))}keyPress(t){if(0!==t&&-1!==this.focusControlIndex&&null!==this.controlText[this.focusControlIndex]&&this.controlShown[this.focusControlIndex]){const e=this.controlText[this.focusControlIndex].length;if(8===t&&e>0&&(this.controlText[this.focusControlIndex]=this.controlText[this.focusControlIndex].slice(0,e-1)),(10===t||13===t)&&e>0&&(this.controlClicked[this.focusControlIndex]=!0),e<this.controlInputMaxLen[this.focusControlIndex])for(let i=0;i<lm.length;i++)t===lm.charCodeAt(i)&&(this.controlText[this.focusControlIndex]+=String.fromCharCode(t));if(9===t)do{this.focusControlIndex=(this.focusControlIndex+1)%this.controlCount}while(5!==this.controlType[this.focusControlIndex]&&6!==this.controlType[this.focusControlIndex])}}drawPanel(){for(let t=0;t<this.controlCount;t++)this.controlShown[t]&&(this.controlType[t]===Kp?this.drawText(t,this.controlX[t],this.controlY[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===$p?this.drawText(t,this.controlX[t]-(this.surface.textWidth(this.controlText[t],this.controlTextSize[t])/2|0),this.controlY[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===Jp?this.drawBox(this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]):this.controlType[t]===Qp?this.drawLineHoriz(this.controlX[t],this.controlY[t],this.controlWidth[t]):this.controlType[t]===tm?this.drawTextList(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlTextSize[t],this.controlListEntries[t],this.controlListEntryCount[t],this.controlFlashText[t]):this.controlType[t]===em||this.controlType[t]===im?this.drawTextInput(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlText[t],this.controlTextSize[t]):this.controlType[t]===rm?this.drawOptionListHoriz(t,this.controlX[t],this.controlY[t],this.controlTextSize[t],this.controlListEntries[t]):this.controlType[t]===nm?this.drawOptionListVert(t,this.controlX[t],this.controlY[t],this.controlTextSize[t],this.controlListEntries[t]):this.controlType[t]===sm?this.drawTextListInteractive(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t],this.controlTextSize[t],this.controlListEntries[t],this.controlListEntryCount[t],this.controlFlashText[t]):this.controlType[t]===hm?this.drawRoundedBox(this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]):this.controlType[t]===am?this.drawPicture(this.controlX[t],this.controlY[t],this.controlTextSize[t]):this.controlType[t]===um&&this.drawCheckbox(t,this.controlX[t],this.controlY[t],this.controlWidth[t],this.controlHeight[t]));this.mouseLastButtonDown=0}drawCheckbox(t,e,i,r,n){if(this.surface.drawBox(e,i,r,n,16777215),this.surface.drawLineHoriz(e,i,r,this.colourBoxTopNBottom),this.surface.drawLineVert(e,i,n,this.colourBoxTopNBottom),this.surface.drawLineHoriz(e,i+n-1,r,this.colourBoxLeftNRight),this.surface.drawLineVert(e+r-1,i,n,this.colourBoxLeftNRight),1===this.controlListEntryMouseButtonDown[t])for(let s=0;s<n;s++)this.surface.drawLineHoriz(e+s,i+s,1,0),this.surface.drawLineHoriz(e+r-1-s,i+s,1,0)}drawText(t,e,i,r,n){const s=i+(this.surface.textHeight(n)/3|0);this.drawString(t,e,s,r,n)}drawString(t,e,i,r,n){let s;s=this.controlUseAlternativeColour[t]?16777215:0,this.surface.drawString(r,e,i,n,s)}drawTextInput(t,e,i,r,n,s,o){let h=s;if(this.controlMaskText[t]){const t=h.length;h="";for(let e=0;e<t;e++)h+="X"}if(this.controlType[t]===em?1===this.mouseLastButtonDown&&this.mouseX>=e&&this.mouseY>=i-(n/2|0)&&this.mouseX<=e+r&&this.mouseY<=i+(n/2|0)&&(this.focusControlIndex=t,this.setMobileFocus(t,s)):this.controlType[t]===im&&(1===this.mouseLastButtonDown&&this.mouseX>=e-(r/2|0)&&this.mouseY>=i-(n/2|0)&&this.mouseX<=e+r/2&&this.mouseY<=i+(n/2|0)&&(this.focusControlIndex=t,this.setMobileFocus(t,s)),e-=this.surface.textWidth(h,o)/2|0),this.focusControlIndex===t){const{mudclient:t}=this.surface,e=t.mobileInputCaret;t.options.mobile&&-1!==e?h=h.slice(0,e)+"*"+h.slice(e):h+="*"}const a=i+(this.surface.textHeight(o)/3|0);this.drawString(t,e,a,h,o)}drawBox(t,e,i,r){if(this.surface.setBounds(t,e,t+i,e+r),this.surface.drawGradient(t,e,i,r,this.colourBoxLeftNRight,this.colourBoxTopNBottom),cm.drawBackgroundArrow)for(let n=t-(63&e);n<t+i;n+=128)for(let t=e-(31&e);t<e+r;t+=128)this.surface.drawSpriteAlpha(n,t,6+cm.baseSpriteStart,128);this.surface.drawLineHoriz(t,e,i,this.colourBoxTopNBottom),this.surface.drawLineHoriz(t+1,e+1,i-2,this.colourBoxTopNBottom),this.surface.drawLineHoriz(t+2,e+2,i-4,this.colourBoxTopNBottom2),this.surface.drawLineVert(t,e,r,this.colourBoxTopNBottom),this.surface.drawLineVert(t+1,e+1,r-2,this.colourBoxTopNBottom),this.surface.drawLineVert(t+2,e+2,r-4,this.colourBoxTopNBottom2),this.surface.drawLineHoriz(t,e+r-1,i,this.colourBoxLeftNRight),this.surface.drawLineHoriz(t+1,e+r-2,i-2,this.colourBoxLeftNRight),this.surface.drawLineHoriz(t+2,e+r-3,i-4,this.colourBoxLeftNRight2),this.surface.drawLineVert(t+i-1,e,r,this.colourBoxLeftNRight),this.surface.drawLineVert(t+i-2,e+1,r-2,this.colourBoxLeftNRight),this.surface.drawLineVert(t+i-3,e+2,r-4,this.colourBoxLeftNRight2),this.surface.resetBounds()}drawRoundedBox(t,e,i,r){this.surface.drawBox(t,e,i,r,0),this.surface.drawBoxEdge(t,e,i,r,this.colourRoundedBoxOut),this.surface.drawBoxEdge(t+1,e+1,i-2,r-2,this.colourRoundedBoxMid),this.surface.drawBoxEdge(t+2,e+2,i-4,r-4,this.colourRoundedBoxIn),this.surface._drawSprite_from3(t,e,2+cm.baseSpriteStart),this.surface._drawSprite_from3(t+i-7,e,3+cm.baseSpriteStart),this.surface._drawSprite_from3(t,e+r-7,4+cm.baseSpriteStart),this.surface._drawSprite_from3(t+i-7,e+r-7,5+cm.baseSpriteStart)}drawPicture(t,e,i){this.surface._drawSprite_from3(t,e,i)}drawLineHoriz(t,e,i){this.surface.drawLineHoriz(t,e,i,16777215)}drawTextList(t,e,i,r,n,s,o,h,a){const u=n/this.surface.textHeight(s)|0,l=h-u;if(a>l&&(a=l),a<0&&(a=0),this.controlFlashText[t]=a,u<h){const s=e+r-12;let o=(n-27)*u/h|0;o<6&&(o=6);let c=(n-27-o)*a/l|0;0!==this.mouseScrollDelta&&this.mouseX>e&&this.mouseX<e+r&&this.mouseY>i&&this.mouseY<i+n&&((a+=this.mouseScrollDelta)<0?a=0:a>l&&(a=l),this.controlFlashText[t]=a),1===this.mouseButtonDown&&this.mouseX>=s&&this.mouseX<=s+12&&(this.mouseY>i&&this.mouseY<i+12&&a>0&&a--,this.mouseY>i+n-12&&this.mouseY<i+n&&a<h-u&&a++,this.controlFlashText[t]=a),1===this.mouseButtonDown&&(this.mouseX>=s&&this.mouseX<=s+12||this.mouseX>=s-12&&this.mouseX<=s+24&&this.controlListScrollbarHandleDragged[t])?this.mouseY>i+12&&this.mouseY<i+n-12&&(this.controlListScrollbarHandleDragged[t]=!0,(a=(this.mouseY-i-12-(o/2|0))*h/(n-24)|0)>l&&(a=l),a<0&&(a=0),this.controlFlashText[t]=a):this.controlListScrollbarHandleDragged[t]=!1,c=(n-27-o)*a/(h-u)|0,this.drawListContainer(e,i,r,n,c,o)}const c=n-u*this.surface.textHeight(s);let f=i+(5*this.surface.textHeight(s)/6+c/2)|0;for(let d=a;d<h;d++)if(this.drawString(t,e+2,f,o[d],s),(f+=this.surface.textHeight(s)-cm.textListEntryHeightMod)>=i+n)return}drawListContainer(t,e,i,r,n,s){const o=t+i-12;this.surface.drawBoxEdge(o,e,12,r,0),this.surface._drawSprite_from3(o+1,e+1,cm.baseSpriteStart),this.surface._drawSprite_from3(o+1,e+r-12,cm.baseSpriteStart+1),this.surface.drawLineHoriz(o,e+13,12,0),this.surface.drawLineHoriz(o,e+r-13,12,0),this.surface.drawGradient(o+1,e+14,11,r-27,this.colourScrollbarTop,this.colourScrollbarBottom),this.surface.drawBox(o+3,n+e+14,7,s,this.colourScrollbarHandleMid),this.surface.drawLineVert(o+2,n+e+14,s,this.colourScrollbarHandleLeft),this.surface.drawLineVert(o+2+8,n+e+14,s,this.colourScrollbarHandleRight)}drawOptionListHoriz(t,e,i,r,n){let s=0;const o=n.length;for(let u=0;u<o;u++)s+=this.surface.textWidth(n[u],r),u<o-1&&(s+=this.surface.textWidth("  ",r));let h=e-(s/2|0);const a=i+(this.surface.textHeight(r)/3|0);for(let u=0;u<o;u++){let e;e=this.controlUseAlternativeColour[t]?16777215:0,this.mouseX>=h&&this.mouseX<=h+this.surface.textWidth(n[u],r)&&this.mouseY<=a&&this.mouseY>a-this.surface.textHeight(r)&&(e=this.controlUseAlternativeColour[t]?8421504:16777215,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=u,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===u&&(e=this.controlUseAlternativeColour[t]?16711680:12582912),this.surface.drawString(n[u],h,a,r,e),h+=this.surface.textWidth(n[u]+"  ",r)}}drawOptionListVert(t,e,i,r,n){const s=n.length;let o=i-(this.surface.textHeight(r)*(s-1)/2|0);for(let h=0;h<s;h++){let i;i=this.controlUseAlternativeColour[t]?16777215:0;const s=this.surface.textWidth(n[h],r);this.mouseX>=e-(s/2|0)&&this.mouseX<=e+(s/2|0)&&this.mouseY-2<=o&&this.mouseY-2>o-this.surface.textHeight(r)&&(i=this.controlUseAlternativeColour[t]?8421504:16777215,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=h,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===h&&(i=this.controlUseAlternativeColour[t]?16711680:12582912),this.surface.drawString(n[h],e-(s/2|0),o,r,i),o+=this.surface.textHeight(r)}}drawTextListInteractive(t,e,i,r,n,s,o,h,a){const u=n/this.surface.textHeight(s)|0,l=h-u;if(u<h){const s=e+r-12;let o=(n-27)*u/h|0;o<6&&(o=6);let c=(n-27-o)*a/l|0;0!==this.mouseScrollDelta&&this.mouseX>e&&this.mouseX<e+r&&this.mouseY>i&&this.mouseY<i+n&&((a+=this.mouseScrollDelta)<0?a=0:a>l&&(a=l),this.controlFlashText[t]=a),1===this.mouseButtonDown&&this.mouseX>=s&&this.mouseX<=s+12&&(this.mouseY>i&&this.mouseY<i+12&&a>0&&a--,this.mouseY>i+n-12&&this.mouseY<i+n&&a<l&&a++,this.controlFlashText[t]=a),1===this.mouseButtonDown&&(this.mouseX>=s&&this.mouseX<=s+12||this.mouseX>=s-12&&this.mouseX<=s+24&&this.controlListScrollbarHandleDragged[t])?this.mouseY>i+12&&this.mouseY<i+n-12&&(this.controlListScrollbarHandleDragged[t]=!0,(a=(this.mouseY-i-12-(o/2|0))*h/(n-24)|0)<0&&(a=0),a>l&&(a=l),this.controlFlashText[t]=a):this.controlListScrollbarHandleDragged[t]=!1,c=(n-27-o)*a/l|0,this.drawListContainer(e,i,r,n,c,o)}else a=0,this.controlFlashText[t]=0;this.controlListEntryMouseOver[t]=-1;const c=n-u*this.surface.textHeight(s);let f=i+((5*this.surface.textHeight(s)/6|0)+c/2|0);for(let d=a;d<h;d++){let h;if(h=this.controlUseAlternativeColour[t]?16777215:0,this.mouseX>=e+2&&this.mouseX<=e+r-12&&this.mouseY-2<=f&&this.mouseY-2>f-this.surface.textHeight(s)&&(h=this.controlUseAlternativeColour[t]?8421504:16777215,this.controlListEntryMouseOver[t]=d,1===this.mouseLastButtonDown&&(this.controlListEntryMouseButtonDown[t]=d,this.controlClicked[t]=!0)),this.controlListEntryMouseButtonDown[t]===d&&this.aBoolean219&&(h=16711680),this.surface.drawString(o[d],e+2,f,s,h),(f+=this.surface.textHeight(s))>=i+n)return}}addText(t,e,i,r,n){return this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=n,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlText[this.controlCount]=i,this.controlCount++}addTextCentre(t,e,i,r,n){return this.controlType[this.controlCount]=$p,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=n,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlText[this.controlCount]=i,this.controlCount++}addButtonBackground(t,e,i,r){return this.controlType[this.controlCount]=Jp,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addBoxRounded(t,e,i,r){return this.controlType[this.controlCount]=hm,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addSprite(t,e,i){const r=this.surface.spriteWidth[i],n=this.surface.spriteHeight[i];return this.controlType[this.controlCount]=am,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(r/2|0),this.controlY[this.controlCount]=e-(n/2|0),this.controlWidth[this.controlCount]=r,this.controlHeight[this.controlCount]=n,this.controlTextSize[this.controlCount]=i,this.controlCount++}addTextList(t,e,i,r,n,s,o){return this.controlType[this.controlCount]=tm,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlUseAlternativeColour[this.controlCount]=o,this.controlTextSize[this.controlCount]=n,this.controlInputMaxLen[this.controlCount]=s,this.controlListEntryCount[this.controlCount]=0,this.controlFlashText[this.controlCount]=0,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=s,this.controlListEntries[this.controlCount].fill(null),this.controlCount++}addTextListInput(t,e,i,r,n,s,o,h){return this.controlType[this.controlCount]=em,this.controlShown[this.controlCount]=!0,this.controlMaskText[this.controlCount]=o,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=n,this.controlUseAlternativeColour[this.controlCount]=h,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=s,this.controlText[this.controlCount]="",this.controlCount++}addTextInput(t,e,i,r,n,s,o,h){return this.controlType[this.controlCount]=im,this.controlShown[this.controlCount]=!0,this.controlMaskText[this.controlCount]=o,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=n,this.controlUseAlternativeColour[this.controlCount]=h,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=s,this.controlText[this.controlCount]="",this.controlCount++}addTextListInteractive(t,e,i,r,n,s,o){return this.controlType[this.controlCount]=sm,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlTextSize[this.controlCount]=n,this.controlUseAlternativeColour[this.controlCount]=o,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlInputMaxLen[this.controlCount]=s,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=s,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlFlashText[this.controlCount]=0,this.controlListEntryMouseButtonDown[this.controlCount]=-1,this.controlListEntryMouseOver[this.controlCount]=-1,this.controlCount++}addButton(t,e,i,r){return this.controlType[this.controlCount]=om,this.controlShown[this.controlCount]=!0,this.controlClicked[this.controlCount]=!1,this.controlX[this.controlCount]=t-(i/2|0),this.controlY[this.controlCount]=e-(r/2|0),this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlCount++}addLineHoriz(t,e,i){return this.controlType[this.controlCount]=Qp,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlCount++}addOptionListHoriz(t,e,i,r,n){return this.controlType[this.controlCount]=rm,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlTextSize[this.controlCount]=i,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=r,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlUseAlternativeColour[this.controlCount]=n,this.controlClicked[this.controlCount]=!1,this.controlCount++}addOptionListVert(t,e,i,r,n){return this.controlType[this.controlCount]=nm,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlTextSize[this.controlCount]=i,this.controlListEntries[this.controlCount]=[],this.controlListEntries[this.controlCount].length=r,this.controlListEntries[this.controlCount].fill(null),this.controlListEntryCount[this.controlCount]=0,this.controlUseAlternativeColour[this.controlCount]=n,this.controlClicked[this.controlCount]=!1,this.controlCount++}addCheckbox(t,e,i,r){return this.controlType[this.controlCount]=um,this.controlShown[this.controlCount]=!0,this.controlX[this.controlCount]=t,this.controlY[this.controlCount]=e,this.controlWidth[this.controlCount]=i,this.controlHeight[this.controlCount]=r,this.controlListEntryMouseButtonDown[this.controlCount]=0,this.controlCount++}toggleCheckbox(t,e){this.controlListEntryMouseButtonDown[t]=+e}isActivated(t){return 0!==this.controlListEntryMouseButtonDown[t]}clearList(t){this.controlListEntryCount[t]=0}resetListProps(t){this.controlFlashText[t]=0,this.controlListEntryMouseOver[t]=-1}addListEntry(t,e,i){this.controlListEntries[t][e]=i,e+1>this.controlListEntryCount[t]&&(this.controlListEntryCount[t]=e+1)}removeListEntry(t,e,i){let r=this.controlListEntryCount[t]++;if(r>=this.controlInputMaxLen[t]){r--,this.controlListEntryCount[t]--;for(let e=0;e<r;e++)this.controlListEntries[t][e]=this.controlListEntries[t][e+1]}this.controlListEntries[t][r]=e,i&&(this.controlFlashText[t]=999999)}updateText(t,e){this.controlText[t]=e}getText(t){return null===this.controlText[t]?"null":this.controlText[t]}show(t){this.controlShown[t]=!0}hide(t){this.controlShown[t]=!1}setFocus(t){this.focusControlIndex=t,this.setMobileFocus(t,this.controlText[t])}getListEntryIndex(t){return this.controlListEntryMouseOver[t]}setMobileFocus(t,e){const{mudclient:i}=this.surface;if(!i.options.mobile)return;const r=this.controlMaskText[t],n=this.controlType[t]===em,s=this.controlWidth[t],o=this.controlHeight[t],h=n?this.controlX[t]:this.controlX[t]-Math.floor(s/2);i.openKeyboard(r?"password":"text",e,this.controlInputMaxLen[t],{width:s+"px",height:o+"px",top:this.controlY[t]-Math.floor(o/2)+"px",left:h+"px",fontSize:n?"12px":"14px",textAlign:n?"left":"center"})}}cm.baseSpriteStart=0,cm.drawBackgroundArrow=!0,cm.redMod=114,cm.greenMod=114,cm.blueMod=176,cm.textListEntryHeightMod=0,Gp=cm;var fm,dm,pm={exports:{}};fm=this,dm=function(){"use strict";class t{constructor(t){this.init(t)}init(t){this.option=Object.assign({},{inputCodec:"Int16",channels:1,sampleRate:8e3,flushTime:1e3},t),this.samples=new Float32Array,this.interval=setInterval(this.flush.bind(this),this.option.flushTime),this.convertValue=this.getConvertValue(),this.typedArray=this.getTypedArray(),this.initAudioContext()}getConvertValue(){const t={Int8:128,Int16:32768,Int32:2147483648,Float32:1};if(!t[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return t[this.option.inputCodec]}getTypedArray(){const t={Int8:Int8Array,Int16:Int16Array,Int32:Int32Array,Float32:Float32Array};if(!t[this.option.inputCodec])throw new Error("wrong codec.please input one of these codecs:Int8,Int16,Int32,Float32");return t[this.option.inputCodec]}initAudioContext(){this.audioCtx=new(window.AudioContext||window.webkitAudioContext),this.gainNode=this.audioCtx.createGain(),this.gainNode.gain.value=10,this.gainNode.connect(this.audioCtx.destination),this.startTime=this.audioCtx.currentTime}static isTypedArray(t){return t.byteLength&&t.buffer&&t.buffer.constructor==ArrayBuffer||t.constructor==ArrayBuffer}isSupported(e){if(!t.isTypedArray(e))throw new Error("\u8bf7\u4f20\u5165ArrayBuffer\u6216\u8005\u4efb\u610fTypedArray");return!0}feed(t){this.isSupported(t),t=this.getFormatedValue(t);const e=new Float32Array(this.samples.length+t.length);e.set(this.samples,0),e.set(t,this.samples.length),this.samples=e}getFormatedValue(t){t=t.constructor==ArrayBuffer?new this.typedArray(t):new this.typedArray(t.buffer);let e=new Float32Array(t.length);for(let i=0;i<t.length;i++)e[i]=t[i]/this.convertValue;return e}volume(t){this.gainNode.gain.value=t}destroy(){this.interval&&clearInterval(this.interval),this.samples=null,this.audioCtx.close(),this.audioCtx=null}flush(){if(!this.samples.length)return;var t=this.audioCtx.createBufferSource();const e=this.samples.length/this.option.channels,i=this.audioCtx.createBuffer(this.option.channels,e,this.option.sampleRate);for(let r=0;r<this.option.channels;r++){const t=i.getChannelData(r);let n=r,s=50;for(let i=0;i<e;i++)t[i]=this.samples[n],i<50&&(t[i]=t[i]*i/50),i>=e-51&&(t[i]=t[i]*s--/50),n+=this.option.channels}this.startTime<this.audioCtx.currentTime&&(this.startTime=this.audioCtx.currentTime),console.log("start vs current "+this.startTime+" vs "+this.audioCtx.currentTime+" duration: "+i.duration),t.buffer=i,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=i.duration,this.samples=new Float32Array}async pause(){await this.audioCtx.suspend()}async continue(){await this.audioCtx.resume()}}return t},"object"==typeof pm.exports?pm.exports=dm():"function"==typeof define&&define.amd?define(dm):(fm=fm||self).PCMPlayer=dm(),pm=pm.exports;var mm,gm,ym={exports:{}};mm=this,gm=function(t){function e(t){var e=~(t=-32768==t?-32767:t)>>8&128;if(e||(t*=-1),32635<t&&(t=32635),256<=t){var i=s[t>>8&127];t=i<<4|t>>i+3&15}else t>>=4;return t^e^85}function i(t){var e=0;128&(t^=85)&&(t&=-129,e=-1);var i=4+((240&t)>>4);return t=4!=i?1<<i|(15&t)<<i-4|1<<i-5:t<<1|1,-8*(0===e?t:-t)}function r(t){var e=t>>8&128;0!=e&&(t=-t),32635<(t+=132)&&(t=32635);var i=h[t>>7&255];return~(e|i<<4|t>>i+3&15)}function n(t){var e=(t=~t)>>4&7;return e=a[e]+((15&t)<<e+3),0!=(128&t)&&(e=-e),e}var s=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],o=Object.freeze({__proto__:null,encodeSample:e,decodeSample:i,encode:function(t){for(var i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=e(t[r]);return i},decode:function(t){for(var e=new Int16Array(t.length),r=0;r<t.length;r++)e[r]=i(t[r]);return e}}),h=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],a=[0,132,396,924,1980,4092,8316,16764],u=Object.freeze({__proto__:null,encodeSample:r,decodeSample:n,encode:function(t){for(var e=new Uint8Array(t.length),i=0;i<t.length;i++)e[i]=r(t[i]);return e},decode:function(t){for(var e=new Int16Array(t.length),i=0;i<t.length;i++)e[i]=n(t[i]);return e}});t.alaw=o,t.mulaw=u,Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof ym.exports?gm(ym.exports):"function"==typeof define&&define.amd?define(["exports"],gm):gm((mm=mm||self).alawmulaw={}),ym=ym.exports;const{mulaw:bm}=ym;var wm={};const vm="0".charCodeAt(0),Mm="9".charCodeAt(0),Sm="a".charCodeAt(0),_m="*".charCodeAt(0),Im="\\".charCodeAt(0),Cm="A".charCodeAt(0),km="Z".charCodeAt(0),Tm=",".charCodeAt(0),Am=".".charCodeAt(0),xm="j".charCodeAt(0),Em="q".charCodeAt(0),Bm="'".charCodeAt(0),Lm="/".charCodeAt(0),Rm=" ".charCodeAt(0),Pm="v".charCodeAt(0),Om="x".charCodeAt(0),jm="z".charCodeAt(0);function Dm(t){const e=new Uint16Array(t.length);for(let i=0;i<t.length;i+=1)e[i]=t.charCodeAt(i);return e}function Ym(t){return Array.from(t).map(t=>String.fromCharCode(t)).join("")}class Um{static loadFilters(t,e,i,r){Um.loadBad(e),Um.loadHost(i),Um.loadFragments(t),Um.loadTLD(r)}static loadTLD(t){const e=t.getUnsignedInt();Um.tldList=[],Um.tldType=new Int32Array(e);for(let i=0;i<e;i++){Um.tldType[i]=t.getUnsignedByte();const e=new Uint16Array(t.getUnsignedByte());for(let i=0;i<e.length;i++)e[i]=t.getUnsignedByte();Um.tldList.push(e)}}static loadBad(t){const e=t.getUnsignedInt();Um.badList=[],Um.badList.length=e,Um.badList.fill(null),Um.badCharIds=[],Um.badCharIds.length=e,Um.badCharIds.fill(null),Um.readBuffer(t,Um.badList,Um.badCharIds)}static loadHost(t){const e=t.getUnsignedInt();Um.hostList=[],Um.hostList.length=e,Um.hostList.fill(null),Um.hostCharIds=[],Um.hostCharIds.length=e,Um.hostCharIds.fill(null),Um.readBuffer(t,Um.hostList,Um.hostCharIds)}static loadFragments(t){Um.hashFragments=new Int32Array(t.getUnsignedInt());for(let e=0;e<Um.hashFragments.length;e++)Um.hashFragments[e]=t.getUnsignedShort()}static readBuffer(t,e,i){for(let r=0;r<e.length;r++){const n=new Uint16Array(t.getUnsignedByte());for(let e=0;e<n.length;e++)n[e]=t.getUnsignedByte();e[r]=n;const s=[];s.length=t.getUnsignedInt();for(let e=0;e<s.length;e++)s[e]=[255&t.getUnsignedByte(),255&t.getUnsignedByte()];s.length>0&&(i[r]=s)}}static filter(t){const e=Dm(t.toLowerCase());Um.applyDotSlashFilter(e),Um.applyBadwordFilter(e),Um.applyHostFilter(e),Um.filterDigits(e);for(let i=0;i<Um.ignoreList.length;i++)for(let r=-1;-1!==(r=t.indexOf(Um.ignoreList[i],r+1));){const t=Dm(Um.ignoreList[i]);for(let i=0;i<t.length;i++)e[i+r]=t[i]}return Um.forceLowerCase&&(Um.stripLowerCase(Dm(t),e),Um.toLowerCase(e)),Ym(e)}static stripLowerCase(t,e){for(let i=0;i<t.length;i++)e[i]!==_m&&Um.isUpperCase(t[i])&&(e[i]=t[i])}static toLowerCase(t){let e=!0;for(let i=0;i<t.length;i++){const r=t[i];Um.isLetter(r)?e?Um.isLowerCase(r)&&(e=!1):Um.isUpperCase(r)&&(t[i]=r+97-65):e=!0}}static applyBadwordFilter(t){for(let e=0;e<2;e++)for(let i=Um.badList.length-1;i>=0;i--)Um.applyWordFilter(t,Um.badList[i],Um.badCharIds[i])}static applyHostFilter(t){for(let e=Um.hostList.length-1;e>=0;e--)Um.applyWordFilter(t,Um.hostList[e],Um.hostCharIds[e])}static applyDotSlashFilter(t){const e=t.slice(),i=Dm("dot");Um.applyWordFilter(e,i,null);const r=t.slice(),n=Dm("slash");Um.applyWordFilter(r,n,null);for(let s=0;s<Um.tldList.length;s++)Um.applyTLDFilter(t,e,r,Um.tldList[s],Um.tldType[s])}static applyTLDFilter(t,e,i,r,n){if(!(r.length>t.length))for(let s=0;s<=t.length-r.length;s++){let o=s,h=0;for(;o<t.length;){let e=0;const i=t[o];let n=0;if(o+1<t.length&&(n=t[o+1]),h<r.length&&(e=Um.compareLettersNumbers(r[h],i,n))>0)o+=e,h++;else{if(0===h)break;if((e=Um.compareLettersNumbers(r[h-1],i,n))>0)o+=e;else{if(h>=r.length||!Um.isSpecial(i))break;o++}}}if(h>=r.length){let h=!1;const a=Um.getAsteriskCount(t,e,s),u=Um.getAsteriskCount2(t,i,o-1);if(Um.DEBUGTLD&&console.log(`Potential tld: ${r} at char ${s} (type="${n}, startmatch="${a}, endmatch=${u})`),1===n&&a>0&&u>0&&(h=!0),2===n&&(a>2&&u>0||a>0&&u>2)&&(h=!0),3===n&&a>0&&u>2&&(h=!0),h){Um.DEBUGTLD&&console.log(`Filtered tld: ${r} at char ${s}`);let n=s,h=o-1;if(a>2){if(4===a){let t=!1;for(let i=n-1;i>=0;i--)if(t){if(e[i]!==_m)break;n=i}else e[i]===_m&&(n=i,t=!0)}let i=!1;for(let e=n-1;e>=0;e--)if(i){if(Um.isSpecial(t[e]))break;n=e}else Um.isSpecial(t[e])||(i=!0,n=e)}if(u>2){if(4===u){let e=!1;for(let r=h+1;r<t.length;r++)if(e){if(i[r]!==_m)break;h=r}else i[r]===_m&&(h=r,e=!0)}let e=!1;for(let i=h+1;i<t.length;i++)if(e){if(Um.isSpecial(t[i]))break;h=i}else Um.isSpecial(t[i])||(e=!0,h=i)}for(let e=n;e<=h;e++)t[e]=_m}}}}static getAsteriskCount(t,e,i){if(0===i)return 2;for(let n=i-1;n>=0&&Um.isSpecial(t[n]);n--)if(t[n]===Tm||t[n]===Am)return 3;let r=0;for(let n=i-1;n>=0&&Um.isSpecial(e[n]);n--)e[n]===_m&&r++;return r>=3?4:Um.isSpecial(t[i-1])?1:0}static getAsteriskCount2(t,e,i){if(i+1===t.length)return 2;for(let n=i+1;n<t.length&&Um.isSpecial(t[n]);n++)if(t[n]===Im||t[n]===Lm)return 3;let r=0;for(let n=i+1;n<t.length&&Um.isSpecial(e[n]);n++)e[n]===_m&&r++;return r>=5?4:Um.isSpecial(t[i+1])?1:0}static applyWordFilter(t,e,i){if(!(e.length>t.length))for(let r=0;r<=t.length-e.length;r++){let n=r,s=0,o=!1;for(;n<t.length;){let i=0;const r=t[n];let h=0;if(n+1<t.length&&(h=t[n+1]),s<e.length&&(i=Um.compareLettersSymbols(e[s],r,h))>0)n+=i,s++;else{if(0===s)break;if((i=Um.compareLettersSymbols(e[s-1],r,h))>0)n+=i;else{if(s>=e.length||!Um.isNotLowerCase(r))break;Um.isSpecial(r)&&r!==Bm&&(o=!0),n++}}}if(s>=e.length){let s=!0;if(Um.DEBUGTLD&&console.log(`Potential word: ${e} at char ${r}`),o){let e=!1,i=!1;if((r-1<0||Um.isSpecial(t[r-1])&&t[r-1]!==Bm)&&(e=!0),(n>=t.length||Um.isSpecial(t[n])&&t[n]!==Bm)&&(i=!0),!e||!i){let i=!1,o=r-2;for(e&&(o=r);!i&&o<n;o++)if(o>=0&&(!Um.isSpecial(t[o])||t[o]===Bm)){const e=new Uint16Array(3);let r;for(r=0;r<3&&!(o+r>=t.length||Um.isSpecial(t[o+r])&&t[o+r]!==Bm);r++)e[r]=t[o+r];let n=!0;0===r&&(n=!1),r<3&&o-1>=0&&(!Um.isSpecial(t[o-1])||t[o-1]===Bm)&&(n=!1),n&&!Um.containsFragmentHashes(e)&&(i=!0)}i||(s=!1)}}else{let e=Rm;r-1>=0&&(e=t[r-1]);let o=Rm;n<t.length&&(o=t[n]);const h=Um.getCharId(e),a=Um.getCharId(o);i&&Um.compareCharIds(i,h,a)&&(s=!1)}if(s){Um.DEBUGWORD&&console.log(`Filtered word: ${e} at char ${r}`);for(let e=r;e<n;e++)t[e]=_m}}}}static compareCharIds(t,e,i){let r=0;if(t[r][0]===e&&t[r][1]===i)return!0;let n=t.length-1;if(t[n][0]===e&&t[n][1]===i)return!0;for(;r!==n&&r+1!==n;){const s=(r+n)/2|0;if(t[s][0]===e&&t[s][1]===i)return!0;e<t[s][0]||e===t[s][0]&&i<t[s][1]?n=s:r=s}return!1}static compareLettersNumbers(t,e,i){return t=String.fromCharCode(t),e=String.fromCharCode(e),i=String.fromCharCode(i),t===e||"e"===t&&"3"===e?1:("t"!==t||"7"!==e&&"+"!==e)&&("a"!==t||"4"!==e&&"@"!==e)?"o"===t&&"0"===e||"i"===t&&"1"===e||"s"===t&&"5"===e?1:"f"===t&&"p"===e&&"h"===i?2:"g"===t&&"9"===e?1:0:1}static compareLettersSymbols(t,e,i){if(t=String.fromCharCode(t),e=String.fromCharCode(e),i=String.fromCharCode(i),"*"===t)return 0;if(t===e)return 1;if(t>="a"&&t<="z"){if("e"===t)return"3"===e?1:0;if("t"===t)return"7"===e?1:0;if("a"===t)return"4"===e||"@"===e?1:0;if("o"===t)return"0"===e||"*"===e?1:"("===e&&")"===i?2:0;if("i"===t)return"y"===e||"l"===e||"j"===e||"l"===e||"!"===e||":"===e||";"===e?1:0;if("n"===t)return 0;if("s"===t)return"5"===e||"z"===e||"$"===e?1:0;if("r"===t)return 0;if("h"===t)return 0;if("l"===t)return"1"===e?1:0;if("d"===t)return 0;if("c"===t)return"("===e?1:0;if("u"===t)return"v"===e?1:0;if("m"===t)return 0;if("f"===t)return"p"===e&&"h"===i?2:0;if("p"===t)return 0;if("g"===t)return"9"===e||"6"===e?1:0;if("w"===t)return"v"===e&&"v"===i?2:0;if("y"===t)return 0;if("b"===t)return"1"===e&&"3"===i?2:0;if("v"===t)return 0;if("k"===t)return 0;if("x"===t)return")"===e&&"("===i?2:0;if("j"===t)return 0;if("q"===t)return 0;if("z"===t)return 0}if(t>="0"&&t<="9"){if("0"===t)return"o"===e||"O"===e?1:"("===e&&")"===i?2:0;if("1"===t)return"l"!==e?0:1;if("2"===t)return 0;if("3"===t)return 0;if("4"===t)return 0;if("5"===t)return 0;if("6"===t)return 0;if("7"===t)return 0;if("8"===t)return 0;if("9"===t)return 0}return"-"===t?0:","===t?"."===e?1:0:"."===t?","===e?1:0:"("===t||")"===t?0:"!"===t?"i"===e?1:0:("'"===t||Um.DEBUGWORD&&console.log(`Letter=${t} not matched`),0)}static getCharId(t){return t>=Sm&&t<=jm?t-97+1:t===Bm?28:t>=vm&&t<=Mm?t-48+29:27}static filterDigits(t){let e=0,i=0,r=0,n=0;for(;-1!=(e=Um.indexOfDigit(t,i));){let s=!1;for(let r=i;r>=0&&r<e&&!s;r++)Um.isSpecial(t[r])||Um.isNotLowerCase(t[r])||(s=!0);s&&(r=0),0===r&&(n=e),i=Um.indexOfNonDigit(t,e);let o=0;for(let r=e;r<i;r++)o=10*o+t[r]-48;if(o>255||i-e>8?r=0:r++,4===r){for(let e=n;e<i;e++)t[e]=_m;r=0}}}static indexOfDigit(t,e){for(let i=e;i<t.length&&i>=0;i++)if(t[i]>=vm&&t[i]<=Mm)return i;return-1}static indexOfNonDigit(t,e){for(let i=e;i<t.length&&i>=0;i++)if(t[i]<vm||t[i]>Mm)return i;return t.length}static isSpecial(t){return!Um.isLetter(t)&&!Um.isDigit(t)}static isNotLowerCase(t){return t<Sm||t>jm||t===Pm||t===Om||t===xm||t===Em||t===jm}static isLetter(t){return t>=Sm&&t<=jm||t>=Cm&&t<=km}static isDigit(t){return t>=vm&&t<=Mm}static isLowerCase(t){return t>=Sm&&t<=jm}static isUpperCase(t){return t>=Cm&&t<=km}static containsFragmentHashes(t){let e=!0;for(let s=0;s<t.length;s++)Um.isDigit(t[s])||0===t[s]||(e=!1);if(e)return!0;const i=Um.wordToHash(t);let r=0,n=Um.hashFragments.length-1;if(i===Um.hashFragments[r]||i===Um.hashFragments[n])return!0;for(;r!=n&&r+1!=n;){const t=(r+n)/2|0;if(i===Um.hashFragments[t])return!0;i<Um.hashFragments[t]?n=t:r=t}return!1}static wordToHash(t){if(t.length>6)return 0;let e=0;for(let i=0;i<t.length;i++){const r=t[t.length-i-1];if(r>=Sm&&r<=jm)e=38*e+r-97+1|0;else if(r===Bm)e=38*e+27|0;else if(r>=vm&&r<=Mm)e=38*e+r-48+28|0;else if(0!==r)return Um.DEBUGWORD&&console.log("wordToHash failed on "+Ym(t)),0}return e}}Um.DEBUGTLD=!1,Um.DEBUGWORD=!1,Um.forceLowerCase=!0,Um.ignoreList=["cook","cook's","cooks","seeks","sheet"],wm=Um;var Xm={};class Nm{constructor(t,e){this.regionWidth=96,this.regionHeight=96,this.anInt585=128,this.parentModel=null,this.landscapePack=null,this.mapPack=null,this.memberLandscapePack=null,this.memberMapPack=null,this.worldInitialised=!0,this.objectAdjacency=Xp(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.tileDirection=Xp(new Int8Array(9216),[4,2304]),this.wallModels=[],this.roofModels=[];for(let i=0;i<4;i+=1){this.wallModels.push([]),this.roofModels.push([]);for(let t=0;t<64;t+=1)this.wallModels[i].push(null),this.roofModels[i].push(null)}this.terrainColours=new Int32Array(256),this.wallsNorthSouth=Xp(new Int8Array(9216),[4,2304]),this.wallsRoof=Xp(new Int8Array(9216),[4,2304]),this.terrainHeight=Xp(new Int8Array(9216),[4,2304]),this.terrainColour=Xp(new Int8Array(9216),[4,2304]),this.localY=new Int32Array(18432),this.tileDecoration=Xp(new Int8Array(9216),[4,2304]),this.routeVia=Xp(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.wallsDiagonal=Xp(new Int32Array(9216),[4,2304]),this.wallsEastWest=Xp(new Int8Array(9216),[4,2304]),this.aBoolean592=!1,this.playerAlive=!1,this.terrainHeightLocal=Xp(new Int32Array(this.regionWidth*this.regionHeight),[this.regionWidth,this.regionHeight]),this.terrainModels=[],this.terrainModels.length=64,this.terrainModels.fill(null),this.localX=new Int32Array(18432),this.baseMediaSprite=750,this.scene=t,this.surface=e;for(let i=0;i<64;i++)this.terrainColours[i]=qp.rgb(255-4*i,255-(1.75*i|0),255-4*i);for(let i=0;i<64;i++)this.terrainColours[i+64]=qp.rgb(3*i,144,0);for(let i=0;i<64;i++)this.terrainColours[i+128]=qp.rgb(192-(1.5*i|0),144-(1.5*i|0),0);for(let i=0;i<64;i++)this.terrainColours[i+192]=qp.rgb(96-(1.5*i|0),48+(1.5*i|0),0)}getWallEastWest(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.wallsEastWest.get(i,48*t+e)}setTerrainAmbience(t,e,i,r,n){let s=this.terrainModels[t+8*e];for(let o=0;o<s.numVertices;o++)if(s.vertexX[o]===i*this.anInt585&&s.vertexZ[o]===r*this.anInt585)return void s.setVertexAmbience(o,n)}getWallRoof(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.wallsRoof.get(i,48*t+e)}getElevation(t,e){let i=t>>7,r=e>>7,n=127&t,s=127&e;if(i<0||r<0||i>=95||r>=95)return 0;let o=0,h=0,a=0;return n<=this.anInt585-s?(o=this.getTerrainHeight(i,r),h=this.getTerrainHeight(i+1,r)-o,a=this.getTerrainHeight(i,r+1)-o):(o=this.getTerrainHeight(i+1,r+1),h=this.getTerrainHeight(i,r+1)-o,a=this.getTerrainHeight(i+1,r)-o,n=this.anInt585-n,s=this.anInt585-s),o+(h*n/this.anInt585|0)+(a*s/this.anInt585|0)}getWallDiagonal(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.wallsDiagonal.get(i,48*t+e)}removeObject2(t,e,i){if(!(t<0||e<0||t>=95||e>=95||1!==Np.objectType[i]&&2!==Np.objectType[i])){let r=this.getTileDirection(t,e),n=0,s=0;0===r||4===r?(n=Np.objectWidth[i],s=Np.objectHeight[i]):(s=Np.objectWidth[i],n=Np.objectHeight[i]);for(let o=t;o<t+n;o++)for(let t=e;t<e+s;t++){const e=this.objectAdjacency.get(o,t);1===Np.objectType[i]?this.objectAdjacency.set(o,t,64|e):0===r?(this.objectAdjacency.set(o,t,2|e),o>0&&this._setObjectAdjacency_from3(o-1,t,8)):2===r?(this.objectAdjacency.set(o,t,4|e),t<95&&this._setObjectAdjacency_from3(o,t+1,1)):4===r?(this.objectAdjacency.set(o,t,8|e),o<95&&this._setObjectAdjacency_from3(o+1,t,2)):6===r&&(this.objectAdjacency.set(o,t,1|e),t>0&&this._setObjectAdjacency_from3(o,t-1,4))}this.method404(t,e,n,s)}}removeWallObject(t,e,i,r){if(!(t<0||e<0||t>=95||e>=95)&&1===Np.wallObjectAdjacent[r]){const r=this.objectAdjacency.get(t,e);0===i?(this.objectAdjacency.set(t,e,65534&r),e>0&&this.method407(t,e-1,4)):1===i?(this.objectAdjacency.set(t,e,65533&r),t>0&&this.method407(t-1,e,8)):2===i?this.objectAdjacency.set(t,e,65519&r):3===i&&this.objectAdjacency.set(t,e,65503&r),this.method404(t,e,1,1)}}method402(t,e,i,r,n){let s=3*t,o=3*e,h=this.scene.method302(r),a=this.scene.method302(n);if(h=h>>1&8355711,a=a>>1&8355711,0===i)return this.surface.drawLineHoriz(s,o,3,h),this.surface.drawLineHoriz(s,o+1,2,h),this.surface.drawLineHoriz(s,o+2,1,h),this.surface.drawLineHoriz(s+2,o+1,1,a),void this.surface.drawLineHoriz(s+1,o+2,2,a);1===i&&(this.surface.drawLineHoriz(s,o,3,a),this.surface.drawLineHoriz(s+1,o+1,2,a),this.surface.drawLineHoriz(s+2,o+2,1,a),this.surface.drawLineHoriz(s,o+1,1,h),this.surface.drawLineHoriz(s,o+2,2,h))}_loadSection_from4I(t,e,i,r){const n="m"+i+(t/10|0)+t%10+(e/10|0)+e%10;if(!this.landscapePack)return;let s=Ud.loadData(n+".hei",0,this.landscapePack);if(!s&&this.memberLandscapePack&&(s=Ud.loadData(n+".hei",0,this.memberLandscapePack)),s&&s.length){let t=0,e=0;for(let i=0;i<2304;){let n=255&s[t++];if(n<128&&(this.terrainHeight.set(r,i++,255&n),e=n),n>=128)for(let t=0;t<n-128;t++)this.terrainHeight.set(r,i++,255&e)}e=64;for(let i=0;i<48;i++)for(let t=0;t<48;t++)e=this.terrainHeight.get(r,48*t+i)+e&127,this.terrainHeight.set(r,48*t+i,2*e&255);e=0;for(let i=0;i<2304;){let n=255&s[t++];if(n<128&&(this.terrainColour.set(r,i++,255&n),e=n),n>=128)for(let t=0;t<n-128;t++)this.terrainColour.set(r,i++,255&e)}e=35;for(let i=0;i<48;i++)for(let t=0;t<48;t++)e=this.terrainColour.get(r,48*t+i)+e&127,this.terrainColour.set(r,48*t+i,2*e&255)}else for(let o=0;o<2304;o++)this.terrainHeight.set(r,o,0),this.terrainColour.set(r,o,0);if(!(s=Ud.loadData(n+".dat",0,this.mapPack))&&this.memberMapPack&&(s=Ud.loadData(n+".dat",0,this.memberMapPack)),s&&s.length){let t=0;for(let i=0;i<2304;i++)this.wallsNorthSouth.set(r,i,s[t++]);for(let i=0;i<2304;i++)this.wallsEastWest.set(r,i,s[t++]);for(let i=0;i<2304;i++)this.wallsDiagonal.set(r,i,255&s[t++]);for(let i=0;i<2304;i++){let e=255&s[t++];e>0&&this.wallsDiagonal.set(r,i,e+12e3)}for(let i=0;i<2304;){let e=255&s[t++];if(e<128)this.wallsRoof.set(r,i++,255&e);else for(let t=0;t<e-128;t++)this.wallsRoof.set(r,i++,0)}let e=0;for(let i=0;i<2304;){let n=255&s[t++];if(n<128)this.tileDecoration.set(r,i++,255&n),e=n;else for(let t=0;t<n-128;t++)this.tileDecoration.set(r,i++,e)}for(let i=0;i<2304;){let e=255&s[t++];if(e<128)this.tileDirection.set(r,i++,255&e);else for(let t=0;t<e-128;t++)this.tileDirection.set(r,i++,0)}if((s=Ud.loadData(n+".loc",0,this.mapPack))&&s.length){t=0;for(let e=0;e<2304;){let i=255&s[t++];i<128?this.wallsDiagonal.set(r,e++,i+48e3):e+=i-128}return}}else for(let o=0;o<2304;o++)this.terrainHeight.set(r,o,0),this.terrainColour.set(r,o,0),this.wallsNorthSouth.set(r,o,0),this.wallsEastWest.set(r,o,0),this.wallsDiagonal.set(r,o,0),this.wallsRoof.set(r,o,0),this.tileDecoration.set(r,o,0),0===i&&this.tileDecoration.set(r,o,-6),3===i&&this.tileDecoration.set(r,o,8),this.tileDirection.set(r,o,0)}loadSection(...t){switch(t.length){case 3:return this._loadSection_from3(...t);case 4:return"number"==typeof t[3]?this._loadSection_from4I(...t):this._loadSection_from4(...t)}}method404(t,e,i,r){if(!(t<1||e<1||t+i>=this.regionWidth||e+r>=this.regionHeight))for(let n=t;n<=t+i;n++)for(let t=e;t<=e+r;t++)0!=(99&this.getObjectAdjacency(n,t))||0!=(89&this.getObjectAdjacency(n-1,t))||0!=(86&this.getObjectAdjacency(n,t-1))||0!=(108&this.getObjectAdjacency(n-1,t-1))?this.method425(n,t,35):this.method425(n,t,0)}getObjectAdjacency(t,e){return t<0||e<0||t>=this.regionWidth||e>=this.regionHeight?0:this.objectAdjacency.get(t,e)}hasRoof(t,e){return this.getWallRoof(t,e)>0&&this.getWallRoof(t-1,e)>0&&this.getWallRoof(t-1,e-1)>0&&this.getWallRoof(t,e-1)>0}method407(t,e,i){const r=this.objectAdjacency.get(t,e);this.objectAdjacency.set(t,e,r&65535-i)}getTerrainColour(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.terrainColour.get(i,48*t+e)}reset(){this.worldInitialised&&this.scene.dispose();for(let t=0;t<64;t++){this.terrainModels[t]=null;for(let e=0;e<4;e++)this.wallModels[e][t]=null;for(let e=0;e<4;e++)this.roofModels[e][t]=null}}setTiles(){for(let t=0;t<this.regionWidth;t++)for(let e=0;e<this.regionHeight;e++)250===this.getTileDecoration(t,e,0)&&(47===t&&250!==this.getTileDecoration(t+1,e,0)&&2!==this.getTileDecoration(t+1,e,0)||47===e&&250!==this.getTileDecoration(t,e+1,0)&&2!==this.getTileDecoration(t,e+1,0)?this.setTileDecoration(t,e,9):this.setTileDecoration(t,e,2))}getWallNorthSouth(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.wallsNorthSouth.get(i,48*t+e)}getTileDirection(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),this.tileDirection.get(i,48*t+e)}_getTileDecoration_from4(t,e,i,r){const n=this._getTileDecoration_from3(t,e);return 0===n?r:Np.tileDecoration[n-1]}_getTileDecoration_from3(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),255&this.tileDecoration.get(i,48*t+e)}getTileDecoration(...t){switch(t.length){case 3:return this._getTileDecoration_from3(...t);case 4:return this._getTileDecoration_from4(...t)}}setTileDecoration(t,e,i){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return;let r=0;t>=48&&e<48?(r=1,t-=48):t<48&&e>=48?(r=2,e-=48):t>=48&&e>=48&&(r=3,t-=48,e-=48),this.tileDecoration.set(r,48*t+e,255&i)}route(t,e,i,r,n,s,o,h,a){for(let g=0;g<this.regionWidth;g++)for(let t=0;t<this.regionHeight;t++)this.routeVia.set(g,t,0);let u=0,l=0,c=t,f=e;this.routeVia.set(t,e,99),o[u]=t,h[u++]=e;let d,p=o.length,m=!1;for(;l!==u;){if(c=o[l],f=h[l],l=(l+1)%p,c>=i&&c<=n&&f>=r&&f<=s){m=!0;break}if(a){if(c>0&&c-1>=i&&c-1<=n&&f>=r&&f<=s&&0==(8&this.objectAdjacency.get(c-1,f))){m=!0;break}if(c<95&&c+1>=i&&c+1<=n&&f>=r&&f<=s&&0==(2&this.objectAdjacency.get(c+1,f))){m=!0;break}if(f>0&&c>=i&&c<=n&&f-1>=r&&f-1<=s&&0==(4&this.objectAdjacency.get(c,f-1))){m=!0;break}if(f<95&&c>=i&&c<=n&&f+1>=r&&f+1<=s&&0==(1&this.objectAdjacency.get(c,f+1))){m=!0;break}}c>0&&0===this.routeVia.get(c-1,f)&&0==(120&this.objectAdjacency.get(c-1,f))&&(o[u]=c-1,h[u]=f,u=(u+1)%p,this.routeVia.set(c-1,f,2)),c<95&&0===this.routeVia.get(c+1,f)&&0==(114&this.objectAdjacency.get(c+1,f))&&(o[u]=c+1,h[u]=f,u=(u+1)%p,this.routeVia.set(c+1,f,8)),f>0&&0===this.routeVia.get(c,f-1)&&0==(116&this.objectAdjacency.get(c,f-1))&&(o[u]=c,h[u]=f-1,u=(u+1)%p,this.routeVia.set(c,f-1,1)),f<95&&0===this.routeVia.get(c,f+1)&&0==(113&this.objectAdjacency.get(c,f+1))&&(o[u]=c,h[u]=f+1,u=(u+1)%p,this.routeVia.set(c,f+1,4)),c>0&&f>0&&0==(116&this.objectAdjacency.get(c,f-1))&&0==(120&this.objectAdjacency.get(c-1,f))&&0==(124&this.objectAdjacency.get(c-1,f-1))&&0===this.routeVia.get(c-1,f-1)&&(o[u]=c-1,h[u]=f-1,u=(u+1)%p,this.routeVia.set(c-1,f-1,3)),c<95&&f>0&&0==(116&this.objectAdjacency.get(c,f-1))&&0==(114&this.objectAdjacency.get(c+1,f))&&0==(118&this.objectAdjacency.get(c+1,f-1))&&0===this.routeVia.get(c+1,f-1)&&(o[u]=c+1,h[u]=f-1,u=(u+1)%p,this.routeVia.set(c+1,f-1,9)),c>0&&f<95&&0==(113&this.objectAdjacency.get(c,f+1))&&0==(120&this.objectAdjacency.get(c-1,f))&&0==(121&this.objectAdjacency.get(c-1,f+1))&&0===this.routeVia.get(c-1,f+1)&&(o[u]=c-1,h[u]=f+1,u=(u+1)%p,this.routeVia.set(c-1,f+1,6)),c<95&&f<95&&0==(113&this.objectAdjacency.get(c,f+1))&&0==(114&this.objectAdjacency.get(c+1,f))&&0==(115&this.objectAdjacency.get(c+1,f+1))&&0===this.routeVia.get(c+1,f+1)&&(o[u]=c+1,h[u]=f+1,u=(u+1)%p,this.routeVia.set(c+1,f+1,12))}if(!m)return-1;o[l=0]=c,h[l++]=f;for(let g=d=this.routeVia.get(c,f);c!==t||f!==e;g=this.routeVia.get(c,f))g!==d&&(d=g,o[l]=c,h[l++]=f),0!=(2&g)?c++:0!=(8&g)&&c--,0!=(1&g)?f++:0!=(4&g)&&f--;return l}_setObjectAdjacency_from4(t,e,i,r){if(!(t<0||e<0||t>=95||e>=95)&&1===Np.wallObjectAdjacent[r]){const r=this.objectAdjacency.get(t,e);0===i?(this.objectAdjacency.set(t,e,1|r),e>0&&this._setObjectAdjacency_from3(t,e-1,4)):1===i?(this.objectAdjacency.set(t,e,2|r),t>0&&this._setObjectAdjacency_from3(t-1,e,8)):2===i?this.objectAdjacency.set(t,e,16|r):3===i&&this.objectAdjacency.set(t,e,32|r),this.method404(t,e,1,1)}}setObjectAdjacency(...t){switch(t.length){case 4:return this._setObjectAdjacency_from4(...t);case 3:return this._setObjectAdjacency_from3(...t)}}_loadSection_from4(t,e,i,r){let n=(t+24)/48|0,s=(e+24)/48|0;if(this._loadSection_from4I(n-1,s-1,i,0),this._loadSection_from4I(n,s-1,i,1),this._loadSection_from4I(n-1,s,i,2),this._loadSection_from4I(n,s,i,3),this.setTiles(),null===this.parentModel&&(this.parentModel=Vp._from7(18688,18688,!0,!0,!1,!1,!0)),r){this.surface.blackScreen();for(let e=0;e<this.regionWidth;e++)for(let t=0;t<this.regionHeight;t++)this.objectAdjacency.set(e,t,0);let t=this.parentModel;t.clear();for(let e=0;e<this.regionWidth;e++)for(let r=0;r<this.regionHeight;r++){let n=-this.getTerrainHeight(e,r);this.getTileDecoration(e,r,i)>0&&4===Np.tileType[this.getTileDecoration(e,r,i)-1]&&(n=0),this.getTileDecoration(e-1,r,i)>0&&4===Np.tileType[this.getTileDecoration(e-1,r,i)-1]&&(n=0),this.getTileDecoration(e,r-1,i)>0&&4===Np.tileType[this.getTileDecoration(e,r-1,i)-1]&&(n=0),this.getTileDecoration(e-1,r-1,i)>0&&4===Np.tileType[this.getTileDecoration(e-1,r-1,i)-1]&&(n=0);let s=t.vertexAt(e*this.anInt585,n,r*this.anInt585),o=(10*Math.random()|0)-5;t.setVertexAmbience(s,o)}for(let e=0;e<95;e++)for(let r=0;r<95;r++){let n=this.getTerrainColour(e,r),s=this.terrainColours[n],o=s,h=s,a=0;if(1!==i&&2!==i||(s=Nm.colourTransparent,o=Nm.colourTransparent,h=Nm.colourTransparent),this.getTileDecoration(e,r,i)>0){let t=this.getTileDecoration(e,r,i),n=Np.tileType[t-1],u=this.getTileType(e,r,i);if(s=o=Np.tileDecoration[t-1],4===n&&(s=1,o=1,12===t&&(s=31,o=31)),5===n?this.getWallDiagonal(e,r)>0&&this.getWallDiagonal(e,r)<24e3&&(this.getTileDecoration(e-1,r,i,h)!==Nm.colourTransparent&&this.getTileDecoration(e,r-1,i,h)!==Nm.colourTransparent?(s=this.getTileDecoration(e-1,r,i,h),a=0):this.getTileDecoration(e+1,r,i,h)!==Nm.colourTransparent&&this.getTileDecoration(e,r+1,i,h)!==Nm.colourTransparent?(o=this.getTileDecoration(e+1,r,i,h),a=0):this.getTileDecoration(e+1,r,i,h)!==Nm.colourTransparent&&this.getTileDecoration(e,r-1,i,h)!==Nm.colourTransparent?(o=this.getTileDecoration(e+1,r,i,h),a=1):this.getTileDecoration(e-1,r,i,h)!==Nm.colourTransparent&&this.getTileDecoration(e,r+1,i,h)!==Nm.colourTransparent&&(s=this.getTileDecoration(e-1,r,i,h),a=1)):(2!==n||this.getWallDiagonal(e,r)>0&&this.getWallDiagonal(e,r)<24e3)&&(this.getTileType(e-1,r,i)!==u&&this.getTileType(e,r-1,i)!==u?(s=h,a=0):this.getTileType(e+1,r,i)!==u&&this.getTileType(e,r+1,i)!==u?(o=h,a=0):this.getTileType(e+1,r,i)!==u&&this.getTileType(e,r-1,i)!==u?(o=h,a=1):this.getTileType(e-1,r,i)!==u&&this.getTileType(e,r+1,i)!==u&&(s=h,a=1)),0!==Np.tileAdjacent[t-1]){const t=this.objectAdjacency.get(e,r);this.objectAdjacency.set(e,r,64|t)}if(2===Np.tileType[t-1]){const t=this.objectAdjacency.get(e,r);this.objectAdjacency.set(e,r,128|t)}}this.method402(e,r,a,s,o);let u=this.getTerrainHeight(e+1,r+1)-this.getTerrainHeight(e+1,r)+this.getTerrainHeight(e,r+1)-this.getTerrainHeight(e,r);if(s!==o||0!==u){let i=new Int32Array(3),n=new Int32Array(3);if(0===a){if(s!==Nm.colourTransparent){i[0]=r+96*e+96,i[1]=r+96*e,i[2]=r+96*e+1;let n=t.createFace(3,i,Nm.colourTransparent,s);this.localX[n]=e,this.localY[n]=r,t.faceTag[n]=2e5+n}if(o!==Nm.colourTransparent){n[0]=r+96*e+1,n[1]=r+96*e+96+1,n[2]=r+96*e+96;let i=t.createFace(3,n,Nm.colourTransparent,o);this.localX[i]=e,this.localY[i]=r,t.faceTag[i]=2e5+i}}else{if(s!==Nm.colourTransparent){i[0]=r+96*e+1,i[1]=r+96*e+96+1,i[2]=r+96*e;let n=t.createFace(3,i,Nm.colourTransparent,s);this.localX[n]=e,this.localY[n]=r,t.faceTag[n]=2e5+n}if(o!==Nm.colourTransparent){n[0]=r+96*e+96,n[1]=r+96*e,n[2]=r+96*e+96+1;let i=t.createFace(3,n,Nm.colourTransparent,o);this.localX[i]=e,this.localY[i]=r,t.faceTag[i]=2e5+i}}}else if(s!==Nm.colourTransparent){let i=new Int32Array(4);i[0]=r+96*e+96,i[1]=r+96*e,i[2]=r+96*e+1,i[3]=r+96*e+96+1;let n=t.createFace(4,i,Nm.colourTransparent,s);this.localX[n]=e,this.localY[n]=r,t.faceTag[n]=2e5+n}}for(let e=1;e<95;e++)for(let r=1;r<95;r++)if(this.getTileDecoration(e,r,i)>0&&4===Np.tileType[this.getTileDecoration(e,r,i)-1]){let n=Np.tileDecoration[this.getTileDecoration(e,r,i)-1],s=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),h=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),a=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([s,o,h,a]),l=t.createFace(4,u,n,Nm.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,n,n)}else if(0===this.getTileDecoration(e,r,i)||3!==Np.tileType[this.getTileDecoration(e,r,i)-1]){if(this.getTileDecoration(e,r+1,i)>0&&4===Np.tileType[this.getTileDecoration(e,r+1,i)-1]){let n=Np.tileDecoration[this.getTileDecoration(e,r+1,i)-1],s=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),h=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),a=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([s,o,h,a]),l=t.createFace(4,u,n,Nm.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,n,n)}if(this.getTileDecoration(e,r-1,i)>0&&4===Np.tileType[this.getTileDecoration(e,r-1,i)-1]){let n=Np.tileDecoration[this.getTileDecoration(e,r-1,i)-1],s=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),h=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),a=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([s,o,h,a]),l=t.createFace(4,u,n,Nm.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,n,n)}if(this.getTileDecoration(e+1,r,i)>0&&4===Np.tileType[this.getTileDecoration(e+1,r,i)-1]){let n=Np.tileDecoration[this.getTileDecoration(e+1,r,i)-1],s=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),h=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),a=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([s,o,h,a]),l=t.createFace(4,u,n,Nm.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,n,n)}if(this.getTileDecoration(e-1,r,i)>0&&4===Np.tileType[this.getTileDecoration(e-1,r,i)-1]){let n=Np.tileDecoration[this.getTileDecoration(e-1,r,i)-1],s=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r),r*this.anInt585),o=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r),r*this.anInt585),h=t.vertexAt((e+1)*this.anInt585,-this.getTerrainHeight(e+1,r+1),(r+1)*this.anInt585),a=t.vertexAt(e*this.anInt585,-this.getTerrainHeight(e,r+1),(r+1)*this.anInt585),u=new Int32Array([s,o,h,a]),l=t.createFace(4,u,n,Nm.colourTransparent);this.localX[l]=e,this.localY[l]=r,t.faceTag[l]=2e5+l,this.method402(e,r,0,n,n)}}t._setLight_from6(!0,40,48,-50,-10,-50),this.terrainModels=this.parentModel.split(0,0,1536,1536,8,64,233,!1);for(let e=0;e<64;e++)this.scene.addModel(this.terrainModels[e]);for(let e=0;e<this.regionWidth;e++)for(let t=0;t<this.regionHeight;t++)this.terrainHeightLocal.set(e,t,this.getTerrainHeight(e,t))}this.parentModel.clear();let o=6316128;for(let h=0;h<95;h++)for(let t=0;t<95;t++){let e=this.getWallEastWest(h,t);if(e>0&&(0===Np.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,h,t,h+1,t),r&&0!==Np.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(h,t);this.objectAdjacency.set(h,t,1|e),t>0&&this._setObjectAdjacency_from3(h,t-1,4)}r&&this.surface.drawLineHoriz(3*h,3*t,3,o)}if((e=this.getWallNorthSouth(h,t))>0&&(0===Np.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,h,t,h,t+1),r&&0!==Np.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(h,t);this.objectAdjacency.set(h,t,2|e),h>0&&this._setObjectAdjacency_from3(h-1,t,8)}r&&this.surface.drawLineVert(3*h,3*t,3,o)}if((e=this.getWallDiagonal(h,t))>0&&e<12e3&&(0===Np.wallObjectInvisible[e-1]||this.aBoolean592)){if(this.method422(this.parentModel,e-1,h,t,h+1,t+1),r&&0!==Np.wallObjectAdjacent[e-1]){const e=this.objectAdjacency.get(h,t);this.objectAdjacency.set(h,t,32|e)}r&&(this.surface.setPixel(3*h,3*t,o),this.surface.setPixel(3*h+1,3*t+1,o),this.surface.setPixel(3*h+2,3*t+2,o))}if(e>12e3&&e<24e3&&(0===Np.wallObjectInvisible[e-12001]||this.aBoolean592)){if(this.method422(this.parentModel,e-12001,h+1,t,h,t+1),r&&0!==Np.wallObjectAdjacent[e-12001]){const e=this.objectAdjacency.get(h,t);this.objectAdjacency.set(h,t,16|e)}r&&(this.surface.setPixel(3*h+2,3*t,o),this.surface.setPixel(3*h+1,3*t+1,o),this.surface.setPixel(3*h,3*t+2,o))}}r&&this.surface.drawSpriteMinimap(this.baseMediaSprite-1,0,0,285,285),this.parentModel._setLight_from6(!1,60,24,-50,-10,-50),this.wallModels[i]=this.parentModel.split(0,0,1536,1536,8,64,338,!0);for(let h=0;h<64;h++)this.scene.addModel(this.wallModels[i][h]);for(let h=0;h<95;h++)for(let t=0;t<95;t++){let e=this.getWallEastWest(h,t);e>0&&this.method428(e-1,h,t,h+1,t),(e=this.getWallNorthSouth(h,t))>0&&this.method428(e-1,h,t,h,t+1),(e=this.getWallDiagonal(h,t))>0&&e<12e3&&this.method428(e-1,h,t,h+1,t+1),e>12e3&&e<24e3&&this.method428(e-12001,h+1,t,h,t+1)}for(let h=1;h<95;h++)for(let t=1;t<95;t++)if(this.getWallRoof(h,t)>0){let e=h,i=t,r=h+1,n=t,s=h+1,o=t+1,a=h,u=t+1,l=0,c=this.terrainHeightLocal.get(e,i),f=this.terrainHeightLocal.get(r,n),d=this.terrainHeightLocal.get(s,o),p=this.terrainHeightLocal.get(a,u);if(c>8e4&&(c-=8e4),f>8e4&&(f-=8e4),d>8e4&&(d-=8e4),p>8e4&&(p-=8e4),c>l&&(l=c),f>l&&(l=f),d>l&&(l=d),p>l&&(l=p),l>=8e4&&(l-=8e4),c<8e4)this.terrainHeightLocal.set(e,i,l);else{const t=this.terrainHeightLocal.get(e,i);this.terrainHeightLocal.set(e,i,t-8e4)}if(f<8e4)this.terrainHeightLocal.set(r,n,l);else{const t=this.terrainHeightLocal.get(r,n);this.terrainHeightLocal.set(r,n,t-8e4)}if(d<8e4)this.terrainHeightLocal.set(s,o,l);else{const t=this.terrainHeightLocal.get(s,o);this.terrainHeightLocal.set(s,o,t-8e4)}if(p<8e4)this.terrainHeightLocal.set(a,u,l);else{const t=this.terrainHeightLocal.get(a,u);this.terrainHeightLocal.set(a,u,t-8e4)}}this.parentModel.clear();for(let h=1;h<95;h++)for(let t=1;t<95;t++){let e=this.getWallRoof(h,t);if(e>0){let i=h,r=t,n=h+1,s=t,o=h+1,a=t+1,u=h,l=t+1,c=h*this.anInt585,f=t*this.anInt585,d=c+this.anInt585,p=f+this.anInt585,m=c,g=f,y=d,b=p,w=this.terrainHeightLocal.get(i,r),v=this.terrainHeightLocal.get(n,s),M=this.terrainHeightLocal.get(o,a),S=this.terrainHeightLocal.get(u,l),_=Np.roofHeight[e-1];this.hasRoof(i,r)&&w<8e4&&(w+=_+8e4,this.terrainHeightLocal.set(i,r,w)),this.hasRoof(n,s)&&v<8e4&&(v+=_+8e4,this.terrainHeightLocal.set(n,s,v)),this.hasRoof(o,a)&&M<8e4&&(M+=_+8e4,this.terrainHeightLocal.set(o,a,M)),this.hasRoof(u,l)&&S<8e4&&(S+=_+8e4,this.terrainHeightLocal.set(u,l,S)),w>=8e4&&(w-=8e4),v>=8e4&&(v-=8e4),M>=8e4&&(M-=8e4),S>=8e4&&(S-=8e4);let I=16;if(this.method427(i-1,r)||(c-=I),this.method427(i+1,r)||(c+=I),this.method427(i,r-1)||(f-=I),this.method427(i,r+1)||(f+=I),this.method427(n-1,s)||(d-=I),this.method427(n+1,s)||(d+=I),this.method427(n,s-1)||(g-=I),this.method427(n,s+1)||(g+=I),this.method427(o-1,a)||(y-=I),this.method427(o+1,a)||(y+=I),this.method427(o,a-1)||(p-=I),this.method427(o,a+1)||(p+=I),this.method427(u-1,l)||(m-=I),this.method427(u+1,l)||(m+=I),this.method427(u,l-1)||(b-=I),this.method427(u,l+1)||(b+=I),e=Np.roofNumVertices[e-1],w=-w,v=-v,M=-M,S=-S,this.getWallDiagonal(h,t)>12e3&&this.getWallDiagonal(h,t)<24e3&&0===this.getWallRoof(h-1,t-1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(y,M,p),t[1]=this.parentModel.vertexAt(m,S,b),t[2]=this.parentModel.vertexAt(d,v,g),this.parentModel.createFace(3,t,e,Nm.colourTransparent)}else if(this.getWallDiagonal(h,t)>12e3&&this.getWallDiagonal(h,t)<24e3&&0===this.getWallRoof(h+1,t+1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(c,w,f),t[1]=this.parentModel.vertexAt(d,v,g),t[2]=this.parentModel.vertexAt(m,S,b),this.parentModel.createFace(3,t,e,Nm.colourTransparent)}else if(this.getWallDiagonal(h,t)>0&&this.getWallDiagonal(h,t)<12e3&&0===this.getWallRoof(h+1,t-1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(m,S,b),t[1]=this.parentModel.vertexAt(c,w,f),t[2]=this.parentModel.vertexAt(y,M,p),this.parentModel.createFace(3,t,e,Nm.colourTransparent)}else if(this.getWallDiagonal(h,t)>0&&this.getWallDiagonal(h,t)<12e3&&0===this.getWallRoof(h-1,t+1)){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(d,v,g),t[1]=this.parentModel.vertexAt(y,M,p),t[2]=this.parentModel.vertexAt(c,w,f),this.parentModel.createFace(3,t,e,Nm.colourTransparent)}else if(w===v&&M===S){let t=new Int32Array(4);t[0]=this.parentModel.vertexAt(c,w,f),t[1]=this.parentModel.vertexAt(d,v,g),t[2]=this.parentModel.vertexAt(y,M,p),t[3]=this.parentModel.vertexAt(m,S,b),this.parentModel.createFace(4,t,e,Nm.colourTransparent)}else if(w===S&&v===M){let t=new Int32Array(4);t[0]=this.parentModel.vertexAt(m,S,b),t[1]=this.parentModel.vertexAt(c,w,f),t[2]=this.parentModel.vertexAt(d,v,g),t[3]=this.parentModel.vertexAt(y,M,p),this.parentModel.createFace(4,t,e,Nm.colourTransparent)}else{let i=!0;if(this.getWallRoof(h-1,t-1)>0&&(i=!1),this.getWallRoof(h+1,t+1)>0&&(i=!1),i){let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(c,w,f),t[1]=this.parentModel.vertexAt(d,v,g),t[2]=this.parentModel.vertexAt(m,S,b),this.parentModel.createFace(3,t,e,Nm.colourTransparent);let i=new Int32Array(3);i[0]=this.parentModel.vertexAt(y,M,p),i[1]=this.parentModel.vertexAt(m,S,b),i[2]=this.parentModel.vertexAt(d,v,g),this.parentModel.createFace(3,i,e,Nm.colourTransparent)}else{let t=new Int32Array(3);t[0]=this.parentModel.vertexAt(d,v,g),t[1]=this.parentModel.vertexAt(y,M,p),t[2]=this.parentModel.vertexAt(c,w,f),this.parentModel.createFace(3,t,e,Nm.colourTransparent);let i=new Int32Array(3);i[0]=this.parentModel.vertexAt(m,S,b),i[1]=this.parentModel.vertexAt(c,w,f),i[2]=this.parentModel.vertexAt(y,M,p),this.parentModel.createFace(3,i,e,Nm.colourTransparent)}}}}this.parentModel._setLight_from6(!0,50,50,-50,-10,-50),this.roofModels[i]=this.parentModel.split(0,0,1536,1536,8,64,169,!0);for(let h=0;h<64;h++)this.scene.addModel(this.roofModels[i][h]);if(null===this.roofModels[i][0])throw new EvalError("null roof!");for(let h=0;h<this.regionWidth;h++)for(let t=0;t<this.regionHeight;t++)if(this.terrainHeightLocal.get(h,t)>=8e4){const e=this.terrainHeightLocal.get(h,t);this.terrainHeightLocal.set(h,t,e-8e4)}}_setObjectAdjacency_from3(t,e,i){const r=this.objectAdjacency.get(t,e);this.objectAdjacency.set(t,e,r|i)}getTileType(t,e,i){let r=this.getTileDecoration(t,e,i);return 0===r?-1:2!==Np.tileType[r-1]?0:1}addModels(t){for(let e=0;e<94;e++)for(let i=0;i<94;i++)if(this.getWallDiagonal(e,i)>48e3&&this.getWallDiagonal(e,i)<6e4){let r=this.getWallDiagonal(e,i)-48001,n=this.getTileDirection(e,i),s=0,o=0;0===n||4===n?(s=Np.objectWidth[r],o=Np.objectHeight[r]):(o=Np.objectWidth[r],s=Np.objectHeight[r]),this.removeObject2(e,i,r);let h=t[Np.objectModelIndex[r]].copy(!1,!0,!1,!1),a=(e+e+s)*this.anInt585/2|0,u=(i+i+o)*this.anInt585/2|0;if(h.translate(a,-this.getElevation(a,u),u),h.orient(0,32*this.getTileDirection(e,i),0),this.scene.addModel(h),h._setLight_from5(48,48,-50,-10,-50),s>1||o>1)for(let t=e;t<e+s;t++)for(let n=i;n<i+o;n++)if((t>e||n>i)&&this.getWallDiagonal(t,n)-48001===r){let e=t,i=n,r=0;e>=48&&i<48?(r=1,e-=48):e<48&&i>=48?(r=2,i-=48):e>=48&&i>=48&&(r=3,e-=48,i-=48),this.wallsDiagonal.set(r,48*e+i,0)}}}method422(t,e,i,r,n,s){this.method425(i,r,40),this.method425(n,s,40);let o=Np.wallObjectHeight[e],h=Np.wallObjectTextureFront[e],a=Np.wallObjectTextureBack[e],u=i*this.anInt585,l=r*this.anInt585,c=n*this.anInt585,f=s*this.anInt585,d=t.vertexAt(u,-this.terrainHeightLocal.get(i,r),l),p=t.vertexAt(u,-this.terrainHeightLocal.get(i,r)-o,l),m=t.vertexAt(c,-this.terrainHeightLocal.get(n,s)-o,f),g=t.vertexAt(c,-this.terrainHeightLocal.get(n,s),f),y=new Int32Array([d,p,m,g]),b=t.createFace(4,y,h,a);return 5===Np.wallObjectInvisible[e]?void(t.faceTag[b]=3e4+e):void(t.faceTag[b]=0)}getTerrainHeight(t,e){if(t<0||t>=this.regionWidth||e<0||e>=this.regionHeight)return 0;let i=0;return t>=48&&e<48?(i=1,t-=48):t<48&&e>=48?(i=2,e-=48):t>=48&&e>=48&&(i=3,t-=48,e-=48),3*(255&this.terrainHeight.get(i,48*t+e))}_loadSection_from3(t,e,i){this.reset();let r=(t+24)/48|0,n=(e+24)/48|0;this._loadSection_from4(t,e,i,!0),0===i&&(this._loadSection_from4(t,e,1,!1),this._loadSection_from4(t,e,2,!1),this._loadSection_from4I(r-1,n-1,i,0),this._loadSection_from4I(r,n-1,i,1),this._loadSection_from4I(r-1,n,i,2),this._loadSection_from4I(r,n,i,3),this.setTiles())}method425(t,e,i){let r=t/12|0,n=e/12|0,s=(t-1)/12|0,o=(e-1)/12|0;this.setTerrainAmbience(r,n,t,e,i),r!==s&&this.setTerrainAmbience(s,n,t,e,i),n!==o&&this.setTerrainAmbience(r,o,t,e,i),r!==s&&n!==o&&this.setTerrainAmbience(s,o,t,e,i)}removeObject(t,e,i){if(!(t<0||e<0||t>=95||e>=95||1!==Np.objectType[i]&&2!==Np.objectType[i])){let r=this.getTileDirection(t,e),n=0,s=0;0===r||4===r?(n=Np.objectWidth[i],s=Np.objectHeight[i]):(s=Np.objectWidth[i],n=Np.objectHeight[i]);for(let o=t;o<t+n;o++)for(let t=e;t<e+s;t++){const e=this.objectAdjacency.get(o,t);1===Np.objectType[i]?this.objectAdjacency.set(o,t,65471&e):0===r?(this.objectAdjacency.set(o,t,65533&e),o>0&&this.method407(o-1,t,8)):2===r?(this.objectAdjacency.set(o,t,65531&e),t<95&&this.method407(o,t+1,1)):4===r?(this.objectAdjacency.set(o,t,65527&e),o<95&&this.method407(o+1,t,2)):6===r&&(this.objectAdjacency.set(o,t,65534&e),t>0&&this.method407(o,t-1,4))}this.method404(t,e,n,s)}}method427(t,e){return this.getWallRoof(t,e)>0||this.getWallRoof(t-1,e)>0||this.getWallRoof(t-1,e-1)>0||this.getWallRoof(t,e-1)>0}method428(t,e,i,r,n){let s=Np.wallObjectHeight[t];const o=this.terrainHeightLocal.get(e,i);o<8e4&&this.terrainHeightLocal.set(e,i,o+8e4+s);const h=this.terrainHeightLocal.get(r,n);h<8e4&&this.terrainHeightLocal.set(r,n,h+8e4+s)}}Nm.colourTransparent=12345678,Xm=Nm;var Fm={};const Hm="a".charCodeAt(0),Wm="@".charCodeAt(0),qm=".".charCodeAt(0),zm="!".charCodeAt(0),Vm="%".charCodeAt(0),Zm=" ".charCodeAt(0),Gm="z".charCodeAt(0),Km="\uffe0".charCodeAt(0);class $m{static descramble(t,e,i){try{let n=0,s=-1;for(let r=0;r<i;r++){const i=255&t[e++];let r=i>>4&15;-1===s?r<13?$m.chars[n++]=$m.charMap[r]:s=r:($m.chars[n++]=$m.charMap[(s<<4)+r-195],s=-1),r=15&i,-1===s?r<13?$m.chars[n++]=$m.charMap[r]:s=r:($m.chars[n++]=$m.charMap[(s<<4)+r-195],s=-1)}let o=!0;for(let t=0;t<n;t++){const e=$m.chars[t];t>4&&e===Wm&&($m.chars[t]=Zm),e===Vm&&($m.chars[t]=Zm),o&&e>=Hm&&e<=Gm&&($m.chars[t]+=Km,o=!1),e!==qm&&e!==zm||(o=!0)}return r=$m.chars.slice(0,n),Array.from(r).map(t=>String.fromCharCode(t)).join("")}catch(Kd){return"."}var r}static scramble(t){t.length>80&&(t=t.slice(0,80)),t=t.toLowerCase();let e=0,i=-1;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);let s=0;for(let t=0;t<$m.charMap.length;t++)if(n===$m.charMap[t]){s=t;break}s>12&&(s+=195),-1===i?s<13?i=s:$m.scrambledBytes[e++]=255&s:s<13?($m.scrambledBytes[e++]=(i<<4)+s&255,i=-1):($m.scrambledBytes[e++]=(i<<4)+(s>>4)&255,i=15&s)}return-1!==i&&($m.scrambledBytes[e++]=i<<4&255),e}}$m.scrambledBytes=new Int8Array(100),$m.chars=new Uint16Array(100),$m.charMap=new Uint16Array([" ","e","t","a","o","i","h","n","s","r","d","l","u","m","w","c","y","f","g","p","b","v","k","x","j","q","z","0","1","2","3","4","5","6","7","8","9"," ","!","?",".",",",":",";","(",")","-","&","*","\\","'","@","#","+","=","\xa3","$","%",'"',"[","]"].map(t=>t.charCodeAt(0))),Fm=$m;var Jm={APPEARANCE:59,BANK_CLOSE:203,BANK_OPEN:42,BANK_UPDATE:249,CLOSE_CONNECTION:4,DUEL_ACCEPTED:210,DUEL_CLOSE:225,DUEL_CONFIRM_OPEN:172,DUEL_OPEN:176,DUEL_OPPONENT_ACCEPTED:253,DUEL_SETTINGS:30,DUEL_UPDATE:6,FRIEND_LIST:71,FRIEND_MESSAGE:120,FRIEND_STATUS_CHANGE:149,GAME_SETTINGS:240,IGNORE_LIST:109,INVENTORY_ITEMS:53,INVENTORY_ITEM_REMOVE:123,INVENTORY_ITEM_UPDATE:90,LOGOUT_DENY:183,MESSAGE:131,OPTION_LIST:245,OPTION_LIST_CLOSE:252,PLAYER_DIED:83,PLAYER_QUEST_LIST:5,PLAYER_STAT_EQUIPMENT_BONUS:153,PLAYER_STAT_EXPERIENCE_UPDATE:33,PLAYER_STAT_FATIGUE:114,PLAYER_STAT_FATIGUE_ASLEEP:244,PLAYER_STAT_LIST:156,PLAYER_STAT_UPDATE:159,PRAYER_STATUS:206,PRIVACY_SETTINGS:51,REGION_ENTITY_UPDATE:211,REGION_GROUND_ITEMS:99,REGION_NPCS:79,REGION_NPC_UPDATE:104,REGION_OBJECTS:48,REGION_PLAYERS:191,REGION_PLAYER_UPDATE:234,REGION_WALL_OBJECTS:91,SERVER_MESSAGE:89,SERVER_MESSAGE_ONTOP:222,SHOP_CLOSE:137,SHOP_OPEN:101,SLEEP_CLOSE:84,SLEEP_INCORRECT:194,SLEEP_OPEN:117,SOUND:204,SYSTEM_UPDATE:52,TELEPORT_BUBBLE:36,TRADE_CLOSE:128,TRADE_CONFIRM_OPEN:20,TRADE_ITEMS:97,TRADE_OPEN:92,TRADE_RECIPIENT_STATUS:162,TRADE_STATUS:15,WELCOME:182,WORLD_INFO:25};const Qm=x({}),tg=e({}),eg=Bp,ig=["torcha2","torcha3","torcha4","skulltorcha2","skulltorcha3","skulltorcha4","firea2","firea3","fireplacea2","fireplacea3","firespell2","firespell3","lightning2","lightning3","clawspell2","clawspell3","clawspell4","clawspell5","spellcharge2","spellcharge3"];var rg=class extends Lp{constructor(t){super(t),Qm(this),this.packetHandlers=tg(this),this.localRegionX=0,this.localRegionY=0,this.messageTabSelected=0,this.mouseClickXX=0,this.mouseClickXY=0,this.privateMessageTarget=new xt(0),this.controlListQuest=0,this.controlListMagic=0,this.packetErrorCount=0,this.mouseButtonDownTime=0,this.mouseButtonItemCountIncrement=0,this.animationIndex=0,this.cameraRotationX=0,this.tradeConfirmAccepted=!1,this.appearanceHeadType=0,this.appearanceSkinColour=0,this.anInt707=0,this.deathScreenTimeout=0,this.cameraRotationY=0,this.welcomeUnreadMessages=0,this.logoutTimeout=0,this.tradeRecipientConfirmHash=new xt(0),this.loginTimer=0,this.npcCombatModelArray1=new Int32Array([0,1,2,1,0,0,0,0]),this.npcCombatModelArray2=new Int32Array([0,0,0,0,0,1,2,1]),this.systemUpdate=0,this.graphics=null,this.regionX=0,this.regionY=0,this.welcomScreenAlreadyShown=!1,this.mouseButtonClick=0,this.healthBarCount=0,this.spriteMedia=0,this.spriteUtil=0,this.spriteItem=0,this.spriteProjectile=0,this.spriteTexture=0,this.spriteTextureWorld=0,this.spriteLogo=0,this.teleportBubbleCount=0,this.mouseClickCount=0,this.shopSellPriceMod=0,this.shopBuyPriceMod=0,this.duelOptionRetreat=0,this.duelOptionMagic=0,this.duelOptionPrayer=0,this.duelOptionWeapons=0,this.groundItemCount=0,this.receivedMessagesCount=0,this.messageTabFlashAll=0,this.messageTabFlashHistory=0,this.messageTabFlashQuest=0,this.messageTabFlashPrivate=0,this.bankItemCount=0,this.objectAnimationNumberFireLightningSpell=0,this.objectAnimationNumberTorch=0,this.objectAnimationNumberClaw=0,this.loggedIn=0,this.npcCount=0,this.npcCacheCount=0,this.objectAnimationCount=0,this.tradeConfirmItemsCount=0,this.mouseClickXStep=0,this.newBankItemCount=0,this.npcAnimationArray=[new Int32Array([11,2,9,7,1,6,10,0,5,8,3,4]),new Int32Array([11,2,9,7,1,6,10,0,5,8,3,4]),new Int32Array([11,3,2,9,7,1,6,10,0,5,8,4]),new Int32Array([3,4,2,9,7,1,6,10,8,11,0,5]),new Int32Array([3,4,2,9,7,1,6,10,8,11,0,5]),new Int32Array([4,3,2,9,7,1,6,10,8,11,0,5]),new Int32Array([11,4,2,9,7,1,6,10,0,5,8,3]),new Int32Array([11,2,9,7,1,6,10,0,5,8,4,3])],this.npcWalkModel=new Int32Array([0,1,2,1]),this.referID=0,this.combatTimeout=0,this.optionMenuCount=0,this.errorLoadingCodebase=!1,this.cameraRotationTime=0,this.duelOpponentItemsCount=0,this.duelItemsCount=0,this.duelOfferOpponentItemCount=0,this.characterHairColours=new Int32Array([16760880,16752704,8409136,6307872,3158064,16736288,16728064,16777215,65280,65535]),this.characterTopBottomColours=new Int32Array([16711680,16744448,16769024,10543104,57344,32768,41088,45311,33023,12528,14680288,3158064,6307840,8409088,16777215]),this.characterSkinColours=new Int32Array([15523536,13415270,11766848,10056486,9461792]),this.itemsAboveHeadCount=0,this.statFatigue=0,this.fatigueSleeping=0,this.tradeRecipientConfirmItemsCount=0,this.tradeRecipientItemsCount=0,this.showDialogServerMessage=!1,this.menuX=0,this.menuY=0,this.menuWidth=0,this.menuHeight=0,this.menuItemsCount=0,this.showUITab=0,this.tradeItemsCount=0,this.planeWidth=0,this.planeHeight=0,this.planeMultiplier=0,this.playerQuestPoints=0,this.welcomeLastLoggedInDays=0,this.inventoryItemsCount=0,this.duelOpponentNameHash=new xt(0),this.minimapRandom1=0,this.minimapRandom2=0,this.objectCount=0,this.duelOfferItemCount=0,this.cameraAutoRotatePlayerX=0,this.cameraAutoRotatePlayerY=0,this.playerCount=0,this.knownPlayerCount=0,this.spriteCount=0,this.wallObjectCount=0,this.welcomeRecoverySetDays=0,this.localLowerX=0,this.localLowerY=0,this.localUpperX=0,this.localUpperY=0,this.world=null,this.welcomeLastLoggedInIP=0,this.sleepWordDelayTimer=0,this.menuIndices=new Int32Array(250),this.cameraAutoAngleDebug=!1,this.wallObjectDirection=new Int32Array(500),this.wallObjectId=new Int32Array(500),this.cameraRotationXIncrement=2,this.inventoryMaxItemCount=30,this.bankItemsMax=48,this.optionMenuEntry=[],this.optionMenuEntry.length=5,this.optionMenuEntry.fill(null),this.newBankItems=new Int32Array(256),this.newBankItemsCount=new Int32Array(256),this.teleportBubbleTime=new Int32Array(50),this.receivedMessageX=new Int32Array(50),this.receivedMessageY=new Int32Array(50),this.receivedMessageMidPoint=new Int32Array(50),this.receivedMessageHeight=new Int32Array(50),this.localPlayer=new te,this.localPlayerServerIndex=-1,this.menuItemX=new Int32Array(250),this.menuItemY=new Int32Array(250),this.bankItems=new Int32Array(256),this.bankItemsCount=new Int32Array(256),this.appearanceBodyGender=1,this.appearance2Colour=2,this.appearanceHairColour=2,this.appearanceTopColour=8,this.appearanceBottomColour=14,this.appearanceHeadGender=1,this.loginUser="",this.loginPass="",this.cameraAngle=1,this.members=!1,this.optionSoundDisabled=!1,this.showRightClickMenu=!1,this.cameraRotationYIncrement=2,this.objectAlreadyInMenu=new Int8Array(1500),this.menuItemText1=[],this.menuItemText1.length=250,this.menuItemText1.fill(null),this.duelOpponentName="",this.lastObjectAnimationNumberFireLightningSpell=-1,this.lastObjectAnimationNumberTorch=-1,this.lastObjectAnimationNumberClaw=-1,this.planeIndex=-1,this.cameraRotation=128,this.teleportBubbleX=new Int32Array(50),this.errorLoadingData=!1,this.playerExperience=new Int32Array(18),this.tradeRecipientAccepted=!1,this.tradeAccepted=!1,this.mouseClickXHistory=new Int32Array(8192),this.mouseClickYHistory=new Int32Array(8192),this.playerServerIndexes=new Int32Array(500),this.teleportBubbleY=new Int32Array(50),this.receivedMessages=[],this.receivedMessages.length=50,this.receivedMessages.fill(null),this.showDialogDuelConfirm=!1,this.duelAccepted=!1,this.players=[],this.players.length=500,this.players.fill(null),this.prayerOn=new Int8Array(50),this.menuIndex=new Int32Array(250),this.menuSourceIndex=new Int32Array(250),this.menuTargetIndex=new Int32Array(250),this.wallObjectAlreadyInMenu=new Int8Array(500),this.magicLoc=128,this.errorLoadingMemory=!1,this.fogOfWar=!1,this.gameWidth=512,this.gameHeight=334,this.tradeConfirmItems=new Int32Array(14),this.tradeConfirmItemCount=new Int32Array(14),this.tradeRecipientName="",this.selectedSpell=-1,this.showOptionMenu=!1,this.playerStatCurrent=new Int32Array(18),this.teleportBubbleType=new Int32Array(50),this.showDialogShop=!1,this.shopItem=new Int32Array(256),this.shopItemCount=new Int32Array(256),this.shopItemPrice=new Int32Array(256),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1,this.gameModels=[],this.gameModels.length=1e3,this.gameModels.fill(null),this.showDialogDuel=!1,this.serverMessage="",this.duelOpponentItems=new Int32Array(8),this.duelOpponentItemCount=new Int32Array(8),this.duelItems=new Int32Array(8),this.duelItemCount=new Int32Array(8),this.playerStatBase=new Int32Array(18),this.npcsCache=[],this.npcsCache.length=500,this.npcsCache.fill(null),this.groundItemX=new Int32Array(5e3),this.groundItemY=new Int32Array(5e3),this.groundItemID=new Int32Array(5e3),this.groundItemZ=new Int32Array(5e3),this.bankSelectedItemSlot=-1,this.bankSelectedItem=-2,this.duelOfferOpponentItemId=new Int32Array(8),this.duelOfferOpponentItemStack=new Int32Array(8),this.messageHistoryTimeout=new Int32Array(5),this.optionCameraModeAuto=!0,this.objectX=new Int32Array(1500),this.objectY=new Int32Array(1500),this.objectId=new Int32Array(1500),this.objectDirection=new Int32Array(1500),this.selectedItemInventoryIndex=-1,this.selectedItemName="",this.loadingArea=!1,this.tradeRecipientConfirmItems=new Int32Array(14),this.tradeRecipientConfirmItemCount=new Int32Array(14),this.tradeRecipientItems=new Int32Array(14),this.tradeRecipientItemCount=new Int32Array(14),this.showDialogServerMessage=!1,this.menuType=new Int32Array(250),this.questComplete=new Int8Array(50),this.wallObjectModel=[],this.wallObjectModel.length=500,this.wallObjectModel.fill(null),this.actionBubbleX=new Int32Array(50),this.actionBubbleY=new Int32Array(50),this.cameraZoom=550,this.tradeItems=new Int32Array(14),this.tradeItemCount=new Int32Array(14),this.lastHeightOffset=-1,this.duelSettingsRetreat=!1,this.duelSettingsMagic=!1,this.duelSettingsPrayer=!1,this.duelSettingsWeapons=!1,this.showDialogBank=!1,this.loginUserDesc="",this.loginUserDisp="",this.optionMouseButtonOne=!1,this.inventoryItemId=new Int32Array(35),this.inventoryItemStackCount=new Int32Array(35),this.inventoryEquipped=new Int32Array(35),this.knownPlayers=[],this.knownPlayers.length=500,this.knownPlayers.fill(null),this.messageHistory=[],this.messageHistory.length=5,this.messageHistory.fill(null),this.duelOfferItemId=new Int32Array(8),this.duelOfferItemStack=new Int32Array(8),this.actionBubbleScale=new Int32Array(50),this.actionBubbleItem=new Int32Array(50),this.sleepWordDelay=!0,this.showAppearanceChange=!1,this.shopSelectedItemIndex=-1,this.shopSelectedItemType=-2,this.projectileMaxRange=40,this.npcs=[],this.npcs.length=500,this.npcs.fill(null),this.experienceArray=new Int32Array(99),this.healthBarX=new Int32Array(50),this.healthBarY=new Int32Array(50),this.healthBarMissing=new Int32Array(50),this.playerServer=[],this.playerServer.length=4e3,this.playerServer.fill(null),this.walkPathX=new Int32Array(8e3),this.walkPathY=new Int32Array(8e3),this.wallObjectX=new Int32Array(500),this.wallObjectY=new Int32Array(500),this.menuItemText2=[],this.menuItemText2.length=250,this.menuItemText2.fill(null),this.npcsServer=[],this.npcsServer.length=5e3,this.npcsServer.fill(null),this.playerStatEquipment=new Int32Array(5),this.objectModel=[],this.objectModel.length=1500,this.objectModel.fill(null),this.playerMsgHistory=[],this.playerMsgPtr=0,this.recoveryQuestions=["Where were you born?","What was your first teachers name?","What is your fathers middle name?","Who was your first best friend?","What is your favourite vacation spot?","What is your mothers middle name?","What was your first pets name?","What was the name of your first school?","What is your mothers maiden name?","Who was your first boyfriend/girlfriend?","What was the first computer game you purchased?","Who is your favourite actor/actress?","Who is your favourite author?","Who is your favourite musician?","Who is your favourite cartoon character?","What is your favourite book?","What is your favourite food?","What is your favourite movie?"],this.showRecoverChange=!1,this.recoverCustomQuestionIndex=-1,this.showChangePasswordStep=0,this.changePasswordOld="",this.changePasswordNew="",this.welcomeTipDay=0}playSoundFile(t){if(!this.audioPlayer||this.optionSoundDisabled)return;const e=t+".pcm";this.audioPlayer.writeStream(this.soundData,Ud.getDataFileOffset(e,this.soundData),Ud.getDataFileLength(e,this.soundData))}_walkToActionSource_from8(t,e,i,r,n,s,o,h){let a=this.world.route(t,e,i,r,n,s,this.walkPathX,this.walkPathY,o);if(-1===a){if(!h)return!1;a=1,this.walkPathX[0]=i,this.walkPathY[0]=r}a--,t=this.walkPathX[a],e=this.walkPathY[a],a--,h?this.packetStream.newPacket(eg.WALK_ACTION):this.packetStream.newPacket(eg.WALK),this.packetStream.putShort(t+this.regionX),this.packetStream.putShort(e+this.regionY),h&&-1===a&&(t+this.regionX)%5==0&&(a=0);for(let u=a;u>=0&&u>a-25;u--)this.packetStream.putByte(this.walkPathX[u]-t),this.packetStream.putByte(this.walkPathY[u]-e);return this.packetStream.sendPacket(),this.mouseClickXStep=-24,this.mouseClickXX=this.mouseX,this.mouseClickXY=this.mouseY,!0}walkTo(t,e,i,r,n,s,o,h){let a=this.world.route(t,e,i,r,n,s,this.walkPathX,this.walkPathY,o);if(-1===a)return!1;a--,t=this.walkPathX[a],e=this.walkPathY[a],a--,h?this.packetStream.newPacket(eg.WALK_ACTION):this.packetStream.newPacket(eg.WALK),this.packetStream.putShort(t+this.regionX),this.packetStream.putShort(e+this.regionY),h&&-1===a&&(t+this.regionX)%5==0&&(a=0);for(let u=a;u>=0&&u>a-25;u--)this.packetStream.putByte(this.walkPathX[u]-t),this.packetStream.putByte(this.walkPathY[u]-e);return this.packetStream.sendPacket(),this.mouseClickXStep=-24,this.mouseClickXX=this.mouseX,this.mouseClickXY=this.mouseY,!0}updateBankItems(){this.bankItemCount=this.newBankItemCount;for(let t=0;t<this.newBankItemCount;t++)this.bankItems[t]=this.newBankItems[t],this.bankItemsCount[t]=this.newBankItemsCount[t];for(let t=0;t<this.inventoryItemsCount&&!(this.bankItemCount>=this.bankItemsMax);t++){const e=this.inventoryItemId[t];let i=!1;for(let t=0;t<this.bankItemCount;t++)if(this.bankItems[t]===e){i=!0;break}i||(this.bankItems[this.bankItemCount]=e,this.bankItemsCount[this.bankItemCount]=0,this.bankItemCount++)}}drawAboveHeadStuff(){for(let t=0;t<this.receivedMessagesCount;t++){const e=this.surface.textHeight(1),i=this.receivedMessageX[t];let r=this.receivedMessageY[t];const n=this.receivedMessageMidPoint[t],s=this.receivedMessageHeight[t];let o=!0;for(;o;){o=!1;for(let h=0;h<t;h++)r+s>this.receivedMessageY[h]-e&&r-e<this.receivedMessageY[h]+this.receivedMessageHeight[h]&&i-n<this.receivedMessageX[h]+this.receivedMessageMidPoint[h]&&i+n>this.receivedMessageX[h]-this.receivedMessageMidPoint[h]&&this.receivedMessageY[h]-e-s<r&&(r=this.receivedMessageY[h]-e-s,o=!0)}this.receivedMessageY[t]=r,this.surface.drawParagraph(this.receivedMessages[t],i,r,1,16776960,300)}for(let t=0;t<this.itemsAboveHeadCount;t++){const e=this.actionBubbleX[t],i=this.actionBubbleY[t],r=this.actionBubbleScale[t],n=this.actionBubbleItem[t],s=39*r/100|0,o=27*r/100|0;this.surface.drawActionBubble(e-(s/2|0),i-o,s,o,this.spriteMedia+9,85);const h=36*r/100|0,a=24*r/100|0;this.surface._spriteClipping_from9(e-(h/2|0),i-o+(o/2|0)-(a/2|0),h,a,Np.itemPicture[n]+this.spriteItem,Np.itemMask[n],0,0,!1)}for(let t=0;t<this.healthBarCount;t++){const e=this.healthBarX[t],i=this.healthBarY[t],r=this.healthBarMissing[t];this.surface.drawBoxAlpha(e-15,i-3,r,5,65280,192),this.surface.drawBoxAlpha(e-15+r,i-3,30-r,5,16711680,192)}}_walkToActionSource_from5(t,e,i,r,n){this._walkToActionSource_from8(t,e,i,r,i,r,!1,n)}disposeAndCollect(){this.surface&&(this.surface.clear(),this.surface.pixels=null,this.surface=null),this.scene&&(this.scene.dispose(),this.scene=null),this.gameModels=null,this.objectModel=null,this.wallObjectModel=null,this.playerServer=null,this.players=null,this.npcsServer=null,this.npcs=null,this.localPlayer=null,this.world&&(this.world.terrainModels=null,this.world.wallModels=null,this.world.roofModels=null,this.world.parentModel=null,this.world=null)}drawUI(){if(0!==this.logoutTimeout)this.drawDialogLogout();else if(this.showDialogWelcome)this.drawDialogWelcome();else if(this.showDialogServerMessage)this.drawDialogServerMessage();else if(1===this.showUiWildWarn)this.drawDialogWildWarn();else if(this.showDialogBank&&0===this.combatTimeout)this.drawDialogBank();else if(this.showDialogShop&&0===this.combatTimeout)this.drawDialogShop();else if(this.showDialogTradeConfirm)this.drawDialogTradeConfirm();else if(this.showDialogTrade)this.drawDialogTrade();else if(this.showDialogDuelConfirm)this.drawDialogDuelConfirm();else if(this.showDialogDuel)this.drawDialogDuel();else if(1===this.showDialogReportAbuseStep)this.drawDialogReportAbuse();else if(2===this.showDialogReportAbuseStep)this.drawDialogReportAbuseInput();else if(0!==this.showChangePasswordStep)this.drawDialogChangePassword();else if(0!==this.showDialogSocialInput)this.drawDialogSocialInput();else{this.showOptionMenu&&(this.drawOptionMenu(),this.options.mobile&&(this.showUITab=0)),8!==this.localPlayer.animationCurrent&&9!==this.localPlayer.animationCurrent||this.drawDialogCombatStyle(),this.options.mobile?this.showOptionMenu||this.setActiveMobileUITab():this.setActiveUITab();const t=!this.showOptionMenu&&!this.showRightClickMenu;if(t&&(this.menuItemsCount=0),0===this.showUITab&&t&&this.createRightClickMenu(),1===this.showUITab?this.drawUiTabInventory(t):2===this.showUITab?this.drawUiTabMinimap(t):3===this.showUITab?this.drawUiTabPlayerInfo(t):4===this.showUITab?this.drawUiTabMagic(t):5===this.showUITab?this.drawUiTabSocial(t):6===this.showUITab&&this.drawUiTabOptions(t),this.showOptionMenu||(this.showRightClickMenu?this.drawRightClickMenu():this.createTopMouseMenu()),this.menuActionTimeout){const t=this.menuX<=this.gameWidth/2?8:-this.menuTextWidth-8;this.surface.drawBoxAlpha(t+this.menuX-4,this.menuY-4,this.menuTextWidth+4,18,12500670,192),this.surface.drawString(this.menuText,t+this.menuX-2,this.menuY+10,1,16777215),this.menuActionTimeout-=1}}this.mouseButtonClick=0}resetGame(){this.systemUpdate=0,this.combatStyle=0,this.logoutTimeout=0,this.loginScreen=0,this.loggedIn=1,this.resetPMText(),this.surface.blackScreen(),this.surface.draw(this.graphics,0,0);for(let t=0;t<this.objectCount;t++)this.scene.removeModel(this.objectModel[t]),this.world.removeObject(this.objectX[t],this.objectY[t],this.objectId[t]);for(let t=0;t<this.wallObjectCount;t++)this.scene.removeModel(this.wallObjectModel[t]),this.world.removeWallObject(this.wallObjectX[t],this.wallObjectY[t],this.wallObjectDirection[t],this.wallObjectId[t]);this.objectCount=0,this.wallObjectCount=0,this.groundItemCount=0,this.playerCount=0;for(let t=0;t<4e3;t++)this.playerServer[t]=null;for(let t=0;t<500;t++)this.players[t]=null;this.npcCount=0;for(let t=0;t<5e3;t++)this.npcsServer[t]=null;for(let t=0;t<500;t++)this.npcs[t]=null;for(let t=0;t<this.prayerOn.length;t++)this.prayerOn[t]=!1;this.mouseButtonClick=0,this.lastMouseButtonDown=0,this.mouseButtonDown=0,this.showDialogShop=!1,this.showDialogBank=!1,this.isSleeping=!1,this.friendListCount=0}handleKeyPress(t){if(0===this.loggedIn&&(0===this.loginScreen&&this.panelLoginWelcome&&this.panelLoginWelcome.keyPress(t),1===this.loginScreen&&this.panelLoginNewUser&&this.panelLoginNewUser.keyPress(t),2===this.loginScreen&&this.panelLoginExistingUser&&this.panelLoginExistingUser.keyPress(t),3===this.loginScreen&&this.panelRecoverUser&&this.panelRecoverUser.keyPress(t)),1===this.loggedIn){if(this.showAppearanceChange&&this.panelAppearance)return void this.panelAppearance.keyPress(t);0===this.showChangePasswordStep&&0===this.showDialogSocialInput&&0===this.showDialogReportAbuseStep&&!this.isSleeping&&this.panelMessageTabs&&this.panelMessageTabs.keyPress(t),3!==this.showChangePasswordStep&&4!==this.showChangePasswordStep||(this.showChangePasswordStep=0)}}sendLogout(){if(0!==this.loggedIn){if(!(this.combatTimeout>450))return this.combatTimeout>0?void this.showMessage("@cya@You can't logout for 10 seconds after combat",3):(this.packetStream.newPacket(eg.LOGOUT),this.packetStream.sendPacket(),void(this.logoutTimeout=1e3));this.showMessage("@cya@You can't logout during combat!",3)}}createPlayer(t,e,i,r){null===this.playerServer[t]&&(this.playerServer[t]=new te,this.playerServer[t].serverIndex=t,this.playerServer[t].serverId=0);const n=this.playerServer[t];let s=!1;for(let o=0;o<this.knownPlayerCount;o++)if(this.knownPlayers[o].serverIndex===t){s=!0;break}if(s){n.animationNext=r;let t=n.waypointCurrent;e===n.waypointsX[t]&&i===n.waypointsY[t]||(n.waypointCurrent=t=(t+1)%10,n.waypointsX[t]=e,n.waypointsY[t]=i)}else n.serverIndex=t,n.movingStep=0,n.waypointCurrent=0,n.waypointsX[0]=n.currentX=e,n.waypointsY[0]=n.currentY=i,n.animationNext=n.animationCurrent=r,n.stepCount=0;return this.players[this.playerCount++]=n,n}drawItem(t,e,i,r,n){const s=Np.itemPicture[n]+this.spriteItem,o=Np.itemMask[n];this.surface._spriteClipping_from9(t,e,i,r,s,o,0,0,!1)}async handleGameInput(){if(this.systemUpdate>1&&this.systemUpdate--,await this.checkConnection(),this.logoutTimeout>0&&this.logoutTimeout--,this.mouseActionTimeout>4500&&0===this.combatTimeout&&0===this.logoutTimeout)return this.mouseActionTimeout-=500,void this.sendLogout();if(8!==this.localPlayer.animationCurrent&&9!==this.localPlayer.animationCurrent||(this.combatTimeout=500),this.combatTimeout>0&&this.combatTimeout--,this.showAppearanceChange)this.handleAppearancePanelInput();else{for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(!e)return void console.log("null character at ",t,this.playerCount);let i=(e.waypointCurrent+1)%10;if(e.movingStep!==i){let t,r=-1,n=e.movingStep,s=4;(t=n<i?i-n:10+i-n)>2&&(s=4*(t-1)),e.waypointsX[n]-e.currentX>3*this.magicLoc||e.waypointsY[n]-e.currentY>3*this.magicLoc||e.waypointsX[n]-e.currentX<3*-this.magicLoc||e.waypointsY[n]-e.currentY<3*-this.magicLoc||t>8?(e.currentX=e.waypointsX[n],e.currentY=e.waypointsY[n]):(e.currentX<e.waypointsX[n]?(e.currentX+=s,e.stepCount++,r=2):e.currentX>e.waypointsX[n]&&(e.currentX-=s,e.stepCount++,r=6),e.currentX-e.waypointsX[n]<s&&e.currentX-e.waypointsX[n]>-s&&(e.currentX=e.waypointsX[n]),e.currentY<e.waypointsY[n]?(e.currentY+=s,e.stepCount++,r=-1===r?4:2===r?3:5):e.currentY>e.waypointsY[n]&&(e.currentY-=s,e.stepCount++,r=-1===r?0:2===r?1:7),e.currentY-e.waypointsY[n]<s&&e.currentY-e.waypointsY[n]>-s&&(e.currentY=e.waypointsY[n])),-1!==r&&(e.animationCurrent=r),e.currentX===e.waypointsX[n]&&e.currentY===e.waypointsY[n]&&(e.movingStep=(n+1)%10)}else e.animationCurrent=e.animationNext;e.messageTimeout>0&&e.messageTimeout--,e.bubbleTimeout>0&&e.bubbleTimeout--,e.combatTimer>0&&e.combatTimer--,this.deathScreenTimeout>0&&(this.deathScreenTimeout--,0===this.deathScreenTimeout&&(this.showMessage("You have been granted another life. Be more careful this time!",3),this.showMessage("You retain your skills. Your objects land where you died",3)))}for(let t=0;t<this.npcCount;t++){const e=this.npcs[t];let i=(e.waypointCurrent+1)%10;if(e.movingStep!==i){let t,r=-1,n=e.movingStep,s=4;(t=n<i?i-n:10+i-n)>2&&(s=4*(t-1)),e.waypointsX[n]-e.currentX>3*this.magicLoc||e.waypointsY[n]-e.currentY>3*this.magicLoc||e.waypointsX[n]-e.currentX<3*-this.magicLoc||e.waypointsY[n]-e.currentY<3*-this.magicLoc||t>8?(e.currentX=e.waypointsX[n],e.currentY=e.waypointsY[n]):(e.currentX<e.waypointsX[n]?(e.currentX+=s,e.stepCount++,r=2):e.currentX>e.waypointsX[n]&&(e.currentX-=s,e.stepCount++,r=6),e.currentX-e.waypointsX[n]<s&&e.currentX-e.waypointsX[n]>-s&&(e.currentX=e.waypointsX[n]),e.currentY<e.waypointsY[n]?(e.currentY+=s,e.stepCount++,r=-1===r?4:2===r?3:5):e.currentY>e.waypointsY[n]&&(e.currentY-=s,e.stepCount++,r=-1===r?0:2===r?1:7),e.currentY-e.waypointsY[n]<s&&e.currentY-e.waypointsY[n]>-s&&(e.currentY=e.waypointsY[n])),-1!==r&&(e.animationCurrent=r),e.currentX===e.waypointsX[n]&&e.currentY===e.waypointsY[n]&&(e.movingStep=(n+1)%10)}else e.animationCurrent=e.animationNext,43===e.npcId&&e.stepCount++;e.messageTimeout>0&&e.messageTimeout--,e.bubbleTimeout>0&&e.bubbleTimeout--,e.combatTimer>0&&e.combatTimer--}2!==this.showUITab&&(Jd.anInt346>0&&this.sleepWordDelayTimer++,Jd.anInt347>0&&(this.sleepWordDelayTimer=0),Jd.anInt346=0,Jd.anInt347=0);for(let t=0;t<this.playerCount;t++){const e=this.players[t];e.projectileRange>0&&e.projectileRange--}if(this.cameraAutoAngleDebug)(this.cameraAutoRotatePlayerX-this.localPlayer.currentX<-500||this.cameraAutoRotatePlayerX-this.localPlayer.currentX>500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY<-500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY>500)&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY);else if((this.cameraAutoRotatePlayerX-this.localPlayer.currentX<-500||this.cameraAutoRotatePlayerX-this.localPlayer.currentX>500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY<-500||this.cameraAutoRotatePlayerY-this.localPlayer.currentY>500)&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY),this.cameraAutoRotatePlayerX!==this.localPlayer.currentX&&(this.cameraAutoRotatePlayerX+=(this.localPlayer.currentX-this.cameraAutoRotatePlayerX)/(16+((this.cameraZoom-500)/15|0))|0),this.cameraAutoRotatePlayerY!==this.localPlayer.currentY&&(this.cameraAutoRotatePlayerY+=(this.localPlayer.currentY-this.cameraAutoRotatePlayerY)/(16+((this.cameraZoom-500)/15|0))|0),this.optionCameraModeAuto){let t=32*this.cameraAngle-this.cameraRotation,e=1;0!==t?(this.anInt707++,t>128?(e=-1,t=256-t):t>0?e=1:t<-128?(e=1,t=256+t):t<0&&(e=-1,t=-t),this.cameraRotation+=((this.anInt707*t+255)/256|0)*e,this.cameraRotation&=255):this.anInt707=0}if(this.sleepWordDelayTimer>20&&(this.sleepWordDelay=!1,this.sleepWordDelayTimer=0),this.isSleeping)this.handleSleepInput();else{if(await this.handleMesssageTabsInput(),0!==this.deathScreenTimeout&&(this.lastMouseButtonDown=0),this.showDialogTrade||this.showDialogDuel?(0!==this.mouseButtonDown?this.mouseButtonDownTime++:this.mouseButtonDownTime=0,this.mouseButtonDownTime>600?this.mouseButtonItemCountIncrement+=5e3:this.mouseButtonDownTime>450?this.mouseButtonItemCountIncrement+=500:this.mouseButtonDownTime>300?this.mouseButtonItemCountIncrement+=50:this.mouseButtonDownTime>150?this.mouseButtonItemCountIncrement+=5:(this.mouseButtonDownTime>50||this.mouseButtonDownTime>20&&0==(5&this.mouseButtonDownTime))&&this.mouseButtonItemCountIncrement++):(this.mouseButtonDownTime=0,this.mouseButtonItemCountIncrement=0),1===this.lastMouseButtonDown?this.mouseButtonClick=1:2===this.lastMouseButtonDown&&(this.mouseButtonClick=2),this.scene.setMouseLoc(this.mouseX,this.mouseY),this.lastMouseButtonDown=0,this.optionCameraModeAuto){if(0===this.anInt707||this.cameraAutoAngleDebug){if(this.keyLeft&&(this.cameraAngle=this.cameraAngle+1&7,this.keyLeft=!1,!this.fogOfWar)){0==(1&this.cameraAngle)&&(this.cameraAngle=this.cameraAngle+1&7);for(let t=0;t<8&&!this.isValidCameraAngle(this.cameraAngle);t++)this.cameraAngle=this.cameraAngle+1&7}if(this.keyRight&&(this.cameraAngle=this.cameraAngle+7&7,this.keyRight=!1,!this.fogOfWar)){0==(1&this.cameraAngle)&&(this.cameraAngle=this.cameraAngle+7&7);for(let t=0;t<8&&!this.isValidCameraAngle(this.cameraAngle);t++)this.cameraAngle=this.cameraAngle+7&7}}}else this.keyLeft?this.cameraRotation=this.cameraRotation+2&255:this.keyRight&&(this.cameraRotation=this.cameraRotation-2&255);!this.optionCameraModeAuto&&this.options.middleClickCamera&&this.middleButtonDown&&(this.cameraRotation=this.originRotation+(this.mouseX-this.originMouseX)/2&255),this.options.zoomCamera?this.handleCameraZoom():this.fogOfWar&&this.cameraZoom>550?this.cameraZoom-=4:!this.fogOfWar&&this.cameraZoom<750&&(this.cameraZoom+=4),this.mouseClickXStep>0?this.mouseClickXStep--:this.mouseClickXStep<0&&this.mouseClickXStep++,this.scene.doSOemthingWithTheFuckinFountainFuck(17),this.objectAnimationCount++,this.objectAnimationCount>5&&(this.objectAnimationCount=0,this.objectAnimationNumberFireLightningSpell=(this.objectAnimationNumberFireLightningSpell+1)%3,this.objectAnimationNumberTorch=(this.objectAnimationNumberTorch+1)%4,this.objectAnimationNumberClaw=(this.objectAnimationNumberClaw+1)%5);for(let t=0;t<this.objectCount;t++){const e=this.objectX[t],i=this.objectY[t];e>=0&&i>=0&&e<96&&i<96&&74===this.objectId[t]&&this.objectModel[t].rotate(1,0,0)}for(let t=0;t<this.teleportBubbleCount;t++)if(this.teleportBubbleTime[t]++,this.teleportBubbleTime[t]>50){this.teleportBubbleCount--;for(let e=t;e<this.teleportBubbleCount;e++)this.teleportBubbleX[e]=this.teleportBubbleX[e+1],this.teleportBubbleY[e]=this.teleportBubbleY[e+1],this.teleportBubbleTime[e]=this.teleportBubbleTime[e+1],this.teleportBubbleType[e]=this.teleportBubbleType[e+1]}}}}handleCameraZoom(){if(this.keyUp&&!this.ctrl?this.cameraZoom-=16:this.keyDown&&!this.ctrl?this.cameraZoom+=16:this.keyHome?this.cameraZoom=750:this.keyPgUp?this.cameraZoom=450:this.keyPgDown&&(this.cameraZoom=1250),0!==this.mouseScrollDelta&&(2===this.showUITab||0===this.showUITab)){if(0!==this.messageTabSelected&&(this.options.mobile&&this.mouseY<70||!this.options.mobile&&this.mouseY>this.gameHeight-64))return;this.cameraZoom+=24*this.mouseScrollDelta}this.cameraZoom>=1250?this.cameraZoom=1250:this.cameraZoom<=450&&(this.cameraZoom=450)}autoRotateCamera(){if(1==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle))return;if(0==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle))return this.isValidCameraAngle(this.cameraAngle+1&7)?void(this.cameraAngle=this.cameraAngle+1&7):void(this.isValidCameraAngle(this.cameraAngle+7&7)&&(this.cameraAngle=this.cameraAngle+7&7));let t=new Int32Array([1,-1,2,-2,3,-3,4]);for(let e=0;e<7;e++)if(this.isValidCameraAngle(this.cameraAngle+t[e]+8&7)){this.cameraAngle=this.cameraAngle+t[e]+8&7;break}if(0==(1&this.cameraAngle)&&this.isValidCameraAngle(this.cameraAngle)){if(this.isValidCameraAngle(this.cameraAngle+1&7))return void(this.cameraAngle=this.cameraAngle+1&7);this.isValidCameraAngle(this.cameraAngle+7&7)&&(this.cameraAngle=this.cameraAngle+7&7)}}drawRightClickMenu(){if(0!==this.mouseButtonClick){for(let t=0;t<this.menuItemsCount;t++){const e=this.menuX+2,i=this.menuY+27+15*t;if(!(this.mouseX<=e-2||this.mouseY<=i-12||this.mouseY>=i+4||this.mouseX>=e-3+this.menuWidth)){this.menuItemClick(this.menuIndices[t]);break}}return this.mouseButtonClick=0,void(this.showRightClickMenu=!1)}if(this.mouseX<this.menuX-10||this.mouseY<this.menuY-10||this.mouseX>this.menuX+this.menuWidth+10||this.mouseY>this.menuY+this.menuHeight+10)this.showRightClickMenu=!1;else{this.surface.drawBoxAlpha(this.menuX,this.menuY,this.menuWidth,this.menuHeight,13684944,160),this.surface.drawString("Choose option",this.menuX+2,this.menuY+12,1,65535);for(let t=0;t<this.menuItemsCount;t++){const e=this.menuX+2,i=this.menuY+27+15*t;let r=16777215;this.mouseX>e-2&&this.mouseY>i-12&&this.mouseY<i+4&&this.mouseX<e-3+this.menuWidth&&(r=16776960),this.surface.drawString(this.menuItemText1[this.menuIndices[t]]+" "+this.menuItemText2[this.menuIndices[t]],e,i,1,r)}}}drawNpc(t,e,i,r,n,s,o){const h=this.npcs[n];let a=h.animationCurrent+(this.cameraRotation+16)/32&7,u=!1,l=a;5===l?(l=3,u=!0):6===l?(l=2,u=!0):7===l&&(l=1,u=!0);let c=3*l+this.npcWalkModel[(h.stepCount/Np.npcWalkModel[h.npcId]|0)%4];8===h.animationCurrent?(l=5,a=2,u=!1,t-=Np.npcCombatAnimation[h.npcId]*o/100|0,c=3*l+this.npcCombatModelArray1[((this.loginTimer/Np.npcCombatModel[h.npcId]|0)-1)%8]):9===h.animationCurrent&&(l=5,a=2,u=!0,t+=Np.npcCombatAnimation[h.npcId]*o/100|0,c=3*l+this.npcCombatModelArray2[(this.loginTimer/Np.npcCombatModel[h.npcId]|0)%8]);for(let f=0;f<12;f++){let n=this.npcAnimationArray[a][f],o=Np.npcSprite.get(h.npcId,n);if(o>=0){let n=0,a=0,f=c;if(u&&l>=1&&l<=3&&1===Np.animationHasF[o]&&(f+=15),5!==l||1===Np.animationHasA[o]){let l=f+Np.animationNumber[o];n=n*i/this.surface.spriteWidthFull[l]|0,a=a*r/this.surface.spriteHeightFull[l]|0;let c=i*this.surface.spriteWidthFull[l]/this.surface.spriteWidthFull[Np.animationNumber[o]]|0;n-=(c-i)/2|0;let d=Np.animationCharacterColour[o],p=0;1===d?(d=Np.npcColourHair[h.npcId],p=Np.npcColourSkin[h.npcId]):2===d?(d=Np.npcColourTop[h.npcId],p=Np.npcColourSkin[h.npcId]):3===d&&(d=Np.npcColorBottom[h.npcId],p=Np.npcColourSkin[h.npcId]),this.surface._spriteClipping_from9(t+n,e+a,c,r,l,d,p,s,u)}}}if(h.messageTimeout>0&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=this.surface.textWidth(h.message,1)/2|0,this.receivedMessageMidPoint[this.receivedMessagesCount]>150&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=150),this.receivedMessageHeight[this.receivedMessagesCount]=(this.surface.textWidth(h.message,1)/300|0)*this.surface.textHeight(1),this.receivedMessageX[this.receivedMessagesCount]=t+(i/2|0),this.receivedMessageY[this.receivedMessagesCount]=e,this.receivedMessages[this.receivedMessagesCount++]=h.message),8===h.animationCurrent||9===h.animationCurrent||0!==h.combatTimer){if(h.combatTimer>0){let r=t;8===h.animationCurrent?r-=20*o/100|0:9===h.animationCurrent&&(r+=20*o/100|0);let n=30*h.healthCurrent/h.healthMax|0;this.healthBarX[this.healthBarCount]=r+(i/2|0),this.healthBarY[this.healthBarCount]=e,this.healthBarMissing[this.healthBarCount++]=n}if(h.combatTimer>150){let n=t;8===h.animationCurrent?n-=10*o/100|0:9===h.animationCurrent&&(n+=10*o/100|0),this.surface._drawSprite_from3(n+(i/2|0)-12,e+(r/2|0)-12,this.spriteMedia+12),this.surface.drawStringCenter(h.damageTaken.toString(),n+(i/2|0)-1,e+(r/2|0)+5,3,16777215)}}}walkToWallObject(t,e,i){0===i?this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e-1,t,e,!1,!0):1===i?this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t-1,e,t,e,!1,!0):this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t,e,!0,!0)}async loadGameConfig(){const t=await this.readDataFile(`config${dp}.jag`,"Configuration",10);if(!t)return void(this.errorLoadingData=!0);Np.loadData(t,this.members);const e=await this.readDataFile(`filter${mp}.jag`,"Chat system",15);if(!e)return void(this.errorLoadingData=!0);const i=new At(Ud.loadData("fragmentsenc.txt",0,e)),r=new At(Ud.loadData("badenc.txt",0,e)),n=new At(Ud.loadData("hostenc.txt",0,e)),s=new At(Ud.loadData("tldlist.txt",0,e));wm.loadFilters(i,r,n,s)}addNpc(t,e,i,r,n){null===this.npcsServer[t]&&(this.npcsServer[t]=new te,this.npcsServer[t].serverIndex=t);const s=this.npcsServer[t];let o=!1;for(let h=0;h<this.npcCacheCount;h++)if(this.npcsCache[h].serverIndex===t){o=!0;break}if(o){s.npcId=n,s.animationNext=r;let t=s.waypointCurrent;e===s.waypointsX[t]&&i===s.waypointsY[t]||(s.waypointCurrent=t=(t+1)%10,s.waypointsX[t]=e,s.waypointsY[t]=i)}else s.serverIndex=t,s.movingStep=0,s.waypointCurrent=0,s.waypointsX[0]=s.currentX=e,s.waypointsY[0]=s.currentY=i,s.npcId=n,s.animationNext=s.animationCurrent=r,s.stepCount=0;return this.npcs[this.npcCount++]=s,s}resetLoginVars(){this.systemUpdate=0,this.loginScreen=0,this.loggedIn=0,this.logoutTimeout=0}drawDialogDuel(){if(0!==this.mouseButtonClick&&0===this.mouseButtonItemCountIncrement&&(this.mouseButtonItemCountIncrement=1),this.mouseButtonItemCountIncrement>0){let t=this.mouseX-22,e=this.mouseY-36;if(t>=0&&e>=0&&t<468&&e<262){if(t>216&&e>30&&t<462&&e<235){let i=((t-217|0)/49|0)+5*((e-31)/34|0);if(i>=0&&i<this.inventoryItemsCount){let t=!1,e=0,r=this.inventoryItemId[i];for(let n=0;n<this.duelOfferItemCount;n++)if(this.duelOfferItemId[n]===r)if(0===Np.itemStackable[r])for(let e=0;e<this.mouseButtonItemCountIncrement;e++)this.duelOfferItemStack[n]<this.inventoryItemStackCount[i]&&this.duelOfferItemStack[n]++,t=!0;else e++;if(this.getInventoryCount(r)<=e&&(t=!0),1===Np.itemSpecial[r]&&(this.showMessage("This object cannot be added to a duel offer",3),t=!0),!t&&this.duelOfferItemCount<8&&(this.duelOfferItemId[this.duelOfferItemCount]=r,this.duelOfferItemStack[this.duelOfferItemCount]=1,this.duelOfferItemCount++,t=!0),t){this.packetStream.newPacket(eg.DUEL_ITEM_UPDATE),this.packetStream.putByte(this.duelOfferItemCount);for(let t=0;t<this.duelOfferItemCount;t++)this.packetStream.putShort(this.duelOfferItemId[t]),this.packetStream.putInt(this.duelOfferItemStack[t]);this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1}}}if(t>8&&e>30&&t<205&&e<129){let i=((t-9)/49|0)+4*((e-31)/34|0);if(i>=0&&i<this.duelOfferItemCount){let t=this.duelOfferItemId[i];for(let e=0;e<this.mouseButtonItemCountIncrement;e++){if(!(0===Np.itemStackable[t]&&this.duelOfferItemStack[i]>1)){this.duelOfferItemCount--,this.mouseButtonDownTime=0;for(let t=i;t<this.duelOfferItemCount;t++)this.duelOfferItemId[t]=this.duelOfferItemId[t+1],this.duelOfferItemStack[t]=this.duelOfferItemStack[t+1];break}this.duelOfferItemStack[i]--}this.packetStream.newPacket(eg.DUEL_ITEM_UPDATE),this.packetStream.putByte(this.duelOfferItemCount);for(let e=0;e<this.duelOfferItemCount;e++)this.packetStream.putShort(this.duelOfferItemId[e]),this.packetStream.putInt(this.duelOfferItemStack[e]);this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1}}let i=!1;t>=93&&e>=221&&t<=104&&e<=232&&(this.duelSettingsRetreat=!this.duelSettingsRetreat,i=!0),t>=93&&e>=240&&t<=104&&e<=251&&(this.duelSettingsMagic=!this.duelSettingsMagic,i=!0),t>=191&&e>=221&&t<=202&&e<=232&&(this.duelSettingsPrayer=!this.duelSettingsPrayer,i=!0),t>=191&&e>=240&&t<=202&&e<=251&&(this.duelSettingsWeapons=!this.duelSettingsWeapons,i=!0),i&&(this.packetStream.newPacket(eg.DUEL_SETTINGS),this.packetStream.putByte(this.duelSettingsRetreat?1:0),this.packetStream.putByte(this.duelSettingsMagic?1:0),this.packetStream.putByte(this.duelSettingsPrayer?1:0),this.packetStream.putByte(this.duelSettingsWeapons?1:0),this.packetStream.sendPacket(),this.duelOfferOpponentAccepted=!1,this.duelOfferAccepted=!1),t>=217&&e>=238&&t<=286&&e<=259&&(this.duelOfferAccepted=!0,this.packetStream.newPacket(eg.DUEL_ACCEPT),this.packetStream.sendPacket()),t>=394&&e>=238&&t<463&&e<259&&(this.showDialogDuel=!1,this.packetStream.newPacket(eg.DUEL_DECLINE),this.packetStream.sendPacket())}else 0!==this.mouseButtonClick&&(this.showDialogDuel=!1,this.packetStream.newPacket(eg.DUEL_DECLINE),this.packetStream.sendPacket());this.mouseButtonClick=0,this.mouseButtonItemCountIncrement=0}if(this.showDialogDuel){this.surface.drawBox(22,36,468,12,13175581),this.surface.drawBoxAlpha(22,48,468,18,10000536,160),this.surface.drawBoxAlpha(22,66,8,248,10000536,160),this.surface.drawBoxAlpha(227,66,11,248,10000536,160),this.surface.drawBoxAlpha(484,66,6,248,10000536,160),this.surface.drawBoxAlpha(30,135,197,24,10000536,160),this.surface.drawBoxAlpha(30,228,197,23,10000536,160),this.surface.drawBoxAlpha(30,294,197,20,10000536,160),this.surface.drawBoxAlpha(238,271,246,43,10000536,160),this.surface.drawBoxAlpha(30,66,197,69,13684944,160),this.surface.drawBoxAlpha(30,159,197,69,13684944,160),this.surface.drawBoxAlpha(30,251,197,43,13684944,160),this.surface.drawBoxAlpha(238,66,246,205,13684944,160);for(let t=0;t<3;t++)this.surface.drawLineHoriz(30,66+34*t,197,0);for(let t=0;t<3;t++)this.surface.drawLineHoriz(30,159+34*t,197,0);for(let t=0;t<7;t++)this.surface.drawLineHoriz(238,66+34*t,246,0);for(let t=0;t<6;t++)t<5&&this.surface.drawLineVert(30+49*t,66,69,0),t<5&&this.surface.drawLineVert(30+49*t,159,69,0),this.surface.drawLineVert(238+49*t,66,205,0);this.surface.drawLineHoriz(30,251,197,0),this.surface.drawLineHoriz(30,293,197,0),this.surface.drawLineVert(30,251,43,0),this.surface.drawLineVert(226,251,43,0),this.surface.drawString("Preparing to duel with: "+this.duelOpponentName,23,46,1,16777215),this.surface.drawString("Your Stake",31,63,4,16777215),this.surface.drawString("Opponent's Stake",31,156,4,16777215),this.surface.drawString("Duel Options",31,248,4,16777215),this.surface.drawString("Your Inventory",238,63,4,16777215),this.surface.drawString("No retreating",31,267,3,16776960),this.surface.drawString("No magic",31,286,3,16776960),this.surface.drawString("No prayer",132,267,3,16776960),this.surface.drawString("No weapons",132,286,3,16776960),this.surface.drawBoxEdge(115,257,11,11,16776960),this.duelSettingsRetreat&&this.surface.drawBox(117,259,7,7,16776960),this.surface.drawBoxEdge(115,276,11,11,16776960),this.duelSettingsMagic&&this.surface.drawBox(117,278,7,7,16776960),this.surface.drawBoxEdge(213,257,11,11,16776960),this.duelSettingsPrayer&&this.surface.drawBox(215,259,7,7,16776960),this.surface.drawBoxEdge(213,276,11,11,16776960),this.duelSettingsWeapons&&this.surface.drawBox(215,278,7,7,16776960),this.duelOfferAccepted||this.surface._drawSprite_from3(239,274,this.spriteMedia+25),this.surface._drawSprite_from3(416,274,this.spriteMedia+26),this.duelOfferOpponentAccepted&&(this.surface.drawStringCenter("Other player",363,282,1,16777215),this.surface.drawStringCenter("has accepted",363,292,1,16777215)),this.duelOfferAccepted&&(this.surface.drawStringCenter("Waiting for",274,282,1,16777215),this.surface.drawStringCenter("other player",274,292,1,16777215));for(let t=0;t<this.inventoryItemsCount;t++){let e=239+t%5*49,i=67+34*(t/5|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+Np.itemPicture[this.inventoryItemId[t]],Np.itemMask[this.inventoryItemId[t]],0,0,!1),0===Np.itemStackable[this.inventoryItemId[t]]&&this.surface.drawString(this.inventoryItemStackCount[t].toString(),e+1,i+10,1,16776960)}for(let t=0;t<this.duelOfferItemCount;t++){let e=31+t%4*49,i=67+34*(t/4|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+Np.itemPicture[this.duelOfferItemId[t]],Np.itemMask[this.duelOfferItemId[t]],0,0,!1),0===Np.itemStackable[this.duelOfferItemId[t]]&&this.surface.drawString(this.duelOfferItemStack[t].toString(),e+1,i+10,1,16776960),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>i&&this.mouseY<i+32&&this.surface.drawString(Np.itemName[this.duelOfferItemId[t]]+": @whi@"+Np.itemDescription[this.duelOfferItemId[t]],30,309,1,16776960)}for(let t=0;t<this.duelOfferOpponentItemCount;t++){let e=31+t%4*49,i=160+34*(t/4|0);this.surface._spriteClipping_from9(e,i,48,32,this.spriteItem+Np.itemPicture[this.duelOfferOpponentItemId[t]],Np.itemMask[this.duelOfferOpponentItemId[t]],0,0,!1),0===Np.itemStackable[this.duelOfferOpponentItemId[t]]&&this.surface.drawString(this.duelOfferOpponentItemStack[t].toString(),e+1,i+10,1,16776960),this.mouseX>e&&this.mouseX<e+48&&this.mouseY>i&&this.mouseY<i+32&&this.surface.drawString(Np.itemName[this.duelOfferOpponentItemId[t]]+": @whi@"+Np.itemDescription[this.duelOfferOpponentItemId[t]],30,309,1,16776960)}}}loadNextRegion(t,e){if(0!==this.deathScreenTimeout)return this.world.playerAlive=!1,!1;if(this.loadingArea=!1,t+=this.planeWidth,e+=this.planeHeight,this.lastHeightOffset===this.planeIndex&&t>this.localLowerX&&t<this.localUpperX&&e>this.localLowerY&&e<this.localUpperY)return this.world.playerAlive=!0,!1;this.surface.drawStringCenter("Loading... Please wait",256,192,1,16777215),this.drawChatMessageTabs(),this.surface.draw(this.graphics,0,0);let i=this.regionX,r=this.regionY,n=(t+24)/48|0,s=(e+24)/48|0;this.lastHeightOffset=this.planeIndex,this.regionX=48*n-48,this.regionY=48*s-48,this.localLowerX=48*n-32,this.localLowerY=48*s-32,this.localUpperX=48*n+32,this.localUpperY=48*s+32,this.world._loadSection_from3(t,e,this.lastHeightOffset),this.regionX-=this.planeWidth,this.regionY-=this.planeHeight;let o=this.regionX-i,h=this.regionY-r;for(let a=0;a<this.objectCount;a++){this.objectX[a]-=o,this.objectY[a]-=h;let t=this.objectX[a],e=this.objectY[a],i=this.objectId[a],r=this.objectModel[a];try{let n=this.objectDirection[a],s=0,o=0;0===n||4===n?(s=Np.objectWidth[i],o=Np.objectHeight[i]):(o=Np.objectWidth[i],s=Np.objectHeight[i]);let h=(t+t+s)*this.magicLoc/2|0,u=(e+e+o)*this.magicLoc/2|0;t>=0&&e>=0&&t<96&&e<96&&(this.scene.addModel(r),r.place(h,-this.world.getElevation(h,u),u),this.world.removeObject2(t,e,i),74===i&&r.translate(0,-480,0))}catch(Kd){console.log("Loc Error: "+Kd.message),console.error(Kd)}}for(let a=0;a<this.wallObjectCount;a++){this.wallObjectX[a]-=o,this.wallObjectY[a]-=h;let t=this.wallObjectX[a],e=this.wallObjectY[a],i=this.wallObjectId[a],r=this.wallObjectDirection[a];try{this.world._setObjectAdjacency_from4(t,e,r,i);let n=this.createModel(t,e,r,i,a);this.wallObjectModel[a]=n}catch(Kd){console.log("Bound Error: "+Kd.message),console.error(Kd)}}for(let a=0;a<this.groundItemCount;a++)this.groundItemX[a]-=o,this.groundItemY[a]-=h;for(let a=0;a<this.playerCount;a++){let t=this.players[a];t.currentX-=o*this.magicLoc,t.currentY-=h*this.magicLoc;for(let e=0;e<=t.waypointCurrent;e++)t.waypointsX[e]-=o*this.magicLoc,t.waypointsY[e]-=h*this.magicLoc}for(let a=0;a<this.npcCount;a++){let t=this.npcs[a];t.currentX-=o*this.magicLoc,t.currentY-=h*this.magicLoc;for(let e=0;e<=t.waypointCurrent;e++)t.waypointsX[e]-=o*this.magicLoc,t.waypointsY[e]-=h*this.magicLoc}return this.world.playerAlive=!0,!0}drawPlayer(t,e,i,r,n,s,o){const h=this.players[n];if(255===h.colourBottom)return;let a=h.animationCurrent+(this.cameraRotation+16)/32&7,u=!1,l=a;5===l?(l=3,u=!0):6===l?(l=2,u=!0):7===l&&(l=1,u=!0);let c=3*l+this.npcWalkModel[(h.stepCount/6|0)%4];8===h.animationCurrent?(a=2,u=!1,t-=5*o/100|0,c=3*(l=5)+this.npcCombatModelArray1[(this.loginTimer/5|0)%8]):9===h.animationCurrent&&(a=2,u=!0,t+=5*o/100|0,c=3*(l=5)+this.npcCombatModelArray2[(this.loginTimer/6|0)%8]);for(let f=0;f<12;f++){let n=this.npcAnimationArray[a][f],o=h.equippedItem[n]-1;if(o>=0){let a=0,f=0,d=c;if(u&&l>=1&&l<=3&&(1===Np.animationHasF[o]?d+=15:4===n&&1===l?(a=-22,f=-3,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4]):4===n&&2===l?(a=0,f=-8,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4]):4===n&&3===l?(a=26,f=-5,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4]):3===n&&1===l?(a=22,f=3,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4]):3===n&&2===l?(a=0,f=8,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4]):3===n&&3===l&&(a=-26,f=5,d=3*l+this.npcWalkModel[(2+(h.stepCount/6|0))%4])),5!==l||1===Np.animationHasA[o]){let n=d+Np.animationNumber[o];a=a*i/this.surface.spriteWidthFull[n]|0,f=f*r/this.surface.spriteHeightFull[n]|0;let l=i*this.surface.spriteWidthFull[n]/this.surface.spriteWidthFull[Np.animationNumber[o]]|0;a-=(l-i)/2|0;let c=Np.animationCharacterColour[o];const p=this.characterSkinColours[h.colourSkin];1===c?c=this.characterHairColours[h.colourHair]:2===c?c=this.characterTopBottomColours[h.colourTop]:3===c&&(c=this.characterTopBottomColours[h.colourBottom]),this.surface._spriteClipping_from9(t+a,e+f,l,r,n,c,p,s,u)}}}if(h.messageTimeout>0&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=this.surface.textWidth(h.message,1)/2|0,this.receivedMessageMidPoint[this.receivedMessagesCount]>150&&(this.receivedMessageMidPoint[this.receivedMessagesCount]=150),this.receivedMessageHeight[this.receivedMessagesCount]=(this.surface.textWidth(h.message,1)/300|0)*this.surface.textHeight(1),this.receivedMessageX[this.receivedMessagesCount]=t+(i/2|0),this.receivedMessageY[this.receivedMessagesCount]=e,this.receivedMessages[this.receivedMessagesCount++]=h.message),h.bubbleTimeout>0&&(this.actionBubbleX[this.itemsAboveHeadCount]=t+(i/2|0),this.actionBubbleY[this.itemsAboveHeadCount]=e,this.actionBubbleScale[this.itemsAboveHeadCount]=o,this.actionBubbleItem[this.itemsAboveHeadCount++]=h.bubbleItem),8===h.animationCurrent||9===h.animationCurrent||0!==h.combatTimer){if(h.combatTimer>0){let r=t;8===h.animationCurrent?r-=20*o/100|0:9===h.animationCurrent&&(r+=20*o/100|0);let n=30*h.healthCurrent/h.healthMax|0;this.healthBarX[this.healthBarCount]=r+(i/2|0),this.healthBarY[this.healthBarCount]=e,this.healthBarMissing[this.healthBarCount++]=n}if(h.combatTimer>150){let n=t;8===h.animationCurrent?n-=10*o/100|0:9===h.animationCurrent&&(n+=10*o/100|0),this.surface._drawSprite_from3(n+(i/2|0)-12,e+(r/2|0)-12,this.spriteMedia+11),this.surface.drawStringCenter(h.damageTaken.toString(),n+(i/2|0)-1,e+(r/2|0)+5,3,16777215)}}if(1===h.skullVisible&&0===h.bubbleTimeout){let r=s+t+(i/2|0);8===h.animationCurrent?r-=20*o/100|0:9===h.animationCurrent&&(r+=20*o/100|0);let n=16*o/100|0,a=16*o/100|0;this.surface._spriteClipping_from5(r-(n/2|0),e-(a/2|0)-(10*o/100|0),n,a,this.spriteMedia+13)}}async loadMedia(){const t=await this.readDataFile(`media${bp}.jag`,"2d graphics",20);if(null===t)return void(this.errorLoadingData=!0);const e=Ud.loadData("index.dat",0,t);this.surface.parseSprite(this.spriteMedia,Ud.loadData("inv1.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+1,Ud.loadData("inv2.dat",0,t),e,6),this.surface.parseSprite(this.spriteMedia+9,Ud.loadData("bubble.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+10,Ud.loadData("runescape.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+11,Ud.loadData("splat.dat",0,t),e,3),this.surface.parseSprite(this.spriteMedia+14,Ud.loadData("icon.dat",0,t),e,8),this.surface.parseSprite(this.spriteMedia+22,Ud.loadData("hbar.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+23,Ud.loadData("hbar2.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+24,Ud.loadData("compass.dat",0,t),e,1),this.surface.parseSprite(this.spriteMedia+25,Ud.loadData("buttons.dat",0,t),e,2),this.surface.parseSprite(this.spriteUtil,Ud.loadData("scrollbar.dat",0,t),e,2),this.surface.parseSprite(this.spriteUtil+2,Ud.loadData("corners.dat",0,t),e,4),this.surface.parseSprite(this.spriteUtil+6,Ud.loadData("arrows.dat",0,t),e,2),this.surface.parseSprite(this.spriteProjectile,Ud.loadData("projectile.dat",0,t),e,Np.projectileSprite);let i=Np.itemSpriteCount;for(let r=1;i>0;r++){let n=i;i-=30,n>30&&(n=30),this.surface.parseSprite(this.spriteItem+30*(r-1),Ud.loadData(`objects${r}.dat`,0,t),e,n)}this.surface.loadSprite(this.spriteMedia),this.surface.loadSprite(this.spriteMedia+9);for(let r=11;r<=26;r++)this.surface.loadSprite(this.spriteMedia+r);for(let r=0;r<Np.projectileSprite;r++)this.surface.loadSprite(this.spriteProjectile+r);for(let r=0;r<Np.itemSpriteCount;r++)this.surface.loadSprite(this.spriteItem+r)}async startGame(){if(this.port=this.port||43595,this.maxReadTries=1e3,Lp.clientVersion=fp,await this.loadGameConfig(),this.errorLoadingData)return;this.spriteMedia=2e3,this.spriteUtil=this.spriteMedia+100,this.spriteItem=this.spriteUtil+50,this.spriteLogo=this.spriteItem+1e3,this.spriteProjectile=this.spriteLogo+10,this.spriteTexture=this.spriteProjectile+50,this.spriteTextureWorld=this.spriteTexture+10,this.graphics=this.getGraphics(),this.setTargetFps(50),this.surface=new Jd(this.gameWidth,this.gameHeight+12,4e3,this),this.surface.mudclientref=this,this.surface.setBounds(0,0,this.gameWidth,this.gameHeight+12),Gp.drawBackgroundArrow=!1,Gp.baseSpriteStart=this.spriteUtil;let t=this.surface.width2-199,e=36;this.options.mobile&&(t-=32,e=this.gameHeight/2-137.5|0),this.panelQuestList=new Gp(this.surface,5),this.controlListQuest=this.panelQuestList.addTextListInteractive(t,e+24,196,251,1,500,!0),this.options.mobile&&(t=35,e=this.gameHeight/2-91|0),this.panelMagic=new Gp(this.surface,5),this.controlListMagic=this.panelMagic.addTextListInteractive(t,e+24,196,90,1,500,!0),this.panelSocialList=new Gp(this.surface,5),this.controlListSocialPlayers=this.panelSocialList.addTextListInteractive(t,e+40,196,126,1,500,!0),await this.loadMedia(),this.errorLoadingData||(await this.loadEntities(),this.errorLoadingData||(this.scene=new qp(this.surface,15e3,15e3,1e3),this.scene.view=Vp._from2(1e6,1e3),this.scene.setBounds(this.gameWidth/2|0,this.gameHeight/2|0,this.gameWidth/2|0,this.gameHeight/2|0,this.gameWidth,9),this.scene.clipFar3d=2400,this.scene.clipFar2d=2400,this.scene.fogZFalloff=1,this.scene.fogZDistance=2300,this.scene._setLight_from3(-50,-10,-50),this.world=new Xm(this.scene,this.surface),this.world.baseMediaSprite=this.spriteMedia,await this.loadTextures(),this.errorLoadingData||(await this.loadModels(),this.errorLoadingData||(await this.loadMaps(),this.errorLoadingData||(this.members&&await this.loadSounds(),this.errorLoadingData||(this.showLoadingProgress(100,"Starting game..."),this.createMessageTabPanel(),this.createLoginPanels(),this.createAppearancePanel(),this.resetLoginScreenVariables(),this.renderLoginScreenViewports()))))))}hasInventoryItems(t,e){return!(31!==t||!(this.isItemEquipped(197)||this.isItemEquipped(615)||this.isItemEquipped(682)))||!(32!==t||!(this.isItemEquipped(102)||this.isItemEquipped(616)||this.isItemEquipped(683)))||!(33!==t||!(this.isItemEquipped(101)||this.isItemEquipped(617)||this.isItemEquipped(684)))||!(34!==t||!(this.isItemEquipped(103)||this.isItemEquipped(618)||this.isItemEquipped(685)))||this.getInventoryCount(t)>=e}getHostnameIP(t){return Ud.ipToString(t)}cantLogout(){this.logoutTimeout=0,this.showMessage("@cya@Sorry, you can't logout at the moment",3)}drawGame(){if(0!==this.deathScreenTimeout)return this.surface.fadeToBlack(),this.surface.drawStringCenter("Oh dear! You are dead...",this.gameWidth/2|0,this.gameHeight/2|0,7,16711680),this.drawChatMessageTabs(),void this.surface.draw(this.graphics,0,0);if(this.showAppearanceChange)this.drawAppearancePanelCharacterSprites();else if(this.isSleeping)this.drawSleep();else if(this.world.playerAlive){for(let t=0;t<64;t++)this.scene.removeModel(this.world.roofModels[this.lastHeightOffset][t]),0===this.lastHeightOffset&&(this.scene.removeModel(this.world.wallModels[1][t]),this.scene.removeModel(this.world.roofModels[1][t]),this.scene.removeModel(this.world.wallModels[2][t]),this.scene.removeModel(this.world.roofModels[2][t])),this.options.showRoofs&&(this.fogOfWar=!0,0===this.lastHeightOffset&&0==(128&this.world.objectAdjacency.get(this.localPlayer.currentX/128|0,this.localPlayer.currentY/128|0))&&(this.scene.addModel(this.world.roofModels[this.lastHeightOffset][t]),0===this.lastHeightOffset&&(this.scene.addModel(this.world.wallModels[1][t]),this.scene.addModel(this.world.roofModels[1][t]),this.scene.addModel(this.world.wallModels[2][t]),this.scene.addModel(this.world.roofModels[2][t])),this.fogOfWar=!1));if(this.objectAnimationNumberFireLightningSpell!==this.lastObjectAnimationNumberFireLightningSpell){this.lastObjectAnimationNumberFireLightningSpell=this.objectAnimationNumberFireLightningSpell;for(let t=0;t<this.objectCount;t++)97===this.objectId[t]&&this.updateObjectAnimation(t,"firea"+(this.objectAnimationNumberFireLightningSpell+1)),274===this.objectId[t]&&this.updateObjectAnimation(t,"fireplacea"+(this.objectAnimationNumberFireLightningSpell+1)),1031===this.objectId[t]&&this.updateObjectAnimation(t,"lightning"+(this.objectAnimationNumberFireLightningSpell+1)),1036===this.objectId[t]&&this.updateObjectAnimation(t,"firespell"+(this.objectAnimationNumberFireLightningSpell+1)),1147===this.objectId[t]&&this.updateObjectAnimation(t,"spellcharge"+(this.objectAnimationNumberFireLightningSpell+1))}if(this.objectAnimationNumberTorch!==this.lastObjectAnimationNumberTorch){this.lastObjectAnimationNumberTorch=this.objectAnimationNumberTorch;for(let t=0;t<this.objectCount;t++)51===this.objectId[t]&&this.updateObjectAnimation(t,"torcha"+(this.objectAnimationNumberTorch+1)),143===this.objectId[t]&&this.updateObjectAnimation(t,"skulltorcha"+(this.objectAnimationNumberTorch+1))}if(this.objectAnimationNumberClaw!==this.lastObjectAnimationNumberClaw){this.lastObjectAnimationNumberClaw=this.objectAnimationNumberClaw;for(let t=0;t<this.objectCount;t++)1142===this.objectId[t]&&this.updateObjectAnimation(t,"clawspell"+(this.objectAnimationNumberClaw+1))}this.scene.reduceSprites(this.spriteCount),this.spriteCount=0;for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(255!==e.colourBottom){const i=e.currentX,r=e.currentY,n=-this.world.getElevation(i,r),s=this.scene.addSprite(5e3+t,i,n,r,145,220,t+1e4);this.spriteCount++,e===this.localPlayer&&this.scene.setLocalPlayer(s),8===e.animationCurrent&&this.scene.setSpriteTranslateX(s,-30),9===e.animationCurrent&&this.scene.setSpriteTranslateX(s,30)}}for(let t=0;t<this.playerCount;t++){const e=this.players[t];if(e.projectileRange>0){let t=null;if(-1!==e.attackingNpcServerIndex?t=this.npcsServer[e.attackingNpcServerIndex]:-1!==e.attackingPlayerServerIndex&&(t=this.playerServer[e.attackingPlayerServerIndex]),t){const i=e.currentX,r=e.currentY,n=-this.world.getElevation(i,r)-110,s=t.currentX,o=t.currentY,h=-(this.world.getElevation(s,o)-Np.npcHeight[t.npcId]/2|0),a=(i*e.projectileRange+s*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0,u=(n*e.projectileRange+h*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0,l=(r*e.projectileRange+o*(this.projectileMaxRange-e.projectileRange))/this.projectileMaxRange|0;this.scene.addSprite(this.spriteProjectile+e.incomingProjectileSprite,a,u,l,32,32,0),this.spriteCount++}}}for(let t=0;t<this.npcCount;t++){const e=this.npcs[t],i=e.currentX,r=e.currentY,n=-this.world.getElevation(i,r),s=this.scene.addSprite(2e4+t,i,n,r,Np.npcWidth[e.npcId],Np.npcHeight[e.npcId],t+3e4);this.spriteCount++,8===e.animationCurrent&&this.scene.setSpriteTranslateX(s,-30),9===e.animationCurrent&&this.scene.setSpriteTranslateX(s,30)}for(let t=0;t<this.groundItemCount;t++){const e=this.groundItemX[t]*this.magicLoc+64,i=this.groundItemY[t]*this.magicLoc+64;this.scene.addSprite(4e4+this.groundItemID[t],e,-this.world.getElevation(e,i)-this.groundItemZ[t],i,96,64,t+2e4),this.spriteCount++}for(let t=0;t<this.teleportBubbleCount;t++){const e=this.teleportBubbleX[t]*this.magicLoc+64,i=this.teleportBubbleY[t]*this.magicLoc+64,r=this.teleportBubbleType[t];0===r&&(this.scene.addSprite(5e4+t,e,-this.world.getElevation(e,i),i,128,256,t+5e4),this.spriteCount++),1===r&&(this.scene.addSprite(5e4+t,e,-this.world.getElevation(e,i),i,128,64,t+5e4),this.spriteCount++)}if(this.surface.interlace=!1,this.surface.blackScreen(),this.surface.interlace=this.interlace,3===this.lastHeightOffset){const t=40+(3*Math.random()|0),e=40+(7*Math.random()|0);this.scene._setLight_from5(t,e,-50,-10,-50)}if(this.itemsAboveHeadCount=0,this.receivedMessagesCount=0,this.healthBarCount=0,this.cameraAutoAngleDebug){if(this.optionCameraModeAuto&&!this.fogOfWar){const t=this.cameraAngle;this.autoRotateCamera(),this.cameraAngle!==t&&(this.cameraAutoRotatePlayerX=this.localPlayer.currentX,this.cameraAutoRotatePlayerY=this.localPlayer.currentY)}this.scene.clipFar3d=3e3,this.scene.clipFar2d=3e3,this.scene.fogZFalloff=1,this.scene.fogZDistance=2800,this.cameraRotation=32*this.cameraAngle;const t=this.cameraAutoRotatePlayerX+this.cameraRotationX,e=this.cameraAutoRotatePlayerY+this.cameraRotationY;this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,4*this.cameraRotation,0,2e3)}else{this.optionCameraModeAuto&&!this.fogOfWar&&this.autoRotateCamera(),this.interlace?(this.scene.clipFar3d=2200,this.scene.clipFar2d=2200,this.scene.fogZFalloff=1,this.scene.fogZDistance=2100):(this.scene.clipFar3d=2400,this.scene.clipFar2d=2400,this.scene.fogZFalloff=1,this.scene.fogZDistance=2300),this.cameraZoom>750&&(this.scene.clipFar3d+=1400,this.scene.clipFar2d+=1400,this.scene.fogZDistance+=1400);let t=this.cameraAutoRotatePlayerX+this.cameraRotationX,e=this.cameraAutoRotatePlayerY+this.cameraRotationY;this.scene.setCamera(t,-this.world.getElevation(t,e),e,912,4*this.cameraRotation,0,2*this.cameraZoom)}if(this.scene.render(),this.drawAboveHeadStuff(),this.mouseClickXStep>0&&this.surface._drawSprite_from3(this.mouseClickXX-8,this.mouseClickXY-8,this.spriteMedia+14+((24-this.mouseClickXStep)/6|0)),this.mouseClickXStep<0&&this.surface._drawSprite_from3(this.mouseClickXX-8,this.mouseClickXY-8,this.spriteMedia+18+((24+this.mouseClickXStep)/6|0)),this.options.fpsCounter){const t=this.isInWild?70:0;this.surface.drawString("Fps: "+(0|this.fps),this.gameWidth-62-t,this.gameHeight-10,1,16776960)}if(0!==this.systemUpdate){let t=this.systemUpdate/50|0;const e=t/60|0;(t%=60)<10?this.surface.drawStringCenter("System update in: "+e+":0"+t,256,this.gameHeight-7,1,16776960):this.surface.drawStringCenter("System update in: "+e+":"+t,256,this.gameHeight-7,1,16776960)}if(!this.loadingArea){let t=2203-(this.localRegionY+this.planeHeight+this.regionY);if(this.localRegionX+this.planeWidth+this.regionX>=2640&&(t=-50),this.isInWild=t>0,this.isInWild){this.surface._drawSprite_from3(this.gameWidth-59,this.gameHeight-56,this.spriteMedia+13),this.surface.drawStringCenter("Wilderness",this.gameWidth-47,this.gameHeight-20,1,16776960);const e=1+(t/6|0);this.surface.drawStringCenter("Level: "+e,this.gameWidth-47,this.gameHeight-7,1,16776960),0===this.showUiWildWarn&&(this.showUiWildWarn=2)}0===this.showUiWildWarn&&t>-10&&t<=0&&(this.showUiWildWarn=1)}this.drawChatMessageTabsPanel(),this.options.mobile||this.surface._drawSpriteAlpha_from4(this.surface.width2-3-197,3,this.spriteMedia,128),this.drawUI(),this.surface.loggedIn=!1,this.drawChatMessageTabs(),this.surface.draw(this.graphics,0,0),this.options.mobile&&this.drawMobileUI()}}async loadSounds(){try{this.soundData=await this.readDataFile(`sounds${vp}.mem`,"Sound effects",90),this.audioPlayer=new class{constructor(){this.player=new pm({encoding:"16bitInt",channels:1,sampleRate:8e3})}stopPlayer(){this.player.destroy()}writeStream(t,e,i){const r=bm.decode(new Uint8Array(t.slice(e,e+i)));this.player.feed(r)}}}catch(Kd){console.error(Kd)}}isItemEquipped(t){for(let e=0;e<this.inventoryItemsCount;e++)if(this.inventoryItemId[e]===t&&1===this.inventoryEquipped[e])return!0;return!1}async loadEntities(){const t=await this.readDataFile(`entity${pp}.jag`,"people and monsters",30);if(!t)return void(this.errorLoadingData=!0);const e=Ud.loadData("index.dat",0,t);let i=null,r=null;if(this.members){if(!(i=await this.readDataFile("entity"+pp+".mem","member graphics",45)))return void(this.errorLoadingData=!0);r=Ud.loadData("index.dat",0,i)}let n=0;this.animationIndex=0;t:for(let s=0;s<Np.animationCount;s++){let o=Np.animationName[s];for(let t=0;t<s;t++)if(Np.animationName[t].toLowerCase()===o.toLowerCase()){Np.animationNumber[s]=Np.animationNumber[t];continue t}let h=Ud.loadData(o+".dat",0,t),a=e;if(null===h&&this.members&&(h=Ud.loadData(o+".dat",0,i),a=r),h){if(this.surface.parseSprite(this.animationIndex,h,a,15),n+=15,1===Np.animationHasA[s]){let s=Ud.loadData(o+"a.dat",0,t),h=e;null===s&&this.members&&(s=Ud.loadData(o+"a.dat",0,i),h=r),this.surface.parseSprite(this.animationIndex+15,s,h,3),n+=3}if(1===Np.animationHasF[s]){let s=Ud.loadData(o+"f.dat",0,t),h=e;null===s&&this.members&&(s=Ud.loadData(o+"f.dat",0,i),h=r),this.surface.parseSprite(this.animationIndex+18,s,h,9),n+=9}if(0!==Np.animationGender[s])for(let t=this.animationIndex;t<this.animationIndex+27;t++)this.surface.loadSprite(t)}Np.animationNumber[s]=this.animationIndex,this.animationIndex+=27}console.log("Loaded: "+n+" frames of animation")}draw(){if(this.errorLoadingData){const t=this.getGraphics();t.setColor(It.black),t.fillRect(0,0,512,356),t.setFont(new kt("Helvetica",1,16)),t.setColor(It.yellow);let e=35;return t.drawString("Sorry, an error has occured whilst loading RuneScape",30,e),e+=50,t.setColor(It.white),t.drawString("To fix this try the following (in order):",30,e),e+=50,t.setColor(It.white),t.setFont(new kt("Helvetica",1,12)),t.drawString("1: Try closing ALL open web-browser windows, and reloading",30,e),e+=30,t.drawString("2: Try clearing your web-browsers cache from tools->internet options",30,e),e+=30,t.drawString("3: Try using a different game-world",30,e),e+=30,t.drawString("4: Try rebooting your computer",30,e),e+=30,t.drawString("5: Try selecting a different version of Java from the play-game menu",30,e),void this.setTargetFps(1)}if(this.errorLoadingCodebase){const t=this.getGraphics();return t.setColor(It.black),t.fillRect(0,0,512,356),t.setFont(new kt("Helvetica",1,20)),t.setColor(It.white),t.drawString("Error - unable to load game!",50,50),t.drawString("To play RuneScape make sure you play from",50,100),t.drawString("http://www.runescape.com",50,150),void this.setTargetFps(1)}if(this.errorLoadingMemory){const t=this.getGraphics();return t.setColor(It.black),t.fillRect(0,0,512,356),t.setFont(new kt("Helvetica",1,20)),t.setColor(It.white),t.drawString("Error - out of memory!",50,50),t.drawString("Close ALL unnecessary programs",50,100),t.drawString("and windows before loading the game",50,150),t.drawString("RuneScape needs about 48meg of spare RAM",50,200),void this.setTargetFps(1)}try{0===this.loggedIn?(this.surface.loggedIn=!1,this.drawLoginScreens()):1===this.loggedIn&&(this.surface.loggedIn=!0,this.drawGame())}catch(Kd){console.error(Kd),this.disposeAndCollect(),this.errorLoadingMemory=!0}}onClosing(){this.closeConnection(),this.disposeAndCollect(),this.audioPlayer&&this.audioPlayer.stopPlayer()}drawDialogDuelConfirm(){this.surface.drawBox(22,36,468,16,192),this.surface.drawBoxAlpha(22,52,468,246,10000536,160),this.surface.drawStringCenter("Please confirm your duel with @yel@"+Ud.hashToUsername(this.duelOpponentNameHash),256,48,1,16777215),this.surface.drawStringCenter("Your stake:",139,66,1,16776960);for(let t=0;t<this.duelItemsCount;t++){let e=Np.itemName[this.duelItems[t]];0===Np.itemStackable[this.duelItems[t]]&&(e=e+" x "+Ud.formatConfirmAmount(this.duelItemCount[t])),this.surface.drawStringCenter(e,139,78+12*t,1,16777215)}0===this.duelItemsCount&&this.surface.drawStringCenter("Nothing!",139,78,1,16777215),this.surface.drawStringCenter("Your opponent's stake:",373,66,1,16776960);for(let t=0;t<this.duelOpponentItemsCount;t++){let e=Np.itemName[this.duelOpponentItems[t]];0===Np.itemStackable[this.duelOpponentItems[t]]&&(e=e+" x "+Ud.formatConfirmAmount(this.duelOpponentItemCount[t])),this.surface.drawStringCenter(e,373,78+12*t,1,16777215)}0===this.duelOpponentItemsCount&&this.surface.drawStringCenter("Nothing!",373,78,1,16777215),0===this.duelOptionRetreat?this.surface.drawStringCenter("You can retreat from this duel",256,216,1,65280):this.surface.drawStringCenter("No retreat is possible!",256,216,1,16711680),0===this.duelOptionMagic?this.surface.drawStringCenter("Magic may be used",256,228,1,65280):this.surface.drawStringCenter("Magic cannot be used",256,228,1,16711680),0===this.duelOptionPrayer?this.surface.drawStringCenter("Prayer may be used",256,240,1,65280):this.surface.drawStringCenter("Prayer cannot be used",256,240,1,16711680),0===this.duelOptionWeapons?this.surface.drawStringCenter("Weapons may be used",256,252,1,65280):this.surface.drawStringCenter("Weapons cannot be used",256,252,1,16711680),this.surface.drawStringCenter("If you are sure click 'Accept' to begin the duel",256,266,1,16777215),this.duelAccepted?this.surface.drawStringCenter("Waiting for other player...",256,286,1,16776960):(this.surface._drawSprite_from3(105,274,this.spriteMedia+25),this.surface._drawSprite_from3(339,274,this.spriteMedia+26)),1===this.mouseButtonClick&&((this.mouseX<22||this.mouseY<36||this.mouseX>490||this.mouseY>298)&&(this.showDialogDuelConfirm=!1,this.packetStream.newPacket(eg.TRADE_DECLINE),this.packetStream.sendPacket()),this.mouseX>=105&&this.mouseX<=210&&this.mouseY>=274&&this.mouseY<=295&&(this.duelAccepted=!0,this.packetStream.newPacket(eg.DUEL_CONFIRM_ACCEPT),this.packetStream.sendPacket()),this.mouseX>=339&&this.mouseX<=445&&this.mouseY>=274&&this.mouseY<=295&&(this.showDialogDuelConfirm=!1,this.packetStream.newPacket(eg.DUEL_DECLINE),this.packetStream.sendPacket()),this.mouseButtonClick=0)}walkToGroundItem(t,e,i,r,n){return this.walkTo(t,e,i,r,i,r,!1,n)?void 0:void this._walkToActionSource_from8(t,e,i,r,i,r,!0,n)}async loadModels(){for(const e of ig)Np.getModelIndex(e);const t=await this.readDataFile(`models${wp}.jag`,"3d models",60);if(t)for(let e=0;e<Np.modelCount;e++){const i=Ud.getDataFileOffset(Np.modelName[e]+".ob3",t);this.gameModels[e]=0!==i?Vp.fromBytes(t,i):Vp._from2(1,1),"giantcrystal"===Np.modelName[e].toLowerCase()&&(this.gameModels[e].transparent=!0)}else this.errorLoadingData=!0}showMessage(t,e){if(2===e||4===e||6===e){for(;t.length>5&&"@"===t[0]&&"@"===t[4];t=t.substring(5));const e=t.indexOf(":");if(-1!==e){const i=t.substring(0,e),r=Ud.usernameToHash(i);for(let t=0;t<this.ignoreListCount;t++)if(this.ignoreList[t].equals(r))return}}2===e?t="@yel@"+t:3===e||4===e?t="@whi@"+t:6===e&&(t="@cya@"+t),0!==this.messageTabSelected&&(4!==e&&3!==e||(this.messageTabFlashAll=200),2===e&&1!==this.messageTabSelected&&(this.messageTabFlashHistory=200),5===e&&2!==this.messageTabSelected&&(this.messageTabFlashQuest=200),6===e&&3!==this.messageTabSelected&&(this.messageTabFlashPrivate=200),3===e&&0!==this.messageTabSelected&&(this.messageTabSelected=0),6===e&&3!==this.messageTabSelected&&0!==this.messageTabSelected&&(this.messageTabSelected=0));for(let i=4;i>0;i--)this.messageHistory[i]=this.messageHistory[i-1],this.messageHistoryTimeout[i]=this.messageHistoryTimeout[i-1];if(this.messageHistory[0]=t,this.messageHistoryTimeout[0]=300,2===e)this.panelMessageTabs.controlFlashText[this.controlTextListChat]===this.panelMessageTabs.controlListEntryCount[this.controlTextListChat]-4?this.panelMessageTabs.removeListEntry(this.controlTextListChat,t,!0):this.panelMessageTabs.removeListEntry(this.controlTextListChat,t,!1);else if(5===e)this.panelMessageTabs.controlFlashText[this.controlTextListQuest]===this.panelMessageTabs.controlListEntryCount[this.controlTextListQuest]-4?this.panelMessageTabs.removeListEntry(this.controlTextListQuest,t,!0):this.panelMessageTabs.removeListEntry(this.controlTextListQuest,t,!1);else if(6===e){if(this.panelMessageTabs.controlFlashText[this.controlTextListPrivate]===this.panelMessageTabs.controlListEntryCount[this.controlTextListPrivate]-4)return void this.panelMessageTabs.removeListEntry(this.controlTextListPrivate,t,!0);this.panelMessageTabs.removeListEntry(this.controlTextListPrivate,t,!1)}}walkToObject(t,e,i,r){let n=0,s=0;0===i||4===i?(n=Np.objectWidth[r],s=Np.objectHeight[r]):(s=Np.objectWidth[r],n=Np.objectHeight[r]),2===Np.objectType[r]||3===Np.objectType[r]?(0===i?(t--,n++):2===i?s++:4===i?n++:6===i&&(e--,s++),this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t+n-1,e+s-1,!1,!0)):this._walkToActionSource_from8(this.localRegionX,this.localRegionY,t,e,t+n-1,e+s-1,!0,!0)}getInventoryCount(t){let e=0;for(let i=0;i<this.inventoryItemsCount;i++)this.inventoryItemId[i]===t&&(1===Np.itemStackable[t]?e++:e+=this.inventoryItemStackCount[i]);return e}async loadTextures(){const t=await this.readDataFile(`textures${Mp}.jag`,"Textures",50);if(!t)return void(this.errorLoadingData=!0);const e=Ud.loadData("index.dat",0,t);this.scene.allocateTextures(Np.textureCount,7,11);for(let i=0;i<Np.textureCount;i++){const r=Np.textureName[i];let n=Ud.loadData(r+".dat",0,t);this.surface.parseSprite(this.spriteTexture,n,e,1),this.surface.drawBox(0,0,128,128,16711935),this.surface._drawSprite_from3(0,0,this.spriteTexture);let s=this.surface.spriteWidthFull[this.spriteTexture],o=Np.textureSubtypeName[i];if(o&&o.length>0){let i=Ud.loadData(o+".dat",0,t);this.surface.parseSprite(this.spriteTexture,i,e,1),this.surface._drawSprite_from3(0,0,this.spriteTexture)}this.surface._drawSprite_from5(this.spriteTextureWorld+i,0,0,s,s);for(let t=0;t<s*s;t++)65280===this.surface.surfacePixels[this.spriteTextureWorld+i][t]&&(this.surface.surfacePixels[this.spriteTextureWorld+i][t]=16711935);this.surface.drawWorld(this.spriteTextureWorld+i),this.scene.defineTexture(i,this.surface.spriteColoursUsed[this.spriteTextureWorld+i],this.surface.spriteColourList[this.spriteTextureWorld+i],(s/64|0)-1)}}handleMouseDown(t,e,i){this.mouseClickXHistory[this.mouseClickCount]=e,this.mouseClickYHistory[this.mouseClickCount]=i,this.mouseClickCount=this.mouseClickCount+1&8191;for(let r=10;r<4e3;r++){let t=this.mouseClickCount-r&8191;if(this.mouseClickXHistory[t]===e&&this.mouseClickYHistory[t]===i){let n=!1;for(let s=1;s<r;s++){let o=this.mouseClickCount-s&8191,h=t-s&8191;if(this.mouseClickXHistory[h]===e&&this.mouseClickYHistory[h]===i||(n=!0),this.mouseClickXHistory[o]!==this.mouseClickXHistory[h]||this.mouseClickYHistory[o]!==this.mouseClickYHistory[h])break;if(s===r-1&&n&&0===this.combatTimeout&&0===this.logoutTimeout)return void this.sendLogout()}}}}drawTeleportBubble(t,e,i,r,n){const s=this.teleportBubbleType[n],o=this.teleportBubbleTime[n];if(0===s){const n=255+5*o*256;this.surface.drawCircle(t+(i/2|0),e+(r/2|0),20+2*o,n,255-5*o)}else if(1===s){const n=16711680+5*o*256;this.surface.drawCircle(t+(i/2|0),e+(r/2|0),10+o,n,255-5*o)}}showServerMessage(t){/^@bor@/.test(t)?this.showMessage(t,4):/^@que@/.test(t)?this.showMessage("@whi@"+t,5):/^@pri@/.test(t)?this.showMessage(t,6):this.showMessage(t,3)}updateObjectAnimation(t,e){const i=this.objectX[t],r=this.objectY[t],n=i-(this.localPlayer.currentX/128|0),s=r-(this.localPlayer.currentY/128|0);if(i>=0&&r>=0&&i<96&&r<96&&n>-7&&n<7&&s>-7&&s<7){this.scene.removeModel(this.objectModel[t]);const i=Np.getModelIndex(e),r=this.gameModels[i].copy();this.scene.addModel(r),r._setLight_from6(!0,48,48,-50,-10,-50),r.copyPosition(this.objectModel[t]),r.key=t,this.objectModel[t]=r}}createTopMouseMenu(){(this.selectedSpell>=0||this.selectedItemInventoryIndex>=0)&&(this.menuItemText1[this.menuItemsCount]="Cancel",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=4e3,this.menuItemsCount++);for(let t=0;t<this.menuItemsCount;t++)this.menuIndices[t]=t;for(let t=!1;!t;){t=!0;for(let e=0;e<this.menuItemsCount-1;e++){let i=this.menuIndices[e],r=this.menuIndices[e+1];this.menuType[i]>this.menuType[r]&&(this.menuIndices[e]=r,this.menuIndices[e+1]=i,t=!1)}}if(this.menuItemsCount>20&&(this.menuItemsCount=20),this.menuItemsCount>0){let t=-1;for(let i=0;i<this.menuItemsCount;i++)if(!(null===this.menuItemText2[this.menuIndices[i]]||this.menuItemText2[this.menuIndices[i]].length<=0)){t=i;break}let e=null;if((this.selectedItemInventoryIndex>=0||this.selectedSpell>=0)&&1===this.menuItemsCount?e="Choose a target":(this.selectedItemInventoryIndex>=0||this.selectedSpell>=0)&&this.menuItemsCount>1?e="@whi@"+this.menuItemText1[this.menuIndices[0]]+" "+this.menuItemText2[this.menuIndices[0]]:-1!==t&&(e=this.menuItemText2[this.menuIndices[t]]+": @whi@"+this.menuItemText1[this.menuIndices[0]]),2===this.menuItemsCount&&e&&(e+="@whi@ / 1 more option"),this.menuItemsCount>2&&e&&(e=e+"@whi@ / "+(this.menuItemsCount-1)+" more options"),!this.options.mobile&&e&&this.surface.drawString(e,6,14,1,16776960),!this.optionMouseButtonOne&&1===this.mouseButtonClick||this.optionMouseButtonOne&&1===this.mouseButtonClick&&1===this.menuItemsCount)return this.menuItemClick(this.menuIndices[0]),void(this.mouseButtonClick=0);if(!this.optionMouseButtonOne&&2===this.mouseButtonClick||this.optionMouseButtonOne&&1===this.mouseButtonClick){this.menuHeight=15*(this.menuItemsCount+1),this.menuWidth=this.surface.textWidth("Choose option",1)+5;for(let t=0;t<this.menuItemsCount;t++){let e=this.surface.textWidth(this.menuItemText1[t]+" "+this.menuItemText2[t],1)+5;e>this.menuWidth&&(this.menuWidth=e)}this.menuX=this.mouseX-(this.menuWidth/2|0),this.menuY=this.mouseY-7,this.showRightClickMenu=!0,this.menuX<0&&(this.menuX=0),this.menuY<0&&(this.menuY=0),this.menuX+this.menuWidth>510&&(this.menuX=510-this.menuWidth),this.menuY+this.menuHeight>315&&(this.menuY=315-this.menuHeight),this.mouseButtonClick=0}}}menuItemClick(t){const e=this.menuItemX[t],i=this.menuItemY[t],r=this.menuIndex[t],n=this.menuSourceIndex[t],s=this.menuTargetIndex[t],o=this.menuType[t];switch(this.options.mobile&&this.menuItemText2[t]&&(this.menuText=`${this.menuItemText1[t]} ${this.menuItemText2[t]}`,this.menuTextWidth=this.surface.textWidth(this.menuText,1),this.menuX=this.mouseX,this.menuY=this.mouseY,this.menuActionTimeout=60),o){case 200:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(eg.CAST_GROUNDITEM),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 210:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(eg.USEWITH_GROUNDITEM),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 220:this.walkToGroundItem(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(eg.GROUNDITEM_TAKE),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket();break;case 3200:this.showMessage(Np.itemDescription[r],3);break;case 300:this.walkToWallObject(e,i,r),this.packetStream.newPacket(eg.CAST_WALLOBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 310:this.walkToWallObject(e,i,r),this.packetStream.newPacket(eg.USEWITH_WALLOBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 320:this.walkToWallObject(e,i,r),this.packetStream.newPacket(eg.WALL_OBJECT_COMMAND1),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.sendPacket();break;case 2300:this.walkToWallObject(e,i,r),this.packetStream.newPacket(eg.WALL_OBJECT_COMMAND2),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putByte(r),this.packetStream.sendPacket();break;case 3300:this.showMessage(Np.wallObjectDescription[r],3);break;case 400:this.walkToObject(e,i,r,n),this.packetStream.newPacket(eg.CAST_OBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 410:this.walkToObject(e,i,r,n),this.packetStream.newPacket(eg.USEWITH_OBJECT),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(s),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 420:this.walkToObject(e,i,r,n),this.packetStream.newPacket(eg.OBJECT_CMD1),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.sendPacket();break;case 2400:this.walkToObject(e,i,r,n),this.packetStream.newPacket(eg.OBJECT_CMD2),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.sendPacket();break;case 3400:this.showMessage(Np.objectDescription[r],3);break;case 600:this.packetStream.newPacket(eg.CAST_INVITEM),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 610:this.packetStream.newPacket(eg.USEWITH_INVITEM),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break;case 620:this.packetStream.newPacket(eg.INV_UNEQUIP),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 630:this.packetStream.newPacket(eg.INV_WEAR),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 640:this.packetStream.newPacket(eg.INV_CMD),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 650:this.selectedItemInventoryIndex=r,this.showUITab=0,this.selectedItemName=Np.itemName[this.inventoryItemId[this.selectedItemInventoryIndex]];break;case 660:this.packetStream.newPacket(eg.INV_DROP),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1,this.showUITab=0,this.showMessage("Dropping "+Np.itemName[this.inventoryItemId[r]],4);break;case 3600:this.showMessage(Np.itemDescription[r],3);break;case 700:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(eg.CAST_NPC),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break}case 710:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(eg.USEWITH_NPC),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break}case 720:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(eg.NPC_TALK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 725:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(eg.NPC_CMD),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 715:case 2715:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(eg.NPC_ATTACK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 3700:this.showMessage(Np.npcDescription[r],3);break;case 800:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(eg.CAST_PLAYER),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedSpell=-1;break}case 810:{const t=(e-64)/this.magicLoc|0,s=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,s,!0),this.packetStream.newPacket(eg.USEWITH_PLAYER),this.packetStream.putShort(r),this.packetStream.putShort(n),this.packetStream.sendPacket(),this.selectedItemInventoryIndex=-1;break}case 805:case 2805:{const t=(e-64)/this.magicLoc|0,n=(i-64)/this.magicLoc|0;this._walkToActionSource_from5(this.localRegionX,this.localRegionY,t,n,!0),this.packetStream.newPacket(eg.PLAYER_ATTACK),this.packetStream.putShort(r),this.packetStream.sendPacket();break}case 2806:this.packetStream.newPacket(eg.PLAYER_DUEL),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 2810:this.packetStream.newPacket(eg.PLAYER_TRADE),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 2820:this.packetStream.newPacket(eg.PLAYER_FOLLOW),this.packetStream.putShort(r),this.packetStream.sendPacket();break;case 900:this._walkToActionSource_from5(this.localRegionX,this.localRegionY,e,i,!0),this.packetStream.newPacket(eg.CAST_GROUND),this.packetStream.putShort(e+this.regionX),this.packetStream.putShort(i+this.regionY),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 920:this._walkToActionSource_from5(this.localRegionX,this.localRegionY,e,i,!1),-24===this.mouseClickXStep&&(this.mouseClickXStep=24);break;case 1e3:this.packetStream.newPacket(eg.CAST_SELF),this.packetStream.putShort(r),this.packetStream.sendPacket(),this.selectedSpell=-1;break;case 4e3:this.selectedItemInventoryIndex=-1,this.selectedSpell=-1}}showLoginScreenStatus(t,e){1===this.loginScreen?this.panelLoginNewUser.updateText(this.controlRegisterStatus,t+" "+e):2===this.loginScreen&&this.panelLoginExistingUser.updateText(this.controlLoginStatus,t+" "+e),this.loginUserDisp=e,this.drawLoginScreens(),this.resetTimings()}async lostConnection(){this.systemUpdate=0,0!==this.logoutTimeout?this.resetLoginVars():await super.lostConnection()}isValidCameraAngle(t){const e=this.localPlayer.currentX/128|0,i=this.localPlayer.currentY/128|0;for(let r=2;r>=1;r--){if(1===t&&(128==(128&this.world.objectAdjacency.get(e,i-r))||128==(128&this.world.objectAdjacency.get(e-r,i))||128==(128&this.world.objectAdjacency.get(e-r,i-r))))return!1;if(3===t&&(128==(128&this.world.objectAdjacency.get(e,i+r))||128==(128&this.world.objectAdjacency.get(e-r,i))||128==(128&this.world.objectAdjacency.get(e-r,i+r))))return!1;if(5===t&&(128==(128&this.world.objectAdjacency.get(e,i+r))||128==(128&this.world.objectAdjacency.get(e+r,i))||128==(128&this.world.objectAdjacency.get(e+r,i+r))))return!1;if(7===t&&(128==(128&this.world.objectAdjacency.get(e,i-r))||128==(128&this.world.objectAdjacency.get(e+r,i))||128==(128&this.world.objectAdjacency.get(e+r,i-r))))return!1;if(0===t&&128==(128&this.world.objectAdjacency.get(e,i-r)))return!1;if(2===t&&128==(128&this.world.objectAdjacency.get(e-r,i)))return!1;if(4===t&&128==(128&this.world.objectAdjacency.get(e,i+r)))return!1;if(6===t&&128==(128&this.world.objectAdjacency.get(e+r,i)))return!1}return!0}resetLoginScreenVariables(){this.loggedIn=0,this.loginScreen=0,this.loginUser="",this.loginPass="",this.loginUserDesc="Please enter a username:",this.loginUserDisp=`*${this.loginUser}*`,this.playerCount=0,this.npcCount=0}handleIncomingPacket(t,e,i){try{const r=this.packetHandlers[t];if(!r)throw new Error("unhandled packet opcode "+t);r(i,e)}catch(Kd){if(console.error(Kd),this.packetErrorCount<3){let n=Kd.stack,s=n.length;this.packetStream.newPacket(eg.PACKET_EXCEPTION),this.packetStream.putShort(s),this.packetStream.putString(n),this.packetStream.putShort(s=(n="p-type: "+t+" p-size:"+e).length),this.packetStream.putString(n),this.packetStream.putShort(s=(n="rx:"+this.localRegionX+" ry:"+this.localRegionY+" num3l:"+this.objectCount).length),this.packetStream.putString(n),n="";for(let t=0;t<80&&t<e;t++)n=n+i[t]+" ";this.packetStream.putShort(n.length),this.packetStream.putString(n),this.packetStream.sendPacket(),this.packetErrorCount++}this.packetStream.closeStream(),this.resetLoginVars()}}createRightClickMenu(){let t=2203-(this.localRegionY+this.planeHeight+this.regionY);this.localRegionX+this.planeWidth+this.regionX>=2640&&(t=-50);let e=-1;for(let s=0;s<this.objectCount;s++)this.objectAlreadyInMenu[s]=!1;for(let s=0;s<this.wallObjectCount;s++)this.wallObjectAlreadyInMenu[s]=!1;let i=this.scene.getMousePickedCount(),r=this.scene.getMousePickedModels(),n=this.scene.getMousePickedFaces();for(let s=0;s<i&&!(this.menuItemsCount>200);s++){let i=n[s],o=r[s];if(o.faceTag[i]<=65535||o.faceTag[i]>=2e5&&o.faceTag[i]<=3e5)if(o===this.scene.view){let e=o.faceTag[i]%1e4;const r=o.faceTag[i]/1e4|0;if(1===r){let i="",r=0;this.localPlayer.level>0&&this.players[e].level>0&&(r=this.localPlayer.level-this.players[e].level),r<0&&(i="@or1@"),r<-3&&(i="@or2@"),r<-6&&(i="@or3@"),r<-9&&(i="@red@"),r>0&&(i="@gr1@"),r>3&&(i="@gr2@"),r>6&&(i="@gr3@"),r>9&&(i="@gre@"),i=" "+i+"(level-"+this.players[e].level+")",this.selectedSpell>=0?1!==Np.spellType[this.selectedSpell]&&2!==Np.spellType[this.selectedSpell]||(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=800,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=810,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(t>0&&((this.players[e].currentY-64)/this.magicLoc+this.planeHeight+this.regionY|0)<2203?(this.menuItemText1[this.menuItemsCount]="Attack",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=r>=0&&r<5?805:2805,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++):this.members&&(this.menuItemText1[this.menuItemsCount]="Duel with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuItemX[this.menuItemsCount]=this.players[e].currentX,this.menuItemY[this.menuItemsCount]=this.players[e].currentY,this.menuType[this.menuItemsCount]=2806,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Trade with",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=2810,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Follow",this.menuItemText2[this.menuItemsCount]="@whi@"+this.players[e].name+i,this.menuType[this.menuItemsCount]=2820,this.menuIndex[this.menuItemsCount]=this.players[e].serverIndex,this.menuItemsCount++)}else if(2===r)this.selectedSpell>=0?3===Np.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@lre@"+Np.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=200,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@lre@"+Np.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=210,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(this.menuItemText1[this.menuItemsCount]="Take",this.menuItemText2[this.menuItemsCount]="@lre@"+Np.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=220,this.menuItemX[this.menuItemsCount]=this.groundItemX[e],this.menuItemY[this.menuItemsCount]=this.groundItemY[e],this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuItemsCount++,this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@lre@"+Np.itemName[this.groundItemID[e]],this.menuType[this.menuItemsCount]=3200,this.menuIndex[this.menuItemsCount]=this.groundItemID[e],this.menuItemsCount++);else if(3===r){let t="",i=-1;const r=this.npcs[e].npcId;if(Np.npcAttackable[r]>0){const e=(Np.npcAttack[r]+Np.npcDefense[r]+Np.npcStrength[r]+Np.npcHits[r])/4|0,n=(this.playerStatBase[0]+this.playerStatBase[1]+this.playerStatBase[2]+this.playerStatBase[3]+27)/4|0;t="@yel@",(i=n-e)<0&&(t="@or1@"),i<-3&&(t="@or2@"),i<-6&&(t="@or3@"),i<-9&&(t="@red@"),i>0&&(t="@gr1@"),i>3&&(t="@gr2@"),i>6&&(t="@gr3@"),i>9&&(t="@gre@"),t=" "+t+"(level-"+e+")"}this.selectedSpell>=0?2===Np.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=700,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=710,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(Np.npcAttackable[r]>0&&(this.menuItemText1[this.menuItemsCount]="Attack",this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId]+t,this.menuType[this.menuItemsCount]=i>=0?715:2715,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Talk-to",this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=720,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++,""!==Np.npcCommand[r]&&(this.menuItemText1[this.menuItemsCount]=Np.npcCommand[r],this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=725,this.menuItemX[this.menuItemsCount]=this.npcs[e].currentX,this.menuItemY[this.menuItemsCount]=this.npcs[e].currentY,this.menuIndex[this.menuItemsCount]=this.npcs[e].serverIndex,this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@yel@"+Np.npcName[this.npcs[e].npcId],this.menuType[this.menuItemsCount]=3700,this.menuIndex[this.menuItemsCount]=this.npcs[e].npcId,this.menuItemsCount++)}}else if(o&&o.key>=1e4){const t=o.key-1e4,e=this.wallObjectId[t];this.wallObjectAlreadyInMenu[t]||(this.selectedSpell>=0?4===Np.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.wallObjectName[e],this.menuType[this.menuItemsCount]=300,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.wallObjectName[e],this.menuType[this.menuItemsCount]=310,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(/^WalkTo$/i.test(Np.wallObjectCommand1[e])||(this.menuItemText1[this.menuItemsCount]=Np.wallObjectCommand1[e],this.menuItemText2[this.menuItemsCount]="@cya@"+Np.wallObjectName[e],this.menuType[this.menuItemsCount]=320,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuItemsCount++),/^Examine$/i.test(Np.wallObjectCommand2[e])||(this.menuItemText1[this.menuItemsCount]=Np.wallObjectCommand2[e],this.menuItemText2[this.menuItemsCount]="@cya@"+Np.wallObjectName[e],this.menuType[this.menuItemsCount]=2300,this.menuItemX[this.menuItemsCount]=this.wallObjectX[t],this.menuItemY[this.menuItemsCount]=this.wallObjectY[t],this.menuIndex[this.menuItemsCount]=this.wallObjectDirection[t],this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.wallObjectName[e],this.menuType[this.menuItemsCount]=3300,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++),this.wallObjectAlreadyInMenu[t]=!0)}else if(o&&o.key>=0){const t=o.key,e=this.objectId[t];this.objectAlreadyInMenu[t]||(this.selectedSpell>=0?5===Np.spellType[this.selectedSpell]&&(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.objectName[e],this.menuType[this.menuItemsCount]=400,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuTargetIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++):this.selectedItemInventoryIndex>=0?(this.menuItemText1[this.menuItemsCount]="Use "+this.selectedItemName+" with",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.objectName[e],this.menuType[this.menuItemsCount]=410,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuTargetIndex[this.menuItemsCount]=this.selectedItemInventoryIndex,this.menuItemsCount++):(/^WalkTo$/i.test(Np.objectCommand1[e])||(this.menuItemText1[this.menuItemsCount]=Np.objectCommand1[e],this.menuItemText2[this.menuItemsCount]="@cya@"+Np.objectName[e],this.menuType[this.menuItemsCount]=420,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuItemsCount++),/^Examine$/i.test(Np.objectCommand2[e])||(this.menuItemText1[this.menuItemsCount]=Np.objectCommand2[e],this.menuItemText2[this.menuItemsCount]="@cya@"+Np.objectName[e],this.menuType[this.menuItemsCount]=2400,this.menuItemX[this.menuItemsCount]=this.objectX[t],this.menuItemY[this.menuItemsCount]=this.objectY[t],this.menuIndex[this.menuItemsCount]=this.objectDirection[t],this.menuSourceIndex[this.menuItemsCount]=this.objectId[t],this.menuItemsCount++),this.menuItemText1[this.menuItemsCount]="Examine",this.menuItemText2[this.menuItemsCount]="@cya@"+Np.objectName[e],this.menuType[this.menuItemsCount]=3400,this.menuIndex[this.menuItemsCount]=e,this.menuItemsCount++),this.objectAlreadyInMenu[t]=!0)}else i>=0&&(i=o.faceTag[i]-2e5),i>=0&&(e=i)}if(this.selectedSpell>=0&&Np.spellType[this.selectedSpell]<=1&&(this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on self",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=1e3,this.menuIndex[this.menuItemsCount]=this.selectedSpell,this.menuItemsCount++),-1!==e)if(this.selectedSpell>=0){if(6===Np.spellType[this.selectedSpell])return this.menuItemText1[this.menuItemsCount]="Cast "+Np.spellName[this.selectedSpell]+" on ground",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=900,this.menuItemX[this.menuItemsCount]=this.world.localX[e],this.menuItemY[this.menuItemsCount]=this.world.localY[e],this.menuIndex[this.menuItemsCount]=this.selectedSpell,void this.menuItemsCount++}else this.selectedItemInventoryIndex<0&&(this.menuItemText1[this.menuItemsCount]="Walk here",this.menuItemText2[this.menuItemsCount]="",this.menuType[this.menuItemsCount]=920,this.menuItemX[this.menuItemsCount]=this.world.localX[e],this.menuItemY[this.menuItemsCount]=this.world.localY[e],this.menuItemsCount++)}async handleInputs(){if(!(this.errorLoadingCodebase||this.errorLoadingMemory||this.errorLoadingData))try{if(this.loginTimer++,0===this.loggedIn?(this.mouseActionTimeout=0,await this.handleLoginScreenInput()):1===this.loggedIn&&(this.mouseActionTimeout++,await this.handleGameInput()),this.lastMouseButtonDown=0,this.cameraRotationTime++,this.cameraRotationTime>500){this.cameraRotationTime=0;const t=4*Math.random()|0;1==(1&t)&&(this.cameraRotationX+=this.cameraRotationXIncrement),2==(2&t)&&(this.cameraRotationY+=this.cameraRotationYIncrement)}if(this.cameraRotationX<-50?this.cameraRotationXIncrement=2:this.cameraRotationX>50&&(this.cameraRotationXIncrement=-2),this.cameraRotationY<-50?this.cameraRotationYIncrement=2:this.cameraRotationY>50&&(this.cameraRotationYIncrement=-2),this.messageTabFlashAll>0&&this.messageTabFlashAll--,this.messageTabFlashHistory>0&&this.messageTabFlashHistory--,this.messageTabFlashQuest>0&&this.messageTabFlashQuest--,this.messageTabFlashPrivate>0)return void this.messageTabFlashPrivate--}catch(Kd){console.error(Kd),this.disposeAndCollect(),this.errorLoadingMemory=!0}}async loadMaps(){this.world.mapPack=await this.readDataFile(`maps${yp}.jag`,"map",70),this.members&&(this.world.memberMapPack=await this.readDataFile(`maps${yp}.mem`,"members map",75)),this.world.landscapePack=await this.readDataFile(`land${yp}.jag`,"landscape",80),this.members&&(this.world.memberLandscapePack=await this.readDataFile(`land${yp}.mem`,"members landscape",85))}createModel(t,e,i,r,n){let s=t,o=e,h=t,a=e;const u=Np.wallObjectTextureFront[r],l=Np.wallObjectTextureBack[r],c=Np.wallObjectHeight[r],f=Vp._from2(4,1);0===i?h=t+1:1===i?a=e+1:2===i?(s=t+1,a=e+1):3===i&&(h=t+1,a=e+1),s*=this.magicLoc,o*=this.magicLoc,h*=this.magicLoc,a*=this.magicLoc;const d=new Int32Array([f.vertexAt(s,-this.world.getElevation(s,o),o),f.vertexAt(s,-this.world.getElevation(s,o)-c,o),f.vertexAt(h,-this.world.getElevation(h,a)-c,a),f.vertexAt(h,-this.world.getElevation(h,a),a)]);return f.createFace(4,d,u,l),f._setLight_from6(!1,60,24,-50,-10,-50),t>=0&&e>=0&&t<96&&e<96&&this.scene.addModel(f),f.key=n+1e4,f}};if("undefined"==typeof window)throw new Error("rsc-client needs to run in a browser");(async()=>{const t=document.createElement("div"),e=window.location.hash.slice(1).split(","),i=new rg(t);window.mcOptions=i.options,Object.assign(i.options,{middleClickCamera:!0,mouseWheel:!0,resetCompass:!0,zoomCamera:!0,accountManagement:!0,mobile:!1}),i.members="members"===e[0],i.server=e[1]?e[1]:"127.0.0.1",i.port=e[2]&&!isNaN(+e[2])?+e[2]:43595,i.threadSleep=10,document.body.appendChild(t);const r=document.createElement("button");r.innerText="Fullscreen",r.onclick=()=>{t.requestFullscreen()},document.body.appendChild(r),await i.startApplication(512,346,"Runescape by Andrew Gower")})()}();